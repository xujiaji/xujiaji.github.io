{"title":"好用的iOS调试工具PonyDebugger","date":"2019-10-15T15:38:02.000Z","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/ponydebugger.jpeg","link":"post/ios-ponydebuger","comments":true,"tags":["Debug","iOS"],"categories":["工具"],"updated":"2019-10-27T05:50:18.622Z","content":"<h1 id=\"好用的iOS调试工具PonyDebugger\">好用的iOS调试工具PonyDebugger<a href=\"post/ios-ponydebuger#好用的iOS调试工具PonyDebugger\"></a></h1><p>PonyDebugger：<a href=\"https://github.com/square/PonyDebugger/\" target=\"_blank\" rel=\"noopener\">https://github.com/square/PonyDebugger/</a></p>\n<h2 id=\"简介\">简介<a href=\"post/ios-ponydebuger#简介\"></a></h2><p>PoneyDebugger是一个很给力的调试工具，它能通过浏览器调试App。</p>\n<p>需要电脑上配置服务环境，在iOS项目添加sdk的配置。便可以对App进行网络请求监控、Core Data数据查看、查看当前界面UI层级等。</p>\n<h3 id=\"网络请求调试\">网络请求调试<a href=\"post/ios-ponydebuger#网络请求调试\"></a></h3><p>我们的请求会通过PonyDebugger的代理服务<a href=\"https://github.com/square/PonyDebugger/tree/master/ponyd\" target=\"_blank\" rel=\"noopener\">ponyd</a>，可以直观的像在浏览器上调试网页请求一样，调试App的请求。</p>\n<blockquote>\n<p>我就直接把官方的图搬运过来用了<code>^_^</code></p>\n</blockquote>\n<p><img src=\"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/poneydebugger/NetworkDebugging.png\" alt=\"NetworkDebugging\" class=\"article-img\"></p>\n<h3 id=\"Core-Data-浏览\">Core Data 浏览<a href=\"post/ios-ponydebuger#Core-Data-浏览\"></a></h3><p>Core Data浏览，只需要通过在应用程序的代码中启用就可以了<code>ponyDebugger?.enableCoreDataDebugging()</code></p>\n<p><img src=\"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/poneydebugger/CoreDataBrowser.png\" alt=\"CoreDataBrowser\" class=\"article-img\"></p>\n<h3 id=\"视图层次调试\">视图层次调试<a href=\"post/ios-ponydebuger#视图层次调试\"></a></h3><p>PonyDebugger会在浏览器中以XML的方式展示应用视图层次结构，并且可以在其中看到视图元素的属性。在面板中选中一个元素时，对应手机上也会被选中。当删除一个时也对应删除，可调整视图大小。</p>\n<p><img src=\"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/poneydebugger/ViewHierarchyDebugging.png\" alt=\"ViewHierarchyDebugging\" class=\"article-img\"></p>\n<h2 id=\"远程日志\">远程日志<a href=\"post/ios-ponydebuger#远程日志\"></a></h2><p>PonyDebuggert通过PDLog和PDLogObjects函数远程记录日志查看对象数据</p>\n<p><img src=\"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/poneydebugger/RemoteLogging.png\" alt=\"RemoteLogging\" class=\"article-img\"></p>\n<h2 id=\"安装视频演示\">安装视频演示<a href=\"post/ios-ponydebuger#安装视频演示\"></a></h2><div style=\"width: 100%; display: inline-block; position: relative; padding-top: 70%; display: block; content: '';\"><br>    <div style=\"position: absolute; top: 0; bottom: 0; right: 0; left: 0;\"><br>    <iframe src=\"//player.bilibili.com/player.html?aid=71370834&cid=123663162&page=1\" width=\"100%\" height=\"100%\" frameborder=\"0\" allowfullscreen></iframe><br>    </div><br></div>\n\n<h2 id=\"创建一个目录ponyd，并进去该目录\">创建一个目录<code>ponyd</code>，并进去该目录<a href=\"post/ios-ponydebuger#创建一个目录ponyd，并进去该目录\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">mkdir ponyd</span><br><span class=\"line\">cd ponyd</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"将必要的依赖下载这个目录中ponyd\">将必要的依赖下载这个目录中<code>ponyd</code><a href=\"post/ios-ponydebuger#将必要的依赖下载这个目录中ponyd\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -O -L https://pypi.python.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">curl -O -L https://pypi.python.org/packages/25/5d/cc55d39ac39383dd6e04ae80501b9af3cc455be64740ad68a4e12ec81b00/setuptools-0.6c11-py2.7.egg</span><br><span class=\"line\"></span><br><span class=\"line\">curl -O -L https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/pybonjour/pybonjour-1.1.1.tar.gz</span><br><span class=\"line\"></span><br><span class=\"line\">tar xvf pybonjour-1.1.1.tar.gz</span><br><span class=\"line\">mv pybonjour-1.1.1 pybonjour</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"下载bootstrap-ponyd-py\">下载<code>bootstrap-ponyd.py</code><a href=\"post/ios-ponydebuger#下载bootstrap-ponyd-py\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">curl -O -L https://github.com/downloads/square/PonyDebugger/bootstrap-ponyd.py</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"在bootstrap-ponyd-py添加安装pybonjour的命令\">在<code>bootstrap-ponyd.py</code>添加安装<code>pybonjour</code>的命令<a href=\"post/ios-ponydebuger#在bootstrap-ponyd-py添加安装pybonjour的命令\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">subprocess.check_call([join(home_dir, 'bin', 'python'),  join('pybonjour', 'setup.py'), 'install'])</span><br></pre></td></tr></table></div></figure>\n<blockquote>\n<p>添加在如下的位置上</p>\n</blockquote>\n<figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def after_install(options, home_dir):</span><br><span class=\"line\">    subprocess.check_call([join(home_dir, 'bin', 'python'),  join('pybonjour', 'setup.py'), 'install'])</span><br><span class=\"line\"></span><br><span class=\"line\">    subprocess.check_call([join(home_dir, 'bin', 'pip'),</span><br><span class=\"line\">                     'install', '-U', '-e', 'git+https://github.com/square/PonyDebugger.git#egg=ponydebugger'])</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"通过运行bootstrap安装\">通过运行bootstrap安装<a href=\"post/ios-ponydebuger#通过运行bootstrap安装\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cat ./bootstrap-ponyd.py | python - --never-download --ponyd-symlink=/usr/local/bin/ponyd ~/Library/PonyDebugger</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"上面的安装会出错，因为一些包无法找到，我们通过下面的命令去修复\">上面的安装会出错，因为一些包无法找到，我们通过下面的命令去修复<a href=\"post/ios-ponydebuger#上面的安装会出错，因为一些包无法找到，我们通过下面的命令去修复\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/singledispatch/ -U singledispatch</span><br><span class=\"line\">~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/backports-abc/ -U backports_abc</span><br><span class=\"line\">~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/certifi -U certifi</span><br><span class=\"line\">~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/six/ -U six</span><br><span class=\"line\">~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/futures -U futures</span><br><span class=\"line\">sudo ~/Library/PonyDebugger/bin/easy_install -U pybonjour</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"安装devtools\">安装devtools<a href=\"post/ios-ponydebuger#安装devtools\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ponyd update-devtools</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"运行\">运行<a href=\"post/ios-ponydebuger#运行\"></a></h2><figure class=\"highlight shell\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ponyd serve --listen-interface=127.0.0.1</span><br></pre></td></tr></table></div></figure>\n<h2 id=\"配置iOS-sdk\">配置iOS sdk<a href=\"post/ios-ponydebuger#配置iOS-sdk\"></a></h2><blockquote>\n<p>下面演示的是通过pod安装的</p>\n</blockquote>\n<ol>\n<li>在项目Podfile中引入<code>pod &#39;PonyDebugger&#39;</code></li>\n<li>打开一个在项目目录的命令窗口，运行<code>pod install</code></li>\n<li>swift项目，需要在连接桥文件中导入头文件，<code>#import &lt;PonyDebugger/PonyDebugger.h&gt;</code></li>\n<li>添加sdk配置：<figure class=\"highlight swift\"><div><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">let</span> ponyDebugger = <span class=\"type\">PDDebugger</span>.defaultInstance()</span><br><span class=\"line\">ponyDebugger?.enableNetworkTrafficDebugging()</span><br><span class=\"line\">ponyDebugger?.enableViewHierarchyDebugging()</span><br><span class=\"line\">ponyDebugger?.setDisplayedViewAttributeKeyPaths([<span class=\"string\">\"frame\"</span>, <span class=\"string\">\"hidden\"</span>, <span class=\"string\">\"alpha\"</span>])</span><br><span class=\"line\">ponyDebugger?.forwardAllNetworkTraffic()</span><br><span class=\"line\">ponyDebugger?.enableCoreDataDebugging()</span><br><span class=\"line\">ponyDebugger?.enableRemoteLogging()</span><br><span class=\"line\">ponyDebugger?.connect(to: <span class=\"type\">URL</span>(string: <span class=\"string\">\"ws://localhost:9000/device\"</span>))</span><br></pre></td></tr></table></div></figure>\n</li>\n</ol>\n<h2 id=\"打开调试网页\">打开调试网页<a href=\"post/ios-ponydebuger#打开调试网页\"></a></h2><p><a href=\"http://localhost:9000/\" target=\"_blank\" rel=\"noopener\">http://localhost:9000/</a></p>\n<h2 id=\"结束\">结束<a href=\"post/ios-ponydebuger#结束\"></a></h2><p>这里主要还是演示了一些怎么安装配置的PonyDebugger，因为在这里遇到些问题所以在此记录一波。谢谢观看！</p>\n","prev":{"title":"ffmpeg 使用小记","link":"post/ffmpeg-note"},"next":{"title":"安装Gitlab小记","link":"post/linux-gitlab"},"plink":"https://blog.xujiaji.com/post/ios-ponydebuger/","toc":[{"title":"好用的iOS调试工具PonyDebugger","id":"好用的iOS调试工具PonyDebugger","index":"1","children":[{"title":"简介","id":"简介","index":"1.1","children":[{"title":"网络请求调试","id":"网络请求调试","index":"1.1.1"},{"title":"Core Data 浏览","id":"Core-Data-浏览","index":"1.1.2"},{"title":"视图层次调试","id":"视图层次调试","index":"1.1.3"}]},{"title":"远程日志","id":"远程日志","index":"1.2"},{"title":"安装视频演示","id":"安装视频演示","index":"1.3"},{"title":"创建一个目录<code>ponyd</code>，并进去该目录","id":"创建一个目录ponyd，并进去该目录","index":"1.4"},{"title":"将必要的依赖下载这个目录中<code>ponyd</code>","id":"将必要的依赖下载这个目录中ponyd","index":"1.5"},{"title":"下载<code>bootstrap-ponyd.py</code>","id":"下载bootstrap-ponyd-py","index":"1.6"},{"title":"在<code>bootstrap-ponyd.py</code>添加安装<code>pybonjour</code>的命令","id":"在bootstrap-ponyd-py添加安装pybonjour的命令","index":"1.7"},{"title":"通过运行bootstrap安装","id":"通过运行bootstrap安装","index":"1.8"},{"title":"上面的安装会出错，因为一些包无法找到，我们通过下面的命令去修复","id":"上面的安装会出错，因为一些包无法找到，我们通过下面的命令去修复","index":"1.9"},{"title":"安装devtools","id":"安装devtools","index":"1.10"},{"title":"运行","id":"运行","index":"1.11"},{"title":"配置iOS sdk","id":"配置iOS-sdk","index":"1.12"},{"title":"打开调试网页","id":"打开调试网页","index":"1.13"},{"title":"结束","id":"结束","index":"1.14"}]}],"reward":true,"copyright":{"author":"XuJiaji","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","link":"<a href=\"https://blog.xujiaji.com/post/ios-ponydebuger/\" title=\"好用的iOS调试工具PonyDebugger\">https://blog.xujiaji.com/post/ios-ponydebuger/</a>"}}