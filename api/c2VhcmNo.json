[{"title":"å¥½ç”¨çš„iOSè°ƒè¯•å·¥å…·PonyDebugger","date":"2019-10-15T15:38:02.000Z","updated":"2019-10-16T05:16:19.641Z","content":"å¥½ç”¨çš„iOSè°ƒè¯•å·¥å…·PonyDebuggerPonyDebuggerï¼šhttps://github.com/square/PonyDebugger/\nè§†é¢‘æ¼”ç¤º            \n\nåˆ›å»ºä¸€ä¸ªç›®å½•ponydï¼Œå¹¶è¿›å»è¯¥ç›®å½•12mkdir ponydcd ponyd\nå°†å¿…è¦çš„ä¾èµ–ä¸‹è½½è¿™ä¸ªç›®å½•ä¸­ponyd12345678curl -O -L https://pypi.python.org/packages/11/b6/abcb525026a4be042b486df43905d6893fb04f05aac21c32c638e939e447/pip-9.0.1.tar.gzcurl -O -L https://pypi.python.org/packages/25/5d/cc55d39ac39383dd6e04ae80501b9af3cc455be64740ad68a4e12ec81b00/setuptools-0.6c11-py2.7.eggcurl -O -L https://storage.googleapis.com/google-code-archive-downloads/v2/code.google.com/pybonjour/pybonjour-1.1.1.tar.gztar xvf pybonjour-1.1.1.tar.gzmv pybonjour-1.1.1 pybonjour\nä¸‹è½½bootstrap-ponyd.py1curl -O -L https://github.com/downloads/square/PonyDebugger/bootstrap-ponyd.py\nåœ¨bootstrap-ponyd.pyæ·»åŠ å®‰è£…pybonjourçš„å‘½ä»¤1subprocess.check_call([join(home_dir, 'bin', 'python'),  join('pybonjour', 'setup.py'), 'install'])\n\næ·»åŠ åœ¨å¦‚ä¸‹çš„ä½ç½®ä¸Š\n\n12345def after_install(options, home_dir):    subprocess.check_call([join(home_dir, 'bin', 'python'),  join('pybonjour', 'setup.py'), 'install'])    subprocess.check_call([join(home_dir, 'bin', 'pip'),                     'install', '-U', '-e', 'git+https://github.com/square/PonyDebugger.git#egg=ponydebugger'])\né€šè¿‡è¿è¡Œbootstrapå®‰è£…1cat ./bootstrap-ponyd.py | python - --never-download --ponyd-symlink=/usr/local/bin/ponyd ~/Library/PonyDebugger\nä¸Šé¢çš„å®‰è£…ä¼šå‡ºé”™ï¼Œå› ä¸ºä¸€äº›åŒ…æ— æ³•æ‰¾åˆ°ï¼Œæˆ‘ä»¬é€šè¿‡ä¸‹é¢çš„å‘½ä»¤å»ä¿®å¤123456~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/singledispatch/ -U singledispatch~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/backports-abc/ -U backports_abc~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/certifi -U certifi~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/six/ -U six~/Library/PonyDebugger/bin/easy_install --find-links https://pypi.python.org/simple/futures -U futuressudo ~/Library/PonyDebugger/bin/easy_install -U pybonjour\nå®‰è£…devtools1ponyd update-devtools\nè¿è¡Œ1ponyd serve --listen-interface=127.0.0.1\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/ponydebugger.jpeg","plink":"https://blog.xujiaji.com/post/ios-ponydebuger/"},{"title":"å®‰è£…Gitlabå°è®°","date":"2019-09-24T12:49:42.000Z","updated":"2019-09-24T16:44:06.107Z","content":"å®‰è£…Gitlabå°è®°\nç¯å¢ƒï¼šCentOS7.6ã€å¤–éƒ¨Nginx\n\nåšäº†äº›ä»€ä¹ˆï¼Ÿ\nå®‰è£…gitlab\né…ç½®å‘é€é‚®ç®±ï¼ˆç”¨æ¥éªŒè¯è´¦å·ä¿®æ”¹å¯†ç ï¼‰\nå¤–ç½®nginxé…ç½®ï¼ˆhttpsï¼‰\næ±‰åŒ–\nCI Pipelineså®‰è£…\n\nå®‰è£…Gitlabå®‰è£…é…åˆä¾èµ–ï¼ˆå…¶å®è¿™é‡Œéƒ½æ˜¯å®˜ç½‘çš„å®‰è£…è¯´æ–‡æ¡£ï¼Œæˆ‘å°±ç›´æ¥æ¬è¿è¿‡æ¥äº†ï¼‰\n1234567sudo yum install -y curl policycoreutils-python openssh-serversudo systemctl enable sshdsudo systemctl start sshdsudo firewall-cmd --permanent --add-service=httpsudo firewall-cmd --permanent --add-service=httpssudo systemctl reload firewalld\næ·»åŠ Gitlabä»“åº“\n1curl https://packages.gitlab.com/install/repositories/gitlab/gitlab-ee/script.rpm.sh | sudo bash\nå®‰è£…Gitlabï¼Œè¿™é‡Œçš„EXTERNAL_URLæ¢æˆè‡ªå·±çš„åŸŸå\n1sudo EXTERNAL_URL=\"https://gitlab.example.com\" yum install -y gitlab-ee\né…ç½®é‚®ç®±ï¼ˆä¸é…ç½®å¯ä»¥è·³è¿‡è¿™ä¸ªæ­¥éª¤ï¼‰æ‰“å¼€é…ç½®æ–‡ä»¶ï¼Œæ·»åŠ é‚®ç®±é…ç½®ã€‚\nè¿™é‡Œä»¥qqé‚®ç®±æ¥ä¸¾æ —å­ï¼ˆå› ä¸ºæˆ‘é…ç½®çš„qqé‚®ç®±ğŸ˜†ï¼‰ï¼Œå…¶ä»–éƒ½å·®ä¸å¤šç±»ä¼¼ã€‚\næ³¨æ„éœ€è¦åœ¨é‚®ç®±è®¾ç½®ä¸­å¼€å¯smtpæœåŠ¡\n1vim /etc/gitlab/gitlab.rb\n\nç›´æ¥åœ¨æ–‡ä»¶ä¸­æ·»åŠ ä¸‹æ–¹é…ç½®\n\n123456789gitlab_rails['smtp_enable'] = truegitlab_rails['smtp_address'] = \"smtp.qq.com\"gitlab_rails['smtp_port'] = 465gitlab_rails['smtp_user_name'] = \"é‚®ç®±å@qq.com\"gitlab_rails['smtp_password'] = \"dtjhinszpsasdhi\"gitlab_rails['smtp_domain'] = \"smtp.qq.com\"gitlab_rails['smtp_authentication'] = \"login\"gitlab_rails['smtp_enable_starttls_auto'] = truegitlab_rails['smtp_tls'] = true\n\n\n\nå­—æ®µ\nè¯´æ˜\n\n\n\n\nsmtp_enable\nå¯ç”¨smtp\n\n\nsmtp_address\nsmtp.qq.comæ˜¯qqçš„smtpæœåŠ¡å™¨ï¼Œæ ¹æ®è‡ªå·±çš„æƒ…å†µæ›´æ¢\n\n\nsmtp_user_name\næ˜¯ä½ è¦ç”¨æ¥è®©gitlabå‘é€çš„é‚®ç®±\n\n\nsmtp_password\næ˜¯é‚®ç®±çš„ç™»å½•å¯†ç ï¼ˆQQçš„æ˜¯åœ¨è®¾ç½®ä¸­ç”Ÿæˆçš„ç¬¬ä¸‰æ–¹ç™»å½•å¯†ç ï¼‰\n\n\nsmtp_tls\nå¼€å¯tlsåŠ å¯†\n\n\n\né…ç½®é‚®ç®±æ¥æºï¼Œä¸å±•ç¤ºçš„åç§°\n123gitlab_rails['gitlab_email_enabled'] = truegitlab_rails['gitlab_email_from'] = 'é‚®ç®±å@qq.com'gitlab_rails['gitlab_email_display_name'] = 'å‘é€é‚®ä»¶çš„é»˜è®¤æ ‡é¢˜'\nå¤–ç½®nginxé…ç½®å…³é—­Gilabå†…éƒ¨nginxå’Œä¸€äº›å…¶ä»–é…ç½®æ‰“å¼€é…ç½®æ–‡ä»¶\n1vim /etc/gitlab/gitlab.rb\næ·»åŠ å¦‚ä¸‹é…ç½®\n123456789101112external_url 'https://git.longpuji.com'gitlab_workhorse['enable'] = truegitlab_workhorse['listen_network'] = \"tcp\"gitlab_workhorse['listen_addr'] = \"127.0.0.1:8181\"# This example renews every 7th day at 12:30letsencrypt['auto_renew_hour'] = \"12\"letsencrypt['auto_renew_minute'] = \"30\"letsencrypt['auto_renew_day_of_month'] = \"*/7\"nginx['enable'] = false\n\n\n\nå­—æ®µ\nè¯´æ˜\n\n\n\n\nexternal_url\nå¤–éƒ¨çš„urlä½¿ç”¨çš„urlï¼Œå¦‚æœä¸é…ç½®ä¼šå¯¼è‡´æœ‰äº›é“¾æ¥ä¸æ­£å¸¸\n\n\ngitlab_workhorse[&#39;enable&#39;]\nå¼€å¯gitlabå·¥ä½œç©ºé—´é…ç½®\n\n\ngitlab_workhorse[&#39;listen_network&#39;]\ntcpç½‘ç»œåè®®\n\n\ngitlab_workhorse[&#39;listen_addr&#39;]\n127.0.0.1:8181ï¼ˆä¸€ä¼šå„¿nginxåå‘ä»£ç†çš„æ—¶å€™å°±ç”¨è¿™ä¸ªç«¯å£å·ï¼‰\n\n\nnginx[&#39;enable&#39;]\nå…³é—­Gitlabå†…éƒ¨nginx\n\n\n\nä¸ºå¤–éƒ¨nginxåå‘ä»£ç†é…ç½®é…ç½®å¦‚ä¸‹\n1234567891011121314151617181920212223242526location /&#123;    expires 12h;    if ($request_uri ~* \"(php|jsp|cgi|asp|aspx)\")    &#123;         expires 0;    &#125;    # è¿™ä¸ªå°±æ˜¯ä¸Šé¢è®¾ç½®çš„gitlab_workhorse['listen_addr']    proxy_pass http://127.0.0.1:8181;    proxy_set_header Host $host;    proxy_set_header X-Real-IP $remote_addr;    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    proxy_set_header REMOTE-HOST $remote_addr;    # æ³¨æ„å¦‚æœæ˜¯åŸŸåé…ç½®äº†sslï¼Œé‚£ä¹ˆåˆ™å¿…é¡»åŠ ä¸Šè¿™ä¸ªé…ç½®ï¼Œä¸ç„¶gitlabä¼šåœ¨é‡ç½®å¯†ç çš„æ—¶å€™æŠ¥é”™422    proxy_set_header X-Forwarded-Proto https;    proxy_set_header X-Forwarded-Ssl on;    proxy_read_timeout                  900;    proxy_cache off;    proxy_buffering off;    proxy_request_buffering off;    proxy_http_version 1.1;    add_header X-Cache $upstream_cache_status;    add_header Cache-Control no-cache;&#125;\nå¯åŠ¨\nä¸Šé¢çš„é‚£äº›åŸºæœ¬ä¸ŠGitlabå°±å·²ç»é…ç½®å¥½å•¦ï¼Œç°åœ¨éœ€è¦å¯¹Gitlabé‡æ–°åŠ è½½é…ç½®å’Œé‡å¯\n\né‡è½½é…ç½®\n1gitlab-ctl reconfigure\né‡å¯æœåŠ¡\n1gitlab-ctl start\nåˆ°è¿™é‡Œå¯ä»¥æ‰“å¼€åŸŸåé“¾æ¥å»çœ‹çœ‹ï¼Œæ²¡æœ‰å•¥é—®é¢˜å°±å¯ä»¥æ­£å¸¸ä½¿ç”¨ï¼Œç¬¬ä¸€æ¬¡è¿›å…¥çš„æ—¶å€™éœ€è¦è®¾ç½®åˆå§‹å¯†ç ã€‚åˆå§‹çš„è´¦å·æ˜¯rootå»ç™»é™†è¯•è¯•å§\næ±‰åŒ–æŸ¥çœ‹å½“å‰ç‰ˆæœ¬\n1cat /opt/gitlab/embedded/service/gitlab-rails/VERSION\nè¾“å‡º\n112.3.0-ee\n\nç”±äºæ±‰åŒ–ç°åœ¨è¿˜æ²¡æœ‰æ”¯æŒåˆ°è¿™ä¹ˆé«˜çš„ç‰ˆæœ¬ï¼Œäºæ˜¯è¿™é‡Œä»¥v12.2.4çš„ç‰ˆæœ¬æ±‰åŒ–çš„ã€‚ï¼ˆå¤§éƒ¨åˆ†éƒ½æ²¡æœ‰è¢«æ±‰åŒ–ğŸ˜…ï¼Œä¹‹åå¦‚æœè¯¥ä»“åº“æ›´æ–°çš„å¯¹åº”ç‰ˆæœ¬å¯ä»¥å†æ¬¡å°è¯•ï¼‰\n\ncloneæ±‰åŒ–é¡¹ç›®\n1git clone https://gitlab.com/xhang/gitlab.git\nè¿›å…¥ä»“åº“\n1cd gitlab\nå¤‡ä»½gitlab-railsåˆ°å½“å‰ç›®å½•ï¼ˆå¦‚æœä¹‹åå‡ºç°é—®é¢˜ï¼Œæ–¹ä¾¿æ¢å¤ï¼‰\n1cp -rf /opt/gitlab/embedded/service/gitlab-rails/ .\nç”Ÿæˆ12.2.4ç‰ˆæœ¬çš„æ±‰åŒ–è¡¥ä¸\n1git diff v12.2.4 v12.2.4-zh &gt; ./12.2.4-zh.diff\nå…³é—­gitlabæœåŠ¡\n1gitlab-ctl stop\næ‰“æ±‰åŒ–è¡¥ä¸\n1patch -d /opt/gitlab/embedded/service/gitlab-rails/ -p1 &lt; ./12.2.4-zh.diff\n\nè¿™é‡Œæœ‰äº›æ±‰åŒ–æ–‡ä»¶æ²¡æœ‰å¯¹åº”åˆ°çš„æ–‡ä»¶ï¼Œç›´æ¥å›è½¦ï¼Œyesè·³è¿‡å°±å¯ä»¥äº†\n\nå¯åŠ¨æœåŠ¡\n1gitlab-ctl start\nCI Pipelineså®‰è£…è¿™ç¯‡æ–‡ä»¶ä¸é”™ï¼Œæˆ‘å°±ä¸å•°å—¦äº†å“ˆå“ˆ\nhttps://scarletsky.github.io/2016/07/29/use-gitlab-ci-for-continuous-integration/\nå‘½ä»¤æ–‡ä»¶æ•´ç†\nå‘½ä»¤æ•´ç†\n\n\n\n\nå‘½ä»¤\nè¯´æ˜\n\n\n\n\ngitlab-ctl reconfigure\né‡è½½gitlabé…ç½®\n\n\ngitlab-ctl restart\né‡å¯gitlab\n\n\ngitlab-ctl stop\nåœæ­¢gitlabæœåŠ¡\n\n\ngitlab-ctl start\nå¯åŠ¨gitlabæœåŠ¡\n\n\n\n\næ–‡ä»¶è¯´æ˜\n\n\n\n\næ–‡ä»¶\nè¯´æ˜\n\n\n\n\n/etc/gitlab/gitlab.rb\ngitlabé…ç½®æ–‡ä»¶\n\n\n/var/log/gitlab/gitlab-rails/production.log\ngitlab-railsæ—¥å¿—æ–‡ä»¶\n\n\n\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/gitlab/gitlab-logo-gray-rgb.jpg","plink":"https://blog.xujiaji.com/post/linux-gitlab/"},{"title":"Dartå­¦ä¹ ç¬”è®°","date":"2019-03-29T08:45:28.000Z","updated":"2019-10-15T16:41:13.656Z","content":"Dartç¬”è®°å˜é‡åˆå§‹åŒ–ä¸€ä¸ªå˜é‡\n1var name = 'Bob';\nnameå°†è‡ªåŠ¨åˆ¤æ–­ä¸ºStringç±»å‹ï¼Œå¦‚æœä¸æƒ³è®©å…¶é™åˆ¶ä¸ºäº†ä¸€ä¸ªç±»å‹å¯ä»¥ä½¿ç”¨Objectæˆ–dynamicç±»å‹ã€‚Objectç±»å‹å’Œjavaä¸­å·®ä¸å¤šæ˜¯ä¸€ä¸ªé“ç†ã€‚\n1dynamic name = 'Bob';\nå¦‚æœæƒ³æ˜ç¡®æ˜¾ç¤ºå£°æ˜ç±»å‹ï¼š\n1String name = 'Bob';\né»˜è®¤å€¼dartä¸­æœªåˆå§‹åŒ–çš„å€¼éƒ½æ˜¯nullï¼Œå³ä½¿æ˜¯æ•°å­—ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡ã€‚\n1234int lineCount;print(lineCount);//: null\nfianl å’Œ constå½“ä½ ä¸æƒ³è®©å˜é‡å¯ä»¥å†æ¬¡æ”¹å˜çš„æ—¶å€™ç”¨finalæˆ–constä¿®é¥°ï¼Œå¦‚ä¸‹ï¼š\n1final name = 'Bob'; // æˆ–è€…ï¼š final String name = 'Bob'; const name = 'Bob';\næ­¤æ—¶nameçš„å€¼ä¸å¯ä»¥åœ¨ä¿®æ”¹ï¼\näºŒè€…çš„åŒºåˆ«æ˜¯ï¼Œconstæ˜¯ç¼–è¯‘æ—¶æœŸå¸¸é‡ï¼Œæ„æ€æ˜¯è¯´åœ¨ç¼–è¯‘åå°±æœ‰ç¡®åˆ‡çš„å€¼ã€‚\n1234// å¦‚ä¸‹è¡¨è¾¾å¼å¯ä»¥æ­£å¸¸è¿è¡Œï¼Œä½†æ˜¯å°†barå˜é‡å‰é¢çš„ä¿®é¥°è¯constæ¢æ‰ï¼Œé‚£ä¹ˆå°±ä¼šæŠ¥é”™ã€‚å»æ‰å°±ä»£è¡¨äº†barçš„å€¼åœ¨ç¼–è¯‘æ—¶çš„ä¸ç¡®å®šæ€§ã€‚const bar = 1000000;// å¦‚æœatmå‰é¢çš„ä¿®é¥°constæ¢æˆfinalåï¼Œå³ä½¿baræ˜¯å˜é‡ä¹Ÿæ˜¯æ— æ‰€è°“äº†const double atm = 1.01325 * bar;\nconstå…³é”®å­—è¿˜å¯ä»¥ç”¨æ¥ä¿®é¥°å€¼\n123var foo = const [];final bar = [];const baz = [];\næ­¤æ—¶fooæ˜¯å˜é‡ï¼Œå€¼æ˜¯å¸¸é‡ã€‚æ„æ€æ˜¯fooè¿˜å¯ä»¥å¼•ç”¨å…¶ä»–åŒç±»å‹çš„å€¼ï¼Œfoo = [1, 2, 3];æ˜¯è«å¾—é—®é¢˜çš„ã€‚ä½†æ˜¯å¦‚æœè®©å€¼const []æ”¹å˜å°±ä¸è¡Œäº†foo.add(1);\nbarå˜é‡è™½ç„¶æ— æ³•æ”¹å˜å¼•ç”¨ï¼Œä½†æ˜¯å€¼æ˜¯å¯ä»¥æ”¹å˜çš„ã€‚bar.add(1);æ˜¯OKçš„ï¼Œä½†æ˜¯ bar = [1]; æ˜¯NOã€‚\nbazï¼Œä¸Šé¢ä¸¤æ ·éƒ½æ²¡å¾—ç©ï¼\nå¦‚æœconstçš„å˜é‡æ˜¯ç±»ä¸€ä¸ªçº§åˆ«çš„ï¼Œè¿™æ ·å£°æ˜ï¼šstatic const\nå†…ç½®ç±»å‹ä»¥ä¸‹ç±»å‹æ˜¯Dartä¸­ç‰¹æ®Šæ”¯æŒçš„ç±»å‹\n\næ•°å­— numbers\nå­—ç¬¦ä¸² strings\nå¸ƒå°” booleans\nåˆ—è¡¨ lists(ä¹Ÿç§°ä¸ºæ•°ç»„)\né›†åˆ sets\næ˜ å°„ maps\nç¬¦æ–‡ runes(ç”¨äºåœ¨å­—ç¬¦ä¸²ä¸­è¡¨ç¤ºUnicodeå­—ç¬¦)\nç¬¦å· symbols\n\næ‚¨å¯ä»¥ä½¿ç”¨å­—é¢æ–‡å­—åˆå§‹åŒ–ä¸€äº›ç‰¹åˆ«çš„ç±»å‹å¯¹è±¡ï¼Œä¾‹å¦‚&#39;this is a string&#39;æ˜¯ä¸€ä¸ªstringå¯¹è±¡ï¼Œtrueæ˜¯ä¸€ä¸ªbooleanå¯¹è±¡ã€‚\nå› ä¸ºåœ¨Dartä¸­æ¯ä¸ªå˜é‡éƒ½å¼•ç”¨äº†ä¸€ä¸ªå¯¹è±¡ï¼ˆä¸€ä¸ªç±»çš„å®ä¾‹ï¼‰ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨æ„é€ æ–¹æ³•åˆå§‹åŒ–å˜é‡ï¼Œæœ‰äº›å†…ç½®ç±»å‹æœ‰å®ƒä»¬è‡ªå·±çš„æ„é€ å‡½æ•°ã€‚ä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨Map()æ„é€ æ¥åˆ›å»ºä¸€ä¸ªmapå®ä¾‹ã€‚\næ•°å­— NumbersDartæœ‰ä¸¤ç§æ–¹å¼è¡¨ç¤ºæ•°å­—\nint\næ•´å‹æœ€å¤§ä¸è¶…è¿‡64bitï¼Œå¹¶ä¾èµ–äºå¹³å°ã€‚åœ¨Dartè™šæ‹Ÿæœºä¸Šï¼Œå€¼å–å€¼èŒƒå›´[-2^63,2^63 - 1]ã€‚ç¼–è¯‘ä¸ºJavaScriptæ—¶ä½¿ç”¨JavaScriptæ•°å­—ï¼ŒåŒºé—´èŒƒå›´ä¸º[-2^53,2^53-1]ã€‚\ndouble\n64bitï¼ˆåŒç²¾åº¦ï¼‰æµ®ç‚¹æ•°ç”±IEEE 754æ ‡å‡†è§„å®š\nintå’Œdoubleéƒ½æ˜¯numçš„å­ç±»å‹ï¼Œåœ¨numç±»å‹ä¸­åŒ…å«äº†+ã€-ã€*ã€/åŸºæœ¬è¿ç®—ç¬¦ï¼Œåœ¨å…¶ä»–æ–¹æ³•ä¸­æ‚¨ä¹Ÿå¯ä»¥æ‰¾åˆ°abs(),ceil(),floor()ã€‚ï¼ˆä½è¿ç®—ç¬¦ï¼Œå¦‚&gt;&gt;ï¼Œå®šä¹‰åœ¨intç±»ï¼‰å¦‚æœnumå’Œå…¶å­ç±»æ²¡æœ‰æ‚¨æƒ³è¦çš„ï¼Œdart:mathç±»åº“ä¸­å¯èƒ½æœ‰ã€‚\nå­—ç¬¦ä¸²å’Œæ•°å­—äº’è½¬\n1234567891011// String -&gt; intint.parse('1'); // 1// String -&gt; doubledouble.parse('1.1'); // 1.1// int -&gt; String1.toString(); // 1// double -&gt; String ä¿ç•™ä¸¤ä½å°æ•°ï¼Œå››èˆäº”å…¥3.14159.toStringAsFixed(2); // 1.14\nå­—ç¬¦ä¸² StringsDartå­—ç¬¦ä¸²æ˜¯ä¸€ç³»åˆ—UTF-16ä»£ç å•å…ƒï¼Œæ‚¨å¯ä»¥ä½¿ç”¨å•å¼•å·æˆ–åŒå¼•å·åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š\n1234567891011// å•å¼•å·å¯ä»¥è¡¨ç¤ºvar s1 = 'single quotes string';// åŒå¼•å·ä¹Ÿå¯ä»¥è¡¨ç¤ºvar s2 = \"double quotes strings\";// å•å¼•å·è¡¨ç¤ºæ—¶ï¼Œé‡Œé¢æœ‰å•å¼•å·éœ€è¦è½¬ä¹‰var s3 = 'i\\'m a cool boy';// åŒå¼•å·è¡¨ç¤ºæ—¶ï¼Œé‡Œé¢æœ‰å•å¼•å·ä¸éœ€è¦è½¬ä¹‰var s4 = \"i'm a cool boy\";\nå¯ä»¥å°†è¡¨è¾¾å¼æ”¾åœ¨å­—ç¬¦ä¸²é‡Œé¢é€šè¿‡${expression}çš„å½¢å¼ï¼Œè¡¨è¾¾å¼åªæ˜¯å˜é‡æ—¶ï¼Œæ‚¨å¯ä»¥ä¸è¦{}ã€‚å¦‚æœæ˜¯ä¸€ä¸ªå¯¹è±¡æ—¶Dartä¼šé€šè¿‡è°ƒç”¨toString()æ–¹æ³•è·å–è¿™å¯¹è±¡çš„å­—ç¬¦ä¸²ã€‚\n12345var v = 'bc';print('a$v'); // abcprint('A$&#123;v.toUpperCase()&#125;'); // ABCprint('$Set()'); // Set&lt;dynamic&gt;()print('$&#123;Set().toString()&#125;'); // &#123;&#125;\nç›¸é‚»çš„å­—ç¬¦ä¸²ä¼šè‡ªå·±æ‹¼æ¥æˆ–é€šè¿‡+å·æ‹¼æ¥\n12345678var a = '1'  '2'  \"3\"  '4';print(a); // 1234var b = '1' + '2' + \"3\";print(b); // 123\nå¯ä»¥ä½¿ç”¨ä¸‰å€çš„å•å¼•å·æˆ–åŒå¼•å·åˆ›å»ºå¤šè¡Œå­—ç¬¦ä¸²ï¼š\n1234567891011var s1 =  '''  1    2\\n3  ''';print(s1);// ä¸‹é¢æ˜¯è¾“å‡ºï¼Œè¯•äº†ä¸‹åŒå¼•å·å•å¼•å·æ•ˆæœä¸€æ ·//    1//      2//3\næ‚¨å¯ä»¥åœ¨å¼•å·å‰é¢åŠ rè¡¨ç¤ºå­—ç¬¦ä¸²æ˜¯åŸå§‹(raw)ç±»å‹ï¼š\n1print(r'a\\nb'); // a\\nb\næ˜¯ä»€ä¹ˆå°±è¾“å‡ºä»€ä¹ˆï¼Œä¸éœ€è¦è½¬ä¹‰ï¼Œå•å¼•å·åŒå¼•å·ä¸‰å€å¼•å·éƒ½å¯ä»¥ç”¨ã€‚\næœ‰å…³å­—ç¬¦ä¸²ä¸­è¡¨è¾¾Unicodeå­—ç¬¦çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…å­—ç¬¦ Runes\nå­—ç¬¦ä¸²æ–‡å­—æ˜¯ä¸€ä¸ªç¼–è¯‘æœŸå¸¸é‡\næ›´å¤šå­—ç¬¦ä¸²ä½¿ç”¨ä¿¡æ¯ï¼Œè¯·å‚é˜…å­—ç¬¦ä¸²å’Œæ­£åˆ™è¡¨è¾¾å¼\nå¸ƒå°” BooleansDartç”¨ç±»å‹boolè¡¨ç¤ºå¸ƒå°”å€¼ã€‚åªæœ‰ä¸¤ä¸ªå¯¹è±¡è¡¨ç¤ºboolç±»å‹ï¼štrueå’Œfalseï¼Œå®ƒä»¬çš„æ–‡å­—è¡¨è¾¾éƒ½æ˜¯ç¼–è¯‘æ—¶æœŸå¸¸é‡ã€‚\nDartæ˜¯ç±»å‹å®‰å…¨çš„ï¼Œæ„å‘³ç€æ‚¨ä¸èƒ½ä½¿ç”¨åƒif (éå¸ƒå°”å€¼)æˆ–assert(éå¸ƒå°”å€¼)çš„ä»£ç ã€‚å–è€Œä»£ä¹‹çš„æ˜¯æ˜ç¡®æŒ‡å‡ºå¸ƒå°”å€¼ï¼Œå¦‚ä¸‹ï¼š\n123456789101112131415// æ£€æŸ¥ç©ºå­—ç¬¦ä¸²var fullName = '';assert(fullName.isEmpty);// æ£€æŸ¥0var hitPoints = 0;assert(hitPoints &lt;= 0);// æ£€æŸ¥nullvar unicorn;assert(unicorn == null);// æ£€æŸ¥ NaN ï¼ˆNot a Number ä¸æ˜¯ä¸€ä¸ªæ•°ï¼‰var iMeantToDoThis = 0 / 0;assert(iMeantToDoThis.isNaN);\nåˆ—è¡¨ Listsä¹Ÿè®¸å‡ ä¹æ‰€æœ‰ç¼–ç¨‹è¯­è¨€ä¸­æœ€å¸¸è§çš„é›†åˆæ˜¯æ•°ç»„ï¼Œæˆ–æœ‰åºçš„å¯¹è±¡ç»„ã€‚åœ¨Dartä¸­æ•°ç»„å°±æ˜¯Listå¯¹è±¡ï¼Œå› æ­¤å¤§å¤šæ•°äººå«ä»–ä»¬åˆ—è¡¨ã€‚\nDartçš„åˆ—è¡¨å†™æ³•çœ‹èµ·æ¥å°±æ˜¯å…¶ä»–è¯­è¨€æ•°ç»„çš„å†™æ³•ã€‚ä¸‹é¢æ˜¯ä¸€ä¸ªDartåˆ—è¡¨çš„ç¤ºä¾‹ï¼š\n1var list = [1, 2, 3];\nä¸Šé¢çš„ç±»å‹ä¸ºList&lt;int&gt;\næ›´å¤šå…³äºåˆ—è¡¨çš„ä¿¡æ¯ï¼Œè¯·å‚é˜…æ³›å‹å’Œé›†åˆ\né›†åˆ Setsset åœ¨Dartä¸­æ˜¯ä¸€ä¸ªæ— åºé›†åˆï¼ŒDartæ”¯æŒé€šè¿‡æ–‡å­—è¡¨è¾¾å’ŒSetæ¥åˆ›å»ºé›†åˆã€‚\nç®€å•çš„é€šè¿‡æ–‡å­—è¡¨è¾¾\n1var halogens = &#123;'fluorine', 'chlorine', 'bromine', 'iodine', 'astatine'&#125;;\nä¸Šé¢ç±»å‹ä¸ºï¼šSet&lt;String&gt;\nåˆ›å»ºä¸€ä¸ªç©ºé›†åˆï¼š\n1234var names1 = &lt;String&gt;&#123;&#125;;Set&lt;String&gt; names2 = &#123;&#125;;// var names3 = &#123;&#125;; //æ³¨æ„è¿™æ ·åˆ›å»ºçš„ä¸æ˜¯ä¸€ä¸ªSetï¼Œè€Œæ˜¯ä¸€ä¸ªMapï¼Œå…·ä½“æ¥è¯´æ˜¯ä¸€ä¸ª Map&lt;dynamic, dynamic&gt;\næ˜ å°„ Mapsé€šå¸¸ï¼Œä¸€ä¸ªmapæœ‰keyå’Œvalueã€‚keyå’Œvalueå¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ï¼Œkeyåªèƒ½å‡ºç°ä¸€ä¸ªï¼Œä½†å€¼å¯ä»¥å¯¹åº”å¤šä¸ªkeyã€‚Dartåˆ›å»ºæ˜ å°„ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥è¡¨è¾¾å’ŒSetç±»å‹è¡¨è¾¾ã€‚\n123456789var aa = &#123;  'a': '1',  'b': '2'&#125;;var bb = &#123;  1: 'a',  2: 'b'&#125;;\nä¸Šé¢ï¼Œç¬¬ä¸€ä¸ªaaæ˜¯Map&lt;String, String&gt;ç±»å‹ï¼Œç¬¬äºŒä¸ªbbæ˜¯Map&lt;int, String&gt;ç±»å‹ã€‚\né€šè¿‡Mapæ„é€ ä¹Ÿå¯ä»¥åˆ›å»ºåŒæ ·çš„æ•ˆæœï¼š\n1234567var aa = Map();aa['a'] = '1';aa['b'] = '2';var bb = Map();bb[1] = 'a';bb[2] = 'b';\nRunesDartä¸­Runesæ˜¯UTF-32å­—ç¬¦é›†çš„å­—ç¬¦ä¸²å¯¹è±¡\nUnicodeä¸ºä¸–ç•Œä¸Šçš„æ‰€æœ‰æ–‡å­—ç³»ç»Ÿéƒ½å®šä¹‰äº†ä¸€ä¸ªå”¯ä¸€æ•°å­—ä»£è¡¨æ–‡å­—ã€æ•°å­—å’Œç¬¦å·ã€‚å› ä¸ºä¸€ä¸ªDartå­—ç¬¦ä¸²æ˜¯ä¸€ä¸ªUTF-16å­—ç¬¦é›†åºåˆ—ï¼Œåœ¨å­—ç¬¦ä¸²ä¸­è¡¨ç¤º32ä½Unicodeå€¼éœ€è¦ç‰¹æ®Šè¯­æ³•ã€‚\nå¸¸ç”¨æ¥è¡¨è¾¾ä¸€ä¸ªUnicodeå­—ç¬¦çš„æ–¹å¼æ˜¯\\uXXXXï¼Œè¿™å„¿çš„XXXXæ˜¯ä¸€ä¸ª4ä½16è¿›åˆ¶å€¼ã€‚ä¾‹å¦‚ï¼Œå¿ƒå­—ç¬¦ï¼ˆâ™¥ï¼‰æ˜¯\\u2665ã€‚å¦‚æœæ˜¯å¤šä½™æˆ–å°‘äº4ä¸ª16è¿›åˆ¶æ•°å­—çš„ï¼Œå°†å€¼æ”¾è¿›å¤§æ‹¬å·é‡Œé¢ã€‚ä¾‹å¦‚ç¬‘çš„emojiï¼ˆğŸ˜†ï¼‰æ˜¯\\u{1f600}ã€‚\nStringç±»æœ‰å‡ ä¸ªå±æ€§ä½¿æ‚¨å¯ä»¥å°†å­—ç¬¦ä¸²è½¬ä¸ºç¬¦æ–‡runesã€‚codeUnitAtå’ŒcodeUnitsè¿”å›16ä½å­—ç¬¦é›†ï¼ˆæ•°å­—ç¼–ç ï¼‰ã€‚ä½¿ç”¨runesè¿”å›ä¸€ä¸ªå­—ç¬¦ä¸²ç¬¦æ–‡\nä¸‹é¢è¯´æ˜äº†ç¬¦æ–‡ï¼Œ16ä½å’Œ32ä½å­—ç¬¦é›†ä¹‹é—´çš„å…³ç³»\n123456789var clapping = '\\u&#123;1f44f&#125;ab';print(clapping); // ğŸ‘abprint(clapping.codeUnitAt(0)); // 55357print(clapping.codeUnits); // [55357, 56399, 97, 98]print(clapping.runes.toList()); // [128079, 97, 98]Runes input = new Runes(    '\\u2665  \\u&#123;1f605&#125;  \\u&#123;1f60e&#125;  \\u&#123;1f47b&#125;  \\u&#123;1f596&#125;  \\u&#123;1f44d&#125;');print(new String.fromCharCodes(input)); // â™¥  ğŸ˜…  ğŸ˜  ğŸ‘»  ğŸ––  ğŸ‘\nç¬¦å· Symbolsåœ¨Dartç¨‹åºä¸­ï¼ŒSymbolå¯¹è±¡è¡¨ç¤ºå£°æ˜è¿ç®—ç¬¦æˆ–æ ‡è¯†ç¬¦ã€‚æ‚¨å¯èƒ½ä»æ¥ä¸ä¼šä½¿ç”¨åˆ°Symbolï¼Œä½†æ˜¯å®ƒä»¬åœ¨æŒ‰åå­—å¼•ç”¨æ ‡è¯†ç¬¦çš„APIéå¸¸æœ‰ç”¨ï¼Œå› ä¸ºç¼©å°åˆ°æ”¹å˜æ ‡è¯†ç¬¦åç§°è€Œä¸æ›´æ”¹æ ‡è¯†ç¬¦ã€‚\nè·å–æ ‡è¯†ç¬¦çš„symbolï¼Œä½¿ç”¨sybolè¡¨è¾¾å¼ï¼Œåªéœ€#å·åè·Ÿæ ‡è¯†ç¬¦ï¼š\n1234var map = Map();map[#foo] = \"foo's value\";print(map[#foo]); // foo's valueprint(#foo); // Symbol(\"foo\")\nSymbolæ˜¯ç¼–è¯‘å™¨å¸¸é‡ã€‚\næ–¹æ³• FunctionsDartæ˜¯ä¸€ä¸ªçœŸæ­£çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œå› æ­¤ç”šè‡³å‡½æ•°ä¹Ÿæ˜¯ä¸€ä¸ªå¯¹è±¡æœ‰ä¸€ä¸ªç±»å‹ï¼ŒFunctionã€‚è¿™æ„å‘³ç€æ–¹æ³•èƒ½åˆ†é…ç»™å˜é‡æˆ–ä¼ å…¥å…¶ä»–æ–¹æ³•ï¼Œä½ ä¹Ÿå¯ä»¥å¥½åƒè°ƒç”¨ä¸€ä¸ªå‡½æ•°ä¸€æ ·ï¼Œè°ƒç”¨Dartç±»çš„å®ä¾‹ã€‚è¯¦æƒ…ï¼Œè¯·å‚é˜…å¯è°ƒç”¨çš„ç±»ã€‚\nè¿™å„¿æœ‰ä¸ªå®ç°æ–¹æ³•çš„ä¾‹å­ï¼š\n123bool isNoble(int atomicNumber) &#123;  return _nobleGases[atomicNumber] != null;&#125;\nå°½ç®¡Effective Dartå»ºè®®å†™ä¸Šè¿”å›ç±»å‹ï¼Œä½†æ˜¯å¦‚æœä½ ä¸å†™ä¹Ÿå¯ä»¥æ­£å¸¸å·¥ä½œï¼š\n123isNoble(atomicNumber) &#123;  return _nobleGases[atomicNumber] != null;&#125;\nè¿™ä¸ªæ–¹æ³•é‡Œé¢åªæœ‰ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œäºæ˜¯å¯ä»¥ç®€å†™ï¼š\n1bool isNoble(int atomicNumber) =&gt; _nobleGases[atomicNumber] != null;\n=&gt; è¡¨è¾¾å¼è¯­æ³•æ˜¯{ return è¡¨è¾¾å¼;}çš„ç®€å†™ã€‚=&gt;ç¬¦å·æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸ºç®­å¤´è¯­æ³•ã€‚\nä¸€ä¸ªæ–¹æ³•å¯èƒ½æœ‰ä¸¤ä¸ªç±»å‹çš„å‚æ•°ï¼šå¿…é¡»å’Œå¯é€‰ã€‚å¿…è¦çš„å‚æ•°åœ¨æœ€å‰ï¼Œéšåæ˜¯å¯é€‰å‚æ•°ã€‚\nå¯é€‰å‚æ•°å¯é€‰å‚æ•°å¯ä»¥æ˜¯ä½ç½®å‚æ•°æˆ–å‘½åå‚æ•°ï¼Œä¸èƒ½åŒæ—¶å­˜åœ¨\nå¯é€‰å‘½åå‚æ•°å½“è°ƒç”¨ä¸€ä¸ªæ–¹æ³•ï¼Œæ‚¨å¯ä»¥æŒ‡å®šå‘½åå‚æ•°paramName: value.ï¼Œä¾‹å¦‚ï¼š\n1enableFlags(bold: true, hidden: false);\nå½“å®šä¹‰ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œä½¿ç”¨{param1, param2, ...}æ¥æŒ‡å®šå‘½åå‚æ•°ï¼š\n12/// è®¾ç½®åŠ ç²—å’Œéšè—æ ‡è®°void enableFlags(&#123;bool bold, bool hidden&#125;) &#123;...&#125;\nFlutterå®ä¾‹åˆ›å»ºå¯èƒ½æ›´å¤æ‚ï¼Œå› æ­¤widgetæ„é€ å™¨ä»…ä½¿ç”¨å‘½åå‚æ•°ã€‚è¿™è®©å®ä¾‹çš„åˆ›å»ºæ›´åŠ å®¹æ˜“é˜…è¯»ã€‚\næ‚¨å¯ä»¥åœ¨ä»»ä½•Dardä»£ç ä¸­æ ‡è®°æ³¨è§£@requiredï¼Œè¡¨é¢å®ƒæ˜¯ä¸€ä¸ªå¿…ä¼ å‚æ•°ã€‚ä¾‹å¦‚ï¼š\n1const Scrollbar(&#123;Key key, @required Widget child&#125;)\nå½“Scrollbarè¢«åˆ›å»ºæ—¶ï¼Œå¦‚æœæ²¡æœ‰ä¼ å…¥childé‚£ä¹ˆè§£æå™¨å°±ä¼šæŠ¥å‘Šé—®é¢˜ã€‚\nRequiredè¢«å®šä¹‰åœ¨metaåŒ…ä¸­ï¼Œè¦ä¹ˆç›´æ¥å¯¼å…¥package:meta/meta.dartï¼Œè¦ä¹ˆå¯¼å…¥çš„å…¶ä»–åŒ…ä¸­å¯¼å…¥è¿‡metaï¼Œä¾‹å¦‚Flutterçš„package:flutter/material.dartã€‚\nå‘½åå‚æ•°åŠ äº†@requiredå¿…ä¼ ï¼Œå…¶ä»–å¯ä¼ å¯ä¸ä¼ ã€‚\nå¯é€‰ä½ç½®å‚æ•°åœ¨[]ä¸­è®¾ç½®å‡½æ•°ç±»å‹ä½¿å®ƒä»¬ä½œä¸ºå¯é€‰ä½ç½®å‚æ•°ï¼Œè¯¥å‚æ•°å¯ä¼ å¯ä¸ä¼ ã€‚\n1234567String say(String from, String msg, [String device]) &#123;  var result = '$from says $msg';  if (device != null) &#123;    result = '$result with a $device';  &#125;  return result;&#125;\næ²¡æœ‰ä¼ å…¥å¯é€‰ä½ç½®å‚æ•°æ—¶ï¼š\n1print(say('Bob', 'Howdy')); // Bob says Howdy\nå½“ä¼ å…¥å¯é€‰ä½ç½®å‚æ•°çš„æ—¶å€™ï¼š\n1print(say('Bob', 'Howdy', 'smoke signal')); // Bob says Howdy with a smoke a signal\nå‚æ•°é»˜è®¤å€¼å‘½åå‚æ•°å’Œä½ç½®å‚æ•°éƒ½å¯ä»¥ä½¿ç”¨=æ¥å®šä¹‰é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼å¿…é¡»æ˜¯ç¼–è¯‘å™¨å¸¸é‡ã€‚å¦‚æœæ²¡æœ‰æä¾›é»˜è®¤å€¼ï¼Œé»˜è®¤å€¼ä¸ºnull\nè®¾ç½®å‘½åå‚æ•°çš„é»˜è®¤å€¼ï¼š\n12void enableFlags(&#123;bool bold = false, bool hidden = false&#125;) &#123;...&#125;enableFlags(bold: true); // bold = true, hidden = false\nè®¾ç½®å¯é€‰ä½ç½®å‚æ•°çš„é»˜è®¤å€¼ï¼š\n12String say(String from, String msg,    [String device = 'carrier pigeon', String mood]) &#123; ... &#125;\nä½ ä¹Ÿå¯ä»¥ä¸ºåˆ—è¡¨æˆ–é›†åˆå‚æ•°è®¾ç½®é»˜è®¤å€¼ï¼Œå¦‚ä¸‹ï¼š\n12345678910void doStuff(    &#123;List&lt;int&gt; list = const [1, 2, 3],    Map&lt;String, String&gt; gifts = const &#123;      'first': 'paper',      'second': 'cotton',      'third': 'leather'    &#125;&#125;) &#123;  print('list:  $list');  print('gifts: $gifts');&#125;\nmain()æ–¹æ³•æ¯ä¸ªappå¿…é¡»æœ‰ä¸ªé¡¶çº§main()æ–¹æ³•ï¼Œå®ƒæ˜¯appçš„å…¥å£ç‚¹ã€‚main()æ–¹æ³•è¿”å›voidå¹¶ä¸”æœ‰ä¸€ä¸ªå¯é€‰å‚æ•°List&lt;String&gt;ã€‚\nè¿™æ˜¯ä¸€ä¸ªweb appçš„main()æ–¹æ³•ä¾‹å­ï¼š\n12345void main() &#123;  querySelector('#sample_text_id')  ..text = 'Click me!'  ..onClick.listen(reverseText);&#125;\n\næ³¨æ„ï¼šè¿™é‡Œçš„..è¯­æ³•è¢«ç§°ä¸ºçº§è”ï¼Œé€šè¿‡çº§è”æ‚¨å¯ä»¥å¤šæ¬¡å¯¹ä¸€ä¸ªå¯¹è±¡è¿›è¡Œæ“ä½œã€‚\n\nä¸‹é¢æ˜¯åˆ›å»ºäº†ä¸€ä¸ªå‘½ä»¤è¡Œè¿è¡Œçš„appï¼Œåœ¨main()æ–¹æ³•çš„å‚æ•°å¯è·å¾—å‘½ä»¤è¡Œçš„å€¼ï¼š\n123void main(List&lt;String&gt; arguments) &#123;  print(arguments);&#125;\né¦–å…ˆéœ€è¦é…ç½®å¥½dartç¯å¢ƒå˜é‡ï¼Œç„¶ååœ¨ç»ˆç«¯å½“å‰æ–‡ä»¶ç›®å½•è¿è¡Œï¼šdart test.dart 1 testï¼Œå°†ä¼šè¾“å‡º[1, test]ã€‚\næ‚¨å¯ä»¥ä½¿ç”¨argsç±»åº“å®šä¹‰æˆ–è§£æå‘½ä»¤è¡Œå‚æ•°ã€‚\næ–¹æ³•çœ‹åšç±»å¯¹è±¡æ‚¨å¯ä»¥å°†ä¸€ä¸ªæ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥å¦ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š\n1234567891011121314void main() &#123;  void printElement(int element) &#123;    print(element);  &#125;  var list = [1, 2, 3];  // å°†æ–¹æ³•ä½œä¸ºå‚æ•°ä¼ å…¥  list.forEach(printElement);&#125;// è¿è¡Œè¾“å‡ºï¼š// 1// 2// 3\næ‚¨ä¹Ÿå¯ä»¥ä¸ºå˜é‡åˆ†é…ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ï¼š\n12var loudify = (msg) =&gt; '!!!$&#123;msg.toUpperCase()&#125;!!!';print(loudify('hello')); // !!!HELLO!!!\nè¿™ä¸ªä¾‹å­ä½¿ç”¨åŒ¿åæ–¹æ³•ï¼Œæ›´å¤šä¿¡æ¯è¯·æ¥ç€çœ‹çœ‹ä¸‹é¢å“¦ï¼\nåŒ¿åæ–¹æ³•å¾ˆå¤šæ–¹é¢éƒ½æœ‰åå­—ï¼Œä¾‹å¦‚main()æˆ–printElement()ã€‚æ‚¨ä¹Ÿå¯ä»¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰åå­—çš„æ–¹æ³•ï¼Œæˆ‘ä»¬ç§°ä¹‹ä¸ºåŒ¿åæ–¹æ³•ï¼Œæˆ–lambdaï¼Œæˆ–é—­åŒ…(closure)ã€‚æ‚¨å¯ä»¥åˆ†é…ç»™å˜é‡ä¸€ä¸ªåŒ¿åæ–¹æ³•ï¼Œä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥åœ¨åˆ—è¡¨ä¸­æ·»åŠ æˆ–ç§»é™¤å®ƒã€‚\nåŒ¿åæ–¹æ³•å’Œå‘½åæ–¹æ³•å·®ä¸å¤šï¼Œä¸€ä¸ªæˆ–å¤šä¸ªå‚æ•°æ”¾åœ¨æ‹¬å·é‡Œï¼Œä¹‹é—´ç”¨é€—å·åˆ†éš”ã€‚\nä»£ç æ ·å¼çœ‹èµ·æ¥å¦‚ä¸‹é¢çš„æ ¼å¼ï¼š\n123([[ç±»å‹] å‚æ•°1[, â€¦]]) &#123;  ä»£ç å—;&#125;;\nä¸‹é¢çš„ä¾‹å­ä¸­å®šä¹‰äº†ä¸€ä¸ªæ— ç±»å‹å‚æ•°itemçš„åŒ¿åæ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•åœ¨åˆ—è¡¨è½®è¯¢æ—¶è¢«è°ƒç”¨ï¼Œæ‰“å°å¯¹åº”çš„å€¼å’Œä¸‹æ ‡ï¼š\n123456789var list = ['apples', 'bananas', 'oranges'];list.forEach((item) &#123;  print('$&#123;list.indexOf(item)&#125;:$item');&#125;);// è¾“å‡ºï¼š// 0:apples// 1:bananas// 2:oranges\nç”±äºè¿™ä¸ªæ–¹æ³•åªæœ‰ä¸€æ¡æŒ‡ä»¤ï¼Œæ‚¨å¯ä»¥ç”¨ç®­å¤´è¡¨è¾¾ï¼š\n1list.forEach((item) =&gt; print('$&#123;list.indexOf(item)&#125;: $item'));\nä½œç”¨åŸŸè¯­æ³•Dartä¹Ÿæ˜¯ä¸€ä¸ªä½œç”¨åŸŸè¯­æ³•è¯­è¨€ï¼Œè¿™æ„å‘³ç€å˜é‡çš„ä½œç”¨åŸŸæ˜¯ç¡®å®šçš„ï¼Œåªéœ€æ”¹å˜ä»£ç å¸ƒå±€å°±å¯ã€‚æ‚¨å¯ä»¥ä½¿ç”¨èŠ±æ‹¬å·å¤–çš„å˜é‡æ¥æŸ¥çœ‹æ˜¯å¦åœ¨ä½œç”¨åŸŸå†…ã€‚\nä¸‹é¢æ˜¯ä¸€ä¸ªæ–¹æ³•å†…åµŒçš„ä¾‹å­ï¼Œå¹¶ä¸”æ¯ä¸ªç­‰çº§çš„ä½œç”¨åŸŸä¸­éƒ½æœ‰ä¸€ä¸ªå˜é‡ï¼š\n123456789101112131415161718bool topLevel = true;void main() &#123;  var insideMain = true;  void myFunction() &#123;    var insideFunction = true;    void nestedFunction() &#123;      var insideNestedFunction = true;      assert(topLevel);      assert(insideMain);      assert(insideFunction);      assert(insideNestedFunction);    &#125;  &#125;&#125;\næ³¨æ„nestedFunction()å¦‚ä½•ä½¿ç”¨æ¯ä¸ªçº§åˆ«çš„å˜é‡ï¼Œä¸€ç›´åˆ°é¡¶çº§ã€‚\né—­åŒ…è¯­æ³•ä¸€ä¸ªé—­åŒ…æ˜¯ä¸€ä¸ªæ–¹æ³•å¯¹è±¡ï¼Œå®ƒèƒ½è®¿é—®åœ¨å®ƒä½œç”¨åŸŸè¯­æ³•å†…çš„å˜é‡ã€‚å³ä½¿å½“è¿™ä¸ªæ–¹æ³•ä½¿ç”¨åœ¨åŸæ¥çš„ä½œç”¨åŸŸä¹‹å¤–ã€‚\næ–¹æ³•èƒ½å…³è”ä½œç”¨åŸŸèŒƒå›´çš„å˜é‡ï¼Œåœ¨ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒmakeAdder()è·å–çš„å˜é‡æ˜¯addByï¼Œè¿”å›ä¸€ä¸ªæ–¹æ³•ï¼Œæ— è®ºå®ƒè¿”å›åœ¨å“ªéƒ½ä¼šè®°ä½addByã€‚\n12345678910111213/// è¿”å›ä¸€ä¸ªæ–¹æ³•/// addBy + æ–¹æ³•çš„å‚æ•°iFunction makeAdder(num addBy) =&gt; (i) =&gt; addBy + i;void main() &#123;  // åˆ›å»ºä¸€ä¸ªåŠ 2çš„æ–¹æ³•  var add2 = makeAdder(2);  // åˆ›å»ºä¸€ä¸ªåŠ 4çš„æ–¹æ³•  var add4 = makeAdder(4);  print('$&#123;add2(3)&#125;, $&#123;add4(3)&#125;'); // 5,  7&#125;\næµ‹è¯•æ–¹æ³•ç›¸ç­‰æ€§è¿™å„¿æœ‰ä¸€ä¸ªæµ‹è¯•æœ€å¤–å±‚æ–¹æ³•ï¼Œé™æ€æ–¹æ³•å’Œå®ä¾‹æ–¹æ³•çš„ç›¸ç­‰æ€§çš„ä¾‹å­ï¼š\n12345678910111213141516171819202122232425262728void foo() &#123;&#125; // æœ€å¤–å±‚æ–¹æ³•class A &#123;  static void bar() &#123;&#125; // é™æ€æ–¹æ³•  void baz() &#123;&#125; // å®ä¾‹æ–¹æ³•&#125;void main() &#123;  var x;  // æ¯”è¾ƒé™æ€æ–¹æ³•  x = foo;  print(foo == x); // true  // æ¯”è¾ƒå®ä¾‹æ–¹æ³•  x = A.bar;  print(A.bar == x); // true  var v = A(); // ç¬¬ä¸€ä¸ªAå®ä¾‹  var w = A(); // ç¬¬äºŒä¸ªAå®ä¾‹  var y = w;  x = w.baz;  // ç”±äºè¿™ä¸¤ä¸ªå˜é‡å¼•ç”¨åŒä¸€ä¸ªå®ä¾‹ï¼Œå› æ­¤ä»–ä»¬çš„é—­åŒ…ç›¸ç­‰  print(y.baz == x); // true  // ç”±äºè¿™æ˜¯ä¸¤ä¸ªå®ä¾‹ï¼Œå› æ­¤ä»–ä»¬çš„é—­åŒ…ä¸ç­‰  print(v.baz == w.baz); // false&#125;\nè¿”å›å€¼æ‰€æœ‰æ–¹æ³•éƒ½æœ‰ä¸€ä¸ªè¿”å›å€¼ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šè¿”å›å€¼ï¼Œé‚£ä¹ˆåœ¨æ–¹æ³•ä½“ä¸­ä¼šéšå¼å£°æ˜return null;\n12foo() &#123;&#125;print(foo()); // null\nè¿ç®—ç¬¦ä¸‹é¢çš„è¡¨æ ¼ä¸­å±•ç¤ºäº†Dartä¸­å®šä¹‰çš„è¿ç®—ç¬¦ï¼Œæ‚¨å¯ä»¥è¦†ç›–ä¸‹é¢å¤§éƒ¨åˆ†è¿ç®—ç¬¦ï¼Œè¯¦æƒ…å‚ç…§ï¼šå¯è¦†ç›–è¿ç®—ç¬¦\n\n\n\næè¿°\nè¿ç®—ç¬¦\n\n\n\n\nå•ç›®åç½®\nexpr++ expr-- () [] . ?.\n\n\nå•ç›®å‰ç½®\n-expr !expr ~expr ++expr --expr\n\n\nä¹˜æ³•ç±»\n* / % ~/\n\n\nåŠ å‡ç±»\n+ -\n\n\nä½ç§»\n&gt;&gt; &lt;&lt; &gt;&gt;&gt;\n\n\næŒ‰ä½ä¸\n&amp;\n\n\næŒ‰ä½å¼‚æˆ–\n^\n\n\næŒ‰ä½æˆ–\n`\n`\n\n\nå…³ç³»å’Œç±»å‹æ ¡éªŒ\n&gt;= &gt; &lt;= &lt; as is â€˜is!â€™\n\n\nç­‰æ€§\n== !=\n\n\né€»è¾‘ä¸\n&amp;&amp;\n\n\né€»è¾‘æˆ–\n`\n\n`\n\n\næ˜¯å¦æ˜¯null\n??\n\n\nä¸‰ç›®è¿ç®—\nexpr1 ? expr2 : expr2\n\n\nçº§è”\n..\n\n\nèµ‹å€¼\n= *= /= += -= &amp;= ^= ç­‰\n\n\n\nç®—æ•°è¿ç®—ç¬¦Dartæ”¯æŒå¸¸ç”¨ç®—æ•°è¿ç®—ç¬¦ï¼Œå¦‚ä¸‹è¡¨æ‰€ç¤ºï¼š\n\n\n\nè¿ç®—ç¬¦\nè§£é‡Š\n\n\n\n\n+\nåŠ \n\n\n-\nå‡\n\n\n-expr\nä¸€å…ƒå‡ï¼Œä¹Ÿç§°ä¸ºå¦å®šï¼ˆåè½¬è¡¨è¾¾å¼çš„ç¬¦å·ï¼‰\n\n\n*\nä¹˜\n\n\n/\né™¤\n\n\n~/\né™¤ä»¥ï¼Œå¹¶è¿”å›æ•´æ•°ç»“æœ\n\n\n%\næ±‚ä½™\n\n\n\n12print(5 / 2); // 2.5print(5 ~/ 2); // 2\nDartä¹Ÿæ”¯æŒå•ç›®é€’å¢å’Œé€’å‡è¿ç®—ç¬¦\n\n\n\nè¿ç®—ç¬¦\nè§£é‡Š\n\n\n\n\n++var\nvar = var + 1(è¡¨è¾¾å¼çš„å€¼ä¸ºvar + 1)\n\n\nvar++\nvar = var + 1(è¡¨è¾¾å¼çš„å€¼ä¸ºvar)\n\n\n--var\nvar = var - 1(è¡¨è¾¾å¼çš„å€¼ä¸ºvar - 1)\n\n\nvar--\nvar = var - 1(è¡¨è¾¾å¼çš„å€¼ä¸ºvar)\n\n\n\nç­‰å¼å’Œå…³ç³»è¿ç®—ç¬¦ä¸‹é¢çš„è¡¨æ ¼åˆ—å‡ºäº†ç­‰å¼å’Œå…³ç³»è¿ç®—ç¬¦çš„å«ä¹‰\n\n\n\nè¿ç®—ç¬¦\nå«ä¹‰\n\n\n\n\n==\næ’ç­‰äº\n\n\n!=\nä¸ç­‰äº\n\n\n&gt;\nå¤§äº\n\n\n&lt;\nå°äº\n\n\n&gt;=\nå¤§äºæˆ–ç­‰äº\n\n\n&lt;=\nå°äºæˆ–ç­‰äº\n\n\n\nä½¿ç”¨==åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼ˆåœ¨å°‘æ•°æƒ…å†µä¸‹æ‚¨éœ€è¦åˆ¤æ–­ä¸¤ä¸ªå¼•ç”¨æ˜¯å¦æŒ‡å‘åŒä¸€ä¸ªå¯¹è±¡æ—¶ï¼Œä½¿ç”¨identical()ï¼‰\nç±»å‹æ£€æµ‹è¿ç®—ç¬¦as,iså’Œis!è¿ç®—ç¬¦ç”¨æ¥æ£€æµ‹è¿è¡Œæ—¶ç±»å‹\n\n\n\nè¿ç®—ç¬¦\næ„æ€\n\n\n\n\nas\nç±»å‹è½¬æ¢ï¼ˆä¹Ÿç»å¸¸ç”¨æ¥æŒ‡å®šç±»åº“å‰ç¼€ï¼‰\n\n\nis\nå¯¹è±¡æ˜¯å¦æœ‰æŒ‡å®šçš„ç±»å‹\n\n\nis!\nå’Œä¸Šé¢ç›¸å\n\n\n\nas å¼ºè½¬ç±»å‹ï¼Œ is ç±»å‹åˆ¤æ–­\nèµ‹å€¼è¿ç®—ç¬¦æ‚¨å·²çŸ¥é“ï¼Œæ‚¨å¯ä»¥é€šè¿‡=è¿ç®—ç¬¦ä¸ºå˜é‡èµ‹å€¼ã€‚å¦‚æœè¦ä»…ä»…å˜é‡ä¸ºnullæ—¶æ‰èµ‹å€¼ï¼Œä½¿ç”¨??=è¿ç®—ç¬¦\n12345678void main() &#123;  int a = 5;  int b;  a ??= 10;  b ??= 10;  print('a = $a, b = $b'); // a = 5, b = 10&#125;\nç»„åˆèµ‹å€¼è¿ç®—ç¬¦ï¼Œå¦‚+=å°†è¿ç®—ç¬¦å’Œèµ‹å€¼ç»“åˆ\n\n\n\n\n=\n-=\n/=\n%=\n&gt;&gt;=\n^=\n\n\n+=\n*=\n~/=\n&lt;&lt;=\n&amp;=\n&#124;=\n\n\n\né€»è¾‘è¿ç®—ç¬¦æ‚¨å¯ä»¥é€šè¿‡é€»è¾‘è¿ç®—ç¬¦é¢ å€’æˆ–ç»„åˆå¸ƒå°”è¡¨è¾¾å¼\n\n\n\nè¿ç®—ç¬¦\næ„æ€\n\n\n\n\n!expr\né¢ å€’æ˜¯é\n\n\n&#124;&#124;\né€»è¾‘æˆ–\n\n\n&amp;&amp;\né€»è¾‘ä¸\n\n\n\næŒ‰ä½è¿ç®—å’Œç§»ä½è¿ç®—ç¬¦æ‚¨å¯ä»¥åœ¨Dartä¸­æ“ä½œæ•°å­—çš„ä½è¿ç®—\n\n\n\nè¿ç®—ç¬¦\næ„æ€\n\n\n\n\n&amp;\nä¸\n\n\n&#124;\næˆ–\n\n\n^\nå¼‚æˆ–\n\n\n~expr\nå–å\n\n\n&lt;&lt;\nå·¦ç§»\n\n\n&gt;&gt;\nå³ç§»\n\n\n\næ¡ä»¶è¡¨è¾¾å¼Dartæœ‰ä¸¤ç§è¡¨è¾¾å¼è®©æ‚¨ç®€æ˜çš„è¡¨è¾¾éœ€è¦ä½¿ç”¨åˆ°if-elseçš„æƒ…æ™¯ï¼š\n1.ä¸‰ç›®è¿ç®—ç¬¦\n1condition ? expr1 : expr2\n2.æ˜¯å¦ä¸ºnullï¼Œå¦‚æœä¸ºnullåˆ™ç”¨åé¢çš„è¡¨è¾¾å¼\n1expr1 ?? expr2\n12345void main() &#123;  print(1 &gt; 2 ? \"æ˜¯çš„1&gt;2\" : \"ä¸ä¸ï¼Œ1&lt;2\"); // ä¸ä¸ï¼Œ1&lt;2  int value;  print(value ?? 100); // 100&#125;\nçº§è”è¡¨ç¤ºæ³•..å…è®¸æ‚¨å¯¹åŒä¸€ä¸ªå¯¹è±¡è¿›è¡Œä¸€ç³»åˆ—è¿ç»­çš„æ“ä½œã€‚ä¸ä»…å¯ä»¥è°ƒç”¨æ–¹æ³•ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä¸ºè¿™ä¸ªå¯¹è±¡å­—æ®µèµ‹å€¼ã€‚è¿™é€šå¸¸ä¸ºæ‚¨èŠ‚çœäº†åˆ›å»ºä¸´æ—¶å˜é‡çš„ä¸æ­¥éª¤ï¼Œå¹¶èƒ½è®©ä½ å†™æˆæ›´å¤šæµç•…çš„ä»£ç ã€‚\nè¯·å‚è€ƒä¸‹é¢ä»£ç ï¼š\n1234querySelector('#confirm') // è·å¾—ä¸€ä¸ªå¯¹è±¡  ..text = 'Confirm' // ä½¿ç”¨å®ƒçš„æˆå‘˜å˜é‡  ..classes.add('important')  ..onClick.listen((e) =&gt; window.alert('Confirmed!'));\nè¿˜æœ‰å†…éƒ¨è”ç»“ï¼š\n12345678final addressBook = (AddressBookBuilder()      ..name = 'jenny'      ..email = 'jenny@example.com'      ..phone = (PhoneNumberBuilder()            ..number = '415-555-0100'            ..label = 'home')          .build())    .build();\nå…¶ä»–æ“ä½œç¬¦æ‚¨å·²åœ¨å…¶ä»–æ¡ˆä¾‹ä¸­çœ‹åˆ°äº†å¤§å¤šæ•°çš„ç›¸å…³æ“ä½œç¬¦\n\n\n\næ“ä½œç¬¦\nåå­—\nå«ä¹‰\n\n\n\n\n()\næ–¹æ³•\nè¡¨ç¤ºæ–¹æ³•è°ƒç”¨\n\n\n[]\nåˆ—è¡¨è®¿é—®\né€šè¿‡ç´¢å¼•å¼•ç”¨åˆ—è¡¨ä¸­çš„å€¼\n\n\n.\næˆå‘˜è®¿é—®\nå¼•ç”¨ä¸€ä¸ªå±æ€§ï¼›ä¾‹å¦‚ï¼šfoo.barï¼Œå¼•ç”¨fooå¯¹è±¡ä¸­çš„barå±æ€§\n\n\n?.\næ¡ä»¶æˆå‘˜è®¿é—®\nå·¦è¾¹çš„å˜é‡å¯ä»¥æ˜¯null\n\n\n\n123456789class A &#123;  var b;&#125;void main() &#123;  A a;  print(a?.b); // null, å¦‚æœä¸åŠ â€œï¼Ÿâ€å°±ä¼šæŠ¥é”™&#125;\næ›´å¤šå…³äº.ï¼Œ?.å’Œ..çš„æ“ä½œï¼Œè¯·å‚è€ƒç±»\næ§åˆ¶æµè¯­å¥æ‚¨å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„ä»»æ„Dartä»£ç æ§åˆ¶æµç¨‹\n\nif å’Œ else\nfor å¾ªç¯\nwhile å’Œ do-whileå¾ªç¯\nbreak å’Œ continue\nswitch å’Œ case\nassert\n\næ‚¨ä¹Ÿå¯ä»¥å¯ä»¥é€šè¿‡try-catchå’Œthrowå½±å“æµç¨‹ï¼Œè¯¦ç»†ä»‹ç»åœ¨å¼‚å¸¸\nforå¾ªç¯1234567891011void main() &#123;  var callback = [];  for(var i = 0; i &lt; 2; i++) &#123;    callback.add(() =&gt; print(i));  &#125;  callback.forEach((c) =&gt; c());&#125;// è¾“å‡ºï¼š// 0// 1\nåˆ—è¡¨ä¸­æ”¾å…¥çš„æ˜¯ä¸¤ä¸ªé—­åŒ…ï¼Œåˆ—è¡¨æ˜¯ä¸€ä¸ªè¿­ä»£å™¨ï¼Œæ‚¨å¯ä»¥ä½¿ç”¨forEach()æ–¹æ³•æ¥éå†ã€‚å¦‚æœä½ ä¸éœ€è¦çŸ¥é“å½“å‰çš„è¿­ä»£æ•°é‡ï¼Œä½¿ç”¨forEach()æ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ï¼š\n1candidates.forEach((candidate) =&gt; candidate.interview());\nå¯è¿­ä»£çš„ç±»å¦‚Listå’ŒSetä¹Ÿæ”¯æŒfor-initerationï¼š\n1234var collection = [0, 1, 2];for (var x in collection) &#123;  print(x); // 0 1 2&#125;\nSwitchå’Œcaseå€¼å¾—æ³¨æ„çš„æ˜¯switché‡Œé¢ä½¿ç”¨==ä½œä¸ºåˆ¤æ–­æ•´å‹ï¼Œå­—ç¬¦ä¸²æˆ–ç¼–è¯‘æœŸå¸¸é‡ã€‚ç”¨æ³•å¤§è‡´å’Œjavaå·®ä¸å¤šï¼Œä¸»è¦æ³¨æ„ä¸‹é¢è¿™æ ·çš„å†™æ³•æœ‰æ”¹è¿›ï¼š\n123456789var command = 'OPEN';switch (command) &#123;  case 'OPEN':    executeOpen();    // é”™è¯¯ï¼š æ²¡æœ‰break ï¼ˆå¦‚æœå»æ‰executeOpen();ä¹Ÿæ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼‰  case 'CLOSED':    executeClosed();    break;&#125;\næ”¹ï¼š\n12345678910111213var command = 'CLOSED';switch (command) &#123;  case 'CLOSED':    executeClosed();    continue nowClosed;  // ç»§ç»­æ‰§è¡ŒnowClosedæ ‡ç­¾  nowClosed:  case 'NOW_CLOSED':    // Runs for both CLOSED and NOW_CLOSED.    executeNowClosed();    break;&#125;\næ–­è¨€æ–­è¨€ä¸ä¼šå½±å“åˆ°ç”Ÿäº§ä»£ç ï¼Œåªåº”ç”¨åœ¨å¼€å‘è°ƒè¯•æ¨¡å¼ä¸‹\nå¼‚å¸¸æ‚¨çš„Dartä»£ç å¯ä»¥æŠ›å‡ºæˆ–æ•è·å¼‚å¸¸ï¼Œå¼‚å¸¸æ˜¯å‘ç”Ÿäº†ä¸€äº›ä¸å¸Œæœ›çš„ã€‚å¦‚æœå¼‚å¸¸æ²¡æœ‰æ•è·å¤„ç†ï¼Œä¼šå¯¼è‡´ç¨‹åºç»ˆæ­¢ã€‚Dartæä¾›Exceptionå’ŒErrorç±»å‹ï¼Œä»¥åŠè®¸å¤šé¢„å®šä¹‰çš„å­ç±»å‹ã€‚å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥å®šä¹‰æ‚¨è‡ªå·±çš„å¼‚å¸¸ã€‚ç„¶è€Œå¯¹äºå¼‚å¸¸ï¼ŒDartç¨‹åºèƒ½æŠ›å‡ºä»»ä½•énullå¯¹è±¡ï¼Œä¸ä»…ä»…æ˜¯Exceptionå’ŒErrorå¯¹è±¡ã€‚\nThrowä¸‹é¢æ˜¯ä¸€ä¸ªæŠ›å‡ºå¼‚å¸¸çš„åˆ—å­ï¼š\n1throw FormatException('Expected at least 1 section');\næ‚¨ä¹Ÿå¯ä»¥éšæ„æŠ›å‡ºä¸€ä¸ªå¯¹è±¡ï¼š\n1throw 'å¼‚å¸¸ã€‚ã€‚ã€‚';\nç”±äºæŠ›å‡ºå¼‚å¸¸æ˜¯ä¸€ä¸ªè¡¨è¾¾å¼ï¼Œå¯ä»¥é€šè¿‡=&gt;å¦‚ä¸‹è¡¨è¾¾ï¼š\n1void distanceTo(Point other) =&gt; throw UnimplementedError();\nCatchæ•è·ä¸€ä¸ªå¼‚å¸¸\n12345try &#123;  breedMoreLlamas();&#125; on OutOfLlamasException &#123;  buyMoreLlamas();&#125;\næ•è·å¤šä¸ªå¼‚å¸¸ï¼Œcatchå¯ä»¥å¾—åˆ°å¼‚å¸¸å¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœä¸æ˜ç¡®ç±»å‹ç›´æ¥ç”¨catchï¼š\n123456789101112try &#123;  breedMoreLlamas();&#125; on OutOfLlamasException &#123;  // ä¸€ä¸ªç‰¹å®šå¼‚å¸¸  buyMoreLlamas();&#125; on Exception catch (e) &#123;  // ä»»ä½•å…¶ä»–ç±»å‹Exceptionå¼‚å¸¸  print('Unknown exception: $e');&#125; catch (e) &#123;  // ä¸æŒ‡å®šç±»å‹ï¼Œå¤„ç†æ‰€æœ‰  print('Something really unknown: $e');&#125;\ncatch()å¯æŒ‡å®šä¸¤ä¸ªå‚æ•°ï¼Œç¬¬ä¸€ä¸ªæ˜¯æŠ›å‡ºçš„å¼‚å¸¸å¯¹è±¡ï¼Œç¬¬äºŒä¸ªæ˜¯å †æ ˆï¼ˆStackTraceï¼‰\n12345678try &#123;  // Â·Â·Â·&#125; on Exception catch (e) &#123;  print('Exception details:\\n $e');&#125; catch (e, s) &#123;  print('Exception details:\\n $e');  print('Stack trace:\\n $s');&#125;\næ—¢è¦å¤„ç†å¼‚å¸¸ï¼Œåˆè¦è®©å¼‚å¸¸é‡æ–°è·‘å‡ºå»ä½¿ç”¨rethrowå…³é”®å­—\n123456789void misbehave() &#123;  try &#123;    dynamic foo = true;    print(foo++); // è¿è¡Œæ—¶é”™è¯¯  &#125; catch (e) &#123;    print('misbehave() partially handled $&#123;e.runtimeType&#125;.');    rethrow; // è®©è°ƒç”¨è€…ç»§ç»­å¾—åˆ°å¼‚å¸¸  &#125;&#125;\nFinallyå’Œjavaä¸€æ ·\n","plink":"https://blog.xujiaji.com/post/Note-Learn-Dart/"},{"title":"OpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVBOï¼‰","date":"2019-03-09T08:49:10.000Z","author":"xujiaji","updated":"2019-04-12T17:44:07.238Z","content":"\nç¿»è¯‘æ–‡\n\nåŸæ–‡æ ‡é¢˜ï¼šAndroid Lesson Seven: An Introduction to Vertex Buffer Objects (VBOs)åŸæ–‡é“¾æ¥ï¼šhttp://www.learnopengles.com/android-lesson-seven-an-introduction-to-vertex-buffer-objects-vbos/\n\nä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVBOï¼‰\n\n\n\nåœ¨è¿™èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä»‹ç»å¦‚ä½•å®šä¹‰å’Œå¦‚ä½•å»ä½¿ç”¨é¡¶ç‚¹ç¼“å†²å¯¹è±¡ï¼ˆVBOï¼‰ã€‚ä¸‹é¢æ˜¯æˆ‘ä»¬è¦è®²åˆ°çš„å‡ ç‚¹ï¼š1.æ€æ ·ç”¨é¡¶ç‚¹ç¼“å†²å¯¹è±¡å®šä¹‰å’Œæ¸²æŸ“2.å•ä¸ªç¼“å†²åŒºã€æ‰€æœ‰æ•°æ®æ‰“åŒ…è¿›å»ã€å¤šä¸ªç¼“å†²åŒºä¹‹é—´çš„åŒºåˆ«3.é—®é¢˜å’Œé™·é˜±æˆ‘ä»¬å¦‚ä½•å–å¤„ç†å®ƒä»¬\n\n\n\n\nä»€ä¹ˆæ˜¯é¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Ÿä¸ºä»€ä¹ˆä½¿ç”¨å®ƒä»¬ï¼Ÿåˆ°ç›®å‰ä¸ºæ­¢ï¼Œæˆ‘ä»¬æ‰€æœ‰çš„è¯¾ç¨‹éƒ½æ˜¯å°†å¯¹è±¡æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­ï¼Œåªæœ‰åœ¨æ¸²æŸ“æ—¶å°†å…¶ä¼ è¾“åˆ°GPUä¸­ã€‚æ²¡æœ‰å¤§é‡æ•°æ®ä¼ è¾“æ—¶ï¼Œè¿™å¾ˆå¥½ï¼Œä½†éšç€æˆ‘ä»¬çš„åœºæ™¯è¶Šæ¥è¶Šå¤æ‚ï¼Œæœ‰æ›´å¤šçš„ç‰©ä½“å’Œä¸‰è§’å½¢ï¼Œè¿™ä¼šç»™GPUå’Œå†…å­˜å¢åŠ é¢å¤–çš„æˆæœ¬ã€‚\næˆ‘ä»¬èƒ½åšäº›ä»€ä¹ˆå‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ä½¿ç”¨é¡¶ç‚¹ç¼“å†²å¯¹è±¡ï¼Œè€Œä¸æ˜¯æ¯å¸§ä»å®¢æˆ·ç«¯å†…å­˜ä¼ è¾“é¡¶ç‚¹ä¿¡æ¯ï¼Œä¿¡æ¯å°†è¢«ä¼ è¾“ä¸€æ¬¡ï¼Œç„¶åæ¸²æŸ“å™¨å°†ä»è¯¥å›¾å½¢å­˜å‚¨å™¨ç¼“å­˜ä¸­å¾—åˆ°æ•°æ®ã€‚\nå‰ææ¡ä»¶è¯·é˜…è¯»OpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨ä»‹ç»å¦‚ä½•ä»å®¢æˆ·ç«¯çš„å†…å­˜ä¸Šä¼ é¡¶ç‚¹æ•°æ®ã€‚äº†è§£OpenGL ESå¦‚ä½•ä¸é¡¶ç‚¹æ•°ç»„ä¸€èµ·å·¥ä½œå¯¹äºç†è§£æœ¬è¯¾è‡³å…³é‡è¦ã€‚\næ›´è¯¦ç»†çš„äº†è§£å®¢æˆ·ç«¯ç¼“å†²åŒºä¸€ä½†äº†è§£äº†å¦‚ä½•ä½¿ç”¨å®¢æˆ·ç«¯å†…å­˜è¿›è¡Œæ¸²æŸ“ï¼Œåˆ‡æ¢åˆ°ä½¿ç”¨VBOå®é™…ä¸Šå¹¶ä¸å¤ªéš¾ã€‚å…¶ä¸»è¦çš„ä¸åŒåœ¨äºæ·»åŠ äº†ä¸€ä¸ªä¸Šä¼ æ•°æ®åˆ°å›¾å½¢å†…å­˜çš„é¢å¤–æ­¥éª¤ï¼Œä»¥åŠæ¸²æŸ“æ—¶æ·»åŠ äº†ç»‘å®šè¿™ä¸ªç¼“å†²åŒºçš„é¢å¤–è°ƒç”¨ã€‚\næœ¬èŠ‚è¯¾å°†ä½¿ç”¨å››ç§ä¸åŒçš„æ¨¡å¼ï¼š\n\nå®¢æˆ·ç«¯ï¼Œå•ç‹¬çš„ç¼“å†²åŒº\nå®¢æˆ·ç«¯ï¼Œæ‰“åŒ…çš„ç¼“å†²\né¡¶ç‚¹ç¼“å†²å¯¹è±¡ï¼Œå•ç‹¬çš„ç¼“å†²åŒº\né¡¶ç‚¹ç¼“å†²å¯¹è±¡ï¼Œæ‰“åŒ…çš„ç¼“å†²\n\næ— è®ºæˆ‘ä»¬æ˜¯å¦ä½¿ç”¨é¡¶ç‚¹ç¼“å†²å¯¹è±¡ï¼Œæˆ‘ä»¬éƒ½éœ€è¦å…ˆå°†æˆ‘ä»¬çš„æ•°æ®å­˜å‚¨åœ¨å®¢æˆ·ç«¯æœ¬åœ°ç¼“å†²åŒºã€‚ä¼šæƒ³åˆ°ç¬¬ä¸€è¯¾ä¸­OpenGL ES æ˜¯ä¸€ä¸ªæœ¬åœ°ç³»ç»Ÿåº“ï¼Œè€Œjavaæ˜¯è¿è¡Œåœ¨Androidä¸Šçš„ä¸€ä¸ªè™šæ‹Ÿæœºä¸­ã€‚å¦‚ä½•å»æ¡¥æ¥è¿™ä¸ªè·ç¦»ï¼Ÿæˆ‘ä»¬éœ€è¦ä½¿ç”¨ä¸€ç»„ç‰¹æ®Šçš„ç¼“å†²åŒºç±»æ¥åœ¨æœ¬åœ°å †ä¸Šåˆ†é…å†…å­˜ï¼Œå¹¶ä½¿ä½¿å…¶ä¾›OpenGLè®¿é—®ï¼š\n123456789101112131415// Java æ•°ç»„float[] cubePositions;...// æµ®ç‚¹ç¼“å†²åŒºfinal FloatBuffer cubePositionsBuffer;...// åœ¨æœ¬åœ°å †ä¸Šç›´æ¥åˆ†é…ä¸€å—å†…å­˜// å­—èŠ‚å¤§å°ä¸ºcubePositionsçš„é•¿åº¦ä¹˜ä»¥æ¯ä¸ªæµ®ç‚¹æ•°çš„å­—èŠ‚å¤§å°// æ¯ä¸ªfloatçš„å­—èŠ‚å¤§å°ä¸º4ï¼Œå› ä¸ºfloatæ˜¯32ä½æˆ–4å­—èŠ‚cubePositionsBuffer = ByteBuffer.allocateDirect(cubePositions.length * BYTES_PRE_FLOAT)// æµ®ç‚¹ä¼šä»¥å¤§ç«¯ï¼ˆbig-endianï¼‰æˆ–å°æ®µï¼ˆlittle-endianï¼‰çš„é¡ºåºæ’åˆ—// æˆ‘æƒ³è®©å…¶åŒæœ¬åœ°å¹³å°ç›¸åŒçš„æ’åˆ—.order(ByteOrder.nativeOrder())// åœ¨è¿™ä¸ªå­—èŠ‚ç¼“å†²åŒºä¸Šç»™æˆ‘ä»¬ä¸€ä¸ªæµ®ç‚¹è§†è§’.asFloatBuffer();\nå°†Javaå †ä¸Šæ•°æ®è½¬æ¢åˆ°æœ¬åœ°å †ä¸Šï¼Œå°±æ˜¯ä¸¤æ–¹æ³•è°ƒç”¨çš„äº‹æƒ…ï¼š\n12345// å°†javaå †ä¸Šçš„æ•°æ®æ‹·è´åˆ°æœ¬åœ°å †cubePositionsBuffer.put(cubePositions)// é‡ç½®è¿™ä¸ªç¼“å†²åŒºå¼€å§‹çš„ç¼“å†²ä½ç½®.position(0);\nç¼“å†²ä½ç½®çš„ç›®çš„æ˜¯ä»€ä¹ˆï¼Ÿé€šå¸¸ï¼ŒJavaæ²¡æœ‰ä¸ºæˆ‘ä»¬æä¾›ä¸€ç§åœ¨å†…å­˜ä¸­ä½¿ç”¨æŒ‡é’ˆï¼Œä»»æ„æŒ‡å®šä½ç½®çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œè®¾ç½®ç¼“å†²åŒºçš„ä½ç½®åœ¨åŠŸèƒ½ä¸Šç­‰åŒäºæ›´æ”¹æŒ‡å‘å†…å­˜å—æŒ‡é’ˆçš„å€¼ã€‚é€šè¿‡æ”¹å˜æŒ‡é’ˆçš„ä½ç½®ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç¼“å†²åŒºä¸­ä»»æ„çš„å†…å­˜ä½ç½®ä¼ é€’ç»™OpenGLè°ƒç”¨ã€‚å½“æˆ‘ä»¬ä½¿ç”¨æ‰“åŒ…çš„ç¼“å†²ä½œä¸šæ—¶ï¼Œè¿™å°†æ´¾ä¸Šç”¨åœºã€‚\nä¸€ä½†æ•°æ®å­˜æ”¾åˆ°æœ¬åœ°å †ä¸Šï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦é•¿æ—¶é—´æŒæœ‰float[]æ•°ç»„äº†ï¼Œæˆ‘ä»¬å¯ä»¥è®©åƒåœ¾å›æ”¶å™¨æ¸…ç†å®ƒã€‚\nä½¿ç”¨å®¢æˆ·ç«¯ç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“éå¸¸ç®€å•ï¼Œæˆ‘ä»¬ä»…éœ€è¦å¯åŠ¨å¯¹åº”å±æ€§çš„é¡¶ç‚¹ç´ ç»„ï¼Œå¹¶å°†æŒ‡é’ˆä¼ é€’ç»™æˆ‘ä»¬çš„æ•°æ®ï¼š\n1234// ä¼ å…¥ä½ç½®ä¿¡æ¯GLES20.glEnableVertexAttribArray(mPositionHandle);GLES20.glVertexAttriPointer(mPositionHandle, POSITION_DATA_SIZE,    GLES20.GL_FLOAT, false, 0, mCubePositions)\nglVertexAttriPointerå‚æ•°è¯´æ˜ï¼š\n\nmPositionHandleï¼š æˆ‘ä»¬ç€è‰²å™¨ç¨‹åºçš„ä½ç½®å±æ€§ç´¢å¼•\nPOSITION_DATA_SIZEï¼š å®šä¹‰è¿™ä¸ªå±æ€§éœ€è¦å¤šå°‘ä¸ªfloatå…ƒç´ \nGL_FLOATï¼š æ¯ä¸ªå…ƒç´ çš„ç±»å‹\nfalseï¼š å®šç‚¹æ•°æ®å› è¯¥æ ‡å‡†åŒ–å—ï¼Ÿç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æµ®ç‚¹æ•°æ®ï¼Œå› æ­¤ä¸é€‚ç”¨ã€‚\n0ï¼š è·¨åº¦ï¼Œè®¾ç½®0ï¼Œä»¥ä¸ºç€åº”å®‰é¡ºåºè¯»å–ã€‚ç¬¬ä¸€è¯¾ä¸­è®¾ç½®ä¸º7ï¼Œè¡¨ç¤ºæ¯æ¬¡è¯»å–è·¨åº¦7ä¸ªä½ç½®\nmCubePositionsï¼š æŒ‡å‘ç¼“å†²åŒºçš„çš„æŒ‡é’ˆï¼ŒåŒ…å«æ‰€æœ‰ä½ç½®æ•°æ®\n\nä½¿ç”¨æ‰“åŒ…ç¼“å†²åŒºä½¿ç”¨æ‰“åŒ…ç¼“å†²åŒºæ˜¯éå¸¸ç›¸ä¼¼çš„ï¼Œæ›¿æ¢äº†æ¯ä¸ªä½ç½®ã€æ³•çº¿ç­‰çš„ç¼“å†²åŒºï¼Œç°åœ¨ä¸€ä¸ªç¼“å†²åŒºå°†åŒ…å«æ‰€æœ‰è¿™äº›æ•°æ®ã€‚ä¸åŒç‚¹çœ‹ä¸‹é¢ï¼š\n\nä½¿ç”¨å•ç¼“å†²åŒº\n\n123positions = X,Y,Z,X,Y,Z,X,Y,Z,...colors = R,G,B,A,R,G,B,A,...textureCoordinates = S,T,S,T,S,T...\n\nä½¿ç”¨æ‰“åŒ…ç¼“å†²åŒº\n\n1buffer = X,Y,Z,R,G,B,A,S,T...\nä½¿ç”¨æ‰“åŒ…ç¼“å†²åŒºçš„å¥½å¤„æ˜¯å®ƒå°†ä¼šä½¿GPUæ›´é«˜æ•ˆçš„æ¸²æŸ“ï¼Œå› ä¸ºæ¸²æŸ“ä¸‰è§’å½¢æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯éƒ½ä½äºå†…å­˜åŒä¸€å—åœ°æ–¹ã€‚ç¼ºç‚¹æ˜¯ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨åŠ¨æ€æ•°æ®ï¼Œæ›´æ–°å¯èƒ½ä¼šæ›´å›°éš¾ï¼Œæ›´æ…¢ã€‚\nå½“æˆ‘ä»¬ä½¿ç”¨æ‰“åŒ…ç¼“å†²åŒºæ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä»¥ä¸‹å‡ ç§æ–¹å¼æ›´æ”¹æ¸²æŸ“è°ƒç”¨ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å‘Šè¯‰OpenGLè·¨åº¦ï¼ˆstrideï¼‰ ï¼Œå®šä¹‰ä¸€ä¸ªé¡¶ç‚¹çš„å­—èŠ‚æ•°ã€‚\n123456789101112131415final int stride = (POSITION_DATA_SIZE + NORMAL_DATA_SIZE + TEXTURE_COORDINATE_DATA_SIZE)    * BYTES_PER_FLOAT;// ä¼ å…¥ä½ç½®ä¿¡æ¯mCubeBuffer.position(0);GLES20.glEnableVertexAttribArray(mPositionHandle);GLES20.glVertexAttribPointer(mPositionHandle, POSITION_DATA_SIZE,    GLES20.GL_FLOAT, false, stride, mCubeBuffer);// ä¼ å…¥æ³•çº¿ä¿¡æ¯mCubeBuffer.position(POSITION_DATA_SIZE);GLES20.glEnableVertexAttribArray(mNormalHandle);GLES20.glVertexAttribPointer(mNormalHandle, NORMAL_DATA_SIZE,    GLES20.GL_FLOAT, false, stride, mCubeBuffer);...\nè¿™ä¸ªè·¨åº¦å‘Šè¯‰OpenGL ESä¸‹ä¸€ä¸ªé¡¶ç‚¹çš„åŒæ ·çš„å±æ€§è¦å†è·¨å¤šè¿œæ‰èƒ½æ‰¾åˆ°ã€‚ä¾‹å¦‚ï¼šå¦‚æœå…ƒç´ 0æ˜¯ç¬¬ä¸€ä¸ªé¡¶ç‚¹çš„å¼€å§‹ä½ç½®ï¼Œå¹¶ä¸”è¿™é‡Œæ¯ä¸ªé¡¶ç‚¹æœ‰8ä¸ªå…ƒç´ ï¼Œç„¶åè¿™ä¸ªè·¨åº¦å°†æ˜¯8ä¸ªå…ƒç´ ï¼Œä¹Ÿå°±æ˜¯32ä¸ªå­—èŠ‚ã€‚ä¸‹ä¸€ä¸ªé¡¶ç‚¹çš„ä½ç½®å°†æ‰¾åˆ°ç¬¬8ä¸ªå…ƒç´ ï¼Œä¸‹ä¸‹ä¸ªé¡¶ç‚¹çš„ä½ç½®å°†æ‰¾åˆ°ç¬¬16ä¸ªå…ƒç´ ï¼Œä»¥æ­¤ç±»æ¨ã€‚\nè¯·è®°ä½ï¼Œä¼ é€’ç»™glVertexAttriPointerçš„è·¨åº¦å•ä½æ˜¯å­—èŠ‚ï¼Œè€Œä¸æ˜¯å…ƒç´ ï¼Œå› æ­¤è¯·è®°ä½è¿›è¡Œè¯¥è½¬æ¢ã€‚\næ³¨æ„ï¼Œå½“æˆ‘ä»¬ä»æŒ‡å®šä½ç½®åˆ‡æ¢åˆ°æŒ‡å®šæ³•çº¿æ—¶ï¼Œæˆ‘ä»¬è¦æ›´æ”¹ç¼“å†²åŒºçš„å…¶å®ä½ç½®ã€‚è¿™æ˜¯æˆ‘ä»¬ä¹‹å‰æåˆ°çš„æŒ‡é’ˆç®—æ³•ï¼Œè¿™æ˜¯æˆ‘ä»¬åœ¨ä½¿ç”¨OpengGL ESæ—¶ç”¨Javaåšçš„æ–¹å¼ã€‚æˆ‘ä»¬ä»ç„¶ä½¿ç”¨åŒä¸€ä¸ªç¼“å†²åŒºmCubeBufferï¼Œä½†æ˜¯æˆ‘ä»¬å‘Šè¯‰OpenGLä»ä½ç½®æ•°æ®åçš„ç¬¬ä¸€ä¸ªå…ƒç´ å¼€å§‹è¯»å–æ³•çº¿ä¿¡æ¯ã€‚æˆ‘ä»¬ä¹Ÿå‘Šè¯‰OpenGLä¸‹ä¸€ä¸ªæ³•çº¿è¦è·¨è¶Š8ä¸ªå…ƒç´ ï¼ˆä¹Ÿå¯ä»¥è¯´æ˜¯32ä¸ªå­—èŠ‚ï¼‰å¼€å§‹ã€‚\nDalvikå’Œæœ¬åœ°å †ä¸Šçš„å†…å­˜å¦‚æœä½ åœ¨æœ¬åœ°å †ä¸Šåˆ†é…å¤§é‡å†…å­˜æŠŠå¹¶å°†å…¶é‡Šæ”¾ï¼Œæ‚¨è¿Ÿæ—©ä¼šé‡åˆ°å¿ƒçˆ±çš„OutOfMemoryError ï¼ŒèƒŒåæœ‰å‡ ä¸ªåŸå› ï¼š\n\næ‚¨å¯èƒ½è®¤ä¸ºé€šè¿‡è®©å¼•ç”¨è¶…å‡ºèŒƒå›´è€Œè‡ªåŠ¨é‡Šæ”¾äº†å†…å­˜ï¼Œä½†æ˜¯æœ¬åœ°å†…å­˜ä¼¼ä¹éœ€è¦ä¸€äº›é¢å¤–çš„GCå‘¨æœŸæ‰èƒ½å®Œå…¨æ¸…ç†ï¼Œå¦‚æœæ²¡æœ‰è¶³å¤Ÿå¯ç”¨çš„å†…å­˜å¹¶ä¸”å°šæœªé‡Šæ”¾æœ¬åœ°å†…å­˜ï¼ŒDalvikå°†æŠ›å‡ºå¼‚å¸¸ã€‚\næœ¬åœ°å †å¯èƒ½ä¼šç¢ç‰‡åŒ–ï¼Œè°ƒç”¨allocateDirect()å°†ä¼šè«åå…¶å¦™å¤±è´¥ï¼Œå°½ç®¡ä¼¼ä¹æœ‰è¶³å¤Ÿçš„å†…å­˜å¯ç”¨ã€‚æœ‰æ—¶å®ƒæœ‰åŠ©äºè¿›è¡Œè¾ƒå°çš„åˆ†é…ï¼Œé‡Šæ”¾å®ƒï¼Œç„¶åå†æ¬¡å°è¯•æ›´å¤§çš„åˆ†é…ã€‚\n\nå¦‚ä½•èƒ½é¿å…è¿™äº›é—®é¢˜ï¼Ÿé™¤äº†å¸Œæœ›Googleåœ¨æœªæ¥çš„ç‰ˆæœ¬ä¸­æ”¹è¿›Dalvikçš„è¡Œä¸ºä¹‹å¤–ï¼Œå¹¶ä¸å¤šã€‚æˆ–è€…é€šè¿‡æœ¬åœ°ä»£ç è¿›è¡Œåˆ†é…æˆ–é¢„å…ˆåˆ†é…ä¸€å¤§å—å†…å­˜æ¥è‡ªè¡Œç®¡ç†å †ï¼Œå¹¶æ ¹æ®æ­¤åˆ†ç¦»ç¼“å†²åŒºã€‚\n\næ³¨æ„ï¼šè¿™äº›ä¿¡æ¯æœ€åˆå†™äº2012å¹´åˆï¼Œç°åœ¨Androidä½¿ç”¨äº†ä¸€ä¸ªåä¸ºARTçš„ä¸åŒè¿è¡Œæ—¶ï¼Œå®ƒå¯èƒ½åœ¨ç›¸åŒç¨‹åº¦ä¸Šä¸ä¼šé‡åˆ°è¿™äº›é—®é¢˜ã€‚\n\nç§»åŠ¨åˆ°é¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ç°åœ¨æˆ‘ä»¬å·²ç»å›é¡¾äº†ä½¿ç”¨å®¢æˆ·ç«¯ç¼“å†²åŒºï¼Œè®©æˆ‘ä»¬ç»§ç»­è®¨è®ºé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å›é¡¾å‡ ä¸ªéå¸¸é‡è¦çš„é—®é¢˜ï¼š\n1. ç¼“å†²åŒºå¿…é¡»åˆ›å»ºåœ¨ä¸€ä¸ªæœ‰æ•ˆçš„OpenGLä¸Šä¸‹æ–‡ä¸­è¿™ä¼¼ä¹æ˜¯ä¸€ä¸ªæ˜æ˜¾çš„è§‚ç‚¹ï¼Œä½†æ˜¯å®ƒä»…ä»…æé†’ä½ å¿…é¡»ç­‰åˆ°onSurfaceCreated()æ‰§è¡Œï¼Œå¹¶ä¸”ä½ å¿…é¡»æ³¨æ„OpenGL ESè°ƒç”¨æ˜¯åœ¨GLçº¿ç¨‹ä¸Šå®Œæˆçš„ã€‚çœ‹è¿™ä¸ªæ–‡æ¡£ï¼šiOS OpenGL ESç¼–ç¨‹æŒ‡å—ï¼Œå®ƒå¯èƒ½æ˜¯ä¸ºiOSå†™çš„ï¼Œä½†æ˜¯OpenGL ESåœ¨Androidçš„è¡Œä¸ºå’Œè¿™ç›¸åŒã€‚\n2. é¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ä½¿ç”¨ä¸å½“ä¼šå¯¼è‡´å›¾å½¢é©±åŠ¨ç¨‹åºå´©æºƒå½“ä½ ä½¿ç”¨é¡¶ç‚¹ç¼“å†²å¯¹è±¡æ—¶ï¼Œéœ€è¦æ³¨æ„ä¼ é€’çš„æ•°æ®ã€‚ä¸å½“çš„å€¼å°†ä¼šå¯¼è‡´OpenGL ESç³»ç»Ÿåº“æˆ–å›¾å½¢é©±åŠ¨åº“æœ¬åœ°å´©æºƒã€‚åœ¨æˆ‘çš„Nexus Sä¸Šï¼Œä¸€äº›æ¸¸æˆå®Œå…¨å¡åœ¨æˆ‘çš„æ‰‹æœºä¸Šæˆ–å¯¼è‡´æ‰‹æœºé‡å¯ï¼Œå› ä¸ºå›¾å½¢é©±åŠ¨å› ä¸ºä»–ä»¬çš„æŒ‡ä»¤å´©æºƒã€‚å¹¶éæ‰€æœ‰çš„å´©æºƒéƒ½ä¼šé”å®šæ‚¨çš„è®¾å¤‡ï¼Œä½†è‡³å°‘æ‚¨ä¸ä¼šçœ‹åˆ°â€œæ­¤åº”ç”¨å·²åœæ­¢å·¥ä½œâ€çš„å¯¹è¯æ¡†ã€‚æ‚¨çš„æ´»åŠ¨å°†åœ¨æ²¡æœ‰è­¦å‘Šçš„æƒ…å†µä¸‹é‡æ–°å¯åŠ¨ï¼Œæ‚¨å°†è·å¾—å”¯ä¸€çš„ä¿¡æ¯å¯èƒ½æ˜¯æ—¥å¿—ä¸­çš„æœ¬åœ°è°ƒè¯•è·Ÿè¸ªã€‚\nä¸Šä¼ é¡¶ç‚¹æ•°æ®åˆ°GPUè¦ä¸Šä¼ æ•°æ®åˆ°GPUï¼Œæˆ‘ä»¬éœ€è¦åƒä»¥å‰ä¸€æ ·åˆ›å»ºå®¢æˆ·ç«¯ç¼“å†²åŒºçš„ç›¸åŒæ­¥éª¤ï¼š\n12345...cubePositionsBuffer = ByteBuffer.allocateDirect(cubePositions.length * BYTES_PER_FLOAT).order(ByteOrder.nativeOrder()).asFloatBuffer();cubePositionsBuffer.put(cubePositions).position(0);...\nä¸€æ—¦æˆ‘ä»¬æœ‰äº†å®¢æˆ·ç«¯ç¼“å†²åŒºï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ›å»ºä¸€ä¸ªé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œå¹¶ä½¿ç”¨ä¸€ä¸‹æŒ‡ä»¤å°†æ•°æ®ä»å®¢æˆ·ç«¯å†…å­˜ä¸Šä¼ åˆ°GPUï¼š\n123456789101112131415// é¦–å…ˆï¼Œæˆ‘ä»¬è¦å°½å¯èƒ½çš„ç”³è¯·æ›´å¤šçš„ç¼“å†²åŒº// è¿™å°†ä¸ºæˆ‘ä»¬æä¾›è¿™äº›ç¼“å†²åŒºçš„handlefinal int buffers[] = new int[3];GLES20.glGenBuffers(3, buffers, 0);// ç»‘å®šè¿™ä¸ªç¼“å†²åŒºï¼Œå°†æ¥çš„æŒ‡ä»¤å°†å•ç‹¬å½±å“æ­¤ç¼“å†²åŒºGLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, buffers[0]);// å®¢æˆ·ç«¯å†…å­˜ä¸­çš„æ•°æ®è½¬ç§»åˆ°ç¼“å†²åŒº// æˆ‘ä»¬èƒ½åœ¨æ­¤æ¬¡è°ƒåŠ¨åé‡Šæ”¾å®¢æˆ·ç«¯å†…å­˜GLES20.glBufferData(GLES20.GL_ARRAY_BUFFER, cubePositionsBuffer.capacity() * BYTES_PER_FLOAT,    cubePositionsBuffer, GLES20.GL_STATIC_DRAW);// é‡è¦æé†’ï¼šå®Œæˆç¼“å†²åï¼Œä»ç¼“å†²åŒºå–æ¶ˆç»‘å®šGLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);\nä¸€æ—¦æ•°æ®ä¸Šä¼ åˆ°äº†OpenGL ESï¼Œæˆ‘ä»¬å°±å¯ä»¥é‡Šæ”¾è¿™ä¸ªå®¢æˆ·ç«¯å†…å­˜ï¼Œå› ä¸ºæˆ‘ä»¬ä¸éœ€è¦å†ç»§ç»­ä¿ç•™å®ƒã€‚è¿™æ˜¯glBufferDataçš„è§£é‡Šï¼š\n\nGL_ARRAY_BUFFERï¼š è¿™ä¸ªç¼“å†²åŒºåŒ…å«é¡¶ç‚¹æ•°æ®æ•°ç»„\ncubePositionsBuffer.capacity()  BYTES_PER_FLOATï¼š* è¿™ä¸ªç¼“å†²åŒºå› è¯¥åŒ…å«çš„å­—èŠ‚æ•°\ncubePositionsBufferï¼š å°†è¦æ‹·è´åˆ°è¿™ä¸ªé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡çš„æº\nGL_STATIC_DRAWï¼š è¿™ä¸ªç¼“å†²åŒºä¸ä¼šåŠ¨æ€æ›´æ–°\n\næˆ‘ä»¬å¯¹glVertexAttribPointerçš„è°ƒç”¨çœ‹èµ·æ¥æœ‰ç‚¹å„¿ä¸åŒï¼Œå› ä¸ºæœ€åä¸€ä¸ªå‚æ•°ç°åœ¨æ˜¯åç§»é‡è€Œä¸æ˜¯æŒ‡å‘å®¢æˆ·ç«¯å†…å­˜çš„æŒ‡é’ˆï¼š\n12345// ä¼ å…¥ä½ç½®ä¿¡æ¯GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, mCubePositionsBufferIdx);GLES20.glEnableVertexAttribArray(mPositionHandle);mGlEs20.glVertexAttribPointer(mPositionHandle, POSITION_DATA_SIZE, GLES20.GL_FLOAT, false, 0, 0);...\nåƒä»¥å‰ä¸€æ ·ï¼Œæˆ‘ä»¬ç»‘å®šåˆ°ç¼“å†²åŒºï¼Œç„¶åå¯ç”¨é¡¶ç‚¹æ•°ç»„ã€‚ç”±äºç¼“å†²åŒºæ—©å·²ç»‘å®šï¼Œå½“ä»ç¼“å†²åŒºè¯»å–æ•°æ®æ—¶ï¼Œæˆ‘ä»¬ä»…éœ€è¦å‘Šè¯‰OpenGLå¼€å§‹çš„åç§»ã€‚å› ä¸ºæˆ‘ä»¬ä½¿ç”¨çš„ç‰¹å®šçš„ç¼“å†²åŒºï¼Œæˆ‘ä»¬ä¼ å…¥åç§»é‡0ã€‚å¦è¯·æ³¨æ„ï¼Œæˆ‘ä»¬ä½¿ç”¨è‡ªå®šä¹‰ç»‘å®šæ¥è°ƒç”¨glVertexAttribPointerï¼Œå› ä¸ºå®˜æ–¹SKDç¼ºå°‘æ­¤ç‰¹å®šå‡½æ•°è°ƒç”¨ã€‚\nä¸€æ—¦æˆ‘ä»¬ç”¨ç¼“å†²åŒºç»˜åˆ¶å®Œæˆï¼Œæˆ‘ä»¬åº”è¯¥è§£é™¤å®ƒï¼š\n1GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, 0);\nå½“æˆ‘ä»¬ä¸æƒ³åœ¨ä¿ç•™ç¼“å†²åŒºæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥é‡Šæ”¾å†…å­˜ï¼š\n123final int[] buffersToDelete = new int[] &#123; mCubePositionsBufferIdx, mCubeNormalsBufferIdx,    mCubeTexCoordsBufferIdx &#125;;GLES20.glDeleteBuffers(buffersToDelete.length, buffersToDelete, 0);\næ‰“åŒ…é¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡æˆ‘ä»¬è¿˜å¯ä»¥ä½¿ç”¨å•ä¸ªç¼“å†²åŒºæ‰“åŒ…é¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡çš„æ‰€æœ‰é¡¶ç‚¹æ•°æ®ã€‚æ‰“åŒ…é¡¶ç‚¹ç¼“å†²åŒºçš„åˆ›å»ºå’Œä¸Šé¢ç›¸åŒï¼Œå”¯ä¸€çš„åŒºåˆ«æ˜¯æˆ‘ä»¬ä»æ‰“åŒ…å®¢æˆ·ç«¯ç¼“å†²åŒºå¼€å§‹ã€‚æ‰“åŒ…ç¼“å†²åŒºæ¸²æŸ“ä¹Ÿæ˜¯ä¸€æ ·çš„ï¼Œé™¤äº†æˆ‘ä»¬éœ€è¦ä¼ åç§»é‡ï¼Œå°±åƒåœ¨å®¢æˆ·ç«¯å†…å­˜ä¸­ä½¿ç”¨æ‰“åŒ…ç¼“å†²åŒºä¸€æ ·ï¼š\n123456789101112131415final int stride = (POSITION_DATA_SIZE + NORMAL_DATA_SIZE + TEXTURE_COORDINATE_DATA_SIZE)    * BYTES_PER_FLOAT;// ä¼ å…¥ä½ç½®ä¿¡æ¯GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, mCubeBufferIdx);GLES20.glEnableVertexAttribArray(mPositionHandle);mGlEs20.glVertexAttribPointer(mPositionHandle, POSITION_DATA_SIZE,    GLES20.GL_FLOAT, false, stride, 0);// ä¼ å…¥æ³•çº¿ä¿¡æ¯GLES20.glBindBuffer(GLES20.GL_ARRAY_BUFFER, mCubeBufferIdx);GLES20.glEnableVertexAttribArray(mNormalHandle);mGlEs20.glVertexAttribPointer(mNormalHandle, NORMAL_DATA_SIZE,    GLES20.GL_FLOAT, false, stride, POSITION_DATA_SIZE * BYTES_PER_FLOAT);...\næ³¨æ„ï¼šåç§»é‡éœ€è¦ä»¥å­—èŠ‚ä¸ºå•ä½æŒ‡å®šã€‚ä¸ä¹‹å‰ä¸€æ ·è§£é™¤ç»‘å®šå’Œåˆ é™¤ç¼“å†²åŒºçš„ç›¸åŒæ³¨æ„äº‹é¡¹ä¹Ÿé€‚ç”¨ã€‚\nå°†é¡¶ç‚¹æ•°æ®æ”¾åˆ°ä¸€èµ·è¿™èŠ‚è¯¾å·²æ„å»ºäº†å¤šç«‹æ–¹ä½“ç»„æˆçš„ç«‹æ–¹ä½“ï¼Œæ¯ä¸ªé¢çš„ç«‹æ–¹ä½“æ•°é‡ä½“ç›¸åŒã€‚å®ƒå°†åœ¨1x1x1ç«‹æ–¹ä½“å’Œ16x16x16ç«‹æ–¹ä½“ä¹‹é—´æ„å»ºç«‹æ–¹ä½“ã€‚ç”±äºæ¯ä¸ªç«‹æ–¹ä½“å…±äº«ç›¸åŒçš„æ³•çº¿å’Œçº¹ç†æ•°æ®ï¼Œå› æ­¤åœ¨åˆå§‹åŒ–å®¢æˆ·ç«¯ç¼“å†²åŒºæ—¶å°†é‡å¤å¤åˆ¶æ­¤æ•°æ®ã€‚æ‰€æœ‰ç«‹æ–¹ä½“éƒ½å°†åœ¨åŒä¸€ä¸ªç¼“å†²åŒºå¯¹è±¡ä¸­ç»“æŸã€‚\næ‚¨å¯ä»¥æŸ¥çœ‹è¯¾ç¨‹ä¸­çš„ä»£ç å¹¶æŸ¥çœ‹ä½¿ç”¨å’Œä¸ä½¿ç”¨VBOï¼Œä»¥åŠä½¿ç”¨å’Œä¸ä½¿ç”¨æ‰“åŒ…ç¼“å†²åŒºè¿›è¡Œæ¸²æŸ“çš„ç¤ºä¾‹ã€‚æ£€æŸ¥ä»£ç ä»¥æŸ¥çœ‹å¦‚ä½•å¤„ç†ä¸€ä¸‹æŸäº›æ“ä½œï¼š\n\né€šè¿‡runOnUiThread()å°†äº‹ä»¶ä»OpenGLçº¿ç¨‹å‘å¸ƒå›UIä¸»çº¿ç¨‹\nå¼‚æ­¥ç”Ÿæˆé¡¶ç‚¹æ•°æ®\nå¤„ç†å†…å­˜æº¢å‡ºå¼‚å¸¸\næˆ‘ä»¬ç§»é™¤äº†glEnable(GL_TEXTURE_2D)çš„è°ƒç”¨ï¼Œå› ä¸ºå®ƒå®é™…åœ¨OpenGL ES 2æ˜¯ä¸€ä¸ªæ— æ•ˆæšä¸¾ã€‚è¿™æ˜¯ä»¥å‰çš„å›ºå®šå†™æ³•å»¶ç»­ä¸‹æ¥çš„ï¼Œåœ¨OpenGLES2ä¸­ï¼Œè¿™äº›ä¸œè¥¿ç”±ç€è‰²å™¨å¤„ç†ï¼Œå› æ­¤ä¸éœ€è¦ä½¿ç”¨glEnableæˆ–glDisableã€‚\næ€æ ·ä½¿ç”¨ä¸åŒçš„æ–¹å¼è¿›è¡Œæ¸²æŸ“ï¼Œè€Œä¸æ·»åŠ å¤ªå¤šçš„ifè¯­å¥å’Œæ¡ä»¶ã€‚\n\nè¿›ä¸€æ­¥ç»ƒä¹ æ‚¨ä½•æ—¶ä½¿ç”¨é¡¶ç‚¹ç¼“å†²åŒºï¼Ÿä»€ä¹ˆæ—¶å€™ä»å®¢æˆ·ç«¯å†…å­˜ä¼ è¾“æ•°æ®æ›´å¥½ï¼Ÿä½¿ç”¨é¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡æœ‰å“ªäº›ç¼ºç‚¹ï¼Ÿæ‚¨å°†å¦‚ä½•æ”¹è¿›å¼‚æ­¥åŠ è½½ä»£ç ï¼Ÿ\næ•™ç¨‹ç›®å½•\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\nOpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€\nOpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰\nOpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤\nOpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVBOï¼‰\n\næ‰“åŒ…æ•™æå¯ä»¥åœ¨Githubä¸‹è½½æœ¬è¯¾ç¨‹æºä»£ç ï¼šä¸‹è½½é¡¹ç›®æœ¬è¯¾çš„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿå¯ä»¥å†Androidå¸‚åœºä¸‹ï¼šgoogle play ä¸‹è½½apkä¸ºäº†æ–¹ä¾¿å¤§å®¶ä¸‹è½½ï¼Œâ€œæˆ‘â€ä¹Ÿç¼–è¯‘äº†ä¸ªapkï¼Œï¼šgithub download\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-opengl/20190324170029.png","plink":"https://blog.xujiaji.com/post/Learn-OpenGL-Lesson-Seven/"},{"title":"OpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤","date":"2019-02-19T08:24:18.000Z","author":"xujiaji","updated":"2019-04-08T06:56:15.793Z","content":"\nç¿»è¯‘æ–‡\n\nåŸæ–‡æ ‡é¢˜ï¼šAndroid Lesson Six: An Introduction to Texture FilteringåŸæ–‡é“¾æ¥ï¼šhttp://www.learnopengles.com/android-lesson-six-an-introduction-to-texture-filtering/\n\nä»‹ç»çº¹ç†è¿‡æ»¤\n\n\n\nè¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†ä»‹ç»åŸºæœ¬çº¹ç†è¿‡æ»¤çš„ä¸åŒç±»å‹å’Œæ€æ ·ä½¿ç”¨å®ƒä»¬ï¼ŒåŒ…æ‹¬æœ€é‚»è¿‘ï¼ˆnearest-neighbourï¼‰è¿‡æ»¤ï¼ŒåŒçº¿æ€§(bilinear)è¿‡æ»¤ï¼Œå’Œä½¿ç”¨mipmapçš„ä¸‰çº¿æ€§(trilinear)è¿‡æ»¤ã€‚ä½ å°†å­¦ä¹ å¦‚ä½•ä½¿çº¹ç†çœ‹èµ·æ¥æ›´å¹³æ»‘ï¼Œä»¥åŠå¹³æ»‘å¸¦æ¥çš„ç¼ºç‚¹ã€‚[è¿™å„¿æœ‰æ—‹è½¬ç‰©ä½“][]çš„ä¸åŒæ–¹å¼ï¼Œæœ¬è¯¾ä½¿ç”¨äº†å…¶ä¸­ä¸€ã€‚\n\n\n\n\nå‰ææ¡ä»¶å¼ºçƒˆå»ºè®®æ‚¨å…ˆé˜…è¯»OpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€ï¼Œç†è§£çº¹ç†æ˜ å°„åœ¨OpenGLä¸­çš„åŸºæœ¬ä½¿ç”¨ã€‚\nä»€ä¹ˆæ˜¯çº¹ç†è¿‡æ»¤ï¼ŸOpenGLESä¸­çš„çº¹ç†ç”±å…ƒç´ æ•°ç»„ç»„æˆï¼Œè¢«ç§°ä¸ºçº¹ç´ (texels)ï¼Œå…¶ä¸­åŒ…å«é¢œè‰²å’Œalphaå€¼ã€‚è¿™ä¸æ˜¾ç¤ºå™¨ç›¸å¯¹åº”ï¼Œæ˜¾ç¤ºå™¨ç”±ä¸€å †åƒç´ ç»„æˆï¼Œå¹¶åœ¨æ¯ä¸ªç‚¹æ˜¾ç¤ºä¸åŒçš„é¢œè‰²ã€‚åœ¨OpenGLä¸­çº¹ç†è¢«ç”¨åœ¨ä¸‰è§’å½¢ä¸Šå¹¶ç»˜åˆ¶åˆ°å±å¹•ï¼Œå› æ­¤è¿™äº›çº¹ç†èƒ½ç»˜åˆ¶å‡ºå„ç§å„æ ·çš„å°ºå¯¸å’Œæ–¹å‘ã€‚OpenGLä¸­çš„çº¹ç†è¿‡æ»¤é€‰é¡¹å‘Šè¯‰å®ƒå¦‚ä½•æ ¹æ®å…·ä½“æƒ…å†µå°†çº¹ç†åƒç´ è¿‡æ»¤åˆ°è®¾å¤‡çš„åƒç´ ä¸Šã€‚\n\næœ‰ä¸‰ç§æƒ…å†µï¼š\n\n\næ¯ä¸ªçº¹ç´ æ˜ å°„åˆ°å¤šä¸ªåƒç´ ï¼Œè¿™è¢«ç§°ä¸ºæ”¾å¤§(magnification)\næ¯ä¸ªçº¹ç´ ç²¾ç¡®çš„æ˜ å°„åˆ°ä¸€ä¸ªåƒç´ ï¼Œè¿‡æ»¤ä¸é€‚åˆè¿™ç§æƒ…å†µ\næ¯ä¸ªçº¹ç´ æ˜ å°„å°‘äºä¸€ä¸ªåƒç´ ï¼Œè¿™è¢«ç§°ä¸ºç¼©å°(minification)\n\nOpenGLå…è®¸æˆ‘ä»¬ä¸ºæ”¾å¤§å’Œç¼©å°åˆ†é…è¿‡æ»¤å™¨ï¼Œå¹¶å…è®¸æˆ‘ä»¬ä½¿ç”¨æœ€é‚»è¿‘ã€åŒçº¿æ€§å’Œä¸‰çº¿æ€§è¿‡æ»¤ã€‚æˆ‘ä»¬å°†åœ¨ä¸‹é¢è§£é‡Šè¿™äº›æ„æ€ã€‚\næ”¾å¤§å’Œç¼©å°è¿™é‡Œæ˜¯æ”¾å¤§å’Œç¼©å°çš„æœ€é‚»è¿‘æ¸²æŸ“çš„å¯è§†åŒ–ï¼Œå½“æ‚¨ç”¨USBè¿æ¥ä½ çš„Androidè®¾å¤‡æ—¶ä½¿ç”¨è¿™ä¸ªå¯çˆ±çš„Androidæ˜¾ç¤ºæˆåŠŸè¿æ¥ã€‚\n\næ”¾å¤§\næ­£å¦‚æ‚¨æ‰€è§ï¼Œçº¹ç´ ç°åœ¨å¾ˆå®¹æ˜“çœ‹åˆ°ï¼Œå› ä¸ºå½“å‰ä¸€ä¸ªçº¹ç´ è¦†ç›–äº†å¾ˆå¤šåƒç´ å±•ç¤ºå‡ºæ¥ã€‚\nç¼©å°\néšç€ç¼©å°ï¼Œè®¸å¤šçº¹ç´ ä¸èƒ½æ¸²æŸ“åˆ°æœ‰é™çš„åƒç´ ä¸Šï¼Œè®¸å¤šç»†èŠ‚å°†ä¼šä¸¢å¤±ã€‚\nçº¹ç†è¿‡æ»¤æ¨¡å¼åŒçº¿æ€§æ’å€¼ï¼ˆBilinear interpolationï¼‰å½“çº¹ç´ å€¼ä¹‹é—´æ²¡æœ‰æ’å€¼æ—¶ï¼Œåœ¨æ”¾å¤§ç¤ºä¾‹ä¸­ï¼Œçº¹ç†çš„çº¹ç´ æ¸…æ™°å¯è§ä¸ºå¤§æ­£æ–¹å½¢ã€‚å½“ä½¿ç”¨æœ€é‚»è¿‘æ–¹å¼æ—¶ï¼Œåƒç´ å°†ä¼šåˆ†é…åˆ°æœ€é‚»è¿‘çš„åƒç´ ã€‚\né€šè¿‡åˆ‡æ¢åˆ°åŒçº¿æ€§æ’å€¼ï¼Œæ¸²æŸ“è´¨é‡æ˜¾è‘—æé«˜ã€‚è¿™äº›å€¼å°†ä¼šåœ¨é‚»è¿‘çš„å››ä¸ªåƒç´ ä¹‹é—´çº¿æ€§æ’å€¼ï¼Œè€Œä¸æ˜¯å°†ä¸€ç»„åƒç´ åˆ†é…ç»™é‚»è¿‘ç›¸åŒçš„çº¹ç´ å€¼ã€‚æ¯ä¸ªåƒç´ è¢«å¹³æ»‘åŒ–ï¼Œä½¿å¾—æœ€åçš„å›¾ç‰‡çœ‹èµ·æ¥ä¹Ÿæ›´å¹³æ»‘ï¼š\n\nä¸€äº›å—æ•ˆæœä»ç„¶å¾ˆæ˜æ˜¾ï¼Œä½†æ˜¯è¿™ä¸ªå›¾ç‰‡çœ‹èµ·æ¥æ¯”ä¹‹å‰æ›´åŠ å¹³æ»‘ã€‚é‚£äº›åœ¨3DåŠ é€Ÿå¡å‡ºç°å‰ç©è¿‡3Dæ¸¸æˆçš„äººå°†ä¼šè®°å¾—è½¯ä»¶æ¸²æŸ“æ¸¸æˆå’Œç¡¬ä»¶åŠ é€Ÿæ¸¸æˆä¹‹é—´çš„ç‰¹æ€§ï¼šè½¯ä»¶æ¸²æŸ“æ¸¸æˆæ ¹æœ¬æ²¡æœ‰è¿›è¡Œé¢„è®¡ç®—å¤„ç†ï¼Œæ‰€ä»¥ä¸€åˆ‡éƒ½æ˜¾ç¤ºå¾—å—çŠ¶å’Œé”¯é½¿çŠ¶ã€‚ä¸€æ—¦äººä»¬å¼€å§‹ä½¿ç”¨å›¾å½¢åŠ é€Ÿï¼Œè¿™äº›ä¸œè¥¿éƒ½å°†å˜å¾—å¹³æ»‘ã€‚\n\nåŒçº¿æ€§æ’å€¼å¤§å¤šä½¿ç”¨åœ¨æ”¾å¤§ã€‚å®ƒä¹Ÿèƒ½ä½¿ç”¨åœ¨ç¼©å°ï¼Œä½†æ˜¯è¶…è¿‡æŸä¸ªåº¦ï¼Œæˆ‘ä»¬å°†ä¼šé‡åˆ°åŒæ ·çš„é—®é¢˜ï¼Œæˆ‘ä»¬åœ¨å°è¯•å°†å¤ªå¤šçš„çº¹ç´ æ”¾åˆ°ç›¸åŒçš„åƒç´ ä¸Šã€‚OpenGLä»…ä½¿ç”¨æœ€å¤š4ä¸ªçº¹ç´ æ¸²æŸ“ä¸€ä¸ªåƒç´ ï¼Œå› æ­¤è®¸å¤šä¿¡æ¯ä»ç„¶ä¼šä¸¢å¤±ã€‚\nå¦‚æœæˆ‘ä»¬çœ‹åº”ç”¨äº†åŒçº¿æ€§æ’å€¼çš„çº¹ç†ï¼Œå½“æˆ‘ä»¬åœ¨è¿œå¤„çœ‹å®ƒç§»åŠ¨æ—¶çœ‹èµ·æ¥ä¼šå¾ˆå˜ˆæ‚ï¼Œå› ä¸ºæ¯å¸§éƒ½ä¼šé€‰æ‹©ä¸åŒçš„çº¹ç´ ã€‚\nçº¹ç†æ˜ å°„ï¼ˆMipmappingï¼‰æˆ‘ä»¬å¦‚ä½•æ‰èƒ½åœ¨ç¼©å°çº¹ç†æ—¶ä¸å¼•ç”¨å˜ˆæ‚å¹¶ä½¿ç”¨ä¸Šæ‰€æœ‰çº¹ç´ å‘¢ï¼Ÿæˆ‘ä»¬å¯ä»¥ç”Ÿæˆä¸€ç»„ä¼˜åŒ–åçš„ä¸åŒå°ºå¯¸çš„çº¹ç†ï¼Œç„¶ååœ¨æˆ‘ä»¬è¿è¡Œçš„æ—¶å€™ä½¿ç”¨å®ƒä»¬ã€‚ç”±äºè¿™äº›çº¹ç†å·²é¢„å…ˆç”Ÿæˆï¼Œå®ƒä»¬èƒ½ä½¿ç”¨æ›´å¤šé«˜æ˜‚çš„æŠ€æœ¯å»è¿‡æ»¤æ‰€æœ‰çº¹ç´ ï¼Œå¹¶ä¸”åœ¨è¿è¡Œæ—¶OpenGLä¼šæ ¹æ®çº¹ç†åœ¨å±å¹•ä¸Šçš„æœ€ç»ˆå¤§å°é€‰æ‹©æœ€åˆé€‚çš„å±‚ã€‚\n\nç”Ÿæˆçš„å›¾ç‰‡å¯ä»¥å…·æœ‰æ›´å¤šç»†èŠ‚ï¼Œæ›´å°‘å™ªç‚¹ï¼Œå¹¶ä¸”æ•´ä½“ä¸Šçœ‹èµ·æ¥æ›´å¥½ã€‚å°½ç®¡éœ€è¦æ›´å¤šçš„å†…å­˜ï¼Œä½†æ¸²æŸ“é€Ÿåº¦ä¹Ÿä¼šæ›´å¿«ï¼Œå› ä¸ºè¾ƒå°çš„å±‚çº§èƒ½æ›´å®¹æ˜“ä¿å­˜åœ¨GPUçš„çº¹ç†ç¼“å­˜ä¸­ã€‚è®©æˆ‘ä»¬æ¥ä»”ç»†ç ”ç©¶ä¸€ä¸‹åŸå°ºå¯¸çš„1/8å€çš„å›¾ç‰‡ï¼Œåœ¨ä½¿ç”¨äº†åŒçº¿æ€§è¿‡æ»¤ä½¿ç”¨çº¹ç†æ˜ å°„å’ŒåŒçº¿æ€§è¿‡æ»¤æ²¡æœ‰ä½¿ç”¨æ˜ å°„ã€‚ä¸ºäº†æ¸…æ¥šå›¾ç‰‡å·²è¢«æ‰©å¤§ï¼š\nåŒçº¿æ€§è¿‡æ»¤æ²¡æœ‰mipmap\nåŒçº¿æ€§è¿‡æ»¤+mipmap\nä½¿ç”¨mipmapçš„ç‰ˆæœ¬æ‹¥æœ‰æ›´å¤šç»†èŠ‚ï¼Œç”±äºå›¾åƒé¢„å¤„ç†åˆ°å•ç‹¬çš„å±‚çº§ï¼Œæ‰€æœ‰çº¹ç´ æœ€ç»ˆéƒ½ä¼šåœ¨æœ€ç»ˆçš„å›¾åƒä¸­ä½¿ç”¨ã€‚\nä¸‰çº¿æ€§è¿‡æ»¤ï¼ˆTrilinear filteringï¼‰å½“ä½¿ç”¨åŒçº¿æ€§è¿‡æ»¤çš„mipmapæ—¶ï¼Œæœ‰æ—¶åœ¨æ¸²æŸ“åœºæ™¯ä¸­å¯ä»¥çœ‹åˆ°æ˜æ˜¾çš„è·³è·ƒæˆ–çº¿ï¼Œç”±äºOpenGLåœ¨çº¹ç†çš„ä¸åŒmipmapå±‚çº§ä¹‹é—´åˆ‡æ¢ã€‚æ¯”è¾ƒä¸åŒçš„OpenGLçº¹ç†çš„è¿‡æ»¤æ¨¡å¼å°†åœ¨ä¸‹é¢è¿›ä¸€æ­¥æŒ‡å‡ºã€‚\nä¸‰çº¿æ€§æ’å€¼é€šè¿‡åœ¨ä¸åŒmipmapå±‚çº§ä¹‹é—´æ’å€¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œè¿™æ ·æ€»å…±8ä¸ªçº¹ç´ å°†ç”¨äºæ’å€¼å¾—åˆ°æœ€ç»ˆçš„åƒç´ å€¼ï¼Œä½¿å¾—å›¾åƒæ›´å¹³æ»‘ã€‚\nOpenGL çº¹ç†è¿‡æ»¤æ¨¡å¼OpenGLæœ‰ä¸¤ä¸ªå¯è¢«è®¾ç½®çš„å‚æ•°ï¼š\n\nGL_TEXTURE_MIN_FILTER çº¹ç†ç¼©å°æ—¶çš„è¿‡æ»¤æ¨¡å¼\nGL_TEXTURE_MAG_FILTER çº¹ç†æ”¾å¤§æ—¶çš„è¿‡æ»¤æ¨¡å¼\n\nè¿™äº›ç›¸å¯¹åº”äºä¸Šé¢çš„ç¼©å°å’Œæ”¾å¤§æè¿°ã€‚  \n\nGL_TEXTURE_MIN_FILTERæ¥å—ä»¥ä¸‹é€‰é¡¹ï¼š\nGL_NEAREST\nGL_LINEAR\nGL_NEAREST_MIPMAP_NEAREST\nGL_NEAREST_MIPMAP_LINEAR\nGL_LINEAR_MIPMAP_NEAREST\nGL_LINEAR_MIPMAP_LINEAR\n\n\nGL_TEXTURE_MAG_FILTERæ¥å—ä»¥ä¸‹é€‰é¡¹ï¼š\nGL_NEAREST\nGL_LINEAR\n\n\n\nGL_NEAREST å¯¹åº”æœ€é‚»è¿‘æ¸²æŸ“ï¼›GL_LINEAR å¯¹åº”åŒçº¿æ€§è¿‡æ»¤ï¼›GL_LINEAR_MIPMAP_NEAREST å¯¹åº”åŒçº¿æ€§è¿‡æ»¤+mipmapï¼›GL_LINEAR_MIPMAP_LINEAR å¯¹åº”ä¸‰çº¿æ€§è¿‡æ»¤ï¼›æœ¬è¯¾ä¸­å°†è¿›ä¸€æ­¥ä»‹ç»å›¾å½¢ç¤ºä¾‹å’Œæœ€å¸¸è§é€‰é¡¹çš„è¿›ä¸€æ­¥è¯´æ˜ã€‚\næ€æ ·è®¾ç½®çº¹ç†è¿‡æ»¤æ¨¡å¼æˆ‘ä»¬é¦–å…ˆéœ€è¦ç»‘å®šçº¹ç†ï¼Œç„¶åæˆ‘ä»¬åœ¨è¿™ä¸ªçº¹ç†ä¸Šè®¾ç½®åˆé€‚çš„è¿‡æ»¤å‚æ•°ï¼š\n12GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureHandle);GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, filter);\næ€æ ·ç”Ÿæˆmipmapè¿™çœŸçš„å¾ˆå®¹æ˜“ï¼åœ¨åŠ è½½çº¹ç†åˆ°OpenGLä¸­åï¼Œçº¹ç†ä»ç„¶æ˜¯ç»‘å®šçš„ï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•çš„è°ƒç”¨ï¼š\n1GLES20.glGenerateMipmap(GLES20.GL_TEXTURE_2D);\nå®ƒå°†ä¸ºæˆ‘ä»¬ç”Ÿæˆæ‰€æœ‰çš„mipmapå±‚çº§ï¼Œå¹¶ä¸”è¿™äº›å±‚çº§ä¼šæ ¹æ®çº¹ç†è¿‡æ»¤è‡ªåŠ¨ä½¿ç”¨ã€‚\nå®ƒçœ‹èµ·æ¥æ€ä¹ˆæ ·ï¼Ÿä»¥ä¸‹æ˜¯å¯ç”¨çš„æœ€å¸¸è§çš„ç»„åˆçš„å±å¹•æˆªå›¾ï¼Œå½“ä½ çœ‹åˆ°å®ƒè¿åŠ¨ä¸­æ—¶ï¼Œæ•ˆæœæ›´åŠ å¼•äººæ³¨ç›®ï¼Œå› æ­¤æˆ‘å»ºè®®ä¸‹è½½è¿™ä¸ªAppå¹¶è¯•ä¸€è¯•ã€‚\næœ€é‚»è¿‘æ¸²æŸ“è¿™ä¸ªæ¨¡å¼è®©äººæƒ³èµ·æ—§ç‰ˆ3Dæ¸¸æˆè½¯ä»¶çš„æ¸²æŸ“ã€‚\n12GL_TEXTURE_MIN_FILTER = GL_NEARESTGL_TEXTURE_MAG_FILTER = GL_NEAREST\n\nåŒçº¿æ€§è¿‡æ»¤ï¼Œmipmapè®¸å¤šæ”¯æŒ3DåŠ é€Ÿçš„é¦–æ‰¹æ¸¸æˆéƒ½ä½¿ç”¨æ­¤æ¨¡å¼ï¼Œè¿™æ˜¯ä»Šå¤©åœ¨Androidæ‰‹æœºä¸Šå¹³æ»‘çº¹ç†çš„æœ‰æ•ˆæ–¹å¼ã€‚\n12GL_TEXTURE_MIN_FILTER = GL_LINEAR_MIPMAP_NEARESTGL_TEXTURE_MAG_FILTER = GL_LINEAR\n\né™æ€å›¾ä¸Šå¾ˆéš¾çœ‹å›¾é—®é¢˜ï¼Œä½†æ˜¯å½“ç‰©ä½“è¿åŠ¨æ—¶ï¼Œæ‚¨å¯èƒ½ä¼šæ³¨æ„åˆ°æ¸²æŸ“çš„åƒç´ åœ¨mipmapå±‚çº§ä¹‹é—´åˆ‡æ¢çš„æ°´å¹³æ¡å¸¦ã€‚\nä¸‰çº¿æ€§è¿‡æ»¤æ­¤æ¨¡å¼é€šè¿‡åœ¨mipmapå±‚çº§ä¹‹é—´è¿›è¡Œæ’å€¼ï¼Œæ”¹è¿›äº†ä½¿ç”¨mipmapçš„åŒçº¿æ€§è¿‡æ»¤çš„æ¸²æŸ“è´¨é‡ã€‚\n12GL_TEXTURE_MIN_FILTER = GL_LINEAR_MIPMAP_LINEARGL_TEXTURE_MAG_FILTER = GL_LINEAR\n\nåƒç´ åœ¨è¿‘è·ç¦»å’Œè¿œè·ç¦»ä¹‹é—´å®Œå…¨å¹³æ»‘ï¼›äº‹å®ä¸Šï¼Œçº¹ç†ç°åœ¨å¯èƒ½åœ¨å€¾æ–œè§’åº¦ä¸‹æ˜¾ç¤ºçš„è¿‡äºå¹³æ»‘ã€‚å„å‘å¼‚æ€§è¿‡æ»¤ï¼ˆAnisotropic filteringï¼‰æ˜¯ä¸€ç§æ›´å…ˆè¿›çš„æŠ€æœ¯ï¼Œå—åˆ°æŸäº›ç§»åŠ¨GPUçš„æ”¯æŒï¼Œå¯ç”¨äºæ”¹å–„æœ€ç»ˆç»“æœï¼Œè¶…å‡ºä¸‰çº¿æ€§è¿‡æ»¤æ‰€èƒ½æä¾›çš„æ•ˆæœã€‚\nè¿›ä¸€æ­¥ç»ƒä¹ ä½¿ç”¨å…¶ä»–æ¨¡å¼å¯ä»¥è¾¾åˆ°ä»€ä¹ˆæ ·çš„æ•ˆæœï¼Ÿä¾‹å¦‚ï¼Œæ‚¨ä½•æ—¶ä¼šä½¿ç”¨åƒGL_NEAREST_MIPMAP_LINEARè¿™æ ·çš„ä¸œè¥¿ï¼Ÿ\næ•™ç¨‹ç›®å½•\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\nOpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€\nOpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰\nOpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤\nOpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVOBï¼‰\n\næ‰“åŒ…æ•™æå¯ä»¥åœ¨Githubä¸‹è½½æœ¬è¯¾ç¨‹æºä»£ç ï¼šä¸‹è½½é¡¹ç›®æœ¬è¯¾çš„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿå¯ä»¥å†Androidå¸‚åœºä¸‹ï¼šgoogle play ä¸‹è½½apkâ€œæˆ‘â€ä¹Ÿç¼–è¯‘äº†ä¸ªapkï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½ï¼šgithub download\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-opengl/20190224214007.jpg","plink":"https://blog.xujiaji.com/post/Learn-OpenGL-Lesson-Six/"},{"title":"OpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰","date":"2019-02-12T08:37:00.000Z","author":"xujiaji","updated":"2019-04-08T06:55:57.729Z","content":"\nç¿»è¯‘æ–‡\n\nåŸæ–‡æ ‡é¢˜ï¼šAndroid Lesson Five: An Introduction to BlendingåŸæ–‡é“¾æ¥ï¼šhttp://www.learnopengles.com/android-lesson-five-an-introduction-to-blending/\n\nä»‹ç»æ··åˆï¼ˆBlendingï¼‰\n\n\n\nè¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¥å­¦ä¹ æ··åˆ(blending)åœ¨OpenGLä¸­çš„åŸºæœ¬ä½¿ç”¨ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•æ‰“å¼€æˆ–å…³é—­æ··åˆï¼Œæ€æ ·è®¾ç½®ä¸åŒçš„æ··åˆæ¨¡å¼ï¼Œä»¥åŠä¸åŒçš„æ··åˆæ¨¡å¼å¦‚ä½•æ¨¡ä»¿æ˜¾ç¤ºç”Ÿæ´»ä¸­çš„æ•ˆæœã€‚åœ¨åé¢çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿˜å°†ä»‹ç»å¦‚ä½•ä½¿ç”¨alphaé€šé“ï¼Œå¦‚ä½•ä½¿ç”¨æ·±åº¦ç¼“å†²åŒºåœ¨åŒä¸€ä¸ªåœºæ™¯ä¸­æ¸²æŸ“åŠé€æ˜å’Œä¸é€æ˜çš„ç‰©ä½“ï¼Œä»¥åŠä»€ä¹ˆæ—¶å€™æŒ‰æ·±åº¦æ’åºå¯¹è±¡ï¼Œä»¥åŠä¸ºä»€ä¹ˆã€‚æˆ‘ä»¬è¿˜å°†ç ”ç©¶å¦‚ä½•ç›‘å¬è§¦æ‘¸äº‹ä»¶ï¼Œç„¶ååŸºäºæ­¤æ›´æ”¹æ¸²æŸ“çŠ¶æ€ã€‚\nåŸºæœ¬æ··åˆ\n\n\n\nå‰ææ¡ä»¶æœ¬ç³»åˆ—æ¯ä¸ªè¯¾ç¨‹æ„å»ºéƒ½æ˜¯ä»¥å‰ä¸€ä¸ªè¯¾ç¨‹ä¸ºåŸºç¡€ã€‚ç„¶è€Œï¼Œå¯¹äºè¿™èŠ‚è¯¾ï¼Œå¦‚æœæ‚¨ç†è§£äº†OpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨å°±è¶³å¤Ÿäº†ã€‚å°½ç®¡ä»£ç åŸºæœ¬ä¸Šæ˜¯å‰ä¸€è¯¾çš„ï¼Œç…§æ˜å’Œçº¹ç†éƒ¨åˆ†å·²åœ¨æœ¬è¯¾ä¸­ç§»é™¤ï¼Œå› æ­¤æˆ‘ä»¬ä»…å…³æ³¨æ··åˆã€‚\næ··åˆï¼ˆBlendingï¼‰æ··åˆæ˜¯å°†ä¸€ç§é¢œè‰²ä¸å¦ä¸€ç§é¢œè‰²ç»„åˆä»¥è·å¾—ç¬¬ä¸‰ç§é¢œè‰²çš„è¡Œä¸ºã€‚æˆ‘ä»¬åœ¨ç°å®ä¸–ç•Œä»»ä½•æ—¶å€™éƒ½èƒ½çœ‹åˆ°æ··åˆï¼šå½“å…‰ç©¿è¿‡ç»ç’ƒæ—¶ï¼Œå½“å®ƒä»è¡¨é¢åå°„æ—¶ï¼Œå½“å…‰æºæœ¬èº«å åŠ åœ¨èƒŒæ™¯ä¸Šæ—¶ï¼Œä¾‹å¦‚æˆ‘ä»¬åœ¨æ™šä¸Šçœ‹åˆ°ä¸€ç›æ˜äº®çš„è·¯ç¯å‘¨å›´çš„è€€æ–‘ã€‚\nOpenGLæœ‰ä¸åŒçš„æ··åˆæ¨¡å¼ï¼Œæˆ‘ä»¬èƒ½ä½¿ç”¨å®ƒæ¨¡æ‹Ÿè¿™ç§æ•ˆæœã€‚åœ¨OpenGLä¸­ï¼Œæ··åˆå‘ç”Ÿåœ¨æ¸²æŸ“è¿‡ç¨‹çš„åæœŸï¼šä¸€æ—¦ç‰‡æ®µç€è‰²å™¨è®¡ç®—å‡ºç‰‡æ®µçš„æœ€ç»ˆè¾“å‡ºé¢œè‰²å¹¶ä¸”å®ƒå³å°†è¢«å†™å…¥å¸§ç¼“å†²åŒºï¼Œå°±ä¼šå‘ç”Ÿè¿™ç§æƒ…å†µã€‚é€šå¸¸æƒ…å†µä¸‹ï¼Œè¿™ç‰‡æ®µä¼šè¦†ç›–ä¹‹å‰æ‰€æœ‰å†…å®¹ï¼Œä½†å¦‚æœå¯ç”¨äº†æ··åˆï¼Œé‚£ä¹ˆè¯¥ç‰‡æ®µå°†ä¸ä¹‹å‰çš„ç‰‡æ®µæ··åˆã€‚\né»˜è®¤æƒ…å†µä¸‹ï¼Œå½“glBlendEquation()è®¾ç½®ä¸ºé»˜è®¤å€¼GL_FUNC_ADDæ—¶OpenGLçš„é»˜è®¤æ··åˆæ–¹ç¨‹å¼ä¸ºï¼š\n12// è¾“å‡º = ï¼ˆæºå› å­ * æºç‰‡æ®µï¼‰ + ï¼ˆç›®æ ‡å› å­ * ç›®æ ‡ç‰‡æ®µï¼‰output = (source factor * source fragment) + (destination factor * destination fragment)\nOpenGL ES 2 ä¸­è¿˜æœ‰å¦å¤–ä¸¤ç§æ¨¡å¼GL_FUNC_SUBTRACTå’ŒGL_FUNC_REVERSE_SUBTRACTã€‚è¿™äº›å¯èƒ½åœ¨ä»¥åçš„æ•™ç¨‹ä¸­ä»‹ç»ï¼Œç„¶è€Œï¼Œå½“æˆ‘å°è¯•è°ƒç”¨æ­¤å‡½æ•°æ—¶ï¼Œæˆ‘åœ¨Nexus Sä¸Šé‡åˆ°äº†UnsupportedOperationExceptionï¼Œå› æ­¤Androidå®ç°å¯èƒ½å®é™…ä¸Šä¸æ”¯æŒæ­¤åŠŸèƒ½ã€‚è¿™ä¸æ˜¯ä¸–ç•Œæœ«æ—¥ï¼Œå› ä¸ºä½ å¯ä»¥ç”¨GL_FUNC_ADDåšå¾ˆå¤šäº‹æƒ…ã€‚\nä½¿ç”¨å‡½æ•°glBlendFunc()è®¾ç½®æºå› å­å’Œç›®æ ‡å› å­ã€‚ä¸‹é¢å°†ç»™å‡ºå‡ ä¸ªå¸¸è§æ··åˆå› å­çš„æ¦‚è¿°ï¼›æ›´å¤šä¿¡æ¯ä»¥åŠä¸åŒå¯èƒ½çš„å› ç´ çš„åˆ—ä¸¾ï¼Œè¯·å‚é˜…Khronosåœ¨çº¿æ‰‹å†Œï¼š\n\nglBlendFunc()\nglBlendEquation()\n\næˆªå–ï¼ˆClampingï¼‰OpenGLé¢„æœŸçš„è¾“å…¥è¢«é™åˆ¶åœ¨[0,1]çš„èŒƒå›´å†…ï¼Œå¹¶ä¸”è¾“å…¥ä¹Ÿè¢«é™åˆ¶åœ¨[0,1]ã€‚è¿™åœ¨å®è·µä¸­æ„å‘³ç€å½“æ‚¨è¿›è¡Œæ··åˆæ—¶ï¼Œé¢œè‰²å¯ä»¥åœ¨è‰²è°ƒä¸­ç§»åŠ¨ã€‚å¦‚æœç»§ç»­æƒ³å¸§ç¼“å†²åŒºæ·»åŠ çº¢è‰²ï¼ˆRGB = 1ï¼Œ0ï¼Œ0ï¼‰ï¼Œæœ€ç»ˆé¢œè‰²ä¼šæ˜¯çº¢è‰²ã€‚å¦‚æœæƒ³æ·»åŠ ä¸€ç‚¹å„¿ç»¿è‰²ï¼Œæ‚¨è¦æ·»åŠ ï¼ˆRGB = 1ï¼Œ0.1ï¼Œ0ï¼‰åˆ°ç¼“å†²åŒºï¼Œå³ä½¿æ‚¨å¼€å§‹å¸¦çº¢è‰²çš„è‰²è°ƒï¼Œæœ€åä¹Ÿä¼šå¾—åˆ°é»„è‰²ï¼æ‰“å¼€æ··åˆæ—¶ï¼Œæ‚¨å¯ä»¥åœ¨æœ¬è¯¾ç¨‹çš„Demoä¸­çœ‹åˆ°æ­¤æ•ˆæœï¼šä¸åŒé¢œè‰²çš„é‡å çš„é¢œè‰²å˜å¾—è¿‡é¥±å’Œã€‚\nä¸åŒç±»å‹çš„æ··åˆä»¥åŠå®ƒä»¬æœ‰æ€æ ·ä¸åŒçš„æ•ˆæœç›¸åŠ æ··åˆï¼ˆAdditive blendingï¼‰\n\n\n\n\n\n\n\nRGBé¢œè‰²ç›¸åŠ æ¨¡å‹ï¼› æ¥æºï¼šWikipedia\n\n\n\nç›¸åŠ æ··åˆæ˜¯å½“æˆ‘ä»¬æ·»åŠ ä¸åŒé¢œè‰²åœ¨ä¸€èµ·çš„æ··åˆï¼Œè¿™å°±æ˜¯æˆ‘ä»¬çš„è§†è§‰ä¸å…‰ä¸€èµ·å·¥ä½œçš„æ¨¡å¼ï¼Œè¿™å°±æ˜¯æˆ‘ä»¬å¦‚ä½•åœ¨æˆ‘ä»¬çš„æ˜¾ç¤ºå™¨ä¸Šæ„ŸçŸ¥æ•°ç™¾ä¸‡ç§ä¸åŒçš„é¢œè‰²â€”â€”å®ƒä»¬å®é™…ä¸Šåªæ˜¯å°†ä¸‰ç§ä¸åŒçš„åŸè‰²æ··åˆåœ¨ä¸€èµ·ã€‚\nè¿™ç§æ··åˆåœ¨3Dæ··åˆä¸­å¾ˆæœ‰ç”¨ï¼Œä¾‹å¦‚åœ¨ç²’å­æ•ˆæœä¸­ï¼Œå®ƒä»¬ä¼¼ä¹å‘å‡ºå…‰çº¿å’Œè¦†ç›–ç‰©ï¼Œä¾‹å¦‚ç¯å…‰å‘¨å›´çš„å…‰æ™•ï¼Œæˆ–å…‰å‰‘å‘¨å›´çš„å‘å…‰æ•ˆæœã€‚\nç›¸åŠ æ··åˆèƒ½é€šè¿‡è°ƒç”¨glBlendFunc(GL_ONE, GL_ONE)æŒ‡å®šï¼Œæ··åˆçš„ç»“æœç­‰å¼è¾“å‡º=ï¼ˆ1 * æºç‰‡æ®µï¼‰ + ï¼ˆ1 * ç›®æ ‡ç‰‡æ®µï¼‰ï¼Œè¿ç®—åï¼šè¾“å‡º=æºç‰‡æ®µ + ç›®æ ‡ç‰‡æ®µ\nç›¸ä¹˜æ··åˆï¼ˆMultiplicative blendingï¼‰\n\n\n\n\n\n\n\nå…‰ç…§è´´å›¾çš„ä¸€ä¸ªä¾‹å­\n\n\n\nç›¸ä¹˜æ··åˆï¼ˆä¹Ÿç§°ä¸ºè°ƒåˆ¶ï¼‰æ˜¯å¦ä¸€ç§æœ‰ç”¨çš„æ··åˆæ¨¡å¼ï¼Œå®ƒè¡¨ç¤ºå…‰åœ¨é€šè¿‡è¿‡æ»¤å™¨æ—¶çš„è¡Œä¸ºæ–¹å¼ï¼Œæˆ–ä»è¢«ç‚¹ç‡ƒçš„ç‰©ä½“åå°„å¹¶è¿›å…¥æˆ‘ä»¬çš„çœ¼ç›ã€‚ä¸€ä¸ªçº¢è‰²çš„ç‰©ä½“çœ‹ä¸Šå»æ˜¯çº¢è‰²æ˜¯å› ä¸ºç™½å…‰ç…§å°„åˆ°è¿™ä¸ªç‰©ä½“ä¸Šï¼Œè“å…‰å’Œç»¿å…‰è¢«å¸æ”¶ï¼Œåªæœ‰çº¢å…‰åå°„å›æˆ‘ä»¬çš„çœ¼ç›ã€‚åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°ä¸€äº›çº¢è‰²å’Œç»¿è‰²ï¼Œä½†æ˜¯å¾ˆå°‘ä¼šæœ‰ä¸€ç‚¹è“è‰²ã€‚\nå½“å¤šçº¹ç†ä¸å¯ç”¨æ—¶ï¼Œä¹˜æ³•æ··åˆç”¨äºåœ¨æ¸¸æˆä¸­å®ç°å…‰ç…§è´´å›¾ã€‚çº¹ç†ä¸å…‰ç…§è´´å›¾ç›¸ä¹˜ï¼Œä»¥å¡«å……åœ¨æ˜äº®å’Œé˜´å½±çš„åŒºåŸŸã€‚\nç›¸ä¹˜æ··åˆèƒ½é€šè¿‡è°ƒç”¨glBlendFunc(GL_DST_COLOR, GL_ZERO)æŒ‡å®šï¼Œå…¶æ··åˆçš„ç»“æœç­‰å¼è¾“å‡º=ï¼ˆç›®æ ‡ç‰‡æ®µ * æºç‰‡æ®µï¼‰+ ï¼ˆ0 * ç›®æ ‡ç‰‡æ®µï¼‰ï¼Œå†™ä½œï¼šè¾“å‡º=ç›®æ ‡ç‰‡æ®µ * æºç‰‡æ®µã€‚\næ’å€¼æ··åˆï¼ˆInterpolative blendingï¼‰\n\n\n\n\n\n\n\nä¸€ä¸ªä¸¤ä¸ªçº¹ç†ä¸€èµ·æ’å€¼çš„æ¡ˆä¾‹\n\n\n\næ’å€¼æ··åˆç»“åˆäº†ä¹˜æ³•å’ŒåŠ æ³•ï¼Œä»¥æä¾›æ’å€¼æ•ˆæœã€‚ä¸æ·»åŠ å’Œè°ƒåˆ¶æœ¬èº«ä¸åŒï¼Œæ­¤æ··åˆæ¨¡å¼ä¹Ÿå¯æ˜¯ä¾èµ–ç»˜åˆ¶é¡ºåºçš„ã€‚å› æ­¤åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œå¦‚æœæ‚¨å…ˆç”»å‡ºæœ€è¿œçš„åŠé€æ˜ç‰©ä½“ï¼Œç„¶åç»˜åˆ¶æ›´è¿‘çš„ç‰©ä½“ï¼Œç»“æœæ‰ä¼šæ˜¯æ­£ç¡®ã€‚å³ä½¿æ’åºä¹Ÿä¸æ˜¯å®Œç¾ï¼Œå› ä¸ºä¸‰è§’å½¢å¯èƒ½é‡å å¹¶ç›¸äº¤ï¼Œä½†äº§ç”Ÿçš„ä¼ªåƒå¯èƒ½æ˜¯å¯æ¥å—çš„ã€‚\næ’å€¼é€šå¸¸æ˜¯å°†ç›¸é‚»çš„è¡¨é¢æ··åˆåœ¨ä¸€èµ·ï¼Œä»¥åŠåšæœ‰è‰²ç»ç’ƒæˆ–æ·¡å…¥æ·¡å‡ºçš„æ•ˆæœã€‚ä¸Šé¢è¿™ä¸ªå›¾ç‰‡æ˜¾ç¤ºäº†ä¸¤ä¸ªçº¹ç†ï¼ˆçº¹ç†æ¥è‡ªå…¬å…±é¢†åŸŸçº¹ç†ï¼‰ä½¿ç”¨æ’å€¼æ··åˆåœ¨ä¸€èµ·ã€‚\næ’å€¼æ··åˆèƒ½é€šè¿‡è°ƒç”¨glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA)æŒ‡å®šï¼Œå…¶æ··åˆç»“æœç­‰å¼è¾“å‡º = ï¼ˆæºalpha * æºç‰‡æ®µï¼‰ + ï¼ˆï¼ˆ1 - æºalphaï¼‰ * ç›®æ ‡ç‰‡æ®µï¼‰ã€‚è¿™æ˜¯ä¸€ä¸ªä¾‹å­ï¼š\næƒ³è±¡ä¸€ä¸‹ï¼Œæˆ‘ä»¬æ­£åœ¨ç»˜åˆ¶ä¸€ä¸ªåªæœ‰25%ä¸é€æ˜çš„ç»¿è‰²ï¼ˆ0ï¼Œ1ï¼Œ0ï¼‰ï¼Œå½“å‰å±å¹•ä¸Šçš„ç‰©ä½“æ—¶çº¢è‰²ï¼ˆ1ï¼Œ0ï¼Œ0ï¼‰ã€‚\n123456è¾“å‡º = ï¼ˆæºå› å­ * æºç‰‡æ®µï¼‰ + ï¼ˆç›®æ ‡å› å­ * ç›®æ ‡ç‰‡æ®µï¼‰è¾“å‡º = ï¼ˆæºalpha * æºç‰‡æ®µï¼‰ + ï¼ˆï¼ˆ1 - æºalphaï¼‰ * ç›®æ ‡ç‰‡æ®µï¼‰è¾“å‡º = (0.25 * (0, 1, 0)) + (0.72 * (1, 0, 0))è¾“å‡º = (0, 0.25, 0) + (0.75, 0, 0)è¾“å‡º = (0.75, 0.25, 0)\næ³¨æ„ï¼Œæˆ‘ä»¬ä¸éœ€è¦å¯¹ç›®æ ‡alphaåšä»»ä½•æ¶‰åŠï¼Œå› ä¸ºè¿™ä¸ªå¸§ç¼“å†²åŒºæœ¬èº«ä¸éœ€è¦alphaé€šé“ï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†æ›´å¤šçš„é¢œè‰²é€šé“ä½ã€‚\nä½¿ç”¨æ··åˆåœ¨æˆ‘ä»¬çš„è¯¾ç¨‹ä¸­ï¼Œæˆ‘ä»¬çš„Demoå°†ä½¿ç”¨ç›¸åŠ æ··åˆå°†ç«‹æ–¹ä½“æ˜¾ç¤ºä¸ºå…‰çš„å‘å°„å™¨ã€‚å‘å…‰çš„ä¸œè¥¿ä¸éœ€è¦å…¶ä»–å…‰æºç…§äº®ï¼Œå› æ­¤è¿™ä¸ªDemoä¸­æ²¡æœ‰ç¯å…‰ã€‚æˆ‘ä¹Ÿåˆ é™¤äº†çº¹ç†ï¼Œè™½ç„¶å®ƒå¯ä»¥å¾ˆå¥½åœ°ä½¿ç”¨ã€‚æœ¬è¯¾ç¨‹çš„ç€è‰²å™¨ç¨‹åºå¾ˆç®€å•ï¼›æˆ‘ä»¬åªéœ€è¦ä¸€ä¸ªå¯ä¼ é€’é¢œè‰²çš„ç€è‰²å™¨ã€‚\né¡¶ç‚¹ç€è‰²å™¨1234567891011uniform mat4 u_MVPMatrix;attribute vec4 a_Position;attribute vec4 a_Color;varying vec4 v_Color;void main()&#123;    v_Color = a_Color;    gl_Position = u_MVPMatrix * a_Position;&#125;\nç‰‡æ®µç€è‰²å™¨1234567precision mediump float;varying vec4 v_Color;void main()&#123;    gl_FragColor = v_Color;&#125;\næ‰“å¼€æ··åˆæ‰“å¼€æ··åˆå°±åƒæ˜¯åšä¸€äº›æ–¹æ³•è°ƒç”¨é‚£ä¹ˆç®€å•ï¼š\n12345678// å…³é—­å‰”é™¤å»æ‰èƒŒé¢GLES20.glDisable(GLES20.GL_CULL_FACE);// å…³é—­æ·±åº¦æµ‹è¯•GLES20.glDisable(GLES20.GL_DEPTH_TEST);// å¯åŠ¨æ··åˆGLES20.glEnable(GLES20.GL_BLEND);GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE);\næˆ‘ä»¬å…³é—­èƒŒé¢å‰”é™¤ï¼Œæ˜¯å› ä¸ºå¦‚æœç«‹æ–¹ä½“æ˜¯åŠé€æ˜çš„ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬èƒ½çœ‹åˆ°ç«‹æ–¹ä½“çš„èƒŒé¢ã€‚æˆ‘ä»¬éœ€è¦ç»˜åˆ¶å®ƒä»¬ï¼Œå¦åˆ™å¯èƒ½çœ‹èµ·æ¥ä¼šå¾ˆå¥‡æ€ªã€‚å‡ºäºåŒæ ·çš„åŸå› æˆ‘ä»¬å…³é—­äº†æ·±åº¦æµ‹è¯•ã€‚\nå­¦ä¹ è§¦æ‘¸äº‹ä»¶å¹¶è¿›è¡Œæ“ä½œä½ å°†æ³¨æ„åˆ°ï¼Œå½“æ‚¨è¿è¡ŒDemoæ—¶ï¼Œå¯ä»¥é€šè¿‡ç‚¹å‡»å±å¹•æ¥æ‰“å¼€å’Œå…³é—­æ··åˆã€‚\nç°å®è§¦æ‘¸äº‹ä»¶ï¼Œæ‚¨é¦–å…ˆéœ€è¦åˆ›å»ºæ‚¨çš„GLSurfaceViewè‡ªå®šä¹‰viewã€‚åœ¨è¿™ä¸ªviewä¸­ï¼Œåˆ›å»ºä¸€ä¸ªé»˜è®¤æ„é€ ç”¨æ¥è°ƒç”¨çˆ¶ç±»ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„æ–¹æ³•æ¥æ¥æ”¶ç‰¹å®šçš„æ¸²æŸ“å™¨æ›¿æ¢å¸¸ç”¨æ¥å£ï¼Œå¹¶è¦†å†™onTouchEvent()ã€‚æˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªå…·ä½“çš„æ¸²æŸ“å™¨ç±»ï¼Œå› ä¸ºæˆ‘ä»¬å°†è¦åœ¨onTouchEvent()æ–¹æ³•ä¸­è°ƒç”¨è¿™ä¸ªç±»çš„ç‰¹å®šæ–¹æ³•ã€‚\nåœ¨Androidä¸­ï¼ŒOpenGLæ¸²æŸ“å™¨åœ¨ç‹¬ç«‹çš„çº¿ç¨‹ä¸­å®Œæˆï¼Œå› æ­¤æˆ‘ä»¬è¿˜å°†çœ‹çœ‹å¦‚ä½•å®‰å…¨çš„ä»æ­£åœ¨ç›‘å¬è§¦æ‘¸äº‹ä»¶çš„ä¸»çº¿ç¨‹è°ƒåº¦åˆ°å•ç‹¬çš„æ¸²æŸ“å™¨çº¿ç¨‹ã€‚\n1234567891011121314151617181920212223242526272829303132public class LessonFiveGLSurfaceView extends GLSurfaceView &#123;    private LessonFiveRenderer mRenderer;    public LessonFiveGLSurfaceView(Context context) &#123;        super(context);    &#125;    @Override    public boolean onTouchEvent(MotionEvent event) &#123;        if (                event == null                || event.getAction() != MotionEvent.ACTION_DOWN                || mRenderer == null) &#123;            return super.onTouchEvent(event);        &#125;        // ç¡®ä¿æˆ‘ä»¬åœ¨OpenGLçº¿ç¨‹ä¸Šè°ƒç”¨switchMode()        // queueEvent() æ˜¯GLSurfaceViewçš„ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå°†ä¸ºæˆ‘ä»¬åšåˆ°è¿™ç‚¹        queueEvent(new Runnable() &#123;            @Override            public void run() &#123;                mRenderer.switchMode();            &#125;        &#125;);        return true;    &#125;    public void setRenderer(LessonFiveRenderer renderer) &#123;        mRenderer = renderer;        super.setRenderer(renderer);    &#125;&#125;\nåœ¨LessonFiveRendererä¸­å®ç°switchMode()\n123456789101112131415161718public void switchMode() &#123;    mBlending = !mBlending;    if (mBlending) &#123;        // å…³é—­å‰”é™¤å»æ‰èƒŒé¢        GLES20.glDisable(GLES20.GL_CULL_FACE);        // å…³é—­æ·±åº¦æµ‹è¯•        GLES20.glDisable(GLES20.GL_DEPTH_TEST);        // å¯åŠ¨æ··åˆ        GLES20.glEnable(GLES20.GL_BLEND);        GLES20.glBlendFunc(GLES20.GL_ONE, GLES20.GL_ONE);    &#125; else &#123;        GLES20.glEnable(GLES20.GL_CULL_FACE);        GLES20.glEnable(GLES20.GL_DEPTH_TEST);        GLES20.glDisable(GLES20.GL_BLEND);    &#125;&#125;\nä»”ç»†çœ‹LessonFiveGLSurfaceView::onTouchEvent()ï¼Œä¸»è¦è®°ä½è§¦æ‘¸äº‹ä»¶éƒ½æ˜¯åœ¨UIä¸»çº¿ç¨‹ä¸­ï¼Œè€ŒGLSurfaceViewåœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­åˆ›å»ºOpenGL ESä¸Šä¸‹æ–‡ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬çš„æ¸²æŸ“å™¨çš„å›è°ƒä¹Ÿåœ¨ä¸€ä¸ªå•ç‹¬çš„çº¿ç¨‹ä¸­è¿è¡Œã€‚è¿™æ˜¯ä¸€ä¸ªéœ€è¦è®°ä½çš„é‡ç‚¹ï¼Œå› ä¸ºæˆ‘ä»¬ä¸èƒ½å†å…¶ä»–çº¿ç¨‹è°ƒç”¨OpenGLå¹¶å¸Œæœ›å…¶å·¥ä½œã€‚\nè¾›è¿çš„æ˜¯ï¼Œç¼–å†™GLSurfaceViewçš„äººä¹Ÿæƒ³åˆ°äº†è¿™ç‚¹ï¼Œå¹¶æä¾›äº†ä¸€ä¸ªqueueEvent()æ–¹æ³•ï¼Œè¿™ä½¿å¾—ä½ å¯ä»¥è°ƒç”¨OpenGLçº¿ç¨‹ä¸Šçš„ä¸œè¥¿ã€‚å› æ­¤ï¼Œå½“æˆ‘ä»¬æƒ³é€šè¿‡ç‚¹å‡»å±å¹•æ‰“å¼€å’Œå…³é—­æ··åˆæ—¶ï¼Œæˆ‘ä»¬ç¡®ä¿é€šè¿‡åœ¨UIçº¿ç¨‹ä¸­ä½¿ç”¨queueEvent()æ¥æ­£ç¡®è°ƒç”¨OpenGLçº¿ç¨‹ä¸­çš„å†…å®¹ã€‚\nè¿›ä¸€æ­¥ç»ƒä¹ è¿™ä¸ªDemoç›®å‰ä»…ä½¿ç”¨ç›¸åŠ æ··åˆï¼Œå°è¯•æ”¹å˜å…¶ä¸ºæ’å€¼æ··åˆå¹¶é‡æ–°æ·»åŠ ç¯å…‰å’Œçº¹ç†ã€‚å¦‚æœæ‚¨åªåœ¨é»‘è‰²èƒŒæ™¯ä¸Šç»˜åˆ¶ä¸¤ä¸ªåŠé€æ˜çº¹ç†ï¼Œç»˜åˆ¶é¡ºåºæ˜¯å¦é‡è¦ï¼Ÿä»€ä¹ˆæ—¶å€™é‡è¦ï¼Ÿ\næ•™ç¨‹ç›®å½•\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\nOpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€\nOpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰\nOpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤\nOpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVOBï¼‰\n\næ‰“åŒ…æ•™æå¯ä»¥åœ¨Githubä¸‹è½½æœ¬è¯¾ç¨‹æºä»£ç ï¼šä¸‹è½½é¡¹ç›®æœ¬è¯¾çš„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿå¯ä»¥å†Androidå¸‚åœºä¸‹ï¼šgoogle play ä¸‹è½½apkâ€œæˆ‘â€ä¹Ÿç¼–è¯‘äº†ä¸ªapkï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½ï¼šgithub download\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-opengl/20190219114206.jpg","plink":"https://blog.xujiaji.com/post/Learn-OpenGL-Lesson-Five/"},{"title":"OpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€","date":"2019-02-08T11:26:29.000Z","author":"xujiaji","updated":"2019-04-08T06:56:03.158Z","content":"\nç¿»è¯‘æ–‡\n\nåŸæ–‡æ ‡é¢˜ï¼šAndroid Lesson Four: Introducing Basic TexturingåŸæ–‡é“¾æ¥ï¼šhttp://www.learnopengles.com/android-lesson-four-introducing-basic-texturing/\n\nä»‹ç»çº¹ç†åŸºç¡€\n\n\n\nè¿™æ˜¯æˆ‘ä»¬Androidç³»åˆ—çš„ç¬¬å››ä¸ªè¯¾ç¨‹ã€‚åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ·»åŠ æˆ‘ä»¬åœ¨ç¬¬ä¸‰è¯¾ä¸­å­¦åˆ°çš„å†…å®¹ï¼Œå¹¶å­¦ä¹ å¦‚ä½•æ·»åŠ çº¹ç†ã€‚æˆ‘ä»¬æ¥çœ‹çœ‹å¦‚ä½•ä»åº”ç”¨èµ„æºä¸­è·å–ä¸€å¼ å›¾ç‰‡åŠ è½½åˆ°OpenGLESä¸­ï¼Œå¹¶å±•ç¤ºåˆ°å±å¹•ä¸Šã€‚è·Ÿç€æˆ‘ä¸€èµ·æ¥ï¼Œä½ å°†é©¬ä¸Šæ˜ç™½çº¹ç†çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ã€‚\n\n\n\n\nå‰ææ¡ä»¶æœ¬ç³»åˆ—æ¯ä¸ªè¯¾ç¨‹æ„å»ºéƒ½æ˜¯ä»¥å‰ä¸€ä¸ªè¯¾ç¨‹ä¸ºåŸºç¡€ï¼Œè¿™èŠ‚è¯¾æ˜¯ç¬¬ä¸‰è¯¾çš„æ‰©å±•ï¼Œå› æ­¤è¯·åŠ¡å¿…åœ¨ç»§ç»­ä¹‹å‰å¤ä¹ è¯¥è¯¾ç¨‹ã€‚\n\nå·²ä¸‹æ˜¯æœ¬ç³»åˆ—è¯¾ç¨‹çš„å‰å‡ è¯¾ï¼š\n\n\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\n\nçº¹ç†åŸºç¡€çº¹ç†æ˜ å°„çš„è‰ºæœ¯ï¼ˆä»¥åŠç…§æ˜ï¼‰æ˜¯æ„å»ºé€¼çœŸçš„3Dä¸–ç•Œæœ€é‡è¦çš„éƒ¨åˆ†ã€‚æ²¡æœ‰çº¹ç†æ˜ å°„ï¼Œä¸€åˆ‡éƒ½æ˜¯å¹³æ»‘çš„é˜´å½±ï¼Œçœ‹èµ·æ¥å¾ˆäººå·¥ï¼Œå°±åƒæ˜¯90å¹´ä»£çš„è€å¼æ§åˆ¶å°æ¸¸æˆã€‚\nç¬¬ä¸€ä¸ªå¼€å§‹å¤§é‡ä½¿ç”¨çº¹ç†çš„æ¸¸æˆï¼Œå¦‚Doomå’ŒDuke Nukem 3Dï¼Œé€šè¿‡å¢åŠ è§†è§‰å†²å‡»åŠ›ï¼Œå¤§å¤§æå‡äº†æ¸¸æˆçš„çœŸå®æ„Ÿâ€”â€”å¦‚æœåœ¨æ™šä¸Šç©å¯èƒ½ä¼šçœŸçš„å“å”¬åˆ°æˆ‘ä»¬ã€‚\n\nè¿™é‡Œæˆ‘ä»¬æ¥çœ‹æœ‰çº¹ç†å’Œæ²¡æœ‰çº¹ç†çš„åœºæ™¯\n\n\n\n\n\næ¯ç‰‡æ®µç…§æ˜ï¼›æ­£æ–¹å½¢å››ä¸ªé¡¶ç‚¹ä¸­å¿ƒä½ç½®\næ·»åŠ äº†çº¹ç†ï¼›æ­£æ–¹å½¢å››ä¸ªé¡¶ç‚¹ä¸­å¿ƒä½ç½®\nçœ‹å·¦è¾¹çš„å›¾ç‰‡ï¼Œè¿™ä¸ªåœºæ™¯é€šè¿‡æ¯åƒç´ ç…§æ˜å’Œç€è‰²ç‚¹äº®ã€‚è¿™ä¸ªåœºæ™¯çœ‹èµ·æ¥éå¸¸å¹³æ»‘ï¼Œç°å®ç”Ÿæ´»ä¸­æˆ‘ä»¬èµ°è¿›ä¸€ä¸ªæˆ¿é—´æœ‰å……æ»¡äº†å…‰æ»‘é˜´å½±çš„ä¸œè¥¿å°±åƒæ˜¯è¿™ä¸ªç«‹æ–¹ä½“ã€‚åœ¨çœ‹å³è¾¹çš„å›¾ç‰‡ï¼ŒåŒæ ·çš„åœºæ™¯ç°åœ¨çº¹ç†åŒ–äº†ã€‚ç¯å¢ƒå…‰ä¹Ÿå¢åŠ äº†ï¼Œå› ä¸ºçº¹ç†çš„ä½¿ç”¨ä½¿æ•´ä¸ªåœºæ™¯å˜æš—ï¼Œä¹Ÿå¯ä»¥çœ‹åˆ°çº¹ç†å¯¹ä¾§é¢ç«‹æ–¹ä½“çš„å½±å“ã€‚ç«‹æ–¹ä½“å…·æœ‰å’Œä»¥å‰ç›¸åŒæ•°é‡çš„å¤šè¾¹å½¢ï¼Œä½†å®ƒä»¬æœ‰æ–°çº¹ç†çœ‹èµ·æ¥æ›´åŠ è¯¦ç»†ã€‚æ»¡è¶³äºé‚£äº›å¥½å¥‡çš„äººï¼Œè¿™ä¸ªçº¹ç†çš„èµ„æºæ¥è‡ªäºå…¬å…±é¢†åŸŸçš„èµ„æº\n\n\n\nçº¹ç†åæ ‡åœ¨OpengGLä¸­ï¼Œçº¹ç†åæ ‡æ—¶å¸¸ä½¿ç”¨åæ ‡(s,t)ä»£æ›¿(x,y)ã€‚(s,t)è¡¨ç¤ºçº¹ç†ä¸Šçš„ä¸€ä¸ªçº¹ç†å…ƒç´ ï¼Œç„¶åæ˜ å°„åˆ°å¤šè¾¹å½¢ã€‚å¦å¤–éœ€è¦æ³¨æ„è¿™äº›çº¹ç†åæ ‡å’Œå…¶ä»–OpengGLåæ ‡ç›¸ä¼¼ï¼št(æˆ–y)è½´æŒ‡å‘ä¸Šæ–¹ï¼Œæ‰€ä»¥å€¼è¶Šé«˜æ‚¨èµ°çš„è¶Šè¿œã€‚\nå¤§å¤šæ•°è®¡ç®—æœºå›¾å½¢ï¼Œyè½´æŒ‡å‘ä¸‹æ–¹ã€‚è¿™æ„å‘³ç€å·¦ä¸Šè§’æ˜¯å›¾ç‰‡çš„åŸç‚¹(0,0)ï¼Œå¹¶ä¸”yå€¼å‘ä¸‹é€’å¢ã€‚æ¢å¥è¯è¯´ï¼ŒOpenGLçš„åæ ‡ç³»å’Œå¤§å¤šæ•°è®¡ç®—æœºå›¾å½¢ç›¸åï¼Œè¿™æ˜¯æ‚¨éœ€è¦è€ƒè™‘åˆ°çš„ã€‚\n\n\n\nOpenGLçš„çº¹ç†åæ ‡ç³»\n\n\n\n\n\n\n\n\nçº¹ç†æ˜ å°„åŸºç¡€åœ¨æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†æ¥çœ‹çœ‹å¸¸è§„2Dçº¹ç†ï¼ˆGL_TEXTURE_2Dï¼‰å’Œçº¢ï¼Œç»¿ï¼Œè“é¢œè‰²ä¿¡æ¯ï¼ˆGL_RGBï¼‰ã€‚OpenGL ES ä¹Ÿæä¾›å…¶ä»–çº¹ç†æ¨¡å¼è®©ä½ åšæ›´å¤šä¸åŒçš„ç‰¹æ®Šæ•ˆæœã€‚æˆ‘ä»¬å°†ä½¿ç”¨GL_NEARESTæŸ¥çœ‹ç‚¹é‡‡æ ·ï¼ŒGL_LINEARå’ŒMIP-æ˜ å°„å°†åœ¨åé¢çš„è¯¾ç¨‹ä¸­è®²è§£ã€‚\nè®©æˆ‘ä»¬ä¸€èµ·æ¥åˆ°ä»£ç éƒ¨åˆ†ï¼Œçœ‹çœ‹æ€æ ·å¼€å§‹åœ¨Androidä¸­ä½¿ç”¨åŸºæœ¬çš„çº¹ç†ã€‚\né¡¶ç‚¹ç€è‰²å™¨æˆ‘ä»¬å°†é‡‡ç”¨ä¸ŠèŠ‚è¯¾ä¸­çš„æ¯åƒç´ ç…§æ˜ç€è‰²å™¨ï¼Œå¹¶æ·»åŠ çº¹ç†æ”¯æŒã€‚\n\nè¿™å„¿æ˜¯æ–°çš„å˜åŒ–ï¼š\n\n12345678910attribute vec2 a_TexCoordinate;// æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„çº¹ç†åæ ‡ä¿¡æ¯...varying vec2 v_TexCoordinate;  // è¿™å°†ä¼šä¼ å…¥åˆ°ç‰‡æ®µç€è‰²å™¨void main()&#123;   // ä¼ å…¥çº¹ç†åæ ‡   v_TexCoordinate = a_TexCoordinate;   ...&#125;\nåœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­ï¼Œæˆ‘ä»¬æ·»åŠ ä¸€ä¸ªæ–°çš„å±æ€§ç±»å‹vec2ï¼ˆä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ çš„æ•°ç»„ï¼‰ï¼Œå°†ç”¨æ¥æ”¾å…¥çº¹ç†åæ ‡ä¿¡æ¯ã€‚è¿™å°†æ˜¯æ¯ä¸ªé¡¶ç‚¹éƒ½æœ‰ï¼ŒåŒä½ç½®ï¼Œé¢œè‰²ï¼Œæ³•çº¿æ•°æ®ä¸€æ ·ã€‚æˆ‘ä»¬ä¹Ÿæ·»åŠ äº†ä¸€ä¸ªæ–°çš„å˜é‡ï¼Œå®ƒå°†é€šè¿‡ä¸‰è§’å½¢è¡¨é¢ä¸Šçš„çº¿æ€§æ’å€¼å°†æ•°æ®ä¼ å…¥ç‰‡æ®µç€è‰²å™¨ã€‚\nç‰‡æ®µç€è‰²å™¨123456789101112131415uniform sampler2D u_Texture;\" +  // ä¼ å…¥çº¹ç†...varying vec2 v_TexCoordinate;\" + // æ’å…¥çš„çº¹ç†åæ ‡void main()&#123;   ...   // è®¡ç®—å…‰çº¿çŸ¢é‡å’Œé¡¶ç‚¹æ³•çº¿çš„ç‚¹ç§¯ï¼Œå¦‚æœæ³•çº¿å’Œå…‰çº¿çŸ¢é‡æŒ‡å‘ç›¸åŒçš„æ–¹å‘ï¼Œé‚£ä¹ˆå®ƒå°†è·å¾—æœ€å¤§çš„ç…§æ˜   float diffuse = max(dot(v_Normal, lightVector), 0.1);\" +   // æ ¹æ®è·ç¦»å“€å‡å…‰çº¿   diffuse = diffuse * (1.0 / (1.0 + (0.10 * distance * distance)));\" +   // æ·»åŠ ç¯å¢ƒç…§æ˜   diffuse = diffuse + 0.3;\" +   // é¢œè‰²ä¹˜ä»¥äº®åº¦å“€å‡å’Œçº¹ç†å€¼å¾—åˆ°æœ€ç»ˆçš„é¢œè‰²   gl_FragColor = v_Color * diffuse * texture2D(u_Texture, v_TexCoordinate);\" +&#125;\næˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å¸¸é‡ç±»å‹sampler2Dæ¥è¡¨ç¤ºå®é™…çº¹ç†æ•°æ®ï¼ˆä¸çº¹ç†åæ ‡å¯¹åº”ï¼‰ï¼Œç”±å®šç‚¹ç€è‰²å™¨æ’å€¼ä¼ å…¥çº¹ç†åæ ‡ï¼Œæˆ‘ä»¬å†è°ƒç”¨texture2D(texture, textureCoordinate)å¾—åˆ°çº¹ç†åœ¨å½“å‰åæ ‡çš„å€¼ï¼Œæˆ‘ä»¬å¾—åˆ°è¿™ä¸ªå€¼åå†ä¹˜ä»¥å…¶ä»–é¡¹å¾—åˆ°æœ€ç»ˆè¾“å‡ºçš„é¢œè‰²ã€‚\nè¿™ç§æ–¹å¼æ·»åŠ çº¹ç†ä¼šä½¿æ•´ä¸ªåœºæ™¯å˜æš—ï¼Œå› æ­¤æˆ‘ä»¬è¿˜ä¼šç¨å¾®å¢å¼ºç¯å¢ƒå…‰ç…§å¹¶å‡å°‘å…‰ç…§å“€å‡ã€‚\nå°†ä¸€ä¸ªå›¾ç‰‡åŠ è½½åˆ°çº¹ç†12345678910111213141516171819202122232425262728293031public static int loadTexture(final Context context, final int resourceId) &#123;    final int[] textureHandle = new int[1];    GLES20.glGenTextures(1, textureHandle, 0);    if (textureHandle[0] != 0) &#123;        final BitmapFactory.Options options = new BitmapFactory.Options();        options.inScaled = false; // æ²¡æœ‰é¢„å…ˆç¼©æ”¾        // å¾—åˆ°å›¾ç‰‡èµ„æº        final Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId, options);        // åœ¨OpenGLä¸­ç»‘å®šçº¹ç†        GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);        // è®¾ç½®è¿‡æ»¤        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);        GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);        // å°†ä½å›¾åŠ è½½åˆ°å·²ç»‘å®šçš„çº¹ç†ä¸­        GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);        // å›æ”¶ä½å›¾ï¼Œå› ä¸ºå®ƒçš„æ•°æ®å·²åŠ è½½åˆ°OpenGLä¸­        bitmap.recycle();    &#125;    if (textureHandle[0] == 0) &#123;        throw new RuntimeException(\"Error loading texture.\");    &#125;    return textureHandle[0];&#125;\nè¿™æ®µä»£ç å°†Androidresæ–‡ä»¶å¤¹ä¸­çš„å›¾å½¢æ–‡ä»¶è¯»å–å¹¶åŠ è½½åˆ°OpenGLä¸­ï¼Œæˆ‘ä¼šè§£é‡Šæ¯ä¸€éƒ¨åˆ†çš„ä½œç”¨ã€‚\næˆ‘ä»¬é¦–å…ˆéœ€è¦å‘Šè¯‰OpenGLå»ä¸ºæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ–°çš„handleï¼Œè¿™ä¸ªhandleä½œä¸ºä¸€ä¸ªå”¯ä¸€æ ‡è¯†ï¼Œæˆ‘ä»¬æƒ³åœ¨OpenGLä¸­å¼•ç”¨çº¹ç†æ—¶å°±ä¼šä½¿ç”¨å®ƒã€‚\n12final int[] textureHandle = new int[1];GLES20.glGenTextures(1, textureHandle, 0);\nè¿™ä¸ªOpenGLæ–¹æ³•å¯ä»¥ç”¨æ¥åŒæ—¶ç”Ÿæˆå¤šä¸ªhandleï¼Œè¿™é‡Œæˆ‘ä»¬ä»…ç”Ÿæˆä¸€ä¸ªã€‚\nå› ä¸ºæˆ‘ä»¬è¿™é‡Œåªéœ€è¦ä¸€ä¸ªhandleå»åŠ è½½çº¹ç†ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å¾—åˆ°OpenGLèƒ½ç†è§£çš„çº¹ç†æ ¼å¼ã€‚æˆ‘ä»¬ä¸èƒ½åªä»PNGæˆ–JPGæä¾›åŸå§‹æ•°æ®ï¼Œå› ä¸ºå®ƒä¸ä¼šç†è§£ã€‚æˆ‘ä»¬éœ€è¦åšçš„ç¬¬ä¸€æ­¥æ˜¯å°†å›¾åƒæ–‡ä»¶è§£ç ä¸ºAndroid Bitmapå¯¹è±¡ï¼š\n1234final BitmapFactory.Options options = new BitmapFactory.Options();options.inScaled = false; // æ²¡æœ‰é¢„å…ˆç¼©æ”¾// å¾—åˆ°å›¾ç‰‡èµ„æºfinal Bitmap bitmap = BitmapFactory.decodeResource(context.getResources(), resourceId, options);\né»˜è®¤æƒ…å†µä¸‹ï¼ŒAndroidä¼šæ ¹æ®è®¾å¤‡çš„åˆ†è¾¨ç‡å’Œä½ æ”¾ç½®å›¾ç‰‡çš„èµ„æºæ–‡ä»¶ç›®å½•è€Œé¢„å…ˆç¼©æ”¾ä½å›¾ã€‚æˆ‘ä»¬ä¸å¸Œæœ›Androidæ ¹æ®æˆ‘ä»¬çš„æƒ…å†µå¯¹ä½å›¾è¿›è¡Œç¼©æ”¾ï¼Œå› æ­¤æˆ‘ä»¬å°†inScaledè®¾ç½®ä¸ºfalse\n123456// åœ¨OpenGLä¸­ç»‘å®šçº¹ç†GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, textureHandle[0]);// è®¾ç½®è¿‡æ»¤GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MIN_FILTER, GLES20.GL_NEAREST);GLES20.glTexParameteri(GLES20.GL_TEXTURE_2D, GLES20.GL_TEXTURE_MAG_FILTER, GLES20.GL_NEAREST);\nç„¶åæˆ‘ä»¬ç»‘å®šçº¹ç†ï¼Œå¹¶è®¾ç½®å‡ ä¸ªå‚æ•°ï¼Œç»‘å®šä¸€ä¸ªçº¹ç†ï¼Œå¹¶å‘Šè¯‰OpenGLåç»­OpenGLè°ƒç”¨éœ€è¦è¿™æ ·è¿‡æ»¤è¿™ä¸ªçº¹ç†ã€‚æˆ‘ä»¬å°†é»˜è®¤è¿‡æ»¤å™¨è®¾ç½®ä¸ºGL_NEARESTï¼Œè¿™æ˜¯æœ€å¿«ï¼Œä¹Ÿæ˜¯æœ€ç²—ç³™çš„è¿‡æ»¤å½¢å¼ã€‚å®ƒæ‰€åšçš„å°±æ˜¯åœ¨å±å¹•çš„æ¯ä¸ªç‚¹é€‰æ‹©æœ€è¿‘çš„çº¹ç´ ï¼Œè¿™å¯èƒ½å¯¼è‡´å›¾åƒä¼ªåƒå’Œé”¯é½¿ã€‚\n\nGL_TEXTURE_MIN_FILTER è¿™æ˜¯å‘Šè¯‰OpenGLåœ¨ç»˜åˆ¶å°äºåŸå§‹å¤§å°ï¼ˆä»¥åƒç´ ä¸ºå•ä½ï¼‰çš„çº¹ç†æ—¶è¦åº”ç”¨å“ªç§ç±»å‹çš„è¿‡æ»¤ã€‚\nGL_TEXTURE_MAG_FILTER è¿™æ˜¯å‘Šè¯‰OpenGLåœ¨æ”¾å¤§çº¹ç†åˆ°åŸå§‹å¤§å°æ—¶è¦åº”ç”¨å“ªç§ç±»å‹çš„è¿‡æ»¤ã€‚\n\n12345// å°†ä½å›¾åŠ è½½åˆ°å·²ç»‘å®šçš„çº¹ç†ä¸­GLUtils.texImage2D(GLES20.GL_TEXTURE_2D, 0, bitmap, 0);// å›æ”¶ä½å›¾ï¼Œå› ä¸ºå®ƒçš„æ•°æ®å·²åŠ è½½åˆ°OpenGLä¸­bitmap.recycle();\nå®‰å“æœ‰ä¸€ä¸ªéå¸¸å®ç”¨çš„åŠŸèƒ½å¯ä»¥ç›´æ¥å°†ä½å›¾åŠ è½½åˆ°OpenGLä¸­ã€‚ä¸€æ—¦æ‚¨å°†èµ„æºè¯»å…¥Bitmapå¯¹è±¡GLUtils.texImage2D()å°†è´Ÿè´£å…¶ä»–äº‹æƒ…ï¼Œè¿™ä¸ªæ–¹æ³•çš„ç­¾åï¼š\n1public static void texImage2D (int target, int level, Bitmap bitmap, int border)\næˆ‘ä»¬æƒ³è¦ä¸€ä¸ªå¸¸è§„çš„2Dä½å›¾ï¼Œå› æ­¤æˆ‘ä»¬ä¼ å…¥GL_TEXTURE_2Dä½œä¸ºç¬¬ä¸€ä¸ªå‚æ•°ã€‚ç¬¬äºŒä¸ªå‚æ•°ç”¨äºMIP-æ˜ å°„ï¼Œå¹¶å…è®¸æ‚¨æŒ‡å®šè¦åœ¨å“ªä¸ªçº§åˆ«ä½¿ç”¨çš„å›¾åƒã€‚æˆ‘ä»¬è¿™é‡Œæ²¡æœ‰ä½¿ç”¨MIP-æ˜ å°„ï¼Œå› æ­¤æˆ‘ä»¬å°†ä¼ å…¥0è®¾ç½®ä¸ºé»˜è®¤çº§åˆ«ã€‚æˆ‘ä»¬ä¼ å…¥ä½å›¾ï¼Œç”±äºæˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨è¾¹æ¡†ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¼ å…¥0ã€‚\nç„¶ååŸå§‹ä½å›¾å¯¹è±¡è°ƒç”¨recycle()ï¼Œè¿™æé†’Androidå¯ä»¥å›æ”¶è¿™éƒ¨åˆ†å†…å­˜ã€‚ç”±äºçº¹ç†å·²è¢«åŠ è½½åˆ°OpenGLï¼Œæˆ‘ä»¬ä¸éœ€è¦ç»§ç»­ä¿ç•™è¿™ä¸ªå‰¯æœ¬ã€‚æ˜¯çš„ï¼ŒAndroidåº”ç”¨ç¨‹åºåœ¨æ‰§è¡Œåƒåœ¾æ”¶é›†çš„Dalvik VMä¸‹è¿è¡Œï¼Œä½†Bitmapå¯¹è±¡åŒ…å«é©»ç•™åœ¨nativeå†…å­˜ä¸­çš„æ•°æ®ï¼Œå¦‚æœä½ ä¸æ˜ç¡®çš„å›æ”¶å®ƒä»¬ï¼Œå®ƒä»¬éœ€è¦å‡ ä¸ªå‘¨æœŸæ¥è¿›è¡Œåƒåœ¾æ”¶é›†ã€‚è¿™æ„å‘³ç€å¦‚æœæ‚¨å¿˜è®°æ‰§è¡Œæ­¤æ“ä½œï¼Œå®é™…ä¸Šå¯èƒ½ä¼šå› å†…å­˜ä¸è¶³é”™è¯¯è€Œå´©æºƒï¼Œå³ä½¿æ‚¨ä¸å†æŒæœ‰å¯¹ä½å›¾çš„ä»»ä½•å¼•ç”¨ã€‚\nå°†çº¹ç†åº”ç”¨åˆ°æˆ‘ä»¬çš„åœºæ™¯é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å„ç§æˆå‘˜å˜é‡æ¥æŒæœ‰æˆ‘ä»¬çº¹ç†æ‰€éœ€è¦çš„ä¸œè¥¿ï¼š\n1234567891011121314// å­˜æ”¾æˆ‘ä»¬çš„æ¨¡å‹æ•°æ®åœ¨æµ®ç‚¹ç¼“å†²åŒºprivate final FloatBuffer mCubeTextureCoordinates;// ç”¨æ¥ä¼ å…¥çº¹ç†private int mTextureUniformHandle;// ç”¨æ¥ä¼ å…¥æ¨¡å‹çº¹ç†åæ ‡private int mTextureCoordinateHandle;// æ¯ä¸ªæ•°æ®å…ƒç´ çš„çº¹ç†åæ ‡å¤§å°private final int mTextureCoordinateDataSize = 2;// çº¹ç†æ•°æ®private int mTextureDataHandle;\næˆ‘ä»¬åŸºæœ¬ä¸Šæ˜¯éœ€è¦æ·»åŠ æ–°æˆå‘˜å˜é‡æ¥è·Ÿè¸ªæˆ‘ä»¬æ·»åŠ åˆ°ç€è‰²å™¨çš„å†…å®¹ï¼Œä»¥åŠä¿æŒå¯¹çº¹ç†çš„å¼•ç”¨ã€‚\nå®šä¹‰çº¹ç†åæ ‡æˆ‘ä»¬åœ¨æ„é€ æ–¹æ³•ä¸­å®šä¹‰æˆ‘ä»¬çš„çº¹ç†åæ ‡\n12345678910111213141516// S, T ï¼ˆæˆ– Xï¼Œ Yï¼‰// çº¹ç†åæ ‡æ•°æ®// å› ä¸ºå›¾åƒYè½´æŒ‡å‘ä¸‹æ–¹ï¼ˆå‘ä¸‹ç§»åŠ¨å›¾ç‰‡æ—¶å€¼ä¼šå¢åŠ ï¼‰ï¼ŒOpenGLçš„Yè½´æŒ‡å‘ä¸Šæ–¹// æˆ‘ä»¬é€šè¿‡ç¿»è½¬Yè½´æ¥è°ƒæ•´å®ƒ// æ¯ä¸ªé¢çš„çº¹ç†åæ ‡éƒ½æ˜¯ç›¸åŒçš„final float[] cubeTextureCoordinateData =        &#123;                // æ­£é¢                0.0F, 0.0F,                0.0F, 1.0F,                1.0F, 0.0F,                0.0F, 1.0F,                1.0F, 1.1F,                1.0F, 0.0F,        &#125;;...\nè¿™åæ ‡æ•°æ®çœ‹èµ·æ¥å¯èƒ½æœ‰ç‚¹æ··ä¹±ã€‚å¦‚æœæ‚¨è¿”å›å»çœ‹ç¬¬ä¸‰è¯¾ä¸­ç‚¹çš„ä½ç½®æ˜¯å¦‚ä½•å®šä¹‰çš„ï¼Œæ‚¨å°†ä¼šå‘ç°æˆ‘ä»¬ä¸ºæ­£æ–¹ä½“æ¯ä¸ªé¢éƒ½å®šä¹‰äº†ä¸¤ä¸ªä¸‰è§’å½¢ã€‚ç‚¹çš„å®šä¹‰æ–¹å¼åƒä¸‹é¢è¿™æ ·ï¼š\n12345678ï¼ˆä¸‰è§’å½¢1ï¼‰å·¦ä¸Šï¼Œå·¦ä¸‹ï¼Œå³ä¸Šï¼ˆä¸‰è§’å½¢2ï¼‰å·¦ä¸‹ï¼Œå³ä¸‹ï¼Œå³ä¸Š\nçº¹ç†åæ ‡å’Œæ­£é¢çš„ä½ç½®åæ ‡å¯¹åº”ï¼Œä½†æ˜¯ç”±äºYè½´ç¿»è½¬ï¼ŒYè½´æŒ‡å‘å’ŒOpenGLçš„Yè½´ç›¸åçš„æ–¹å‘ã€‚\n\nçœ‹ä¸‹å›¾ï¼Œå®çº¿åæ ‡è¡¨ç¤ºåœ¨OpenGLä¸­æ­£æ–¹ä½“æ­£é¢Xï¼ŒYåæ ‡ã€‚è™šçº¿è¡¨ç¤ºç¿»è½¬åçš„åæ ‡ï¼Œå¯ä»¥çœ‹å‡ºå’Œä¸Šé¢å®šä¹‰çš„çº¹ç†åæ ‡æ˜¯ä¸€ä¸€å¯¹åº”çš„\n\n\nè®¾ç½®çº¹ç†æˆ‘ä»¬åœ¨onSurfaceCreated()æ–¹æ³•ä¸­åŠ è½½çº¹ç†\n1234567@Overridepublic void onSurfaceCreated(GL10 gl, EGLConfig config) &#123;    ...    mProgramHandle = ShaderHelper.createAndLinkProgram(vertexShaderHandle, fragmentShaderHandle, \"a_Position\", \"a_Color\", \"a_Normal\", \"a_TexCoordinate\");    ...    // åŠ è½½çº¹ç†    mTextureDataHandle = TextureHelper.loadTexture(mActivityContext, R.drawable.bumpy_bricks_public_domain);\næˆ‘ä»¬ä¼ å…¥ä¸€ä¸ªæ–°çš„å±æ€§a_TexCoordinateç»‘å®šåˆ°æˆ‘ä»¬çš„ç€è‰²å™¨ä¸­ï¼Œå¹¶ä¸”æˆ‘ä»¬é€šè¿‡ä¹‹å‰åˆ›å»ºçš„loadTexture()æ–¹æ³•åŠ è½½ç€è‰²å™¨ã€‚\nä½¿ç”¨çº¹ç†æˆ‘ä»¬ä¹Ÿéœ€è¦åœ¨onDrawFrame(GL10 gl)æ–¹æ³•ä¸­æ·»åŠ ä¸€äº›ä»£ç ã€‚\n1234567891011121314@Overridepublic void onDrawFrame(GL10 gl) &#123;    ...    mTextureUniformHandle = GLES20.glGetUniformLocation(mProgramHandle, \"u_Texture\");    mTextureCoordinateHandle = GLES20.glGetAttribLocation(mProgramHandle, \"a_TexCoordinate\");    // å°†çº¹ç†å•å…ƒè®¾ç½®ä¸ºçº¹ç†å•å…ƒ0    GLES20.glActiveTexture(GLES20.GL_TEXTURE0);    // å°†çº¹ç†ç»‘å®šåˆ°è¿™ä¸ªå•å…ƒ    GLES20.glBindTexture(GLES20.GL_TEXTURE_2D, mTextureDataHandle);    // é€šè¿‡ç»‘å®šåˆ°çº¹ç†å•å…ƒ0ï¼Œå‘Šè¯‰çº¹ç†æ ‡å‡†é‡‡æ ·å™¨åœ¨ç€è‰²å™¨ä¸­ä½¿ç”¨æ­¤çº¹ç†    GLES20.glUniform1i(mTextureUniformHandle, 0);\næˆ‘ä»¬å¾—åˆ°ç€è‰²å™¨ä¸­çš„çº¹ç†æ•°æ®å’Œçº¹ç†åæ ‡å¥æŸ„ã€‚åœ¨OpenGLä¸­ï¼Œçº¹ç†èƒ½åœ¨ç€è‰²ä¹‹å‰ï¼Œéœ€è¦ç»‘å®šåˆ°çº¹ç†å•å…ƒã€‚çº¹ç†å•å…ƒæ˜¯è¯»å–çº¹ç†å¹¶å®é™…å°†å®ƒä¼ å…¥ç€è‰²å™¨çš„ä¸­ï¼Œå› æ­¤å¯ä»¥å†å±å¹•ä¸Šæ˜¾ç¤ºã€‚ä¸åŒçš„å›¾å½¢èŠ¯ç‰‡æœ‰ä¸åŒæ•°é‡çš„çº¹ç†å•å…ƒï¼Œå› æ­¤åœ¨ä½¿ç”¨å®ƒä»¬ä¹‹å‰ï¼Œæ‚¨éœ€è¦æ£€æŸ¥æ˜¯å¦å­˜åœ¨å…¶ä»–çº¹ç†å•å…ƒã€‚\né¦–å…ˆï¼Œæˆ‘ä»¬å‘Šè¯‰OpenGLæˆ‘ä»¬æƒ³è®¾ç½®ä½¿ç”¨çš„çº¹ç†å•å…ƒåˆ°ç¬¬ä¸€ä¸ªå•å…ƒï¼Œçº¹ç†å•å…ƒ0ã€‚ç„¶åè‡ªåŠ¨ç»‘å®šçº¹ç†åˆ°ç¬¬ä¸€ä¸ªå•å…ƒï¼Œé€šè¿‡è°ƒç”¨glBindTexture()ã€‚æœ€åï¼Œæˆ‘ä»¬å‘Šè¯‰OpenGLï¼Œæˆ‘ä»¬æƒ³å°†mTextureUniformHandleç»‘å®šåˆ°ç¬¬ä¸€ä¸ªçº¹ç†å•å…ƒï¼Œå®ƒå¼•ç”¨äº†ç‰‡æ®µç€è‰²å™¨ä¸­u_Textureå±æ€§ã€‚\nç®€è€Œè¨€ä¹‹ï¼š\n\nè®¾ç½®çº¹ç†å•å…ƒ\nç»‘å®šçº¹ç†åˆ°è¿™ä¸ªå•å…ƒ\nå°†æ­¤å•å…ƒæŒ‡å®šç»™ç‰‡æ®µç€è‰²å™¨ä¸­çš„çº¹ç†æ ‡å‡†\n\næ ¹æ®éœ€è¦é‡å¤å¤šä¸ªçº¹ç†ã€‚\nè¿›ä¸€æ­¥ç»ƒä¹ ä¸€æ—¦æ‚¨åšåˆ°è¿™å„¿ï¼Œæ‚¨å°±å®Œæˆçš„å·®ä¸å¤šäº†ï¼å½“ç„¶è¿™è¿™å¹¶æ²¡æœ‰æ‚¨é¢„æœŸçš„é‚£ä¹ˆç³Ÿç³•â€¦æˆ–è€…ç¡®å®ç³Ÿç³•ï¼ŸğŸ˜‰ä½œä¸ºä¸‹ä¸€ä¸ªç»ƒä¹ ï¼Œå°è¯•é€šè¿‡åŠ è½½å¦ä¸€ä¸ªçº¹ç†ï¼Œå°†å…¶ç»‘å®šåˆ°å¦ä¸€ä¸ªå•å…ƒï¼Œå¹¶åœ¨ç€è‰²å™¨ä¸­ä½¿ç”¨å®ƒã€‚\nå›é¡¾ç°åœ¨æˆ‘ä»¬å›é¡¾ä¸€ä¸‹æ‰€æœ‰çš„ç€è‰²å™¨ä»£ç ï¼Œä»¥åŠæˆ‘ä»¬æ·»åŠ äº†ä¸€ä¸ªæ–°çš„å¸®åŠ©åŠŸèƒ½ç”¨æ¥ä»èµ„æºç›®å½•è¯»å–ç€è‰²å™¨ä»£ç ï¼Œè€Œä¸æ˜¯å­˜å‚¨åœ¨javaå­—ç¬¦ä¸²ä¸­ï¼š\né¡¶ç‚¹ç€è‰²å™¨ all12345678910111213141516171819202122232425262728uniform mat4 u_MVPMatrix;                      // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewã€projectionçŸ©é˜µçš„å¸¸é‡uniform mat4 u_MVMatrix;                       // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewçŸ©é˜µçš„å¸¸é‡attribute vec4 a_Position;                     // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®ä¿¡æ¯attribute vec4 a_Color;                        // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„é¢œè‰²ä¿¡æ¯attribute vec3 a_Normal;                       // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„æ³•çº¿ä¿¡æ¯attribute vec2 a_TexCoordinate;                // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„çº¹ç†åæ ‡ä¿¡æ¯varying vec3 v_Position;varying vec4 v_Color;varying vec3 v_Normal;varying vec2 v_TexCoordinate;                  // è¿™å°†ä¼šä¼ å…¥åˆ°ç‰‡æ®µç€è‰²å™¨// é¡¶ç‚¹ç€è‰²å™¨å…¥å£ç‚¹void main()&#123;   // ä¼ å…¥çº¹ç†åæ ‡   v_TexCoordinate = a_TexCoordinate;   // å°†é¡¶ç‚¹ä½ç½®è½¬æ¢æˆçœ¼ç›ç©ºé—´çš„ä½ç½®   v_Position = vec3(u_MVMatrix * a_Position);   // ä¼ å…¥é¢œè‰²   v_Color = a_Color;   // å°†æ³•çº¿çš„æ–¹å‘è½¬æ¢åœ¨çœ¼ç›ç©ºé—´   v_Normal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));   // gl_Positionæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ç”¨æ¥å­˜å‚¨æœ€ç»ˆçš„ä½ç½®   // å°†é¡¶ç‚¹ä¹˜ä»¥çŸ©é˜µå¾—åˆ°æ ‡å‡†åŒ–å±å¹•åæ ‡çš„æœ€ç»ˆç‚¹   gl_Position = u_MVPMatrix * a_Position;&#125;\nç‰‡æ®µç€è‰²å™¨ all12345678910111213141516171819202122precision mediump float; //æˆ‘ä»¬å°†é»˜è®¤ç²¾åº¦è®¾ç½®ä¸ºä¸­ç­‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç‰‡æ®µç€è‰²å™¨ä¸­çš„é«˜ç²¾åº¦uniform sampler2D u_Texture;  // ä¼ å…¥çº¹ç†uniform vec3 u_LightPos; // å…‰æºåœ¨çœ¼ç›ç©ºé—´çš„ä½ç½®varying vec3 v_Position; // æ’å…¥çš„ä½ç½®varying vec4 v_Color; // æ’å…¥çš„ä½ç½®é¢œè‰²varying vec3 v_Normal; // æ’å…¥çš„ä½ç½®æ³•çº¿varying vec2 v_TexCoordinate; // æ’å…¥çš„çº¹ç†åæ ‡void main()  // ç‰‡æ®µç€è‰²å™¨å…¥å£&#123;   // å°†ç”¨äºå“€å‡   float distance = length(u_LightPos - v_Position);   // è·å–ä»å…‰æºåˆ°é¡¶ç‚¹æ–¹å‘çš„å…‰çº¿å‘é‡   vec3 lightVector = normalize(u_LightPos - v_Position);   // è®¡ç®—å…‰çº¿çŸ¢é‡å’Œé¡¶ç‚¹æ³•çº¿çš„ç‚¹ç§¯ï¼Œå¦‚æœæ³•çº¿å’Œå…‰çº¿çŸ¢é‡æŒ‡å‘ç›¸åŒçš„æ–¹å‘ï¼Œé‚£ä¹ˆå®ƒå°†è·å¾—æœ€å¤§çš„ç…§æ˜   float diffuse = max(dot(v_Normal, lightVector), 0.1);   // æ ¹æ®è·ç¦»å“€å‡å…‰çº¿   diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));   // æ·»åŠ ç¯å¢ƒç…§æ˜   diffuse = diffuse + 0.3;   // é¢œè‰²ä¹˜ä»¥äº®åº¦å“€å‡å’Œçº¹ç†å€¼å¾—åˆ°æœ€ç»ˆçš„é¢œè‰²   gl_FragColor = v_Color * diffuse * texture2D(u_Texture, v_TexCoordinate);&#125;\næ€æ ·ä»rawèµ„æºç›®å½•ä¸­è¯»å–æ–‡æœ¬ï¼Ÿ123456789101112131415161718192021222324252627public class RawResourceReader &#123;    public static String readTextFileFromRawResource(final Context context, final int resurceId) &#123;        final InputStream inputStream = context.getResources().openRawResource(resurceId);        final InputStreamReader inputStreamReader = new InputStreamReader(inputStream);        final BufferedReader bufferedReader = new BufferedReader(inputStreamReader);        String nextLine;        final StringBuilder body = new StringBuilder();        try &#123;            while ((nextLine = bufferedReader.readLine()) != null) &#123;                body.append(nextLine).append('\\n');            &#125;        &#125; catch (IOException e) &#123;            return null;        &#125; finally &#123;            try &#123;                bufferedReader.close();            &#125; catch (IOException e) &#123;                e.printStackTrace();            &#125;        &#125;        return body.toString();    &#125;&#125;\næ•™ç¨‹ç›®å½•\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\nOpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€\nOpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰\nOpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤\nOpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVOBï¼‰\n\næ‰“åŒ…æ•™æå¯ä»¥åœ¨Githubä¸‹è½½æœ¬è¯¾ç¨‹æºä»£ç ï¼šä¸‹è½½é¡¹ç›®æœ¬è¯¾çš„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿå¯ä»¥å†Androidå¸‚åœºä¸‹ï¼šgoogle play ä¸‹è½½apkâ€œæˆ‘â€ä¹Ÿç¼–è¯‘äº†ä¸ªapkï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½ï¼šgithub download\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-opengl/20190211205340.jpg","plink":"https://blog.xujiaji.com/post/Learn-OpenGL-Lesson-Four/"},{"title":"OpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜","date":"2019-01-26T09:55:49.000Z","author":"xujiaji","updated":"2019-04-08T08:32:50.360Z","content":"\nç¿»è¯‘æ–‡\n\nåŸæ–‡æ ‡é¢˜ï¼šAndroid Lesson Three: Moving to Per-Fragment LightingåŸæ–‡é“¾æ¥ï¼šhttp://www.learnopengles.com/android-lesson-three-moving-to-per-fragment-lighting/\n\nä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\n\n\n\næ¬¢è¿æ¥åˆ°ç¬¬ä¸‰è¯¾ï¼è¿™èŠ‚è¯¾ï¼Œæˆ‘ä»¬å°†ä¼šåœ¨ç¬¬äºŒè¯¾çš„åŸºç¡€ä¸Šï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨æ¯åƒç´ æŠ€æœ¯æ¥è¾¾åˆ°ç›¸åŒçš„ç…§æ˜ã€‚ç®€å•çš„æ­£æ–¹ä½“å³ä½¿ä½¿ç”¨æ ‡å‡†çš„æ¼«å°„ç…§æ˜æˆ‘ä»¬ä¹Ÿèƒ½çœ‹åˆ°å·®å¼‚ã€‚\n\n\n\n\nå‰ææ¡ä»¶æœ¬ç³»åˆ—çš„æ¯èŠ‚è¯¾éƒ½ä»¥å‰é¢çš„è¯¾ç¨‹ä¸ºåŸºç¡€ï¼Œæœ¬èŠ‚è¯¾æ˜¯ç¬¬äºŒè¯¾çš„è¡¥å……ï¼Œå› æ­¤è¯·åŠ¡åœ¨é˜…è¯»äº†ä¹‹å‰çš„è¯¾ç¨‹åå†æ¥å›é¡¾ã€‚\n\nä¸‹é¢æ˜¯æœ¬ç³»åˆ—è¯¾ç¨‹çš„å‰å‡ è¯¾ï¼š\n\n\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\n\nä»€ä¹ˆæ˜¯æ¯åƒç´ ç…§æ˜éšç€ç€è‰²å™¨çš„ä½¿ç”¨ï¼Œæ¯åƒç´ ç…§æ˜åœ¨æ¸¸æˆä¸­æ˜¯ä¸€ç§ç›¸å¯¹è¾ƒæ–°çš„ç°è±¡ã€‚è®¸å¤šæœ‰åçš„æ—§æ¸¸æˆï¼Œä¾‹å¦‚åŸç‰ˆçš„åŠæ¡å‘½ï¼Œéƒ½æ˜¯åœ¨ç€è‰²å™¨ä¹‹å‰å¼€å‘å‡ºæ¥çš„ï¼Œä¸»è¦ä½¿ç”¨é™æ€ç…§æ˜ï¼Œé€šè¿‡ä¸€äº›æŠ€å·§æ¨¡æ‹ŸåŠ¨æ€ç…§æ˜ï¼Œä½¿ç”¨æ¯é¡¶ç‚¹ï¼ˆä¹Ÿç§°ä¸ºGouraudé˜´å½±ï¼‰ç…§æ˜æˆ–å…¶ä»–æŠ€æœ¯ï¼Œå¦‚åŠ¨æ€å…‰ç…§è´´å›¾ã€‚\nå…‰ç…§è´´å›¾å¯ä»¥æä¾›éå¸¸å¥½çš„æ•ˆæœï¼Œæœ‰æ—¶å¯ä»¥æ¯”å•ç‹¬çš„ç€è‰²å™¨æä¾›æ›´å¥½çš„æ•ˆæœï¼Œå› ä¸ºå¯ä»¥é¢„å…ˆè®¡ç®—æ˜‚è´µçš„å…‰çº¿è®¡ç®—ã€‚ä½†ç¼ºç‚¹æ˜¯å®ƒä»¬å ç”¨äº†å¤§é‡å†…å­˜å¹¶ä½¿ç”¨å®ƒä»¬è¿›è¡ŒåŠ¨æ€ç…§æ˜ä»…é™äºç®€å•çš„è®¡ç®—ã€‚\nä½¿ç”¨ç€è‰²å™¨ï¼Œç°åœ¨å¾ˆå¤šè¿™äº›è®¡ç®—è½¬ç»™GPUï¼Œè¿™å¯ä»¥å®Œæˆæ›´å¤šå®æ—¶çš„æ•ˆæœã€‚\nä»æ¯é¡¶ç‚¹ç…§æ˜è½¬ç§»åˆ°æ¯ç‰‡æ®µç…§æ˜è¿™æœ¬è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†é’ˆå¯¹æ¯é¡¶ç‚¹è§£å†³æ–¹æ¡ˆå’Œæ¯ç‰‡æ®µè§£å†³æ–¹æ¡ˆæŸ¥çœ‹ç›¸åŒçš„ç…§æ˜ä»£ç ã€‚å°½ç®¡æˆ‘å°†è¿™ç§ç±»å‹ç§°ä¸ºæ¯åƒç´ ï¼Œä½†åœ¨OpenGL ESä¸­æˆ‘ä»¬å®é™…ä¸Šä½¿ç”¨ç‰‡æ®µï¼Œå¹¶ä¸”å‡ ä¸ªç‰‡æ®µå¯ä»¥è´¡çŒ®ä¸€ä¸ªåƒç´ çš„æœ€ç»ˆå€¼ã€‚\næ‰‹æœºçš„GPUå˜å¾—è¶Šæ¥è¶Šå¿«ï¼Œä½†æ˜¯æ€§èƒ½ä»ç„¶æ˜¯ä¸€ä¸ªé—®é¢˜ã€‚å¯¹äºâ€œè½¯â€ç…§æ˜ä¾‹å¦‚åœ°å½¢ï¼Œæ¯é¡¶ç‚¹ç…§æ˜å¯èƒ½è¶³å¤Ÿå¥½ã€‚ç¡®ä¿æ‚¨åœ¨è´¨é‡å’Œé€Ÿåº¦ä¹‹é—´å–å¾—é€‚å½“çš„å¹³è¡¡ã€‚\nåœ¨æŸäº›æƒ…å†µä¸‹å¯ä»¥çœ‹åˆ°ä¸¤ç§ç±»å‹çš„ç…§æ˜ä¹‹é—´çš„æ˜¾è‘—å·®å¼‚ã€‚çœ‹çœ‹ä¸‹é¢çš„å±å¹•æˆªå›¾ï¼š\n\n\n\n\næ¯é¡¶ç‚¹ç…§æ˜ï¼›åœ¨æ­£æ–¹å½¢å››ä¸ªé¡¶ç‚¹ä¸ºä¸­å¿ƒ\næ¯ç‰‡æ®µç…§æ˜ï¼›åœ¨æ­£æ–¹å½¢å››ä¸ªé¡¶ç‚¹ä¸ºä¸­å¿ƒ\nåœ¨å·¦å›¾çš„æ¯é¡¶ç‚¹ç…§æ˜ä¸­æ­£æ–¹ä½“çš„æ­£é¢çœ‹èµ·æ¥åƒæ˜¯å¹³é¢é˜´å½±ï¼Œä¸èƒ½è¡¨æ˜é™„è¿‘æœ‰å…‰æºã€‚è¿™æ˜¯å› ä¸ºæ­£é¢çš„å››ä¸ªé¡¶ç‚¹å’Œå…‰æºè·ç¦»å·®ä¸å¤šç›¸ç­‰ï¼Œå¹¶ä¸”å››ä¸ªç‚¹çš„ä½å…‰å¼ºåº¦è¢«ç®€å•çš„æ’å…¥ä¸¤ä¸ªä¸‰è§’å½¢æ„æˆçš„æ­£é¢ã€‚ç›¸å¯¹æ¯”ï¼Œæ¯ç‰‡æ®µç…§æ˜å¾ˆå¥½çš„æ˜¾ç¤ºäº†äº®ç‚¹ç‰¹æ€§\n\n\næ¯é¡¶ç‚¹ç…§æ˜ï¼›åœ¨æ­£æ–¹å½¢è§’è½\næ¯ç‰‡æ®µç…§æ˜ï¼›åœ¨æ­£æ–¹å½¢è§’è½\nå·¦å›¾æ˜¾ç¤ºäº†ä¸€ä¸ªGouraudé˜´å½±ç«‹æ–¹ä½“ã€‚å½“å…‰æºç§»åŠ¨åˆ°ç«‹æ–¹ä½“æ­£é¢è§’è½æ—¶ï¼Œå¯ä»¥çœ‹åˆ°ç±»ä¼¼ä¸‰è§’å½¢çš„æ•ˆæœã€‚è¿™æ˜¯å› ä¸ºæ­£é¢å®é™…ä¸Šæ˜¯ç”±ä¸¤ä¸ªä¸‰è§’å½¢ç»„æˆï¼Œå¹¶ä¸”åœ¨æ¯ä¸ªä¸‰è§’å½¢ä¸åŒæ–¹å‘æ’å€¼ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°æ„æˆç«‹æ–¹ä½“çš„åŸºç¡€å‡ ä½•å›¾å½¢ã€‚æ¯ç‰‡æ®µçš„ç‰ˆæœ¬æ˜¾ç¤ºä¸Šæ²¡æœ‰æ­¤ç±»æ’å€¼çš„é—®é¢˜å¹¶ä¸”å®ƒåœ¨è¾¹ç¼˜é™„è¿‘æ˜¾ç¤ºäº†ä¸€ä¸ªæ¼‚äº®çš„åœ†å½¢é«˜å…‰ã€‚\n\n\n\næ¯é¡¶ç‚¹ç…§æ˜æ¦‚è¿°æˆ‘ä»¬æ¥çœ‹çœ‹ç¬¬äºŒè¯¾è®²çš„ç€è‰²å™¨ï¼›åœ¨è¯¥è¯¾ç¨‹ä¸­å¯ä»¥æ‰¾åˆ°è¯¦ç»†çš„ç€è‰²å™¨è¯´æ˜ã€‚\né¡¶ç‚¹ç€è‰²å™¨123456789101112131415161718192021222324252627282930uniform mat4 u_MVPMatrix;      // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewã€projectionçŸ©é˜µçš„å¸¸é‡uniform mat4 u_MVMatrix;       // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewçŸ©é˜µçš„å¸¸é‡uniform vec3 u_LightPos;       // å…‰æºåœ¨çœ¼ç›ç©ºé—´çš„ä½ç½®attribute vec4 a_Position;     // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®ä¿¡æ¯attribute vec4 a_Color;        // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„é¢œè‰²ä¿¡æ¯attribute vec3 a_Normal;       // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„æ³•çº¿ä¿¡æ¯varying vec4 v_Color;          // è¿™å°†è¢«ä¼ å…¥ç‰‡æ®µç€è‰²å™¨void main()                    // é¡¶ç‚¹ç€è‰²å™¨å…¥å£&#123;// å°†é¡¶ç‚¹è½¬æ¢æˆçœ¼ç›ç©ºé—´   vec3 modelViewVertex = vec3(u_MVMatrix * a_Position);// å°†æ³•çº¿çš„æ–¹å‘è½¬æ¢æˆçœ¼ç›ç©ºé—´   vec3 modelViewNormal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));// å°†ç”¨äºå“€å‡   float distance = length(u_LightPos - modelViewVertex);// è·å–ä»å…‰æºåˆ°é¡¶ç‚¹æ–¹å‘çš„å…‰çº¿å‘é‡   vec3 lightVector = normalize(u_LightPos - modelViewVertex);// è®¡ç®—å…‰çº¿çŸ¢é‡å’Œé¡¶ç‚¹æ³•çº¿çš„ç‚¹ç§¯ï¼Œå¦‚æœæ³•çº¿å’Œå…‰çº¿çŸ¢é‡æŒ‡å‘ç›¸åŒçš„æ–¹å‘ï¼Œé‚£ä¹ˆå®ƒå°†è·å¾—æœ€å¤§çš„ç…§æ˜   float diffuse = max(dot(modelViewNormal, lightVector), 0.1);// æ ¹æ®è·ç¦»å“€å‡å…‰çº¿   diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));// å°†é¢œè‰²ä¹˜ä»¥äº®åº¦ï¼Œå®ƒå°†è¢«æ’å…¥ä¸‰è§’å½¢ä¸­   v_Color = a_Color * diffuse;// gl_Positionæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ç”¨æ¥å­˜å‚¨æœ€ç»ˆçš„ä½ç½®// å°†é¡¶ç‚¹ä¹˜ä»¥çŸ©é˜µå¾—åˆ°æ ‡å‡†åŒ–å±å¹•åæ ‡çš„æœ€ç»ˆç‚¹   gl_Position = u_MVPMatrix * a_Position;&#125;\nç‰‡æ®µç€è‰²å™¨123456precision mediump float;     // æˆ‘ä»¬å°†é»˜è®¤ç²¾åº¦è®¾ç½®ä¸ºä¸­ç­‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç‰‡æ®µç€è‰²å™¨ä¸­çš„é«˜ç²¾åº¦varying vec4 v_Color;        // è¿™æ˜¯ä»ä¸‰è§’å½¢æ¯ä¸ªç‰‡æ®µå†…æ’çš„é¡¶ç‚¹ç€è‰²å™¨çš„é¢œè‰²void main()                  // ç‰‡æ®µç€è‰²å™¨å…¥å£&#123;    gl_FragColor = v_Color;   // ç›´æ¥å°†é¢œè‰²ä¼ é€’&#125;\næ­£å¦‚æ‚¨æ‰€è§ï¼Œå¤§éƒ¨åˆ†å·¥ä½œéƒ½åœ¨æˆ‘ä»¬çš„ç€è‰²å™¨ä¸­åšçš„ã€‚è½¬ç§»åˆ°æ¯ç‰‡æ®µç€è‰²ç…§æ˜æ„å‘³ç€ï¼Œæˆ‘ä»¬çš„ç‰‡æ®µç€è‰²å™¨è¿˜æœ‰æ›´å¤šçš„å·¥ä½œè¦åšã€‚\nå®ç°æ¯ç‰‡æ®µç…§æ˜ä»¥ä¸‹æ˜¯ç§»åŠ¨åˆ°æ¯ç‰‡æ®µç…§æ˜åçš„ä»£ç çš„æ ·å­ã€‚\né¡¶ç‚¹ç€è‰²å™¨ new123456789101112131415161718192021222324uniform mat4 u_MVPMatrix;    // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewã€projectionçŸ©é˜µçš„å¸¸é‡uniform mat4 u_MVMatrix;     // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewçŸ©é˜µçš„å¸¸é‡attribute vec4 a_Position;   // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®ä¿¡æ¯attribute vec4 a_Color;      // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„é¢œè‰²ä¿¡æ¯attribute vec3 a_Normal;     // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„æ³•çº¿ä¿¡æ¯varying vec3 v_Position;varying vec4 v_Color;varying vec3 v_Normal;// é¡¶ç‚¹ç€è‰²å™¨å…¥å£ç‚¹void main()&#123;   // å°†é¡¶ç‚¹ä½ç½®è½¬æ¢æˆçœ¼ç›ç©ºé—´çš„ä½ç½®   v_Position = vec3(u_MVMatrix * a_Position);   // ä¼ å…¥é¢œè‰²   v_Color = a_Color;   // å°†æ³•çº¿çš„æ–¹å‘è½¬æ¢åœ¨çœ¼ç›ç©ºé—´   v_Normal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));   // gl_Positionæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ç”¨æ¥å­˜å‚¨æœ€ç»ˆçš„ä½ç½®   // å°†é¡¶ç‚¹ä¹˜ä»¥çŸ©é˜µå¾—åˆ°æ ‡å‡†åŒ–å±å¹•åæ ‡çš„æœ€ç»ˆç‚¹   gl_Position = u_MVPMatrix * a_Position;&#125;\né¡¶ç‚¹ç€è‰²å™¨æ¯”ä¹‹å‰æ›´åŠ çš„ç®€å•ã€‚æˆ‘ä»¬æ·»åŠ äº†ä¸¤ä¸ªçº¿æ€§æ’å€¼å˜é‡ç”¨æ¥ä¼ å…¥åˆ°ç‰‡æ®µç€è‰²å™¨ï¼šé¡¶ç‚¹ä½ç½®å’Œé¡¶ç‚¹æ³•çº¿ã€‚å®ƒä»¬å°†åœ¨ç‰‡æ®µç€è‰²å™¨è®¡ç®—å…‰äº®çš„æ—¶å€™è¢«ä½¿ç”¨ã€‚\nç‰‡æ®µç€è‰²å™¨ new123456789101112131415161718precision mediump float; //æˆ‘ä»¬å°†é»˜è®¤ç²¾åº¦è®¾ç½®ä¸ºä¸­ç­‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç‰‡æ®µç€è‰²å™¨ä¸­çš„é«˜ç²¾åº¦uniform vec3 u_LightPos; // å…‰æºåœ¨çœ¼ç›ç©ºé—´çš„ä½ç½®varying vec3 v_Position; // æ’å…¥çš„ä½ç½®varying vec4 v_Color;    // æ’å…¥çš„ä½ç½®é¢œè‰²varying vec3 v_Normal;   // æ’å…¥çš„ä½ç½®æ³•çº¿void main()              // ç‰‡æ®µç€è‰²å™¨å…¥å£&#123;   // å°†ç”¨äºå“€å‡   float distance = length(u_LightPos - v_Position);   // è·å–ä»å…‰æºåˆ°é¡¶ç‚¹æ–¹å‘çš„å…‰çº¿å‘é‡   vec3 lightVector = normalize(u_LightPos - v_Position);   // è®¡ç®—å…‰çº¿çŸ¢é‡å’Œé¡¶ç‚¹æ³•çº¿çš„ç‚¹ç§¯ï¼Œå¦‚æœæ³•çº¿å’Œå…‰çº¿çŸ¢é‡æŒ‡å‘ç›¸åŒçš„æ–¹å‘ï¼Œé‚£ä¹ˆå®ƒå°†è·å¾—æœ€å¤§çš„ç…§æ˜   float diffuse = max(dot(v_Normal, lightVector), 0.1);   // æ ¹æ®è·ç¦»å“€å‡å…‰çº¿   diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));   // é¢œè‰²ä¹˜ä»¥äº®åº¦å“€å‡å¾—åˆ°æœ€ç»ˆçš„é¢œè‰²   gl_FragColor = v_Color * diffuse;&#125;\nä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜ï¼Œæˆ‘ä»¬çš„ç‰‡æ®µç€è‰²å™¨è¿˜æœ‰æ›´å¤šçš„å·¥ä½œè¦åšã€‚æˆ‘ä»¬åŸºæœ¬ä¸Šå°†æœ—ä¼¯è®¡ç®—å’Œå“€å‡ç§»åˆ°äº†æ¯åƒç´ çº§åˆ«ï¼Œè¿™ä¸ºæˆ‘ä»¬æä¾›äº†æ›´é€¼çœŸçš„ç…§æ˜ï¼Œè€Œæ— éœ€æ·»åŠ æ›´å¤šé¡¶ç‚¹ã€‚\nè¿›ä¸€æ­¥ç»ƒä¹ æˆ‘ä»¬å¯ä»¥åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­è®¡ç®—è·ç¦»ï¼Œç„¶åèµ‹å€¼ç»™å˜é‡é€šè¿‡çº¿æ€§æ’å€¼ä¼ å…¥ç‰‡æ®µç€è‰²å™¨å—ï¼Ÿ\næ•™ç¨‹ç›®å½•\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\nOpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€\nOpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰\nOpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤\nOpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVOBï¼‰\n\næ‰“åŒ…æ•™æå¯ä»¥åœ¨Githubä¸‹è½½æœ¬è¯¾ç¨‹æºä»£ç ï¼šä¸‹è½½é¡¹ç›®æœ¬è¯¾çš„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿå¯ä»¥å†Androidå¸‚åœºä¸‹ï¼šgoogle play ä¸‹è½½apkâ€œæˆ‘â€ä¹Ÿç¼–è¯‘äº†ä¸ªapkï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½ï¼šgithub download\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-opengl/Screenshot_2019-02-07-13-45-15-213_com.xujiaji.le.png","plink":"https://blog.xujiaji.com/post/Learn-OpenGL-Lesson-Three/"},{"title":"OpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰","date":"2019-01-23T07:50:51.000Z","author":"xujiaji","updated":"2019-04-08T06:56:23.990Z","content":"\nç¿»è¯‘æ–‡\n\nåŸæ–‡æ ‡é¢˜ï¼šOpenGL Android Lesson One: Getting StartedåŸæ–‡é“¾æ¥ï¼šhttp://www.learnopengles.com/android-lesson-two-ambient-and-diffuse-lighting/\n\nç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\n\n\n\næ¬¢è¿æ¥åˆ°ç¬¬äºŒè¯¾ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ä½¿ç”¨ç€è‰²å™¨å®ç°æœ—ä¼¯åå°„ï¼ˆ Lambertian reflectance ï¼‰ï¼Œä¹Ÿç§°ä¸ºæ ‡å‡†æ¼«å°„ç…§æ˜ã€‚åœ¨OpengGLES2ï¼Œæˆ‘ä»¬éœ€è¦å®ç°æˆ‘ä»¬è‡ªå·±çš„ç…§æ˜ç®—æ³•ï¼Œå› æ­¤æˆ‘ä»¬è¦å­¦ä¼šæ•°å­¦å¦‚ä½•å·¥ä½œä»¥åŠå¦‚ä½•åº”ç”¨åˆ°æˆ‘ä»¬çš„åœºæ™¯ä¸­ã€‚\n\n\n\n\né˜…è¯»æœ¬æ–‡å‰ææ¡ä»¶æœ¬ç³»åˆ—çš„æ¯èŠ‚è¯¾éƒ½ä»¥å‰é¢çš„è¯¾ç¨‹ä¸ºåŸºç¡€ã€‚åœ¨å¼€å§‹å‰ï¼Œè¯·çœ‹ç¬¬ä¸€è¯¾ï¼Œå› ä¸ºæœ¬è¯¾ç¨‹å°†ä»¥æ­¤ä¸ºåŸºç¡€æ¦‚å¿µä»‹ç»ã€‚\nä»€ä¹ˆæ˜¯å…‰æ²¡é”™ï¼ä¸€ä¸ªæ²¡æœ‰å…‰çš„ä¸–ç•Œæ˜¯æ˜æš—çš„ã€‚æ²¡æœ‰[å…‰]ï¼Œæˆ‘ä»¬ç”šè‡³ä¸èƒ½æ„ŸçŸ¥ä¸–ç•Œæˆ–æˆ‘ä»¬å‘¨å›´çš„ç‰©ä½“ï¼Œé™¤äº†å£°éŸ³å’Œè§¦æ‘¸ç­‰å…¶ä»–æ„Ÿå®˜ã€‚å…‰å‘æˆ‘ä»¬å±•ç¤ºäº†ç‰©ä½“æ˜¯æ˜äº®è¿˜æ˜¯æ˜æš—ï¼Œæ˜¯è¿œè¿˜æ˜¯è¿‘ï¼Œå®ƒçš„è§’åº¦æ˜¯ä»€ä¹ˆã€‚\nåœ¨ç°å®ä¸–ç•Œï¼Œæˆ‘ä»¬æ‰€æ„ŸçŸ¥çš„å…‰å®é™…æ˜¯æ•°ä¸‡äº¿å¾®å°ç²’å­çš„èšé›†ï¼Œç§°ä¸ºå…‰å­ã€‚å®ƒä»å…‰æºé£å‡ºï¼Œåå¼¹æ•°åƒæˆ–æ•°ç™¾ä¸‡æ¬¡ï¼Œæœ€ç»ˆåˆ°è¾¾æˆ‘ä»¬çš„çœ¼é•œæˆ‘ä»¬ç§°ä¹‹ä¸ºå…‰ã€‚\næˆ‘ä»¬å¦‚ä½•é€šè¿‡è®¡ç®—æœºå›¾å½¢æ¨¡æ‹Ÿå…‰çš„å½±å“ï¼Ÿæœ‰ä¸¤ç§æµè¡Œçš„æ–¹æ³•ï¼šå…‰çº¿è¿½è¸ªå’Œå…‰æ …åŒ–å…‰çº¿è·Ÿè¸ªçš„å·¥ä½œåŸç†æ˜¯é€šè¿‡æ•°å­¦è®¡ç®—è·Ÿè¸ªå®é™…å…‰çº¿å¹¶æŸ¥çœ‹å®ƒä»¬çš„æœ€ç»ˆä½ç½®ã€‚è¯¥æŠ€æœ¯å¯ä»¥å¾—åˆ°éå¸¸ç²¾å‡†å’Œé€¼çœŸçš„ç»“æœï¼Œä½†ç¼ºç‚¹æ˜¯æ¨¡æ‹Ÿæ‰€æœ‰è¿™äº›å…‰çº¿çš„è®¡ç®—æˆæœ¬éå¸¸é«˜ï¼Œå¹¶ä¸”é€šå¸¸å¯¹äºå®æ—¶æ¸²æŸ“æ¥è¯´å¤ªæ…¢äº†ã€‚ç”±äºè¿™ä¸ªé™åˆ¶ï¼Œå¤§å¤šæ•°å®æ—¶å›¾å½¢è®¡ç®—ä½¿ç”¨å…‰æ …åŒ–ï¼Œå®ƒé€šè¿‡è¿‘ä¼¼å€¼æ¨¡æ‹Ÿå…‰ç…§ã€‚é‰´äºå½“å‰æ¸¸æˆçš„çœŸå®æ€§ï¼Œå…‰æ …åŒ–çœ‹èµ·æ¥éå¸¸å¥½ï¼Œå³ä½¿åœ¨æ‰‹æœºä¸Šä¹Ÿå¯ä»¥å¿«é€Ÿå®ç°å®æ—¶å›¾å½¢ã€‚OpengGL ESä¸»è¦æ˜¯ä¸€ä¸ªå…‰æ …åŒ–åº“ï¼Œå› æ­¤æˆ‘ä»¬ä¸»è¦å…³æ³¨è¿™ä¸ªã€‚\nä¸åŒç§ç±»çš„å…‰äº‹å®è¯æ˜ï¼Œæˆ‘ä»¬å¯ä»¥æŠ½è±¡å‡ºå…‰çš„å·¥ä½œæ–¹å¼ï¼Œå¹¶æå‡ºä¸‰ç§åŸºæœ¬çš„å…‰ç…§æ–¹å¼\n\n\n\n\nç¯å¢ƒå…‰\nç¯å¢ƒå…‰è¿™æ˜¯åŸºæœ¬çš„ç…§æ˜æ°´å¹³ï¼Œä¼¼ä¹éå¸ƒæ•´ä¸ªåœºæ™¯ã€‚å®ƒä¼¼ä¹ä¸æ˜¯æ¥è‡ªä»»ä½•å…‰æºçš„å…‰ï¼Œå› ä¸ºå®ƒåœ¨åˆ°è¾¾ä½ ä¹‹å‰å·²ç»åå¼¹äº†å¾ˆå¤šæ¬¡ã€‚è¿™ç§ç±»å‹çš„å…‰åœ¨æˆ·å¤–çš„é˜´å¤©å¯ä»¥ä½“éªŒï¼Œæˆ–è€…åœ¨æˆ·å†…ä½œä¸ºè®¸å¤šä¸åŒå…‰æºçš„ç§¯ç´¯å½±å“ã€‚æˆ‘ä»¬å¯ä»¥ä¸ºç‰©ä½“æˆ–åœºæ™¯è®¾ç½®ä¸€ä¸ªåŸºæœ¬çš„äº®åº¦ï¼Œè€Œä¸æ˜¯ä¸ºæ‰€æœ‰çš„å…‰å•ç‹¬è®¡ç®—ã€‚\n\n\nç¯å¢ƒç…§æ˜å’Œæ¼«å°„ç…§æ˜çš„ä¾‹å­\næ¼«å°„ç…§æ˜è¿™æ˜¯ç›´æ¥ä»ä¸€ä¸ªç‰©ä½“ä¸Šè·³å¼¹ååˆ°è¾¾æ‚¨çœ¼ç›ä¸­çš„å…‰ï¼Œç‰©ä½“çš„äº®åº¦éšç€å®ƒä¸ç…§æ˜çš„è§’åº¦è€Œå˜åŒ–ï¼Œé¢å‘ç¯å…‰çš„æ–¹å‘æ¯”å…¶ä»–è§’åº¦æ›´åŠ æ˜äº®æ­¤å¤–ï¼Œæ— è®ºæˆ‘ä»¬ç›¸å¯¹äºç‰©ä½“çš„è§’åº¦æ€æ ·ï¼Œæˆ‘ä»¬éƒ½è§‰å¾—ç‰©ä½“æ˜¯ç›¸åŒçš„äº®åº¦ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸ºLambertçš„ä½™å¼¦å®šå¾‹ã€‚æ¼«å°„ç…§æ˜æˆ–æœ—ä¼¯åå°„ç‡åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­å¾ˆå¸¸è§ï¼Œæ‚¨å¯ä»¥åœ¨å®¤å†…ç¯å…‰ç…§æ˜çš„ç™½å¢™ä¸Šè½»æ¾çœ‹åˆ°ã€‚\n\n\né•œé¢é«˜å…‰çš„ä¸€ä¸ªä¾‹å­\né•œé¢ç…§æ˜ä¸æ¼«å°„ç…§æ˜ä¸åŒï¼Œå½“æˆ‘ä»¬ç›¸å¯¹äºç‰©ä½“ç§»åŠ¨æ—¶ï¼Œé•œé¢å…‰ç…§ä¹Ÿä¼šå‘ç”Ÿæ”¹å˜ã€‚è¿™ç»™ç‰©ä½“å¸¦æ¥â€œå…‰æ³½â€ï¼Œå¹¶ä¸”å¯ä»¥åœ¨â€œæ›´å…‰æ»‘â€çš„è¡¨é¢ä¸Šçœ‹åˆ°ï¼Œä¾‹å¦‚ç»ç’ƒå’Œå…¶ä»–æœ‰å…‰æ³½çš„ç‰©ä½“ã€‚\n\n\n\næ¨¡æ‹Ÿå…‰æ­£å¦‚3Dåœºæ™¯ä¸­çš„3ä¸­ä¸»è¦ç±»å‹çš„å…‰ç…§ä¸€æ ·ï¼Œè¿˜æœ‰ä¸‰ç§ä¸»è¦ç±»å‹çš„å…‰æºï¼šå®šå‘å…‰æºï¼Œç‚¹å…‰æºï¼Œèšå…‰ç¯ï¼Œè¿™äº›ä¹Ÿå¯ä»¥åœ¨æ—¥å¸¸ç”Ÿæ´»ä¸­è½»æ¾çœ‹åˆ°ã€‚\n\n\n\n\nä¸€ä¸ªæ˜äº®çš„é£æ™¯\nå®šå‘å…‰æºå®šå‘å…‰ç…§é€šå¸¸æ¥è‡ªäºä¸€ä¸ªå¾ˆè¿œçš„å…‰æºï¼Œå®ƒå¯ä»¥å‡åŒ€çš„ç…§äº®æ•´ä¸ªåœºæ™¯è¾¾åˆ°ç›¸åŒçš„äº®åº¦ã€‚è¿™ç§å…‰æºæ˜¯æœ€ç®€å•çš„ç±»å‹ï¼Œæ— è®ºæ‚¨å¤„åœ¨åœºæ™¯å“ªé‡Œï¼Œå…‰ç…§éƒ½å…·æœ‰ç›¸åŒçš„å¼ºåº¦å’Œæ–¹å‘ã€‚\n\n\nä¸€ä¸ªç‚¹å…‰æºçš„ä¾‹å­\nç‚¹å…‰æºç‚¹å…‰æºå¯ä»¥æ·»åŠ åˆ°åœºæ™¯ä¸­ï¼Œä»¥æä¾›æ›´å¤šæ ·åŒ–å’Œé€¼çœŸçš„ç…§æ˜ã€‚ç‚¹å…‰çš„ç…§å°„éšç€è·ç¦»è€Œä¸‹é™ï¼Œå¹¶ä¸”å®ƒçš„å…‰çº¿åœ¨æ‰€æœ‰æ–¹å‘ä¸Šå‘å¤–ä¼ æ’­ï¼Œå…‰æºä½äºä¸­å¿ƒã€‚\n\n\nèšå…‰ç¯\nèšå…‰ç¯é™¤äº†å…·æœ‰ç‚¹å…‰æºçš„ç‰¹æ€§å¤–ï¼Œèšå…‰ç¯ä¹Ÿæœ‰å…‰å“€å‡çš„æ–¹å‘ï¼Œé€šå¸¸å‘ˆé”¥å½¢ã€‚\n\n\n\næ•°å­¦æœ¬èŠ‚è¯¾ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ¥è‡ªä¸€ä¸ªç‚¹å…‰æºçš„ç¯å¢ƒç…§æ˜å’Œæ¼«å°„ç…§æ˜ã€‚\nç¯å¢ƒç…§æ˜ç¯å¢ƒç…§æ˜å…¶å®æ˜¯é—´æ¥æ¼«å°„ç…§æ˜ï¼Œä½†å®ƒä¹Ÿå¯ä»¥è¢«è®¤ä¸ºæ˜¯éå¸ƒæ•´ä¸ªåœºæ™¯çš„ä½çº§å…‰ã€‚å¦‚æœæˆ‘ä»¬è¿™ä¹ˆæƒ³ï¼Œé‚£ä¹ˆå®ƒå°†éå¸¸å¥½è®¡ç®—ï¼š\n12// æœ€ç»ˆé¢œè‰² = æè´¨é¢œè‰² * ç¯å¢ƒå…‰é¢œè‰²final color = material color * ambient light color\nä¾‹å¦‚ï¼Œæˆ‘ä»¬æœ‰ä¸ªçº¢è‰²çš„ç‰©ä½“å’Œä¸€ä¸ªæš—ç™½è‰²çš„ç¯å¢ƒç…§æ˜ã€‚æˆ‘ä»¬å‡è®¾ä¸‰ä¸ªé¢œè‰²ï¼ˆçº¢ï¼Œç»¿ï¼Œè“ï¼‰çš„æ•°ç»„å­˜å‚¨é¢œè‰²ï¼Œä½¿ç”¨RGBé¢œè‰²æ¨¡å‹ï¼š\n12// æœ€ç»ˆé¢œè‰² = çº¢è‰² * æš—ç™½è‰² = æš—çº¢è‰²final color = &#123;1, 0, 0&#125; * &#123;0.1, 0.1, 0.1&#125; = &#123;0.1, 0.0, 0.0&#125;\nç‰©ä½“çš„æœ€ç»ˆé¢œè‰²å°†æ˜¯æš—çº¢è‰²ï¼Œå¦‚æœæ‚¨æœ‰ä¸€ä¸ªè¢«æ˜æš—çš„ç™½å…‰ç…§æ˜çš„çº¢è‰²ç‰©ä½“ï¼Œé‚£ä¹ˆè¿™å°±æ˜¯æ‚¨çš„é¢„æœŸã€‚åŸºæœ¬çš„ç¯å¢ƒå…‰çœŸçš„æ²¡æœ‰æ¯”è¿™æ›´å¤šçš„äº†ï¼Œé™¤éæ‚¨æƒ³åŠ å…¥æ›´å…ˆè¿›çš„ç…§æ˜æŠ€æœ¯ï¼Œå¦‚å…‰èƒ½ä¼ é€’ã€‚\næ¼«å°„ç…§æ˜-ç‚¹å…‰æºå¯¹äºæ¼«å°„ç…§æ˜ï¼Œæˆ‘ä»¬éœ€è¦æ·»åŠ å“€å‡å’Œå…‰æºä½ç½®ã€‚å…‰æºä½ç½®å°†ç”¨æ¥è®¡ç®—å…‰çº¿å’Œè¡¨é¢çš„è§’åº¦ï¼Œå®ƒå°†å½±å“è¡¨é¢çš„æ•´ä½“å…‰ç…§æ°´å¹³ã€‚å®ƒè¿˜å°†ç”¨äºè®¡ç®—å…‰æºåˆ°è¡¨é¢çš„è·ç¦»ï¼Œè¿™å†³å®šäº†å…‰åœ¨è¿™ä¸ªç‚¹ä¸Šçš„å¼ºåº¦ã€‚\nç¬¬ä¸€æ­¥ï¼šè®¡ç®—æœ—ä¼¯å› å­ï¼ˆlambert factorï¼‰æˆ‘ä»¬æœ€é‡è¦çš„æ˜¯éœ€è¦å¼„æ¸…æ¥šè¡¨é¢å’Œå…‰çº¿ä¹‹é—´çš„è§’åº¦ã€‚é¢å‘å…‰ç›´å°„çš„è¡¨é¢å› è¯¥å…¨å¼ºåº¦ç…§å°„ï¼Œè€Œå€¾æ–œçš„è¡¨é¢å› è¯¥å¾—åˆ°è¾ƒå°‘çš„ç…§å°„ï¼Œæ¯”è¾ƒåˆé€‚çš„è®¡ç®—æ–¹å¼æ˜¯ä½¿ç”¨Lambertçš„ä½™å¼¦å®šå¾‹ã€‚æœæˆ‘ä»¬æœ‰ä¸¤ä¸ªå‘é‡ï¼Œä¸€ä¸ªæ˜¯ä»å…‰åˆ°è¡¨é¢ä¸Šçš„ä¸€ä¸ªç‚¹ï¼Œç¬¬äºŒä¸ªæ˜¯è¡¨é¢çš„æ³•çº¿ï¼ˆå¦‚æœè¡¨é¢æ˜¯å¹³é¢ï¼Œåˆ™è¡¨é¢æ³•çº¿æ˜¯æŒ‡å‘ä¸Šæˆ–å‚ç›´äºè¯¥è¡¨é¢çš„çŸ¢é‡ï¼‰ï¼Œç„¶åæˆ‘ä»¬å¯ä»¥é€šè¿‡å¯¹æ¯ä¸ªå‘é‡è¿›è¡Œå½’ä¸€åŒ–æ¥è®¡ç®—ä½™å¼¦ï¼Œä½¿å…¶é•¿åº¦ä¸º1ï¼Œç„¶åé€šè¿‡è®¡ç®—ä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯ï¼ˆæ•°é‡ç§¯ï¼‰ã€‚è¿™ä¸ªæ“ä½œå¯ä»¥ç”±OpenGL ES 2è½»æ¾å®Œæˆã€‚\næˆ‘ä»¬ç§°è¿™ä½æœ—ä¼¯å› å­ï¼Œå®ƒçš„å–å€¼èŒƒå›´åœ¨0~1ä¹‹é—´\n123456// å…‰çº¿å‘é‡ = å…‰æºä½ç½® - ç‰©ä½“ä½ç½®light vector = light position - object position// ä½™å¼¦ = ç‰©ä½“æ³•çº¿å’Œå½’ä¸€åŒ–åçš„å…‰çº¿å‘é‡çš„ç‚¹ç§¯cosine = dot product(object normal, normalize(light vector))// æœ—ä¼¯å› å­ = å–ä½™å¼¦å’Œ0ä¸­æœ€å¤§çš„lambert factor = max(cosine, 0)\né¦–å…ˆæˆ‘ä»¬é€šè¿‡å…‰æºä½ç½®å‡å»ç‰©ä½“ä½ç½®å¾—åˆ°å…‰çº¿å‘é‡ï¼Œç„¶åæˆ‘ä»¬é€šè¿‡ç‰©ä½“æ³•çº¿å’Œå…‰å‘é‡çš„ç‚¹ç§¯å¾—åˆ°ä½™å¼¦ã€‚æˆ‘ä»¬æ ‡å‡†åŒ–å…‰å‘é‡ï¼Œè¿™æ„å‘³ç€æ”¹å˜å®ƒçš„é•¿åº¦ï¼Œé•¿åº¦ä¸º1ï¼Œè¿™ä¸ªç‰©ä½“çš„æ³•çº¿é•¿åº¦ä¹Ÿæ˜¯1ï¼Œä¸¤ä¸ªå½’ä¸€åŒ–å‘é‡çš„ç‚¹ç§¯å¾—åˆ°ä»–ä»¬ä¹‹é—´çš„ä½™å¼¦ã€‚å› ä¸ºç‚¹ç§¯çš„å–å€¼èŒƒå›´æ˜¯-1~1ï¼Œæ‰€ä»¥æˆ‘ä»¬å°†å…¶é™åˆ¶åˆ°0~1ã€‚\nè¿™å„¿æœ‰ä¸ªå¤„åœ¨åŸç‚¹çš„å¹³é¢ï¼Œå…¶è¡¨é¢æ³•çº¿æŒ‡å‘å¤©ç©ºçš„ä¾‹å­ã€‚\n\nå…‰çš„ä½ç½®åœ¨{0, 10, -10}ï¼Œæˆ‘ä»¬æƒ³è¦è®¡ç®—åœ¨åŸç‚¹çš„å…‰ã€‚\n\n1234// å…‰çº¿å‘é‡light vector = &#123;0, 10, -10&#125; - &#123;0, 0, 0&#125; = &#123;0, 10, -10&#125;// ç‰©ä½“æ³•çº¿object normal = &#123;0, 1, 0&#125;\n\nç®€æ´çš„è¯´ï¼Œå¦‚æœä»¬æ²¿ç€å…‰çº¿çŸ¢é‡èµ°ï¼Œæˆ‘ä»¬åˆ°è¾¾å…‰æºçš„ä½ç½®ã€‚ä¸ºäº†å½’ä¸€åŒ–çŸ¢é‡ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªåˆ†é‡é™¤ä»¥çŸ¢é‡é•¿åº¦ï¼š\n\n1234// å…‰çº¿å‘é‡é•¿åº¦ = å¹³æ–¹æ ¹(0*0 + 10*10 + (-10 * -10)) = å¹³æ–¹æ ¹(200) = 14.14light vector length = square root(0*0 + 10*10 + (-10 * -10)) = square root(200) = 14.14// å½’ä¸€åŒ–å…‰çº¿å‘é‡normalize light vector = &#123;0, 10/14.14, -10/14.14&#125; = &#123;0, 0.707, -0.707&#125;\n\nç„¶åæˆ‘ä»¬è®¡ç®—ç‚¹ç§¯ï¼š\n\n12// ç‚¹ç§¯dot product(&#123;0, 1, 0&#125;, &#123;0, 0.707, -0.707&#125;) = (0 * 0) + (1 * 0.707) + (0 * -0.707) = 0.707\nè¿™é‡Œæœ‰ä¸ªä¸€å¯¹ç‚¹ç§¯è®¡ç®—å¾ˆå¥½çš„è§£é‡Š\n\næœ€åæˆ‘ä»¬é™åˆ¶èŒƒå›´ï¼š\n\n12// æœ—ä¼¯å› å­lambert factor = max(0.707, 0) = 0.707\nOpenGL ES 2çš„ç€è‰²å™¨è¯­è¨€å†…ç½®äº†å¯¹å…¶ä¸­ä¸€äº›å‡½æ•°çš„æ”¯æŒï¼Œå› æ­¤æˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨å®Œæˆæ‰€æœ‰æ•°å­¦è¿ç®—ï¼Œä½†å®ƒä»ç„¶æœ‰åŠ©äºç†è§£æ­£åœ¨å‘ç”Ÿçš„äº‹æƒ…ã€‚\nç¬¬äºŒæ­¥ï¼šè®¡ç®—å“€å‡ç³»æ•°æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—å“€å‡ã€‚æ¥è‡ªå…‰æºçš„å®é™…å…‰å“€å‡éµå¾ªåå¹³æ–¹å®šå¾‹\n\nä¹Ÿå¯ä»¥è¿™æ ·è¡¨ç¤ºï¼š\n\n12// äº®åº¦ = 1 / è·ç¦»çš„å¹³æ–¹luminosity = 1 / (distance * distance)\n\nå›åˆ°æˆ‘ä»¬çš„åˆ—å­ï¼Œå› ä¸ºæˆ‘ä»¬æœ‰å…‰çº¿é•¿åº¦ä¸º14.14ï¼Œè¿™å„¿æˆ‘ä»¬æœ€ç»ˆçš„äº®åº¦ï¼š\n\n1luminosity = 1 / (14.14 * 14.14) = 1 / 200 = 0.005\næ­£å¦‚æ‚¨æ‰€è§ï¼Œåå¹³æ–¹å®šå¾‹ä¼šå¯¼è‡´è·ç¦»çš„å¼ºçƒˆå“€å‡ã€‚è¿™å°±æ˜¯ç‚¹å…‰æºçš„å…‰åœ¨ç°å®ä¸–ç•Œä¸­çš„ä½œç”¨ï¼Œä½†æ˜¯ç”±äºæˆ‘ä»¬å›¾å½¢å±•ç¤ºèŒƒå›´æœ‰é™ï¼Œæ§åˆ¶è¿™ä¸ªå“€å‡ç³»æ•°æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œå› æ­¤æˆ‘ä»¬ä»ç„¶èƒ½è·å¾—é€¼çœŸçš„ç…§æ˜è€Œä¸ä¼šè®©å…¶çœ‹èµ·æ¥å¾ˆæ˜æš—ã€‚\nç¬¬ä¸‰æ­¥ï¼šè®¡ç®—æœ€ç»ˆé¢œè‰²\nç°åœ¨æˆ‘ä»¬çŸ¥é“äº†ä½™å¼¦å’Œå“€å‡åº¦ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—æˆ‘ä»¬æœ€ç»ˆçš„äº®åº¦ï¼š\n\n12// æœ€ç»ˆé¢œè‰² = æè´¨é¢œè‰² * ï¼ˆå…‰çš„é¢œè‰² * æœ—ä¼¯å› å­ * äº®åº¦ï¼‰final color = material color * (light color * lambert factor * luminosity)\n\nç»§ç»­æˆ‘ä»¬ä¹‹å‰çš„çº¢è‰²ç‰©ä½“å’Œç™½å…‰æºçš„ä¾‹å­ï¼Œè¿™å„¿è®¡ç®—æœ€ç»ˆé¢œè‰²ï¼š\n\n1final color = &#123;1, 0, 0&#125; * (&#123;1, 1, 1&#125; * 0.707 * 0.005) = &#123;1, 0, 0&#125; * &#123;0.0035, 0.0035, 0.0035&#125; = &#123;0.0035, 0, 0&#125;\nå›é¡¾ä¸€ä¸‹ï¼Œå¯¹äºæ¼«å°„ç…§æ˜ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨è¡¨é¢å’Œå…‰çº¿ä¹‹é—´çš„è§’åº¦ä»¥åŠè·ç¦»ï¼Œç”¨æ¥è®¡ç®—æœ€ç»ˆçš„æ•´ä½“æ¼«å°„äº®åº¦ã€‚\n\nä»¥ä¸‹æ˜¯æ­¥éª¤ï¼š\n\n12345678910// ç¬¬ä¸€æ­¥light vector = light position - object positioncosine = dot product(object normal, normalize(light vector))lambert factor = mac(cosine, 0)// ç¬¬äºŒæ­¥luminosity = 1 / (distance * distance)// ç¬¬ä¸‰æ­¥final color = material color * (light color * lambert factor * luminosity)\nå°†è¿™ä¸€åˆ‡æ”¾åˆ°OpenGL ES 2ç€è‰²å™¨ä¸­é¡¶ç‚¹ç€è‰²å™¨12345678910111213141516171819202122232425262728293031final String vertexShader =        \"uniform mat4 u_MVPMatrix;      \\n\" + // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewã€projectionçŸ©é˜µçš„å¸¸é‡        \"uniform mat4 u_MVMatrix;       \\n\" + // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewçŸ©é˜µçš„å¸¸é‡        \"uniform vec3 u_LightPos;       \\n\" + // å…‰æºåœ¨çœ¼ç›ç©ºé—´ï¼ˆç›¸å¯¹äºç›¸æœºè§†è§’ï¼‰çš„ä½ç½®        \"attribute vec4 a_Position;     \\n\" + // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®ä¿¡æ¯        \"attribute vec4 a_Color;        \\n\" + // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„é¢œè‰²ä¿¡æ¯        \"attribute vec3 a_Normal;       \\n\" + // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„æ³•çº¿ä¿¡æ¯        \"varying vec4 v_Color;          \\n\" + // è¿™å°†è¢«ä¼ å…¥ç‰‡æ®µç€è‰²å™¨        \"void main()                    \\n\" + // é¡¶ç‚¹ç€è‰²å™¨å…¥å£        \"&#123;                              \\n\" +        // å°†é¡¶ç‚¹è½¬æ¢æˆçœ¼ç›ç©ºé—´ï¼ˆç›¸å¯¹äºç›¸æœºè§†è§’ï¼‰        \"   vec3 modelViewVertex = vec3(u_MVMatrix * a_Position);                \\n\" +        // å°†æ³•çº¿çš„æ–¹å‘è½¬æ¢æˆçœ¼ç›ç©ºé—´ï¼ˆç›¸å¯¹äºç›¸æœºè§†è§’ï¼‰        \"   vec3 modelViewNormal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));       \\n\" +        // å°†ç”¨äºå“€å‡        \"   float distance = length(u_LightPos - modelViewVertex);               \\n\" +        // è·å–ä»å…‰æºåˆ°é¡¶ç‚¹æ–¹å‘çš„å…‰çº¿å‘é‡        \"   vec3 lightVector = normalize(u_LightPos - modelViewVertex);          \\n\" +        // è®¡ç®—å…‰çº¿çŸ¢é‡å’Œé¡¶ç‚¹æ³•çº¿çš„ç‚¹ç§¯ï¼Œå¦‚æœæ³•çº¿å’Œå…‰çº¿çŸ¢é‡æŒ‡å‘ç›¸åŒçš„æ–¹å‘ï¼Œé‚£ä¹ˆå®ƒå°†è·å¾—æœ€å¤§çš„ç…§æ˜        \"   float diffuse = max(dot(modelViewNormal, lightVector), 0.1);         \\n\" +        // æ ¹æ®è·ç¦»å“€å‡å…‰çº¿        \"   diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));    \\n\" +        // å°†é¢œè‰²ä¹˜ä»¥äº®åº¦ï¼Œå®ƒå°†è¢«æ’å…¥ä¸‰è§’å½¢ä¸­        \"   v_Color = a_Color * diffuse;                                         \\n\" +        // gl_Positionæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ç”¨æ¥å­˜å‚¨æœ€ç»ˆçš„ä½ç½®        // å°†é¡¶ç‚¹ä¹˜ä»¥çŸ©é˜µå¾—åˆ°æ ‡å‡†åŒ–å±å¹•åæ ‡çš„æœ€ç»ˆç‚¹        \"   gl_Position = u_MVPMatrix * a_Position;                              \\n\" +        \"&#125;                                                                       \\n\";\nè¿™é‡Œæœ‰ç›¸å½“å¤šçš„äº‹æƒ…è¦åšã€‚æˆ‘ä»¬åœ¨ç¬¬ä¸€è¯¾è®²åˆ°è¿‡æˆ‘ä»¬è¦æœ‰ä¸€ä¸ªmodel/view/projectionçš„ç»„åˆçŸ©é˜µï¼Œä½†æ˜¯æˆ‘ä»¬è¿˜è¦æ·»åŠ äº†ä¸€ä¸ªmodel/viewçŸ©é˜µã€‚ä¸ºä»€ä¹ˆï¼Ÿå› ä¸ºæˆ‘ä»¬å°†éœ€è¦è¿™ä¸ªçŸ©é˜µå»è®¡ç®—å…‰æºä½ç½®åˆ°å½“å‰é¡¶ç‚¹ä½ç½®ä¹‹é—´çš„è·ç¦»ã€‚å¯¹äºæ¼«å°„ç…§æ˜ï¼Œæ— è®ºæ‚¨ä½¿ç”¨ä¸–ç•Œç©ºé—´ï¼ˆmodelçŸ©é˜µï¼‰æˆ–çœ¼ç›ç©ºé—´ï¼ˆmodel/viewçŸ©é˜µï¼‰åªè¦ä½ èƒ½è®¡ç®—å‡ºåˆé€‚çš„è·ç¦»å’Œè§’åº¦å®é™…ä¸Šéƒ½æ²¡æœ‰é—®é¢˜ã€‚\næˆ‘ä»¬ä¼ å…¥é¡¶ç‚¹çš„é¢œè‰²å’Œä½ç½®ä¿¡æ¯ï¼Œä»¥åŠå®ƒçš„æ³•çº¿ã€‚æˆ‘ä»¬ä¼šå°†æœ€ç»ˆçš„é¢œè‰²ä¼ å…¥ç‰‡æ®µç€è‰²å™¨ï¼Œå®ƒå°†åœ¨é¡¶ç‚¹ä¹‹é—´æ’å€¼ï¼Œè¿™ä¹Ÿè¢«ç§°ä¸ºGouraudç€è‰²æ³•ã€‚\nè®©æˆ‘ä»¬æ¥çœ‹çœ‹ç€è‰²å™¨æ¯ä¸€éƒ¨åˆ†çš„æ„ä¹‰ï¼š\n12// å°†é¡¶ç‚¹è½¬æ¢æˆçœ¼ç›ç©ºé—´ï¼ˆç›¸å¯¹äºç›¸æœºè§†è§’ï¼‰\"   vec3 modelViewVertex = vec3(u_MVMatrix * a_Position);                \\n\"\nå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨çœ¼ç›ç©ºé—´è§‚å¯Ÿå…‰æºä½ç½®ï¼Œæˆ‘ä»¬è½¬æ¢å½“å‰çš„é¡¶ç‚¹ä½ç½®åˆ°çœ¼ç›ç©ºé—´çš„åæ ‡ç³»ä¸­ï¼Œå› æ­¤æˆ‘ä»¬èƒ½è®¡ç®—å‡ºå¯¹åº”çš„è·ç¦»å’Œè§’åº¦ã€‚\n\n12// å°†æ³•çº¿çš„æ–¹å‘è½¬æ¢æˆçœ¼ç›ç©ºé—´ï¼ˆç›¸å¯¹äºç›¸æœºè§†è§’ï¼‰\"   vec3 modelViewNormal = vec3(u_MVMatrix * vec4(a_Normal, 0.0));       \\n\" +\næˆ‘ä»¬ä¹Ÿéœ€è¦è½¬æ¢æ³•çº¿çš„æ–¹å‘ã€‚è¿™é‡Œæˆ‘ä»¬åªæ˜¯æƒ³ä¸Šé¢ä½ç½®ä¸€æ ·åšäº†ä¸ªå¸¸è§„ä¹˜æ³•ï¼Œä½†æ˜¯å¦‚æœmodelæˆ–viewçŸ©é˜µåšè¿‡æ—‹è½¬æˆ–å€¾æ–œï¼Œé‚£ä¹ˆå°†ä¸èƒ½å·¥ä½œï¼šæˆ‘ä»¬å®é™…ä¸Šéœ€è¦é€šè¿‡å°†æ³•çº¿ä¹˜ä»¥åŸå§‹çŸ©é˜µçš„åè½¬æ¥æ¶ˆé™¤å€¾æ–œæˆ–ç¼©æ”¾çš„å½±å“ã€‚è¿™ä¸ªç½‘ç«™å¾ˆå¥½çš„è§£é‡Šäº†ä¸ºä»€ä¹ˆæˆ‘ä»¬å¿…é¡»è¿™ä¹ˆåš\n\n12// å°†ç”¨äºå“€å‡\"   float distance = length(u_LightPos - modelViewVertex);               \\n\"\nå¦‚å‰é¢æ•°å­¦éƒ¨åˆ†æ‰€ç¤ºï¼Œæˆ‘ä»¬éœ€è¦è¿™ä¸ªè·ç¦»å»è®¡ç®—å“€å‡ç³»æ•°\n\n12// è·å–ä»å…‰æºåˆ°é¡¶ç‚¹æ–¹å‘çš„å…‰çº¿å‘é‡\"   vec3 lightVector = normalize(u_LightPos - modelViewVertex);          \\n\"\næˆ‘ä»¬ä¹Ÿéœ€è¦å…‰çº¿å‘é‡å»è®¡ç®—æœ—ä¼¯åå°„å› å­\n\n12// è®¡ç®—å…‰çº¿çŸ¢é‡å’Œé¡¶ç‚¹æ³•çº¿çš„ç‚¹ç§¯ï¼Œå¦‚æœæ³•çº¿å’Œå…‰çº¿çŸ¢é‡æŒ‡å‘ç›¸åŒçš„æ–¹å‘ï¼Œé‚£ä¹ˆå®ƒå°†è·å¾—æœ€å¤§çš„ç…§æ˜\"   float diffuse = max(dot(modelViewNormal, lightVector), 0.1);         \\n\"\nè¿™ä¸ä¸Šé¢çš„æ•°å­¦éƒ¨åˆ†ç›¸åŒï¼Œåªæ˜¯åœ¨OpenGL ES 2ç€è‰²å™¨ä¸­å®Œæˆã€‚åé¢çš„0.1æ˜¯ä¸€ç§éå¸¸ä¾¿å®œçš„ç¯å¢ƒç…§æ˜æ–¹å¼ï¼ˆæœ€å°å€¼å°†è¢«é™åˆ¶åœ¨0.1ï¼‰ã€‚\n\n12// æ ¹æ®è·ç¦»å“€å‡å…‰çº¿\"   diffuse = diffuse * (1.0 / (1.0 + (0.25 * distance * distance)));    \\n\"\nè¿™é‡Œå’Œä¸Šé¢çš„æ•°å­¦éƒ¨åˆ†ç•¥æœ‰ä¸åŒã€‚æˆ‘ä»¬å°†è·ç¦»çš„å¹³æ–¹ç¼©æ”¾0.25ä»¥æŠ‘åˆ¶è¡°å‡çš„æ•ˆåº”ï¼Œå¹¶ä¸”æˆ‘ä»¬è¿˜å°†ä¿®æ”¹çš„è·ç¦»åŠ 1ï¼Œè¿™æ ·å½“å…‰æºéå¸¸æ¥è¿‘ç‰©ä½“æ—¶æˆ‘ä»¬å°±ä¸ä¼šè¿‡é¥±å’Œï¼ˆå¦åˆ™ï¼Œå½“è·ç¦»å°äº1æ—¶ï¼Œè¯¥ç­‰å¼å®é™…ä¸Šå›ç…§äº®å…‰æºè€Œä¸æ˜¯å“€å‡å®ƒï¼‰ã€‚\n\n12345// å°†é¢œè‰²ä¹˜ä»¥äº®åº¦ï¼Œå®ƒå°†è¢«æ’å…¥ä¸‰è§’å½¢ä¸­\"   v_Color = a_Color * diffuse;                                         \\n\" +// gl_Positionæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ç”¨æ¥å­˜å‚¨æœ€ç»ˆçš„ä½ç½®// å°†é¡¶ç‚¹ä¹˜ä»¥çŸ©é˜µå¾—åˆ°æ ‡å‡†åŒ–å±å¹•åæ ‡çš„æœ€ç»ˆç‚¹\"   gl_Position = u_MVPMatrix * a_Position;                              \\n\"\nå½“æˆ‘ä»¬æœ‰äº†æœ€ç»ˆçš„å…‰è‰²ï¼Œæˆ‘ä»¬å°†å®ƒä¹˜ä»¥é¡¶ç‚¹çš„é¢œè‰²å¾—åˆ°æœ€ç»ˆè¾“å‡ºçš„é¢œè‰²ï¼Œç„¶åæˆ‘ä»¬å°†è¿™ä¸ªé¡¶ç‚¹çš„ä½ç½®æŠ•å½±åˆ°å±å¹•ä¸Šã€‚\nåƒç´ ç€è‰²å™¨1234567final String fragmentShader =        \"precision mediump float;       \\n\" + // æˆ‘ä»¬å°†é»˜è®¤ç²¾åº¦è®¾ç½®ä¸ºä¸­ç­‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç‰‡æ®µç€è‰²å™¨ä¸­çš„é«˜ç²¾åº¦                \"varying vec4 v_Color;          \\n\" + // è¿™æ˜¯ä»ä¸‰è§’å½¢æ¯ä¸ªç‰‡æ®µå†…æ’çš„é¡¶ç‚¹ç€è‰²å™¨çš„é¢œè‰²                \"void main()                    \\n\" + // ç‰‡æ®µç€è‰²å™¨å…¥å£                \"&#123;                              \\n\" +                \"   gl_FragColor = v_Color;     \\n\" + // ç›´æ¥å°†é¢œè‰²ä¼ é€’                \"&#125;                              \\n\";\nå› ä¸ºæˆ‘ä»¬æ˜¯åœ¨æ¯ä¸ªé¡¶ç‚¹çš„åŸºç¡€ä¸Šè®¡ç®—å…‰ï¼Œæˆ‘ä»¬çš„ç‰‡æ®µç€è‰²å™¨å’Œä¸ŠèŠ‚è¯¾ä¸€æ ·ï¼Œæˆ‘ä»¬æ‰€åšçš„æ˜¯å°†é¢œè‰²ç›´æ¥ä¼ è¿‡å»ã€‚åœ¨ä¸‹èŠ‚è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†å­¦ä¹ æ¯åƒç´ ç…§æ˜ã€‚\næ¯é¡¶ç‚¹ç…§æ˜å’Œæ¯åƒç´ ç…§æ˜è¿™èŠ‚è¯¾æˆ‘ä»¬çš„å…³æ³¨ç‚¹åœ¨å®ç°æ¯é¡¶ç‚¹ç…§æ˜ã€‚å¯¹äºå…·æœ‰å…‰æ»‘è¡¨é¢çš„ç‰©ä½“ï¼ˆå¦‚åœ°å½¢ï¼‰ï¼Œæˆ–å…·æœ‰è®¸å¤šä¸‰è§’å½¢çš„ç‰©ä½“çš„æ¼«åå°„ï¼Œè¿™é€šå¸¸æ˜¯è¶³å¤Ÿäº†ã€‚ç„¶è€Œï¼Œå½“æ‚¨çš„ç‰©ä½“æ²¡æœ‰åŒ…å«è®¸å¤šé¡¶ç‚¹æ—¶ï¼ˆä¾‹å¦‚æˆ‘ä»¬çš„åœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­çš„æ­£æ–¹ä½“ï¼‰ï¼Œæˆ–è€…æœ‰å°–è§’ï¼Œé¡¶ç‚¹å…‰ç…§å¯èƒ½ä¼šå¯¼è‡´ä¼ªå½±ï¼Œå› ä¸ºäº®åº¦åœ¨å¤šè¾¹å½¢ä¸Šçº¿æ€§æ’å€¼ï¼›å½“é•œé¢é«˜å…‰æ·»åŠ åˆ°å›¾åƒæ—¶ï¼Œè¿™äº›ä¼ªå½±ä¹Ÿä¼šå˜å¾—æ›´åŠ æ˜æ˜¾ã€‚æ›´å¤šå…³äºGouraudç€è‰²æ³•çš„Wikiæ–‡ç« \næ­£æ–¹ä½“çš„æ„é€ åœ¨ç¬¬ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä½ç½®å’Œé¢œè‰²å±æ€§æ‰“åŒ…åˆ°ä¸€ä¸ªæ•°ç»„ä¸­ï¼Œä½†æ˜¯OpengGL ES 2ä¹Ÿå…è®¸è®©æˆ‘ä»¬å°†å±æ€§å•ç‹¬å­˜æ”¾ï¼š\n1234567891011121314151617181920212223242526//X, Y, Zfinal float[] cubePositionData = &#123;        // åœ¨OpenGLï¼Œé€†æ—¶é’ˆç»•ç»„ï¼ˆä¸‹é¢çš„ç‚¹äº‹é€†æ—¶é’ˆé¡ºåºï¼‰æ˜¯é»˜è®¤çš„ã€‚        // è¿™æ„å‘³ç€å½“æˆ‘ä»¬åœ¨è§‚å¯Ÿä¸€ä¸ªä¸‰è§’å½¢æ—¶ï¼Œå¦‚æœè¿™äº›ç”µè§†é€†æ—¶é’ˆçš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬æ­£åœ¨çœ‹\"å‰é¢\"ï¼Œå¦‚æœä¸æ˜¯æˆ‘ä»¬åˆ™æ­£åœ¨çœ‹èƒŒé¢        // OpenGLæœ‰ä¸€ä¸ªä¼˜åŒ–ï¼Œæ‰€æœ‰èƒŒé¢çš„ä¸‰è§’å½¢éƒ½ä¼šè¢«å‰”é™¤ï¼Œå› ä¸ºå®ƒä»¬é€šå¸¸ä»£è¡¨ä¸€ä¸ªç‰©ä½“çš„èƒŒé¢ï¼Œæ— è®ºå¦‚ä½•éƒ½ä¸å¯è§        // æ­£é¢        -1.0F, 1.0F, 1.0F,        -1.0F, -1.0F, 1.0F,        1.0F, 1.0F, 1.0F,        -1.0F, -1.0F, 1.0F,        1.0F, -1.0F, 1.0F,        1.0F, 1.0F, 1.0F,        ...&#125;;// Rï¼ŒGï¼ŒBï¼ŒAfinal float[] cubeColorData = &#123;        // æ­£é¢çº¢è‰²        1.0F, 0.0F, 0.0F, 1.0F,        1.0F, 0.0F, 0.0F, 1.0F,        1.0F, 0.0F, 0.0F, 1.0F,        1.0F, 0.0F, 0.0F, 1.0F,        1.0F, 0.0F, 0.0F, 1.0F,        1.0F, 0.0F, 0.0F, 1.0F,        ...&#125;;\næ–°çš„OpenGL flagæˆ‘ä»¬è¿˜ä½¿ç”¨äº†glEnable()è°ƒç”¨å¯ç”¨äº†å‰”é™¤å’Œæ·±åº¦ç¼“å†²ï¼š\n1234// ä½¿ç”¨å‰”é™¤å»æ‰èƒŒé¢GLES20.glEnable(GLES20.GL_CULL_FACE);// å¯ç”¨æ·±åº¦æµ‹è¯•GLES20.glEnable(GLES20.GL_DEPTH_TEST);\nä½œä¸ºä¼˜åŒ–ï¼Œæ‚¨å¯ä»¥å‘Šè¯‰OpenGLå‰”é™¤ç‰©ä½“èƒŒé¢çš„ä¸‰è§’å½¢ã€‚å½“æˆ‘ä»¬å®šä¹‰æ­£æ–¹ä½“æ—¶ï¼Œæˆ‘ä»¬è¿˜å®šä¹‰äº†æ¯ä¸ªä¸‰è§’å½¢çš„ä¸‰ä¸ªç‚¹ï¼Œä»¥ä¾¿å½“æˆ‘ä»¬åœ¨æŸ¥çœ‹æ­£é¢çš„æ—¶å€™æ˜¯é€†æ—¶é’ˆçš„ã€‚å½“æˆ‘ä»¬ç¿»è½¬ä¸‰è§’å½¢ä»¥ä¾¿æˆ‘ä»¬åˆ°èƒŒé¢æ—¶ï¼Œè¿™äº›ç‚¹å°†ä¼šé¡ºæ—¶é’ˆå±•ç¤ºã€‚æ‚¨åªèƒ½åŒæ—¶çœ‹åˆ°ä¸€ä¸ªæ­£æ–¹ä½“çš„ä¸‰ä¸ªé¢ï¼Œæ‰€ä»¥è¿™ä¸ªä¼˜åŒ–å‘Šè¯‰OpenGLä¸è¦æµªè´¹æ—¶é—´å»ç»˜åˆ¶èƒŒé¢çš„ä¸‰è§’å½¢ã€‚\nä¹‹åå½“æˆ‘ä»¬ç»˜åˆ¶é€æ˜çš„ç‰©ä½“æ—¶ï¼Œæˆ‘ä»¬å¸Œæœ›å…³é—­å‰”é™¤ï¼Œç„¶åç‰©ä½“èƒŒé¢å°†ä¼šå˜å¾—å¯è§ã€‚\næˆ‘ä»¬è¿˜å¼€å¯äº†æ·±åº¦æµ‹è¯•ã€‚å¦‚æœä½ æ€»æ˜¯ä»åé¢å‘å‰é¢ç»˜åˆ¶ç‰©ä½“ï¼Œé‚£ä¹ˆæ·±åº¦æµ‹è¯•ç»éå¿…è¦ï¼Œä½†æ˜¯é€šè¿‡å¯ç”¨å®ƒæ‚¨ä¸ä»…ä¸éœ€è¦æ‹…å¿ƒç»˜åˆ¶é¡ºåºï¼ˆå°½ç®¡å¦‚æœä½ å…ˆç”»æœ€è¿‘çš„ç‰©ä½“æ¸²æŸ“ä¼šæ›´å¿«ï¼‰ï¼Œä¸€äº›æ˜¾å¡ä¹Ÿå°†è¿›è¡Œä¼˜åŒ–ï¼Œé€šè¿‡èŠ±è´¹æ›´å°‘çš„æ—¶é—´ç»˜åˆ¶åƒç´ æ¥åŠ é€Ÿæ¸²æŸ“ã€‚\nåŠ è½½ç€è‰²å™¨ç¨‹åºçš„ä¿®æ”¹å› ä¸ºåœ¨OpenGLä¸­åŠ è½½ç€è‰²å™¨ç¨‹åºçš„æ­¥éª¤å¤§è‡´ç›¸åŒï¼Œè¿™äº›æ­¥éª¤å¯ä»¥å¾ˆå®¹æ˜“çš„é‡æ„ä¸ºä¸€ä¸ªå•ç‹¬çš„æ–¹æ³•ã€‚æˆ‘ä»¬è¿˜æ·»åŠ äº†ä»¥ä¸‹è°ƒç”¨æ¥æ£€ç´¢è°ƒè¯•ä¿¡æ¯ï¼Œä»¥é˜²ç¼–è¯‘/é“¾æ¥å¤±è´¥ï¼š\n12GLES20.glGetProgramInfoLog(programHandle);GLES20.glGetShaderInfoLog(shaderHandle);\nå…‰ç‚¹çš„é¡¶ç‚¹å’Œç€è‰²ç¨‹åºè¿™ä¸ªæ–°çš„é¡¶ç‚¹å’Œç€è‰²å™¨ç¨‹åºç»˜åˆ¶åœ¨å±å¹•ä¸Šä»£è¡¨å½“å‰å…‰æºçš„ä½ç½®ï¼š\n123456789101112131415// å®šä¹‰ä¸€ä¸ªç®€å•çš„ç€è‰²ç¨‹åºfinal String pointVertexShader =        \"uniform mat4 u_MVPMatrix;                  \\n\" +        \"attribute vec4 a_Position;                 \\n\" +        \"void main()                                \\n\" +        \"&#123;                                          \\n\" +        \"   gl_Position = u_MVPMatrix * a_Position; \\n\" +        \"   gl_PointSize = 5.0;                     \\n\" +        \"&#125;                                          \\n\";final String pointFragmentShader =        \"precision mediump float;                   \\n\" +        \"void main()                                \\n\" +        \"&#123;                                          \\n\" +        \"   gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0) \\n\" +        \"&#125;                                          \\n\";\nè¿™ä¸ªç€è‰²å™¨ç±»ä¼¼äºç¬¬ä¸€è¯¾çš„ç®€å•ç€è‰²å™¨ï¼Œè¿™é‡Œæœ‰ä¸ªæ–°çš„æˆå‘˜gl_PointSizeï¼Œç›´æ¥å›ºå®šå®ƒçš„å€¼ä¸º5.0ï¼Œè¿™æ˜¯ç‚¹çš„åƒç´ å°ºå¯¸ã€‚å½“æˆ‘ä»¬ä½¿ç”¨GLES20.GL_POINTSæ¨¡å¼ç»˜åˆ¶è¿™ä¸ªç‚¹çš„æ—¶å€™å®ƒä¼šè¢«ä½¿ç”¨ã€‚æˆ‘ä»¬ä¹Ÿç›´æ¥è®¾ç½®äº†å®ƒçš„æ˜¾ç¤ºé¢œè‰²ä¸ºç™½è‰²ã€‚\nè¿›ä¸€æ­¥ç»ƒä¹ \nå°è¯•åˆ é™¤â€œè¿‡æ¸¡é¥±å’Œâ€çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆ\nè¿™é‡Œçš„ç…§æ˜æ–¹å¼å­˜åœ¨ç¼ºé™·ï¼Œä½ èƒ½å‘ç°æ˜¯ä»€ä¹ˆå—ï¼Ÿæç¤ºï¼šæˆ‘ä»¬åšç¯å¢ƒç…§æ˜çš„æ–¹å¼çš„ç¼ºç‚¹æ˜¯ä»€ä¹ˆï¼Œä»¥åŠalphaä¼šæ”¾ç”Ÿä»€ä¹ˆï¼Ÿ\nå¦‚æœå°†gl_PointSizeæ·»åŠ åˆ°æ­£æ–¹ä½“ç€è‰²å™¨å¹¶ä½¿ç”¨GL_POINTSç»˜åˆ¶å®ƒä¼šå‘ç”Ÿä»€ä¹ˆï¼Ÿ\n\nè¿›ä¸€æ­¥é˜…è¯»\nClockworkcodersæ•™ç¨‹ï¼šæ¯ç‰‡æ®µç…§æ˜\nLighthouse3d.comï¼šæ³•çº¿çŸ©é˜µ\narcsynthesis.org: OpenGLæ•™ç¨‹ï¼šæ³•çº¿è½¬æ¢\nOpenGLç¼–ç¨‹æŒ‡å—ï¼š5ç«  ç…§æ˜\n\nåœ¨ç¼–å†™æœ¬æ•™ç¨‹æ—¶ï¼Œä¸Šé¢çš„è¿›ä¸€æ­¥é˜…è¯»éƒ¨åˆ†å¯¹æˆ‘æ¥è¯´æ˜¯éå¸¸å®è´µçš„èµ„æºï¼Œå› æ­¤æˆ‘å¼ºçƒˆå»ºè®®æ‚¨é˜…è¯»å®ƒä»¬ä»¥è·å¾—æ›´å¤šçš„ä¿¡æ¯å’Œè§£é‡Šã€‚\næ•™ç¨‹ç›®å½•\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\nOpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€\nOpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰\nOpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤\nOpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVOBï¼‰\n\næ‰“åŒ…æ•™æå¯ä»¥åœ¨Githubä¸‹è½½æœ¬è¯¾ç¨‹æºä»£ç ï¼šä¸‹è½½é¡¹ç›®æœ¬è¯¾çš„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿå¯ä»¥å†Androidå¸‚åœºä¸‹ï¼šgoogle play ä¸‹è½½apkâ€œæˆ‘â€ä¹Ÿç¼–è¯‘äº†ä¸ªapkï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½ï¼šgithub download\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-opengl/5C1BB79E-9092-4559-B6A6-D3288D0FA000.png","plink":"https://blog.xujiaji.com/post/Learn-OpenGL-Lesson-Two/"},{"title":"OpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨","date":"2019-01-21T08:10:46.000Z","author":"xujiaji","updated":"2019-08-09T16:28:55.133Z","content":"\nç¿»è¯‘æ–‡\n\nåŸæ–‡æ ‡é¢˜ï¼šOpenGL Android Lesson One: Getting StartedåŸæ–‡é“¾æ¥ï¼šhttp://www.learnopengles.com/android-lesson-one-getting-started/\n\nè¿™æ˜¯åœ¨Androidä¸­ä½¿ç”¨OpenGL ES2çš„ç¬¬ä¸€ä¸ªæ•™ç¨‹ã€‚è¿™ä¸€è¯¾ä¸­ï¼Œæˆ‘ä»¬å°†ä¸€æ­¥ä¸€æ­¥è·Ÿéšä»£ç ï¼Œå­¦ä¹ å¦‚ä½•åˆ›å»ºä¸€ä¸ªOpenGL ES 2å¹¶ç»˜åˆ¶åˆ°å±å¹•ä¸Šã€‚æˆ‘ä»¬è¿˜å°†äº†è§£ä»€ä¹ˆæ˜¯ç€è‰²å™¨ï¼Œå®ƒä»¬å¦‚ä½•å·¥ä½œï¼Œä»¥åŠæ€æ ·ä½¿ç”¨çŸ©é˜µå°†åœºæ™¯è½¬æ¢ä¸ºæ‚¨åœ¨å±å¹•ä¸Šçœ‹åˆ°çš„å›¾åƒã€‚æœ€åï¼Œæ‚¨éœ€è¦åœ¨æ¸…å•æ–‡ä»¶ä¸­æ·»åŠ æ‚¨æ­£åœ¨ä½¿ç”¨OpenGL ES 2çš„è¯´æ˜ï¼Œä»¥å‘ŠçŸ¥Androidåº”ç”¨å¸‚åœºæ”¯æŒçš„è®¾å¤‡å¯è§ã€‚\nå…¥é—¨æˆ‘ä»¬å°†è¿‡ä¸€é“ä¸‹é¢æ‰€æœ‰çš„ä»£ç å¹¶ä¸”è§£é‡Šæ¯ä¸€éƒ¨åˆ†çš„ä½œç”¨ã€‚æ‚¨å¯ä»¥è·Ÿç€æ‹·è´æ¯ä¸€å¤„çš„ä»£ç ç‰‡æ®µæ¥åˆ›å»ºæ‚¨è‡ªå·±çš„é¡¹ç›®ï¼Œæ‚¨ä¹Ÿå¯ä»¥åœ¨æ–‡ç« æœ«å°¾ä¸‹è½½è¿™ä¸ªå·²å®Œæˆçš„é¡¹ç›®ã€‚åœ¨å¼€å‘å·¥å…·ï¼ˆå¦‚ï¼šAndroid Studioï¼‰ä¸­åˆ›å»ºæ‚¨çš„Androidé¡¹ç›®ï¼Œåå­—ä¸é‡è¦ï¼Œè¿™é‡Œç”±äºè¿™ä¸ªè¯¾ç¨‹æˆ‘å°†MainActivityæ›´åä¸ºLessonOneActivityã€‚\n\næˆ‘ä»¬æ¥çœ‹è¿™æ®µä»£ç ï¼š\n\n12/** ä¿ç•™å¯¹GLSurfaceViewçš„å¼•ç”¨*/private GLSurfaceView mGLSurfaceView;\nè¿™ä¸ªGLSurfaceViewæ˜¯ä¸€ä¸ªç‰¹åˆ«çš„Viewï¼Œå®ƒä¸ºæˆ‘ä»¬ç®¡ç†OpenGLç•Œé¢å¹¶ä¸”å°†å®ƒç»˜åˆ¶åœ¨Android Viewç³»ç»Ÿã€‚å®ƒè¿˜æ·»åŠ äº†è®¸å¤šåŠŸèƒ½ï¼Œä½¿å…¶æ›´æ˜“äºä½¿ç”¨OpenGLï¼ŒåŒ…æ‹¬ä¸‹é¢ç­‰ç­‰ï¼š\n\nå®ƒä¸ºOpenGLæä¾›ä¸€ä¸ªä¸“ç”¨çš„ç€è‰²çº¿ç¨‹ï¼Œå› æ­¤ä¸»çº¿ç¨‹ä¸ä¼šåœæ‡ˆ\nå®ƒæ”¯æŒè¿ç»­æˆ–æŒ‰éœ€æ¸²æŸ“\nå®ƒä½¿ç”¨EGL (OpenGLå’Œåº•å±‚ç³»ç»Ÿçª—å£ä¹‹é—´çš„æ¥å£)æ¥å¤„ç†å±å¹•è®¾ç½®\n\n\nGLSurfaceViewä½¿å¾—åœ¨Androidä¸­è®¾ç½®å’Œä½¿ç”¨OpenGLç›¸å¯¹è½»æ¾\n\n1234567891011121314151617181920@Overrideprotected void onCreate(Bundle savedInstanceState) &#123;    super.onCreate(savedInstanceState);    mGLSurfaceView = new GLSurfaceView(this);    //æ£€æµ‹ç³»ç»Ÿæ˜¯å¦æ”¯æŒOpenGL ES 2.0    final ActivityManager activityManager = (ActivityManager) getSystemService(Context.ACTIVITY_SERVICE);    final ConfigurationInfo configurationInfo = activityManager.getDeviceConfigurationInfo();    final boolean supportsEs2 = configurationInfo.reqGlEsVersion &gt;= 0x20000;    if (supportsEs2) &#123;        // è¯·æ±‚ä¸€ä¸ªOpenGL ES 2.0å…¼å®¹çš„ä¸Šä¸‹æ–‡        mGLSurfaceView.setEGLContextClientVersion(2);        // è®¾ç½®æˆ‘ä»¬çš„Demoæ¸²æŸ“å™¨ï¼Œå®šä¹‰åœ¨åé¢è®²        mGLSurfaceView.setRenderer(new LessonOneRenderer());    &#125; else &#123;        // å¦‚æœæ‚¨æƒ³åŒæ—¶æ”¯æŒES 1.0å’Œ2.0çš„è¯ï¼Œè¿™é‡Œæ‚¨å¯ä»¥åˆ›å»ºå…¼å®¹OpenGL ES 1.0çš„æ¸²æŸ“å™¨        return;    &#125;    setContentView(mGLSurfaceView);&#125;\nåœ¨onCreate()æ–¹æ³•ä¸­æ˜¯æˆ‘ä»¬åˆ›å»ºOpenGLä¸Šä¸‹æ–‡ä»¥åŠä¸€åˆ‡å¼€å§‹å‘ç”Ÿçš„é‡è¦éƒ¨åˆ†ã€‚åœ¨æˆ‘ä»¬çš„onCreate()æ–¹æ³•ä¸­,åœ¨è°ƒç”¨super.onCreate()åæˆ‘ä»¬é¦–å…ˆåˆ›å»ºäº†GLSurfaceViewå®ä¾‹ã€‚ç„¶åæˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥šç³»ç»Ÿæ˜¯å¦æ”¯æŒOpenGL ES 2.ä¸ºæ­¤ï¼Œæˆ‘ä»¬è·å¾—ä¸€ä¸ªActivityManagerå®ä¾‹ï¼Œå®ƒå…è®¸æˆ‘ä»¬ä¸å…¨å±€ç³»ç»ŸçŠ¶æ€è¿›è¡Œäº¤äº’ã€‚ç„¶åæˆ‘ä»¬ä½¿ç”¨å®ƒè·å–è®¾å¤‡é…ç½®ä¿¡æ¯ï¼Œå®ƒå°†å‘Šè¯‰æˆ‘ä»¬è®¾å¤‡æ˜¯å¦æ”¯æŒOpenGL ES 2ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¼ å…¥ä¸åŒçš„æ¸²æŸ“å™¨æ¥æ”¯æŒOpenGL ES 1.xï¼Œå°½ç®¡å› ä¸ºAPIä¸åŒï¼Œæˆ‘ä»¬éœ€è¦ç¼–å†™ä¸åŒçš„ä»£ç ã€‚å¯¹äºæœ¬è¯¾æˆ‘ä»¬ä»…ä»…å…³æ³¨æ”¯æŒOpenGL ES 2ã€‚\nä¸€æ—¦æˆ‘ä»¬çŸ¥é“è®¾å¤‡æ˜¯å¦æ”¯æŒOpenGL ES 2ï¼Œæˆ‘ä»¬å‘Šè¯‰GLSurfaceViewå…¼å®¹OpenGL ES 2ï¼Œç„¶åä¼ å…¥æˆ‘ä»¬çš„è‡ªå®šä¹‰æ¸²æŸ“å™¨ã€‚æ— è®ºä½•æ—¶è°ƒæ•´ç•Œé¢æˆ–ç»˜åˆ¶æ–°å¸§ï¼Œç³»ç»Ÿéƒ½ä¼šè°ƒç”¨æ­¤æ¸²æŸ“å™¨ã€‚\næœ€åï¼Œæˆ‘ä»¬è°ƒç”¨setContentView()è®¾ç½®GLSurfaceViewä¸ºæ˜¾ç¤ºå†…å®¹ï¼Œå®ƒå‘Šè¯‰Androidè¿™ä¸ªæ´»åŠ¨å†…å®¹å› è¯¥è¢«æˆ‘ä»¬çš„OpenGLç•Œé¢å¡«å……ã€‚è¦å…¥é—¨OpenGLï¼Œå°±æ˜¯è¿™ä¹ˆç®€å•ã€‚\n12345678910111213@Overrideprotected void onResume() &#123;    super.onResume();    //Activity å¿…é¡»åœ¨onResumeä¸­è°ƒç”¨GLSurfaceViewçš„onResumeæ–¹æ³•    mGLSurfaceView.onResume();&#125;@Overrideprotected void onPause() &#123;    super.onPause();    //Activity å¿…é¡»åœ¨onPauseä¸­è°ƒç”¨GLSurfaceViewçš„onPauseæ–¹æ³•    mGLSurfaceView.onPause();&#125;\nGLSurfaceViewè¦æ±‚æˆ‘ä»¬åœ¨ActivityonResume()å’ŒonPause()çš„çˆ¶æ–¹æ³•è¢«è°ƒç”¨ååˆ†åˆ«è°ƒç”¨å®ƒçš„onResume()å’ŒonPause()æ–¹æ³•ã€‚æˆ‘ä»¬åœ¨æ­¤æ·»åŠ è°ƒç”¨ä»¥å®Œå–„æˆ‘ä»¬çš„Activityã€‚\nå¯è§†åŒ–3Dä¸–ç•Œåœ¨è¿™éƒ¨åˆ†ï¼Œæˆ‘ä»¬æ¥çœ‹æ€æ ·è®©OpenGL ES 2å·¥ä½œï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•åœ¨å±å¹•ä¸Šç»˜åˆ¶ä¸œè¥¿ã€‚åœ¨Activityä¸­æˆ‘ä»¬ä¼ å…¥è‡ªå®šä¹‰çš„GLSurfaceView.Rendereråˆ°GLSurfaceViewï¼Œå®ƒå°†åœ¨è¿™é‡Œå®šä¹‰ã€‚è¿™ä¸ªæ¸²æŸ“å™¨æœ‰ä¸‰ä¸ªé‡è¦çš„æ–¹æ³•ï¼Œæ¯å½“ç³»ç»Ÿäº‹ä»¶å‘ç”Ÿæ—¶ï¼Œå®ƒä»¬å°†ä¼šè‡ªåŠ¨è¢«è°ƒç”¨ï¼š\n\npublic void onSurfaceCreated(GL10 gl, EGLConfig config)\n\nå½“ç•Œé¢ç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è°ƒç”¨ï¼Œå¦‚æœæˆ‘ä»¬å¤±å»ç•Œé¢ä¸Šä¸‹æ–‡å¹¶ä¸”ä¹‹åç”±ç³»ç»Ÿé‡å»ºï¼Œä¹Ÿä¼šè¢«è°ƒç”¨ã€‚\n\npublic void onSurfaceChanged(GL10 gl, int width, int height)\n\næ¯å½“ç•Œé¢æ”¹å˜æ—¶è¢«è°ƒç”¨ï¼›ä¾‹å¦‚ï¼Œä»çºµå±åˆ‡æ¢åˆ°æ¨ªå±ï¼Œåœ¨åˆ›å»ºç•Œé¢åä¹Ÿä¼šè¢«è°ƒç”¨ã€‚\n\npublic void onDrawFrame(GL10 gl)\n\næ¯å½“ç»˜åˆ¶æ–°å¸§æ—¶è¢«è°ƒç”¨ã€‚\næ‚¨å¯èƒ½æ³¨æ„åˆ°GL10çš„å®ä¾‹è¢«ä¼ å…¥åå­—æ˜¯glã€‚å½“ä½¿ç”¨OpengGL ES 2ç»˜åˆ¶æ—¶ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨å®ƒï¼›æˆ‘ä»¬ä½¿ç”¨GLES20ç±»çš„é™æ€æ–¹æ³•æ¥ä»£æ›¿ã€‚è¿™ä¸ªGL10å‚æ•°ä»…ä»…æ˜¯åœ¨è¿™é‡Œï¼Œå› ä¸ºç›¸åŒçš„æ¥å£è¢«ä½¿ç”¨åœ¨OpenGL ES 1.xã€‚\n\nåœ¨æˆ‘ä»¬çš„æ¸²æŸ“å™¨å¯ä»¥æ˜¾ç¤ºä»»ä½•å†…å®¹ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦æœ‰äº›ä¸œè¥¿å»æ˜¾ç¤ºã€‚åœ¨OpenGL ES 2ï¼Œæˆ‘ä»¬é€šè¿‡åˆ¶å®šæ•°å­—æ•°ç»„ä¼ é€’å†…å®¹ã€‚è¿™äº›æ•°å­—å¯ä»¥è¡¨ç¤ºä½ç½®ã€é¢œè‰²æˆ–ä»»ä½•æˆ‘ä»¬éœ€è¦çš„ã€‚åœ¨è¿™ä¸ªDemoä¸­ï¼Œæˆ‘ä»¬å°†æ˜¾ç¤ºä¸‰ä¸ªä¸‰è§’å½¢ã€‚\n\n1234567891011121314151617181920212223242526272829303132// æ–°ç±»æˆå‘˜private final FloatBuffer mTriangle1Verticels;private final FloatBuffer mTriangle2Verticels;private final FloatBuffer mTriangle3Verticels;/** æ¯ä¸ªFloatå¤šå°‘å­—èŠ‚*/private final int mBytePerFloat = 4;/** * åˆå§‹Modelæ•°æ® */public LessonOneRenderer() &#123;    // è¿™ä¸ªä¸‰è§’å½¢æ˜¯çº¢è‰²ï¼Œè“è‰²å’Œç»¿è‰²ç»„æˆ    final float[] triangle1VerticesData = &#123;        // X, Y, Z,        // R, G, B, A        -0.5F, -0.25F, 0.0F,        1.0F, 0.0F, 0.0F, 1.0F,        0.5F, -0.25F, 0.0F,        0.0F, 0.0F, 1.0F, 1.0F,        0.0F, 0.559016994F, 0.0F,        0.0F, 1.0F, 0.0F, 1.0F    &#125;;    ...    // åˆå§‹åŒ–ç¼“å†²åŒº    mTriangle1Verticels = ByteBuffer.allocateDirect(triangle1VerticesData.length * mBytePerFloat).order(ByteOrder.nativeOrder()).asFloatBuffer();    ...    mTriangle1Verticels.put(triangle1VerticesData).position(0);    ...&#125;\né‚£ä¹ˆï¼Œè¿™äº›æ˜¯ä»€ä¹ˆæ„æ€ï¼Ÿå¦‚æœæ‚¨æ›¾ç»ä½¿ç”¨è¿‡OpenGL 1ï¼Œ æ‚¨å¯èƒ½ä¼šä¹ æƒ¯è¿™æ ·åšï¼š\n12345glBegin(GL_TRIANGLES);glVertex3f(-0.5f, -0.25f, 0.0f);glColor3f(1.0f, 0.0f, 0.0f);...glEnd();\nè¿™ç§æ–¹æ³•åœ¨OpenGL ES 2ä¸­ä¸èµ·ä½œç”¨ã€‚æˆ‘ä»¬ä¸æ˜¯é€šè¿‡ä¸€å †æ–¹æ³•è°ƒç”¨æ¥å®šä¹‰ç‚¹ï¼Œè€Œæ˜¯å®šä¹‰ä¸€ä¸ªæ•°ç»„ã€‚è®©æˆ‘ä»¬å†æ¥çœ‹çœ‹æˆ‘ä»¬è¿™ä¸ªæ•°ç»„ï¼š\n1234567final float[] triangle1VerticesData = &#123;                // X, Y, Z,                // R, G, B, A                -0.5f, -0.25f, 0.0f,                1.0f, 0.0f, 0.0f, 1.0f,                ...&#125;;\nä¸Šé¢å±•ç¤ºçš„ä»£è¡¨ä¸‰è§’å½¢çš„ä¸€ä¸ªç‚¹ã€‚æˆ‘ä»¬å·²è®¾ç½®å¥½å‰ä¸‰ä¸ªæ•°å­—ä»£è¡¨ä½ç½®ï¼ˆX,Y,Zï¼‰ï¼Œéšåçš„å››ä¸ªæ•°å­—ä»£è¡¨é¢œè‰²ï¼ˆçº¢ï¼Œç»¿ï¼Œè“ï¼Œé€æ˜åº¦ï¼‰ã€‚æ‚¨ä¸å¿…å¤ªæ‹…å¿ƒå¦‚ä½•å®šä¹‰è¿™ä¸ªæ•°ç»„ï¼›åªè¦è®°ä½å½“æˆ‘ä»¬æƒ³ç»˜åˆ¶ä¸œè¥¿åœ¨OpenGL ES 2æ—¶ï¼Œæˆ‘ä»¬éœ€è¦ä»¥å—çš„å½¢å¼ä¼ é€’æ•°æ®ï¼Œè€Œä¸æ˜¯ä¸€æ¬¡ä¼ é€’ä¸€ä¸ªã€‚\näº†è§£ç¼“å†²åŒº123// åˆå§‹åŒ–ç¼“å†²åŒºmTriangle1Verticels = ByteBuffer.allocateDirect(triangle1VerticesData.length * mBytePerFloat).order(ByteOrder.nativeOrder()).asFloatBuffer();...\næˆ‘ä»¬åœ¨Androidä¸Šä½¿ç”¨Javaè¿›è¡Œç¼–ç ï¼Œä½†OpengGL ES 2åº•å±‚å®ç°å…¶å®ä½¿ç”¨Cè¯­è¨€ç¼–å†™çš„ã€‚åœ¨æˆ‘ä»¬å°†æ•°æ®ä¼ é€’ç»™OpenGLä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢æˆå®ƒèƒ½ç†è§£çš„å½¢å¼ã€‚Javaå’Œnativeç³»ç»Ÿå¯èƒ½ä¸ä¼šä»¥ç›¸åŒçš„é¡ºåºå­˜å‚¨å®ƒä»¬çš„å­—èŠ‚ï¼Œå› æ­¤æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„ç¼“å†²ç±»å¹¶åˆ›å»ºä¸€ä¸ªè¶³å¤Ÿå¤§çš„ByteBufferæ¥ä¿å­˜æˆ‘ä»¬çš„æ•°æ®ï¼Œå¹¶å‘Šè¯‰å®ƒä½¿ç”¨nativeå­—èŠ‚é¡ºåºå­˜å‚¨æ•°æ®ã€‚ç„¶åæˆ‘ä»¬å°†å®ƒè½¬æ¢æˆFloatBufferï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥ä½¿ç”¨å®ƒæ¥ä¿å­˜æµ®ç‚¹æ•°æ®ã€‚æœ€åï¼Œæˆ‘ä»¬å°†æ•°ç»„å¤åˆ¶åˆ°ç¼“å†²åŒºã€‚\nè¿™ä¸ªç¼“å†²åŒºçš„ä¸œè¥¿çœ‹èµ·æ¥å¯èƒ½å¾ˆæ··ä¹±ï¼Œå•è¯·è®°ä½ï¼Œåœ¨å°†æ•°æ®ä¼ é€’ç»™OpenGLä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦åšä¸€ä¸ªé¢å¤–çš„æ­¥éª¤ã€‚æˆ‘ä»¬ç°åœ¨çš„ç¼“å†²åŒºå·²å‡†å¤‡å¥½å¯ä»¥ç”¨äºå°†æ•°æ®ä¼ å…¥OpenGLã€‚\nå¦å¤–ï¼Œfloatç¼“å†²åŒºåœ¨Froyoä¸Šå¾ˆæ…¢,åœ¨Gingerbreadä¸Šç¼“æ…¢ï¼Œå› æ­¤æ‚¨å¯èƒ½ä¸å¸Œæœ›ç»å¸¸æ›´æ¢å®ƒä»¬ã€‚\nç†è§£çŸ©é˜µ123456789101112131415161718192021222324252627282930313233343536// new class å®šä¹‰/** * å­˜å‚¨viewçŸ©é˜µã€‚å¯ä»¥è®¤ä¸ºè¿™æ˜¯ä¸€ä¸ªç›¸æœºï¼Œæˆ‘ä»¬é€šè¿‡ç›¸æœºå°†ä¸–ç•Œç©ºé—´è½¬æ¢ä¸ºçœ¼ç›ç©ºé—´ * å®ƒå®šä½ç›¸å¯¹äºæˆ‘ä»¬çœ¼ç›çš„ä¸œè¥¿ */private float[] mViewMatrix = new float[16];@Overridepublic void onSurfaceCreated(GL10 gl, EGLConfig config) &#123;    // è®¾ç½®èƒŒæ™¯æ¸…ç†é¢œè‰²ä¸ºç°è‰²    GLES20.glClearColor(0.5F, 0.5F, 0.5F, 0.5F);    // å°†çœ¼ç›æ”¾åˆ°åŸç‚¹ä¹‹å    final float eyeX = 0.0F;    final float eyeY = 0.0F;    final float eyeZ = 1.5F;    // æˆ‘ä»¬çš„çœ¼ç›æœ›å‘å“ª    final float lookX = 0.0F;    final float lookY = 0.0F;    final float lookZ = -5.0F;    // è®¾ç½®æˆ‘ä»¬çš„å‘é‡ï¼Œè¿™æ˜¯æˆ‘ä»¬æ‹¿ç€ç›¸æœºæ—¶å¤´æŒ‡å‘çš„æ–¹å‘    final float upX = 0.0F;    final float upY = 1.0F;    final float upZ = 0.0F;    // å…·ä½“åœºæ™¯ï¼šæŠŠæ‰‹æœºæ­£æ”¾æ¡Œé¢ä¸Šï¼Œç„¶åæˆ‘ä»¬å»çœ‹å±å¹•é‡Œé¢çš„ä¸œè¥¿    // è®¾ç½®viewçŸ©é˜µï¼Œå¯ä»¥è¯´è¿™ä¸ªçŸ©é˜µä»£è¡¨ç›¸æœºçš„ä½ç½®    // æ³¨æ„ï¼šåœ¨OpenGL 1ä¸­ä½¿ç”¨ModelView matrixï¼Œè¿™æ˜¯ä¸€ä¸ªmodelå’ŒviewçŸ©é˜µçš„ç»„åˆã€‚    //åœ¨OpenGL2ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©åˆ†åˆ«è·Ÿè¸ªè¿™äº›çŸ©é˜µ    Matrix.setLookAtM(mViewMatrix, 0, eyeX, eyeY, eyeZ, lookX, lookY, lookZ, upX, upY, upZ);    ...&#125;\nå¦ä¸€ä¸ªæœ‰è¶£çš„è¯é¢˜æ˜¯çŸ©é˜µï¼æ— è®ºæ‚¨ä½•æ—¶è¿›è¡Œ3Dç¼–ç¨‹ï¼Œè¿™äº›éƒ½å°†æˆä¸ºæ‚¨æœ€å¥½çš„æœ‹å‹ã€‚å› æ­¤ï¼Œæ‚¨éœ€è¦å¾ˆå¥½çš„äº†è§£ä»–ä»¬ã€‚\nå½“æˆ‘ä»¬çš„ç•Œé¢è¢«åˆ›å»ºï¼Œæˆ‘ä»¬ç¬¬ä¸€ä»¶äº‹æƒ…æ˜¯è®¾ç½®æ¸…ç†é¢œè‰²ä¸ºç°è‰²ã€‚alphaéƒ¨åˆ†ä¹Ÿè®¾ç½®ä¸ºç°è‰²ï¼Œä½†åœ¨æˆ‘ä»¬æœ¬è¯¾ç¨‹ä¸­æ²¡æœ‰è¿›è¡Œalphaæ··åˆï¼Œå› æ­¤è¯¥å€¼æœªä½¿ç”¨ã€‚æˆ‘ä»¬åªéœ€è¦è®¾ç½®ä¸€æ¬¡æ¸…ç†é¢œè‰²ï¼Œä¹‹åæˆ‘ä»¬ä¸ä¼šæ›´æ”¹å®ƒã€‚\næˆ‘ä»¬ç¬¬äºŒä»¶äº‹æƒ…æ˜¯è®¾ç½®viewçŸ©é˜µã€‚æˆ‘ä»¬ä½¿ç”¨äº†å‡ ä¸ªä¸åŒç§ç±»çš„çŸ©é˜µï¼Œå®ƒä»¬éƒ½åšäº†äº›é‡è¦çš„äº‹æƒ…ï¼š\n\nmodelï¼ˆæ¨¡å‹ï¼‰çŸ©é˜µï¼Œè¯¥çŸ©é˜µç”¨äºåœ¨â€œä¸–ç•Œâ€ä¸­çš„æŸå¤„æ”¾ç½®æ¨¡å‹ã€‚ä¾‹å¦‚ï¼Œæ‚¨æœ‰ä¸€ä¸ªæ¨¡å‹è½¦ï¼Œä½ æƒ³å°†å®ƒæ”¾ç½®åœ¨ä¸œè¾¹ä¸€åƒç±³å¤„ï¼Œæ‚¨å°†ä½¿ç”¨çŸ©é˜µæ¨¡å‹æ¥åšè¿™ä»¶äº‹ã€‚\nview ï¼ˆè§†å›¾)çŸ©é˜µï¼Œè¯¥çŸ©é˜µä»£è¡¨ç›¸æœºã€‚å¦‚æœæˆ‘ä»¬æƒ³æŸ¥çœ‹ä½äºä¸œè¾¹ä¸€åƒç±³å¤„çš„è½¦ï¼Œæˆ‘ä»¬ä¹Ÿéœ€è¦å‘ä¸œç§»åŠ¨ä¸€åƒç±³ï¼ˆå¦ä¸€ç§æ€è€ƒæ–¹å¼æ˜¯æˆ‘ä»¬ä¿æŒé™æ­¢ï¼Œä¸–ç•Œå‘è¥¿ç§»åŠ¨ä¸€åƒç±³ï¼‰ã€‚æˆ‘ä»¬ä½¿ç”¨è§†å›¾çŸ©é˜µæ¥åšåˆ°è¿™ç‚¹ã€‚\nprojectionï¼ˆæŠ•å½±)çŸ©é˜µã€‚ç”±äºæˆ‘ä»¬çš„å±å¹•æ˜¯å¹³é¢çš„ï¼Œæˆ‘ä»¬éœ€è¦è¿›è¡Œæœ€åçš„è½¬æ¢ï¼Œå°†æˆ‘ä»¬çš„è§†å›¾â€œæŠ•å½±â€åˆ°æˆ‘ä»¬çš„å±å¹•ä¸Šå¹¶è·å¾—æ¼‚äº®çš„3Dè§†è§’ã€‚è¿™å°±æ˜¯æŠ•å½±çŸ©é˜µçš„ç”¨é€”\n\nå¯ä»¥åœ¨SongHoçš„OpenGLæ•™ç¨‹ä¸­æ‰¾åˆ°å¾ˆå¥½çš„è§£é‡Šã€‚æˆ‘å»ºè®®æ‚¨é˜…è¯»å‡ æ¬¡ç›´åˆ°æ‚¨æŠŠæ¡å¥½è¿™ä¸ªæƒ³æ³•ä¸ºæ­¢ï¼›åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¹Ÿé˜…è¯»äº†å®ƒå¥½å‡ æ¬¡ï¼\nåœ¨OpenGL 1ä¸­ï¼Œæ¨¡å‹å’Œè§†å›¾çŸ©é˜µè¢«ç»„åˆå¹¶ä¸”å‡è®¾äº†æ‘„åƒæœºå¤„äº(0,0,0)åæ ‡å¹¶é¢å‘Zè½´æ–¹å‘ã€‚\næˆ‘ä»¬ä¸éœ€è¦æ‰‹åŠ¨æ„å»ºè¿™äº›çŸ©é˜µï¼ŒAndroidæœ‰ä¸€ä¸ªMatrixå¸®åŠ©ç±»ï¼Œå®ƒèƒ½ä¸ºæˆ‘ä»¬åšç¹é‡çš„å·¥ä½œã€‚è¿™é‡Œï¼Œæˆ‘ä¸ºæ‘„åƒæœºåˆ›å»ºäº†ä¸€ä¸ªè§†å›¾çŸ©é˜µï¼Œå®ƒä½äºåŸç‚¹åï¼Œæœå‘è¿œå¤„ã€‚\nå®šä¹‰vertexï¼ˆé¡¶ç‚¹ï¼‰å’Œfragmentï¼ˆç‰‡æ®µï¼‰ç€è‰²å™¨1234567891011121314final String vertexShader =        \"uniform mat4 u_MVPMatrix;    \\n\" + // ä¸€ä¸ªè¡¨ç¤ºç»„åˆmodelã€viewã€projectionçŸ©é˜µçš„å¸¸é‡        \"attribute vec4 a_Position;   \\n\" + // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®ä¿¡æ¯        \"attribute vec4 a_Color;      \\n\" + // æˆ‘ä»¬å°†è¦ä¼ å…¥çš„æ¯ä¸ªé¡¶ç‚¹çš„é¢œè‰²ä¿¡æ¯        \"varying vec4 v_Color;        \\n\" + // ä»–å°†è¢«ä¼ å…¥ç‰‡æ®µç€è‰²å™¨        \"void main()                  \\n\" + // é¡¶ç‚¹ç€è‰²å™¨å…¥å£        \"&#123;                            \\n\" +        \"   v_Color = a_Color;        \\n\" + // å°†é¢œè‰²ä¼ é€’ç»™ç‰‡æ®µç€è‰²å™¨                                            // å®ƒå°†åœ¨ä¸‰è§’å½¢å†…æ’å€¼        \"   gl_Position = u_MVPMatrix \\n\" + // gl_Positionæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„å˜é‡ç”¨æ¥å­˜å‚¨æœ€ç»ˆçš„ä½ç½®        \"               * a_Position  \\n\" + // å°†é¡¶ç‚¹ä¹˜ä»¥çŸ©é˜µå¾—åˆ°æ ‡å‡†åŒ–å±å¹•åæ ‡çš„æœ€ç»ˆç‚¹        \"&#125;                            \\n\";\nåœ¨OpenGL ES 2ä¸­ä»»ä½•æˆ‘ä»¬æƒ³å±•ç¤ºåœ¨å±å¹•ä¸­çš„ä¸œè¥¿éƒ½å¿…é¡»å…ˆç»è¿‡é¡¶ç‚¹å’Œç‰‡æ®µç€è‰²å™¨ï¼Œè¿˜å¥½è¿™äº›ç€è‰²å™¨å¹¶ä¸åƒä»–ä»¬çœ‹èµ·æ¥çš„é‚£ä¹ˆå¤æ‚ã€‚é¡¶ç‚¹ç€è‰²å™¨åœ¨æ¯ä¸ªé¡¶ç‚¹æ‰§è¡Œæ“ä½œï¼Œå¹¶æŠŠè¿™äº›æ“ä½œçš„ç»“æœä½¿ç”¨åœ¨ç‰‡æ®µç€è‰²å™¨åšé¢å¤–çš„æ¯åƒç´ è®¡ç®—ã€‚\næ¯ä¸ªç€è‰²å™¨åŸºæœ¬ç”±è¾“å…¥ï¼ˆinputï¼‰ã€è¾“å‡ºï¼ˆoutputï¼‰å’Œä¸€ä¸ªç¨‹åºï¼ˆprogramï¼‰ç»„æˆã€‚é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªç»Ÿä¸€ï¼ˆuniformï¼‰ï¼Œå®ƒæ˜¯ä¸€ä¸ªåŒ…å«æ‰€æœ‰å˜æ¢çš„ç»„åˆçŸ©é˜µã€‚å®ƒæ˜¯æ‰€æœ‰é¡¶ç‚¹çš„å¸¸é‡ï¼Œç”¨äºå°†å®ƒä»¬æŠ•å½±åˆ°å±å¹•ä¸Šã€‚ç„¶åæˆ‘ä»¬å®šä¹‰äº†ä½ç½®å’Œé¢œè‰²å±æ€§ï¼ˆattributeï¼‰ï¼Œè¿™äº›å±æ€§å°†ä»æˆ‘ä»¬ä¹‹å‰å®šä¹‰çš„ç¼“å­˜åŒºä¸­è¯»å…¥ï¼Œå¹¶æŒ‡å®šæ¯ä¸ªé¡¶ç‚¹çš„ä½ç½®å’Œé¢œè‰²ã€‚æ¥ç€æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªå˜é‡ï¼ˆvaryingï¼‰ï¼Œå®ƒè´Ÿè´£åœ¨ä¸‰è§’å½¢ä¸­æ’å€¼å¹¶ä¼ é€’åˆ°ç‰‡æ®µç€è‰²å™¨ã€‚å½“å®ƒè¿è¡Œåˆ°ç‰‡æ®µç€è‰²å™¨ï¼Œå®ƒå°†ä¸ºæ¯ä¸ªåƒç´ æŒæœ‰ä¸€ä¸ªæ’å€¼ã€‚\nå‡è®¾æˆ‘ä»¬å®šä¹‰äº†ä¸€ä¸ªä¸‰è§’å½¢æ¯ä¸ªç‚¹éƒ½æ˜¯çº¢è‰²ã€ç»¿è‰²å’Œè“è‰²ï¼Œæˆ‘ä»¬è°ƒæ•´å®ƒçš„å¤§å°è®©å®ƒå ç”¨10åƒç´ å±å¹•ã€‚å½“ç‰‡æ®µç€è‰²å™¨è¿è¡Œæ—¶ï¼Œå®ƒå°†ä¸ºæ¯åƒç´ åŒ…å«ä¸€ä¸ªä¸åŒçš„å˜é‡ï¼ˆvaryingï¼‰é¢œè‰²ã€‚åœ¨æŸä¸€ç‚¹ä¸Šï¼Œå˜é‡ï¼ˆvaryingï¼‰å°†æ˜¯çº¢è‰²ï¼Œä½†æ˜¯åœ¨çº¢è‰²å’Œè“è‰²ä¹‹é—´å®ƒå¯èƒ½æ˜¯æ›´ç´«çš„é¢œè‰²ã€‚\né™¤äº†è®¾ç½®é¢œè‰²ï¼Œæˆ‘ä»¬è¿˜å‘Šè¯‰OpenGLé¡¶ç‚¹åœ¨å±å¹•ä¸Šçš„æœ€ç»ˆä½ç½®ã€‚ç„¶åæˆ‘ä»¬å®šä¹‰ç‰‡æ®µç€è‰²å™¨ï¼š\n1234567final String fragmentShader =        \"precision mediump float;       \\n\" + // æˆ‘ä»¬å°†é»˜è®¤ç²¾åº¦è®¾ç½®ä¸ºä¸­ç­‰ï¼Œæˆ‘ä»¬ä¸éœ€è¦ç‰‡æ®µç€è‰²å™¨ä¸­çš„é«˜ç²¾åº¦        \"varying vec4 v_Color;          \\n\" + // è¿™æ˜¯ä»ä¸‰è§’å½¢æ¯ä¸ªç‰‡æ®µå†…æ’çš„é¡¶ç‚¹ç€è‰²å™¨çš„é¢œè‰²        \"void main()                    \\n\" + // ç‰‡æ®µç€è‰²å™¨å…¥å£        \"&#123;                              \\n\" +        \"   gl_FragColor = v_Color;     \\n\" + // ç›´æ¥å°†é¢œè‰²ä¼ é€’        \"&#125;                              \\n\";\nè¿™æ˜¯ä¸ªç‰‡æ®µç€è‰²å™¨ï¼Œå®ƒä¼šå°†ä¸œè¥¿æ”¾åˆ°å±å¹•ä¸Šã€‚åœ¨è¿™ä¸ªç€è‰²å™¨ä¸­ï¼Œæˆ‘ä»¬å¾—åˆ°çš„å˜é‡ï¼ˆvaryingï¼‰é¢œè‰²æ¥è‡ªé¡¶ç‚¹ç€è‰²å™¨ï¼Œç„¶åå°†å®ƒç›´æ¥ä¼ é€’ç»™OpenGLã€‚è¯¥ç‚¹å·²æŒ‰åƒç´ æ’å€¼ï¼Œå› ä¸ºç‰‡æ®µç€è‰²å™¨å°†é’ˆå¯¹æ¯ä¸ªå°†è¦ç»˜åˆ¶çš„åƒç´ ç‚¹è¿è¡Œã€‚\næ›´å¤šä¿¡æ¯ï¼šOpenGL ES 2 APIå¿«é€Ÿå‚è€ƒå¡\nå°†ç€è‰²å™¨åŠ è½½åˆ°OpenGL12345678910111213141516171819202122// åŠ è½½é¡¶ç‚¹ç€è‰²å™¨int vertexShaderHandle = GLES20.glCreateShader(GLES20.GL_VERTEX_SHADER);if (vertexShaderHandle != 0) &#123;    // ä¼ å…¥é¡¶ç‚¹ç€è‰²å™¨æºä»£ç     GLES20.glShaderSource(vertexShaderHandle, vertexShader);    // ç¼–è¯‘é¡¶ç‚¹ç€è‰²å™¨    GLES20.glCompileShader(vertexShaderHandle);    // è·å–ç¼–è¯‘çŠ¶æ€    final int[] compileStatus = new int[1];    GLES20.glGetShaderiv(vertexShaderHandle, GLES20.GL_COMPILE_STATUS, compileStatus, 0);    // å¦‚æœç¼–è¯‘å¤±è´¥åˆ™åˆ é™¤ç€è‰²å™¨    if (compileStatus[0] == 0) &#123;        GLES20.glDeleteShader(vertexShaderHandle);        vertexShaderHandle = 0;    &#125;&#125;if (vertexShaderHandle == 0) &#123;    throw new RuntimeException(\"Error creating vertex shader.\");&#125;\né¦–å…ˆï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç€è‰²å™¨å¯¹è±¡ã€‚å¦‚æœæˆåŠŸï¼Œæˆ‘ä»¬å°†å¾—åˆ°è¿™ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå¼•ç”¨ä¼ å…¥ç€è‰²å™¨æºç ç„¶åç¼–è¯‘å®ƒã€‚æˆ‘ä»¬å¯ä»¥ä»OpenGLè·å–ç¼–è¯‘æ˜¯å¦æˆåŠŸçš„çŠ¶æ€ï¼Œå¦‚æœå¤±è´¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨GLES20.glGetShaderInfoLog(shader)æ‰¾åˆ°åŸå› ã€‚æˆ‘ä»¬æŒ‰ç…§ç›¸åŒçš„æ­¥éª¤åŠ è½½ç‰‡æ®µç€è‰²å™¨ã€‚\nå°†é¡¶ç‚¹å’Œç‰‡æ®µç€è‰²å™¨é“¾æ¥åˆ°ä¸€ä¸ªç¨‹åºä¸­12345678910111213141516171819202122232425// åˆ›å»ºä¸€ä¸ªç¨‹åºå¯¹è±¡å¹¶å°†å¼•ç”¨æ”¾è¿›å»int programHandle = GLES20.glCreateProgram();if (programHandle != 0) &#123;    // ç»‘å®šé¡¶ç‚¹ç€è‰²å™¨åˆ°ç¨‹åºå¯¹è±¡ä¸­    GLES20.glAttachShader(programHandle, vertexShaderHandle);    // ç»‘å®šç‰‡æ®µç€è‰²å™¨åˆ°ç¨‹åºå¯¹è±¡ä¸­    GLES20.glAttachShader(programHandle, fragmentShaderHandle);    // ç»‘å®šå±æ€§    GLES20.glBindAttribLocation(programHandle, 0, \"a_Position\");    GLES20.glBindAttribLocation(programHandle, 1, \"a_Color\");    // å°†ä¸¤ä¸ªç€è‰²å™¨è¿æ¥åˆ°ç¨‹åº    GLES20.glLinkProgram(programHandle);    // è·å–è¿æ¥çŠ¶æ€    final int[] linkStatus = new int[1];    GLES20.glGetProgramiv(programHandle, GLES20.GL_LINK_STATUS, linkStatus, 0);    // å¦‚æœè¿æ¥å¤±è´¥ï¼Œåˆ é™¤è¿™ç¨‹åº    if (linkStatus[0] == 0) &#123;        GLES20.glDeleteProgram(programHandle);        programHandle = 0;    &#125;&#125;if (programHandle == 0) &#123;    throw new RuntimeException(\"Error creating program.\");&#125;\nåœ¨æˆ‘ä»¬ä½¿ç”¨é¡¶ç‚¹å’Œç‰‡æ®µç€è‰²å™¨ä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦å°†å®ƒä»¬ç»‘å®šåˆ°ä¸€ä¸ªç¨‹åºä¸­ï¼Œå®ƒè¿æ¥äº†é¡¶ç‚¹ç€è‰²å™¨çš„è¾“å‡ºå’Œç‰‡æ®µç€è‰²å™¨çš„è¾“å…¥ã€‚è¿™ä¹Ÿæ˜¯è®©æˆ‘ä»¬ä»ç¨‹åºä¼ é€’è¾“å…¥å¹¶ä½¿ç”¨ç€è‰²å™¨ç»˜åˆ¶å½¢çŠ¶çš„åŸå› ã€‚\næˆ‘ä»¬åˆ›å»ºä¸€ä¸ªç¨‹åºå¯¹è±¡ï¼Œå¦‚æœæˆåŠŸç»‘å®šç€è‰²å™¨ã€‚æˆ‘ä»¬æƒ³è¦å°†ä½ç½®å’Œé¢œè‰²ä½œä¸ºå±æ€§ä¼ é€’è¿›å»ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦ç»‘å®šè¿™äº›å±æ€§ã€‚ç„¶åæˆ‘ä»¬å°†ç€è‰²å™¨è¿æ¥åˆ°ä¸€èµ·ã€‚\n123456789101112131415161718// æ–°ç±»æˆå‘˜/** è¿™å°†ç”¨äºä¼ é€’å˜æ¢çŸ©é˜µ*/private int mMVPMatrixHandle;/** ç”¨äºä¼ é€’modelä½ç½®ä¿¡æ¯*/private int mPositionHandle;/** ç”¨äºä¼ é€’æ¨¡å‹é¢œè‰²ä¿¡æ¯*/private int mColorHandle;@Overridepublic void onSurfaceCreated(GL10 gl, EGLConfig config) &#123;    ...    // è®¾ç½®ç¨‹åºå¼•ç”¨ï¼Œè¿™å°†åœ¨ä¹‹åä¼ é€’å€¼åˆ°ç¨‹åºæ—¶ä½¿ç”¨    mMVPMatrixHandle = GLES20.glGetUniformLocation(programHandle, \"u_MVPMatrix\");    mPositionHandle = GLES20.glGetAttribLocation(programHandle, \"a_Position\");    mColorHandle = GLES20.glGetAttribLocation(programHandle, \"a_Color\");    // å‘Šè¯‰OpenGLæ¸²æŸ“çš„æ—¶å€™ä½¿ç”¨è¿™ä¸ªç¨‹åº    GLES20.glUseProgram(programHandle);&#125;\nåœ¨æˆ‘ä»¬æˆåŠŸè¿æ¥ç¨‹åºåï¼Œæˆ‘ä»¬è¿˜è¦å®Œæˆå‡ ä¸ªä»»åŠ¡ï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½å®é™…ä½¿ç”¨å®ƒã€‚ç¬¬ä¸€ä¸ªä»»åŠ¡æ˜¯è·å–å¼•ç”¨ï¼Œå› ä¸ºæˆ‘ä»¬è¦ä¼ é€’æ•°æ®åˆ°ç¨‹åºä¸­ã€‚ç„¶åæˆ‘ä»¬è¦å‘Šè¯‰OpenGLåœ¨ç»˜åˆ¶æ—¶ä½¿ç”¨æˆ‘ä»¬è¿™ä¸ªç¨‹åºã€‚ç”±äºæœ¬è¯¾æˆ‘ä»¬ä»…ä½¿ç”¨äº†ä¸€ä¸ªç¨‹åºï¼Œæˆ‘ä»¬å¯ä»¥å°†å®ƒæ”¾åˆ°onSurfaceCreated()æ–¹æ³•ä¸­è€Œä¸æ˜¯onDrawFrame()\nè®¾ç½®é€è§†æŠ•å½±1234567891011121314151617181920// æ–°ç±»æˆå‘˜// å­˜æ”¾æŠ•å½±çŸ©é˜µï¼Œç”¨äºå°†åœºæ™¯æŠ•å½±åˆ°2Dè§†è§’private float[] mProjectionMatrix = new float[16];@Overridepublic void onSurfaceChanged(GL10 gl, int width, int height) &#123;    // è®¾ç½®OpenGLç•Œé¢å’Œå½“å‰è§†å›¾ç›¸åŒçš„å°ºå¯¸    GLES20.glViewport(0, 0, width, height);    // åˆ›å»ºä¸€ä¸ªæ–°çš„é€è§†æŠ•å½±çŸ©é˜µï¼Œé«˜åº¦ä¿æŒä¸å˜ï¼Œè€Œé«˜åº¦æ ¹æ®çºµæ¨ªæ¯”è€Œå˜æ¢    final float ratio = (float) width / height;    final float left = -ratio;    final float right = ratio;    final float bottom = -1.0F;    final float top = 1.0F;    final float near = 1.0F;    final float far = 10.0F;    Matrix.frustumM(mProjectionMatrix, 0, left, right, bottom, top, near, far);&#125;\nonSurfaceChanged()æ–¹æ³•è‡³å°‘è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œæ¯å½“ç•Œé¢æ”¹å˜ä¹Ÿä¼šè¢«è°ƒç”¨ã€‚å› ä¸ºæˆ‘ä»¬éœ€è¦æ¯å½“ç•Œé¢æ”¹å˜çš„æ—¶å€™é‡ç½®æŠ•å½±çŸ©é˜µï¼Œé‚£ä¹ˆonSurfaceChanged()æ–¹æ³•ä¸­æ˜¯ä¸ªç†æƒ³çš„åœ°æ–¹ã€‚\nç»˜åˆ¶ä¸œè¥¿åˆ°å±å¹•ä¸Šï¼123456789101112131415161718// æ–°ç±»æˆå‘˜// å­˜æ”¾æ¨¡å‹çŸ©é˜µï¼Œè¯¥çŸ©é˜µç”¨äºå°†æ¨¡å‹ä»å¯¹è±¡ç©ºé—´ï¼ˆå¯ä»¥è®¤ä¸ºæ¯ä¸ªæ¨¡å‹å¼€å§‹éƒ½ä½äºå®‡å®™çš„ä¸­å¿ƒï¼‰ç§»åŠ¨åˆ°ä¸–ç•Œç©ºé—´private float[] mModelMatrix = new float[16];@Overridepublic void onDrawFrame(GL10 gl) &#123;    GLES20.glClear(GLES20.GL_DEPTH_BUFFER_BIT | GLES20.GL_COLOR_BUFFER_BIT);    // æ¯10så®Œæˆä¸€æ¬¡æ—‹è½¬    long time = SystemClock.uptimeMillis() % 10000L;    float angleDegrees = (360.0F / 10000.0F) * ((int)time);    // ç”»ä¸‰è§’å½¢    Matrix.setIdentityM(mModelMatrix, 0);    Matrix.rotateM(mModelMatrix, 0, angleDegrees, 0.0F, 0.0F, 1.0F);    drawTriangle(mTriangle1Verticels);    ...&#125;\nè¿™æ˜¯å®é™…æ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„å†…å®¹ã€‚æˆ‘ä»¬æ¸…ç†å±å¹•ï¼Œå› æ­¤ä¸ä¼šå¾—åˆ°ä»»ä½•å¥‡æ€ªçš„é•œåƒæ•ˆåº”å½±å“ï¼Œæˆ‘ä»¬å¸Œæœ›æˆ‘ä»¬çš„ä¸‰è§’å½¢åœ¨å±å¹•ä¸Šèƒ½æœ‰å¹³æ»‘çš„åŠ¨ç”»ï¼Œé€šå¸¸ä½¿ç”¨æ—¶é—´è€Œä¸æ˜¯å¸§ç‡æ›´å¥½ã€‚\n\nå®é™…ç»˜åˆ¶åœ¨drawTriangle()æ–¹æ³•ä¸­å®Œæˆ\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748// æ–°çš„ç±»æˆå‘˜/** ä¸ºæœ€ç»ˆçš„ç»„åˆçŸ©é˜µåˆ†é…å­˜å‚¨ç©ºé—´ï¼Œè¿™å°†ç”¨æ¥ä¼ å…¥ç€è‰²å™¨ç¨‹åº*/private float[] mMVPMatrix = new float[16];/** æ¯ä¸ªé¡¶ç‚¹æœ‰å¤šå°‘å­—èŠ‚ç»„æˆï¼Œæ¯æ¬¡éœ€è¦è¿ˆè¿‡è¿™ä¹ˆä¸€å¤§æ­¥ï¼ˆæ¯ä¸ªé¡¶ç‚¹æœ‰7ä¸ªå…ƒç´ ï¼Œ3ä¸ªè¡¨ç¤ºä½ç½®ï¼Œ4ä¸ªè¡¨ç¤ºé¢œè‰²ï¼Œ7 * 4 = 28ä¸ªå­—èŠ‚ï¼‰*/private final int mStrideBytes = 7 * mBytePerFloat;/** ä½ç½®æ•°æ®åç§»é‡*/private final int mPositionOffset = 0;/** ä¸€ä¸ªå…ƒç´ çš„ä½ç½®æ•°æ®å¤§å°*/private final int mPositionDataSize = 3;/** é¢œè‰²æ•°æ®åç§»é‡*/private final int mColorOffset = 3;/** ä¸€ä¸ªå…ƒç´ çš„é¢œè‰²æ•°æ®å¤§å°*/private final int mColorDataSize = 4;/** * ä»ç»™å®šçš„é¡¶ç‚¹æ•°æ®ä¸­ç»˜åˆ¶ä¸€ä¸ªä¸‰è§’å½¢ * @param aTriangleBuffer åŒ…å«é¡¶ç‚¹æ•°æ®çš„ç¼“å†²åŒº */private void drawTriangle(FloatBuffer aTriangleBuffer) &#123;    aTriangleBuffer.position(mPositionOffset);    GLES20.glVertexAttribPointer(            mPositionHandle, mPositionDataSize, GLES20.GL_FLOAT, false,            mStrideBytes, aTriangleBuffer);    GLES20.glEnableVertexAttribArray(mPositionHandle);    // ä¼ å…¥é¢œè‰²ä¿¡æ¯    aTriangleBuffer.position(mColorOffset);    GLES20.glVertexAttribPointer(mColorHandle, mColorDataSize, GLES20.GL_FLOAT, false,            mStrideBytes, aTriangleBuffer);    GLES20.glEnableVertexAttribArray(mColorHandle);    // å°†è§†å›¾çŸ©é˜µä¹˜ä»¥æ¨¡å‹çŸ©é˜µï¼Œå¹¶å°†ç»“æœå­˜æ”¾åˆ°MVP Matrixï¼ˆmodel * viewï¼‰    Matrix.multiplyMM(mMVPMatrix, 0, mViewMatrix, 0, mModelMatrix, 0);    // å°†ä¸Šé¢è®¡ç®—å¥½çš„è§†å›¾æ¨¡å‹çŸ©é˜µä¹˜ä»¥æŠ•å½±çŸ©é˜µï¼Œå¹¶å°†ç»“æœå­˜æ”¾åˆ°MVP Matrixï¼ˆmodel * view * projectionï¼‰    Matrix.multiplyMM(mMVPMatrix, 0, mProjectionMatrix, 0, mMVPMatrix, 0);    GLES20.glUniformMatrix4fv(mMVPMatrixHandle, 1, false, mMVPMatrix, 0);    GLES20.glDrawArrays(GLES20.GL_TRIANGLES, 0, 3);&#125;\næ‚¨è¿˜è®°å¾—æˆ‘ä»¬æœ€åˆåˆ›å»ºæ¸²æŸ“å™¨æ—¶å®šä¹‰çš„é‚£äº›ç¼“å†²åŒºå—ï¼Ÿæˆ‘ä»¬ç»ˆäºå¯ä»¥ä½¿ç”¨å®ƒä»¬äº†ã€‚æˆ‘ä»¬éœ€è¦ä½¿ç”¨GLES20.glVertexAttribPointer()æ¥å‘Šè¯‰OpenGLæ€æ ·ä½¿ç”¨è¿™äº›æ•°æ®ã€‚\n\næˆ‘ä»¬æ¥çœ‹ç¬¬ä¸€ä¸ªä½¿ç”¨\n\n12345aTriangleBuffer.position(mPositionOffset);GLES20.glVertexAttribPointer(        mPositionHandle, mPositionDataSize, GLES20.GL_FLOAT, false,        mStrideBytes, aTriangleBuffer);GLES20.glEnableVertexAttribArray(mPositionHandle);\næˆ‘ä»¬è®¾ç½®ç¼“å†²åŒºçš„ä½ç½®åç§»ï¼Œå®ƒä½äºç¼“å†²åŒºçš„å¼€å¤´ã€‚ç„¶åæˆ‘ä»¬å‘Šè¯‰OpenGLä½¿ç”¨è¿™äº›æ•°æ®å¹¶å°†å…¶æä¾›ç»™é¡¶ç‚¹ç€è‰²å™¨å¹¶å°†å…¶åº”ç”¨åˆ°ä½ç½®å±æ€§ï¼ˆa_Positionï¼‰ã€‚æˆ‘ä»¬ä¹Ÿéœ€è¦å‘Šè¯‰OpenGLæ¯ä¸ªé¡¶ç‚¹æˆ–è¿ˆå¹…ä¹‹é—´æœ‰å¤šå°‘ä¸ªå…ƒç´ ã€‚\n\næ³¨æ„ï¼šè¿ˆå¹…ï¼ˆStrideï¼‰éœ€è¦å®šä¹‰ä¸ºå­—èŠ‚ï¼ˆbyteï¼‰ï¼Œå°½ç®¡æ¯ä¸ªé¡¶ç‚¹ä¹‹é—´æˆ‘ä»¬æœ‰7ä¸ªå…ƒç´ ï¼ˆ3ä¸ªæ˜¯ä½ç½®ï¼Œ4ä¸ªæ˜¯é¢œè‰²ï¼‰ï¼Œä½†æˆ‘ä»¬äº‹å®ä¸Šæœ‰28ä¸ªå­—èŠ‚ï¼Œå› ä¸ºæ¯ä¸ªæµ®ç‚¹æ•°ï¼ˆfloatï¼‰å°±æ˜¯4ä¸ªå­—èŠ‚ï¼ˆbyteï¼‰ã€‚å¿˜è®°æ­¤æ­¥éª¤æ‚¨å¯èƒ½æ²¡æœ‰ä»»ä½•é”™è¯¯ï¼Œä½†æ˜¯ä½ ä¼šæƒ³çŸ¥é“ä¸ºä»€ä¹ˆæ‚¨çš„å±å¹•ä¸Šçœ‹ä¸åˆ°ä»»ä½•å†…å®¹ã€‚\n\næœ€ç»ˆï¼Œæˆ‘ä»¬ä½¿ç”¨äº†é¡¶ç‚¹å±æ€§ï¼Œå¾€ä¸‹æˆ‘ä»¬ä½¿ç”¨äº†ä¸‹ä¸€ä¸ªå±æ€§ã€‚å†å¾€åç‚¹æˆ‘ä»¬æ„å»ºä¸€ä¸ªç»„åˆçŸ©é˜µï¼Œå°†ç‚¹æŠ•å½±åˆ°å±å¹•ä¸Šã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­æ‰§è¡Œæ­¤æ“ä½œï¼Œä½†æ˜¯ç”±äºå®ƒåªéœ€è¦æ‰§è¡Œä¸€æ¬¡æˆ‘ä»¬ä¹Ÿå¯ä»¥åªç¼“å­˜ç»“æœã€‚æˆ‘ä»¬ä½¿ç”¨GLES20.glUniformMatrix4fv()æ–¹æ³•å°†æœ€ç»ˆçš„çŸ©é˜µä¼ å…¥é¡¶ç‚¹ç€è‰²å™¨ã€‚GLES20.glDrawArrays()å°†æˆ‘ä»¬çš„ç‚¹è½¬æ¢ä¸ºä¸‰è§’å½¢å¹¶å°†å…¶ç»˜åˆ¶åœ¨å±å¹•ä¸Šã€‚\næ€»ç»“å‘¼å‘¼ï¼è¿™æ˜¯é‡è¦çš„ä¸€è¯¾ï¼Œå¦‚æœæ‚¨å®Œæˆäº†æœ¬è¯¾ï¼Œæ„Ÿè°¢æ‚¨ï¼æˆ‘ä»¬å­¦ä¹ äº†æ€æ ·åˆ›å»ºOpenGLä¸Šä¸‹æ–‡ï¼Œä¼ å…¥å½¢çŠ¶æ•°æ®ï¼ŒåŠ è½½é¡¶ç‚¹å’Œç‰‡æ®µç€è‰²å™¨ï¼Œè®¾ç½®æˆ‘ä»¬çš„è½¬æ¢çŸ©é˜µï¼Œæœ€ç»ˆæ”¾åœ¨ä¸€èµ·ã€‚å¦‚æœä¸€åˆ‡é¡ºåˆ©ï¼Œæ‚¨å› è¯¥çœ‹åˆ°äº†ç±»ä¼¼ä¸‹é¢çš„æˆªå±ã€‚\nè¿™ä¸€è¯¾æœ‰å¾ˆå¤šéœ€è¦æ¶ˆåŒ–çš„å†…å®¹ï¼Œæ‚¨å¯èƒ½éœ€è¦å¤šæ¬¡é˜…è¯»è¿™äº›æ­¥éª¤æ‰èƒ½ç†è§£å®ƒã€‚OpenGL ES 2éœ€è¦æ›´å¤šçš„è®¾ç½®æ‰èƒ½å¼€å§‹ï¼Œä½†æ˜¯ä¸€æ—¦æ‚¨å®Œæˆäº†è¿™ä¸ªè¿‡ç¨‹å‡ æ¬¡ï¼Œæ‚¨å°±ä¼šè®°ä½è¿™ä¸ªæµç¨‹ã€‚\nåœ¨Androidå¸‚åœºä¸Šå‘å¸ƒå½“å¼€å‘çš„åº”ç”¨æˆ‘ä»¬ä¸æƒ³åœ¨æ— æ³•è¿è¡Œè¿™äº›åº”ç”¨ç¨‹åºçš„äººåœ¨å¸‚åœºä¸Šçœ‹åˆ°å®ƒä»¬ï¼Œå¦åˆ™å½“åº”ç”¨ç¨‹åºåœ¨å…¶è®¾å¤‡ä¸Šå´©æºƒæ—¶ï¼Œæˆ‘ä»¬å¯èƒ½ä¼šæ”¶åˆ°å¤§é‡ç³Ÿç³•çš„è¯„è®ºå’Œè¯„åˆ†ã€‚è¦é˜²æ­¢OpenGL ES 2 åº”ç”¨ç¨‹åºå‡ºç°åœ¨ä¸æ”¯æŒå®ƒçš„è®¾å¤‡ä¸Šï¼Œä½ å¯ä»¥åœ¨æ¸…å•æ–‡ä»¶ä¸­æ·»åŠ ï¼š\n123&lt;uses-feature    android:glEsVersion=\"0x00020000\"    android:required=\"true\" /&gt;\nè¿™å‘Šè¯‰å¸‚åœºæ‚¨çš„appéœ€è¦æœ‰OpenGL ES 2æ”¯æŒï¼Œä¸æ”¯æŒçš„è®¾å¤‡å°†ä¼šéšè—æ‚¨çš„appã€‚\nè¿›ä¸€æ­¥æ¢ç´¢å°è¯•æ›´æ”¹åŠ¨ç”»é€Ÿåº¦ï¼Œé¡¶ç‚¹æˆ–é¢œè‰²ï¼Œçœ‹çœ‹ä¼šå‘ç”Ÿä»€ä¹ˆï¼å¯ä»¥åœ¨Githubä¸‹è½½æœ¬è¯¾ç¨‹æºä»£ç ï¼šä¸‹è½½é¡¹ç›®æœ¬è¯¾çš„ç¼–è¯‘ç‰ˆæœ¬ä¹Ÿå¯ä»¥å†Androidå¸‚åœºä¸‹ï¼šgoogle play ä¸‹è½½apkâ€œæˆ‘â€ä¹Ÿç¼–è¯‘äº†ä¸ªapkï¼Œæ–¹ä¾¿å¤§å®¶ä¸‹è½½ï¼šgithub download\næ•™ç¨‹ç›®å½•\nOpenGL Androidè¯¾ç¨‹ä¸€ï¼šå…¥é—¨\nOpenGL Androidè¯¾ç¨‹äºŒï¼šç¯å¢ƒå…‰å’Œæ¼«å°„å…‰\nOpenGL Androidè¯¾ç¨‹ä¸‰ï¼šä½¿ç”¨æ¯ç‰‡æ®µç…§æ˜\nOpenGL Androidè¯¾ç¨‹å››ï¼šä»‹ç»çº¹ç†åŸºç¡€\nOpenGL Androidè¯¾ç¨‹äº”ï¼šä»‹ç»æ··åˆï¼ˆBlendingï¼‰\nOpenGL Androidè¯¾ç¨‹å…­ï¼šä»‹ç»çº¹ç†è¿‡æ»¤\nOpenGL Androidè¯¾ç¨‹ä¸ƒï¼šä»‹ç»Vertex Buffer Objectsï¼ˆé¡¶ç‚¹ç¼“å†²åŒºå¯¹è±¡ï¼Œç®€ç§°ï¼šVOBï¼‰\n\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-opengl/6093CCF8-F7C1-4F4E-A668-C9E76783063F.png","plink":"https://blog.xujiaji.com/post/Learn-OpenGL-Lesson-One/"},{"title":"C å­¦ä¹ ç¬”è®°","date":"2018-12-25T15:18:45.000Z","author":"xujiaji","updated":"2019-05-15T08:15:04.969Z","content":"é‡å­¦ä¸€æ¬¡Cè¯­è¨€ï¼Œè®°å½•ä¸€ä¸‹å­¦ä¹ ã€ŠC Primer Plusã€‹çš„ç¬”è®°ï¼Œæ–¹ä¾¿å›å¿†ï¼\n\nç¼–è¯‘12gcc -o foo.exe foo.c -lregexgcc foo.c -o foo.exe -lregex\nå­—ç¬¦ä¸²å’Œæ ¼å¼åŒ–è¾“å…¥/è¾“å‡º\nå­—ç¬¦ä¸²ä»¥charæ•°ç»„æ¥å­˜å‚¨\nå¸¸é‡ç”¨ #define å®šä¹‰\n1#define DENSITY 62.4\n\nstrlen()è·å–å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæ³¨æ„éœ€è¦#include &lt;string.h&gt;\n\ncharç±»å‹æ•°ç»„å’Œnullå­—ç¬¦\nCè¯­è¨€æ²¡æœ‰ä¸“é—¨ç”¨äºå‚¨å­˜å­—ç¬¦ä¸²çš„å˜é‡ç±»å‹ï¼Œå­—ç¬¦ä¸²éƒ½è¢«å‚¨å­˜åœ¨charç±»å‹çš„æ•°ç»„ä¸­\nå­—ç¬¦ä¸²ä»¥\\0ï¼ˆç©ºå­—ç¬¦ï¼‰ç»“æŸï¼Œå®ƒæ˜¯ä¸æ‰“å°å‡ºæ¥çš„å­—ç¬¦\nå¦‚æœæœ‰40å“¥å­˜å‚¨å•å•å…ƒçš„å­—ç¬¦ä¸²ï¼Œåªèƒ½å‚¨å­˜39å“¥å­—ç¬¦ï¼Œå‰©ä¸‹ä¸€ä¸ªå­—èŠ‚ç•™ç»™ç©ºå­—ç¬¦\n\n\nä¸€ä¸‹ä»£ç %sä½œä¸ºè½¬åŒ–è¯´æ˜ï¼Œscanf()åªä¼šè¯»å–å­—ç¬¦ä¸²ä¸­çš„ä¸€ä¸ªå•è¯ã€‚å¹¶ä¸”æ²¡æœ‰åŠ &amp;å–åœ°å€ç¬¦ï¼Œnameå°±æ˜¯åœ°å€\n12char name[40];scanf(\"%s\", name);\n\n&quot;x&quot;ä¸åŒäº&#39;x&#39;,&quot;x&quot;æ˜¯å­—ç¬¦ä¸²ç”±xå’Œ\\0ç»„æˆ\n\nsizeofè¿ç®—ç¬¦ï¼Œå®ƒä»¥å­—èŠ‚ä¸ºå•ä½ç»™å‡ºå¯¹è±¡çš„å¤§å°ã€‚strlen()åªç»™å‡ºå­—ç¬¦ä¸²é•¿åº¦ï¼Œåˆ°ç©ºå­—ç¬¦ï¼ˆä¸åŒ…æ‹¬ç©ºå­—ç¬¦ï¼‰\nC99å’ŒC11æ ‡å‡†ä¸“é—¨ä¸ºsizeofè¿ç®—ç¬¦çš„è¿”å›ç±»å‹æ·»åŠ äº†%zdè½¬æ¢è¯´æ˜ï¼Œå¯¹äºstrlen()ä¹Ÿé€‚ç”¨\nsizeofä½¿ç”¨æ—¶ï¼Œå¯¹äºç±»å‹å¿…é¡»åŠ æ‹¬å·ã€‚å¯¹äºç‰¹å®šé‡ï¼Œå¯æœ‰å¯æ— ã€‚ç±»å‹ï¼šsizeof(char), sizeof(float); ç‰¹å®šé‡ï¼šsizeof 6.28, sizeof name\n\n\n\nå¸¸é‡å’ŒCé¢„å¤„ç†å™¨\nCé¢„å¤„ç†å™¨å®šä¹‰å¸¸é‡ï¼š#define NAME valueï¼Œå…¶ä¸­â€œNAMEâ€ä¸ºå‘½ä»¤çš„å¸¸é‡åï¼Œçº¦å®šå¤§å†™ï¼›â€œvalueâ€æ˜¯å¯¹åº”çš„å€¼\n1234#define BEEP '\\a'#define TEE 'T'#define ESC '\\033'#define OOPS \"Now you have done it!\"\n\nconsté™å®šç¬¦ï¼ŒC90æ ‡å‡†æ–°å¢è¯¥å…³é”®å­—ï¼Œç”¨äºé™å®šä¸€ä¸ªå˜é‡ä¸ºåªè¯»\n\næ˜ç¤ºå¸¸é‡ï¼šCå¤´æ–‡ä»¶limits.hå’Œfloat.håˆ†åˆ«æä¾›äº†ä¸æ•´æ•°ç±»å‹å’Œæµ®ç‚¹æ•°ç±»å‹å¤§å°é™åˆ¶ç›¸å…³çš„è¯¦ç»†ä¿¡æ¯1234567891011#include &lt;stdio.h&gt;#include &lt;limits.h&gt;#include &lt;float.h&gt;int main()&#123;    printf(\"Some number limits for this system: \\n\");    printf(\"Biggest int: %d\\n\", INT_MAX);    printf(\"Smallest long long: %lld\\n\", LLONG_MIN);    return 0;&#125;\n\n\n","plink":"https://blog.xujiaji.com/post/c-learn-note/"},{"title":"ä¸€ä¸ªé¡¹ç›®å¦‚ä½•ç¼–è¯‘å¤šä¸ªä¸åŒç­¾åã€åŒ…åã€èµ„æºç­‰ï¼Œçš„apkï¼Ÿ","date":"2018-10-29T08:15:20.000Z","author":"xujiaji","updated":"2019-04-08T06:54:02.208Z","content":"ç®€ä»‹å¦‚é¢˜æ‰€ç¤ºï¼æœ¬ç¯‡æ–‡ç« å°±æ˜¯ä¸ºäº†è§£å†³è¿™ç§é—®é¢˜ã€‚æ–¹ä¾¿æ‰“åŒ…å’Œè¿è¡Œçš„æ—¶å€™èƒ½åšåˆ°æ— éœ€æ‰‹åŠ¨æ›¿æ¢é…ç½®ï¼Œå³å¯æ‰“åŒ…æƒ³è¦çš„apkã€‚æ‰“åŒ…çš„æ—¶å€™ï¼Œåªéœ€é€‰ä¸€ä¸‹æƒ³æ‰“å“ªç§é…ç½®çš„apkå°±OKå•¦ã€‚ (^o^)/~\n\nå…ˆæ¥çœ‹ï¼Œæœ‰éœ€æ±‚å¦‚ä¸‹ï¼š\n\n\nåŒä¸€ä¸ªé¡¹ç›®\nä¸åŒçš„apkå›¾æ ‡\nä¸åŒçš„æœåŠ¡å™¨åŸŸå\nä¸åŒçš„åŒ…å\nä¸åŒçš„åç§°\nä¸åŒçš„ç­¾å\nä¸åŒçš„ç¬¬ä¸‰æ–¹key\nä¸åŒçš„ç‰ˆæœ¬åç‰ˆæœ¬å·\n\n\nè§£å†³æ€è·¯\n\n\nå½“ç„¶æœ€ç›´æ¥çš„æ–¹å¼ä¸è¿‡äºæ¯æ¬¡æ‰“ä¸åŒåŒ…çš„æ—¶å€™éƒ½å»æ›¿æ¢å¯¹åº”çš„é…ç½®ï¼Œè¿™ç§æ–¹å¼çš„éº»çƒ¦ä¹‹å¤„ä¸è¨€è€Œå–»ã€‚\nå°†æ‰€æœ‰é…ç½®ï¼Œèµ„æºç­‰éƒ½é…ç½®å…¥é¡¹ç›®ä¸­ï¼Œæ‰“åŒ…çš„æ—¶å€™ï¼Œæ ¹æ®é€‰æ‹©æ¸ é“æ‰“åŒ…ä¸åŒé…ç½®çš„apkã€‚ï¼ˆæœ¬ç¯‡æ–‡ç« å°±æ˜¯è¦è®²æ€ä¹ˆè¿™ä¹ˆåšçš„ï¼‰\nç›¸ä¿¡è¿˜æœ‰å…¶ä»–çš„ã€‚ã€‚ã€‚\n\nç›¸å…³çš„å‡ ä¸ªè¦ç‚¹\né¦–å…ˆæˆ‘ä»¬éœ€è¦çŸ¥é“productFlavorsæ¥é…ç½®æ¸ é“ï¼Œè¿™é‡Œæˆ‘å°†æ¸ é“ç”¨æ¥è¡¨ç¤ºå“ªç§apkï¼Œå¦‚ä¸‹æˆ‘éœ€è¦é…ç½®å››ç§åº”ç”¨:\n123456productFlavors &#123;  userquhua &#123;&#125;  quhua &#123;&#125;  cuntuba &#123;&#125;  xemh &#123;&#125;&#125;\n\nå¦‚æœæˆ‘ä»¬é€‰æ‹©äº†æŸä¸€ä¸ªæ¸ é“ï¼Œé‚£ä¹ˆè¿è¡Œæ‰“åŒ…çš„æ—¶å€™ä¼šæ ¹æ®æ¸ é“åé€‰æ‹©èµ„æºæ–‡ä»¶ï¼ˆå¯ç»“åˆç¬¬6ç‚¹ä¸€èµ·çœ‹ï¼‰\n\nç­¾åå¯åœ¨signingConfigsä¸­é…ç½®å¤šä¸ªï¼ˆæˆ‘å°†æ‰€æœ‰ç­¾åæ–‡ä»¶æ”¾åœ¨äº†é¡¹ç›®è·Ÿç›®å½•çš„keyæ–‡ä»¶å¤¹ä¸­ï¼‰ï¼Œè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥é€šè¿‡signingConfigsæŒ‡å®šé¢„åˆ¶å¥½çš„ç­¾åé…ç½®ã€‚\n1234567891011121314151617181920212223242526272829signingConfigs &#123;    userquhuaRelease &#123;        storeFile file(\"../key/xxx1.keystore\")        storePassword \"xxxxxx\"        keyAlias \"alias\"        keyPassword \"xxxxxx\"    &#125;    quhuaRelease &#123;        storeFile file(\"../key/xxx2.keystore\")        storePassword \"xxxxxx\"        keyAlias \"alias\"        keyPassword \"xxxxxx\"    &#125;    cuntubaRelease &#123;        storeFile file(\"../key/xxx3.keystore\")        storePassword \"xxxxxx\"        keyAlias \"alias\"        keyPassword \"xxxxxx\"    &#125;    xemhRelease &#123;        storeFile file(\"../key/xxx4.keystore\")        storePassword \"xxxxxx\"        keyAlias \"alias\"        keyPassword \"xxxxxx\"    &#125;&#125;\n\nå¯åœ¨build.gradleä¸­é…ç½®åŠ¨æ€é…ç½®javaä»£ç è°ƒç”¨çš„å¸¸é‡æ•°æ®ï¼ˆå¦‚ï¼šé€šè¿‡è¯¥æ–¹å¼æˆ‘ä»¬å¯æ ¹æ®ä¸åŒæ¸ é“åŠ¨æ€é…ç½®ç¬¬ä¸‰æ–¹appidï¼Œæˆ–å…¶ä»–éœ€è¦æ ¹æ®æ¸ é“è€Œæ”¹å˜çš„æ•°æ®ï¼‰\n\næ¯”å¦‚ï¼šæˆ‘ä»¬åœ¨defaultConfig {} ä¸­å®šä¹‰äº†:\n1buildConfigField &quot;String&quot;, &quot;SERVER_URL&quot;, &apos;&quot;http://xx.xxxx.com/&quot;&apos;\n\næ­¤æ—¶ï¼Œæ‚¨çœ‹ä¸€ä¸‹æ¸…å•æ–‡ä»¶ä¸­manifestæ ‡ç­¾é‡Œçš„ï¼Œpackageçš„å€¼ï¼Œå‡å¦‚æ˜¯ï¼š\n1com.xxx.xx\n\né‚£ä¹ˆï¼Œæ‚¨å°±å¯ä»¥åœ¨javaä»£ç ä¸­é€šè¿‡å¯¼å…¥æ–‡ä»¶ï¼š\n1import com.xxx.xx.BuildConfig;\n\nç„¶åè°ƒç”¨\n1BuildConfig.SERVER_URL\n\n\nå®ƒçš„å€¼å°±æ˜¯ä¸Šè¾¹é…ç½®çš„å­—ç¬¦ä¸²ï¼šhttp://xx.xxxx.com/ã€‚\n\næ‚¨å¯ä»¥è¿›å…¥BuildConfigçœ‹ä¸€çœ‹ï¼Œé‡Œé¢è¿˜åŒ…å«äº†ä¸€äº›å½“å‰çš„åŒ…åç‰ˆæœ¬å·ç­‰ä¿¡æ¯ã€‚\n\n\nåœ¨æ¸ é“é…ç½®é‚£é‡Œå¯ä»¥é…ç½®å¯¹åº”çš„åŒ…åç‰ˆæœ¬åç­¾åç­‰ç­‰å¦‚ä¸‹æ‰€ç¤ºï¼š\n12345678910111213141516171819202122232425262728293031323334// çœç•¥å…¶ä»–é…ç½®...android &#123;  // çœç•¥å…¶ä»–é…ç½®...  productFlavors &#123;      userquhua &#123;          applicationId \"com.xxx.xx\"          versionCode 1          versionName \"1.0.0\"          signingConfig signingConfigs.userquhuaRelease // é…ç½®ç­¾å          String qq_id = '\"xxxxxxxxx\"' //é…ç½®qq appid          buildConfigField \"String\",           \"QQ_ID\", qq_id          buildConfigField \"String\",           \"WX_ID\", '\"wxxxxxxxxxxxxxxxxx\"' // é…ç½®å¾®ä¿¡appid          manifestPlaceholders = [            qq_id: qq_id,            JPUSH_PKGNAME : applicationId,            JPUSH_APPKEY : \"xxxxxxxxxxxxxxxxxxxxxxxxxxxxx\", //JPush ä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey.            JPUSH_CHANNEL : \"developer-default\",          ]      &#125;  &#125;  buildTypes &#123;    release &#123;      // çœç•¥å…¶ä»–é…ç½®...        signingConfig null  // ç½®ç©º    &#125;    debug &#123;      // çœç•¥å…¶ä»–é…ç½®...        signingConfig null // ç½®ç©º    &#125;  &#125;&#125;\n\nè¿™æ ·ï¼Œå¦‚æœæˆ‘ä»¬æ‰“åŒ…userquhuaè¿™ä¸ªæ¸ é“ï¼Œçœ‹ç¬¬2ç‚¹ä¸­ä»‹ç»é€‰æ‹©userquhuaDebugã€‚\nç„¶åï¼Œæœ€å¥½cleanä¸€ä¸‹é¡¹ç›®ã€ç„¶åæˆ‘ä»¬è¿è¡Œé¡¹ç›®ã€‚\nè¯¥appçš„åŒ…åå°±æ˜¯com.xxx.xxï¼Œç‰ˆæœ¬å·ä¸º1ï¼Œç‰ˆæœ¬åä¸º1.0.0ã€‚\né€šè¿‡BuildConfigè°ƒç”¨QQ_IDé™æ€å¸¸é‡ï¼Œå°±æ˜¯è¯¥æ¸ é“é‡Œé…ç½®çš„å€¼ï¼ŒWX_IDåŒç†ã€‚\nmanifestPlaceholdersé…ç½®ä¹Ÿå¯ä»¥è¿™æ ·é…ç½®ã€‚\nç­¾åé—®é¢˜ç»è¿‡ä¸ªäººåå¤å°è¯•ï¼ˆç„¶ååŠå¤©å°±è¿‡å»äº†ï¿£ã¸ï¿£ï¼‰ï¼Œæœ€ç»ˆç­¾åå¦‚ä¸Šé…ç½®ã€‚éœ€è¦æ³¨æ„buildTypesä¸­çš„ç­¾åé…ç½®signingConfigå¦‚æœä¸è®¾ç½®ä¸ºnullï¼Œé‚£ä¹ˆæ‰“åŒ…çš„æ˜¯æœ‰è¿˜æ˜¯ä»¥å†…ç½®çš„ç­¾åæ‰“åŒ…ã€‚\n\n\nèµ„æºæ–‡ä»¶æ›¿æ¢å†çœ‹åˆ°ç¬¬2ç‚¹çš„ä»‹ç»ï¼Œæˆ‘ä»¬é€‰æ‹©è¿è¡Œæ¸ é“åï¼Œä¼šé»˜è®¤åŒ¹é…å¯¹åº”æ¸ é“ä¸‹çš„èµ„æºã€‚ä¸‹é¢æˆ‘å°†xemhæ¸ é“çš„èµ„æºç›®å½•å…¨éƒ¨å±•å¼€ä¸€ä¸‹ã€‚\nå¦‚ä¸Šå›¾è¿™æ ·ï¼Œåªéœ€è¦èµ„æºåå­—å’Œappç›®å½•å¯¹åº”çš„æ–‡ä»¶åå­—ä¸€æ ·å³å¯æ›¿æ¢ã€‚\nstrings.xmlé‡Œçš„åº”ç”¨åï¼Œåªéœ€è¦å°†å¯¹åº”app_nameä¿®æ”¹æ—¢å¯æ›¿æ¢appä¸‹stringsçš„app_nameï¼Œå…¶ä»–ä¸ç”¨æ›¿æ¢çš„ä¸ç”¨å†™å°±è¡Œã€‚\n\n\næ‰“æ­£å¼åŒ…çš„æ—¶å€™é€‰å¥½æ¸ é“ï¼Œå°±å¯ä»¥æ‰“åŒ…ä¸åŒé…ç½®çš„apkï¼Œå½“ç„¶æ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨å‘½ä»¤çš„æ–¹å¼ã€‚\n\nå…¶ä»–é…ç½®è®°å½•\nè·å–å½“å‰æ—¶é—´\n\n123static def releaseTime() &#123;    return new Date().format(\"yyyy-MM-dd-HH.mm\", TimeZone.getTimeZone(\"GMT+8\"))&#125;\n\næ‰“åŒ…çš„æ—¶å€™ï¼Œä¿®æ”¹æ–‡ä»¶åï¼Œä»¥æ–¹ä¾¿åŒºåˆ«æ¸ é“å’Œç‰ˆæœ¬æ‰“åŒ…æ—¶é—´\n\n123456applicationVariants.all &#123;    variant -&gt;        variant.outputs.all &#123;            outputFileName = \"$&#123;variant.productFlavors[0].name&#125;-v$&#123;variant.productFlavors[0].versionName&#125;-$&#123;releaseTime()&#125;.apk\"        &#125;&#125;\n\n${variant.productFlavors[0].name}å½“å‰æ¸ é“å\n${variant.productFlavors[0].versionName}å½“å‰ç‰ˆæœ¬å\n${releaseTime()}å½“å‰æ—¶é—´\n\nå…¶ä»–éœ€è¦æ³¨æ„äº‹é¡¹å¦‚æœæ‚¨åœ¨æ¸…å•æ–‡ä»¶AndroidManifest.xmlä¸­ï¼Œæœ‰é‚£ç§ä»¥åŒ…åå¼€å¤´å‘½åçš„é‚£ç§ã€‚å› ä¸ºå¦‚æœåŒ…åéƒ½æ”¹äº†ï¼Œæœ‰äº›ä¹Ÿéœ€è¦åŠ¨æ€çš„æ”¹å˜ã€‚å¯ä»¥ç”¨${applicationId}ä»£æ›¿ã€‚åœ¨æ‰“åŒ…çš„æ—¶å€™ï¼Œä¼šè‡ªåŠ¨æ›¿æ¢æˆå½“å‰åŒ…åã€‚\n\næ¯”å¦‚ï¼Œç±»ä¼¼ä¸‹é…ç½®ï¼š\n\n1234567891011121314151617181920212223&lt;permission    android:name=\"com.xxx.xx.permission.JPUSH_MESSAGE\"    android:protectionLevel=\"signature\" /&gt;&lt;uses-permission android:name=\"com.xxx.xx.permission.JPUSH_MESSAGE\" /&gt;&lt;receiver    android:name=\".push.MyJPushMessageReceiver\"    android:enabled=\"true\"    android:exported=\"false\" &gt;    &lt;intent-filter&gt;        &lt;action android:name=\"cn.jpush.android.intent.RECEIVE_MESSAGE\" /&gt;        &lt;category android:name=\"com.xxx.xx\" /&gt;    &lt;/intent-filter&gt;&lt;/receiver&gt;&lt;provider    android:name=\"android.support.v4.content.FileProvider\"    android:authorities=\"com.xxx.xx.provider\"    android:exported=\"false\"    tools:replace=\"android:authorities\"    android:grantUriPermissions=\"true\"&gt;    &lt;meta-data        android:name=\"android.support.FILE_PROVIDER_PATHS\"        android:resource=\"@xml/file_paths\" /&gt;&lt;/provider&gt;\n\nå¯æ”¹ä¸ºï¼š\n\n1234567891011121314151617181920212223&lt;permission    android:name=\"$&#123;applicationId&#125;.permission.JPUSH_MESSAGE\"    android:protectionLevel=\"signature\" /&gt;&lt;uses-permission android:name=\"$&#123;applicationId&#125;.permission.JPUSH_MESSAGE\" /&gt;&lt;receiver    android:name=\".push.MyJPushMessageReceiver\"    android:enabled=\"true\"    android:exported=\"false\" &gt;    &lt;intent-filter&gt;        &lt;action android:name=\"cn.jpush.android.intent.RECEIVE_MESSAGE\" /&gt;        &lt;category android:name=\"$&#123;applicationId&#125;\" /&gt;    &lt;/intent-filter&gt;&lt;/receiver&gt;&lt;provider    android:name=\"android.support.v4.content.FileProvider\"    android:authorities=\"$&#123;applicationId&#125;.provider\"    android:exported=\"false\"    tools:replace=\"android:authorities\"    android:grantUriPermissions=\"true\"&gt;    &lt;meta-data        android:name=\"android.support.FILE_PROVIDER_PATHS\"        android:resource=\"@xml/file_paths\" /&gt;&lt;/provider&gt;\n\nå½“ç„¶å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ä»£ç ä¸­æˆ‘ä»¬ä¹Ÿä¸èƒ½æŠŠåŒ…åå†™æ­»äº†ï¼Œå¯é€šè¿‡BuildConfigå¾—åˆ°å½“å‰åŒ…å\n\næˆ‘çš„å®Œæ•´é…ç½®ï¼Œä¾›å‚è€ƒ\næœ‰å…³éšç§ä¿¡æ¯çš„éƒ½ç”¨xxxæ›¿æ¢äº†\n\n\né¡¹ç›®æ ¹ç›®å½•çš„build.gradle\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758// Top-level build file where you can add configuration options common to all sub-projects/modules.buildscript &#123;    repositories &#123;        google()        jcenter()    &#125;    dependencies &#123;        classpath 'com.android.tools.build:gradle:3.0.0'        classpath \"io.github.prototypez:save-state:0.1.7\"        // NOTE: Do not place your application dependencies here; they belong        // in the individual module build.gradle files    &#125;&#125;allprojects &#123;    repositories &#123;        google()        jcenter()        maven &#123; url \"https://jitpack.io\" &#125;        maven &#123; url 'http://oss.jfrog.org/artifactory/oss-snapshot-local/' &#125;        flatDir &#123;            dirs 'libs'        &#125;    &#125;&#125;task clean(type: Delete) &#123;    delete rootProject.buildDir&#125;ext&#123;    minSdkVersion               = 16    targetSdkVersion            = 27    compileSdkVersion           = 27    buildToolsVersion           = '27.1.1'    supportLibraryVersion       = '27.1.1'    xmvpVersion                 = '1.2.2'    retrofit2Version            = '2.3.0'    okhttp3Version              = '3.8.1'    butterknifeVersion          = '8.6.0'    rx2Version                  = '2.0.2'    CircleProgressDialogVersion = '1.0.2'    smarttabVersion             = '1.6.1@aar'    adapterHelperVersion        = '2.9.41'    glideVersion                = '4.7.1'    roundedimageviewVersion     = '2.3.0'    eventbusVersion             = '3.0.0'    dispatcherVersion           = '2.4.0'    picture_libraryVersion      = 'v2.2.3'    statusbarutilVersion        = '1.5.1'    okhttpUtilsVersion          = '3.8.0'    constraintVersion           = '1.1.3'    flexboxVersion              = '1.0.0'&#125;\n\nappç›®å½•ä¸‹çš„build.gradle\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132133134135136137138139140141142143144145146147148149150151152153154155156157158159160161162163164165166167168169170171172173174175176177178179180181182183184185186187188189190191192193194195196197198199200201202203204205206207208209210211212213214215216217218219220221222223224225226227228229230231232233234235236237238239240241242243244245246247248249250251252253254255256257258259260261262263264265266267268269270271272273274275276277278279280281282283284285286287288289290291292apply plugin: 'com.android.application'apply plugin: 'save.state'static def releaseTime() &#123;    return new Date().format(\"yyyy-MM-dd-HH.mm\", TimeZone.getTimeZone(\"GMT+8\"))&#125;android &#123;    compileSdkVersion rootProject.compileSdkVersion//    buildToolsVersion rootProject.buildToolsVersion    defaultConfig &#123;        minSdkVersion rootProject.minSdkVersion        targetSdkVersion rootProject.targetSdkVersion        testInstrumentationRunner \"android.support.test.runner.AndroidJUnitRunner\"        multiDexEnabled true        // config the JSON processing library        javaCompileOptions &#123;            annotationProcessorOptions &#123;                arguments = [ serializer : \"gson\" ]            &#125;        &#125;        ndk &#123;            abiFilters \"armeabi-v7a\"        &#125;        renderscriptTargetApi 25        renderscriptSupportModeEnabled true    &#125;    signingConfigs &#123;        userquhuaRelease &#123;            storeFile file(\"../key/xxx.keystore\")            storePassword \"xxxxxx\"            keyAlias \"xxx\"            keyPassword \"xxxxxx\"        &#125;        quhuaRelease &#123;            storeFile file(\"../key/xxx.keystore\")            storePassword \"xxxxxxx\"            keyAlias \"xxx\"            keyPassword \"xxxxxxx\"        &#125;        cuntubaRelease &#123;            storeFile file(\"../key/xxx.keystore\")            storePassword \"xxxxxxx\"            keyAlias \"xxx\"            keyPassword \"xxxxxxx\"        &#125;        xemhRelease &#123;            storeFile file(\"../key/xxx.keystore\")            storePassword \"xxxxxxx\"            keyAlias \"xxx\"            keyPassword \"xxxxxxx\"        &#125;    &#125;    flavorDimensions \"default\"    productFlavors &#123;        userquhua &#123;            applicationId \"com.xxx.xx\"            versionCode 22            versionName \"1.7.5\"            signingConfig = signingConfigs.userquhuaRelease            String qq_id = '\"xxxxxx\"'            buildConfigField \"String\",           \"QQ_ID\", qq_id // qq appId            buildConfigField \"String\",         \"SINA_ID\", '\"xxxxxx\"' // æ–°æµªappId            buildConfigField \"String\",           \"WX_ID\", '\"xxxxxx\"' // å¾®ä¿¡ appId            buildConfigField \"String\",           \"UM_ID\", '\"xxxxxx\"' // å‹ç›Ÿ            buildConfigField \"String\",       \"WX_SECRET\", '\"xxxxxx\"' // å¾®ä¿¡ secret            buildConfigField \"String\",   \"SINA_REDIRECT\", '\"http://open.weibo.com/apps/xxxxxx/privilege/oauth\"' // æ–°æµª            buildConfigField \"String\",   \"ADHUB_INIT_ID\", '\"xxxxxx\"' // å¹¿å‘Šsdkåˆå§‹åŒ–id            buildConfigField \"String\", \"ADHUB_SPLASH_ID\", '\"xxxxxx\"' // å¼€å±å¹¿å‘Šid            buildConfigField \"String\", \"ADHUB_BANNER_ID\", '\"xxxxxx\"' // bannerå¹¿å‘Šid            buildConfigField \"String\",      \"SERVER_URL\", '\"http://xxx.xxx.com/\"'            buildConfigField \"String\",        \"LOGO_URL\", '\"http://file.xxx.com/img/xxx.png\"'            manifestPlaceholders = [                    qq_id: qq_id,                    JPUSH_PKGNAME : applicationId,                    JPUSH_APPKEY : \"xxxxxx\", //JPush ä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey.                    JPUSH_CHANNEL : \"developer-default\", //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯.            ]        &#125;        quhua &#123;            applicationId \"com.xxx.xx\"            versionCode 1            versionName \"1.0.0\"            signingConfig = signingConfigs.quhuaRelease            String qq_id = '\"xxxxxx\"'            buildConfigField \"String\",           \"QQ_ID\", qq_id            buildConfigField \"String\",         \"SINA_ID\", '\"xxxxxx\"'            buildConfigField \"String\",           \"WX_ID\", '\"xxxxxx\"'            buildConfigField \"String\",           \"UM_ID\", '\"xxxxxx\"'            buildConfigField \"String\",       \"WX_SECRET\", '\"xxxxxx\"'            buildConfigField \"String\",   \"SINA_REDIRECT\", '\"http://open.weibo.com/apps/xxxxxx/privilege/oauth\"'            buildConfigField \"String\",   \"ADHUB_INIT_ID\", '\"xxxxxx\"' // å¹¿å‘Šsdkåˆå§‹åŒ–id            buildConfigField \"String\", \"ADHUB_SPLASH_ID\", '\"xxxxxx\"' // å¼€å±å¹¿å‘Šid            buildConfigField \"String\", \"ADHUB_BANNER_ID\", '\"xxxxxx\"' // bannerå¹¿å‘Šid            buildConfigField \"String\",      \"SERVER_URL\", '\"http://xx.xxx.com/\"'            buildConfigField \"String\",        \"LOGO_URL\", '\"http://file.xxx.com/img/xxx.png\"'            manifestPlaceholders = [                    qq_id: qq_id,                    JPUSH_PKGNAME : applicationId,                    JPUSH_APPKEY : \"xxxxxx\", //JPush ä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey.                    JPUSH_CHANNEL : \"developer-default\", //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯.            ]        &#125;        cuntuba &#123;            applicationId \"com.xxx.xx\"            versionCode 1            versionName \"1.0.0\"            signingConfig = signingConfigs.cuntubaRelease            String qq_id = '\"xxxxxx\"'            buildConfigField \"String\",           \"QQ_ID\", qq_id            buildConfigField \"String\",         \"SINA_ID\", '\"xxxxxx\"'            buildConfigField \"String\",           \"WX_ID\", '\"xxxxxx\"'            buildConfigField \"String\",           \"UM_ID\", '\"xxxxxx\"'            buildConfigField \"String\",       \"WX_SECRET\", '\"xxxxxx\"'            buildConfigField \"String\",   \"SINA_REDIRECT\", '\"http://open.weibo.com/apps/xxxxxx/privilege/oauth\"'            buildConfigField \"String\",   \"ADHUB_INIT_ID\", '\"xxxxxx\"' // å¹¿å‘Šsdkåˆå§‹åŒ–id            buildConfigField \"String\", \"ADHUB_SPLASH_ID\", '\"xxxxxx\"' // å¼€å±å¹¿å‘Šid            buildConfigField \"String\", \"ADHUB_BANNER_ID\", '\"xxxxxx\"' // bannerå¹¿å‘Šid            buildConfigField \"String\",      \"SERVER_URL\", '\"http://xxx.xxxx.com/\"'            buildConfigField \"String\",        \"LOGO_URL\", '\"http://file.xxx.com/img/xxx.png\"'            manifestPlaceholders = [                    qq_id: qq_id,                    JPUSH_PKGNAME : applicationId,                    JPUSH_APPKEY : \"xxxxxx\", //JPush ä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey.                    JPUSH_CHANNEL : \"developer-default\", //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯.            ]        &#125;        xemh &#123;            applicationId \"com.xxx.xx\"            versionCode 1            versionName \"1.0.0\"            signingConfig = signingConfigs.xemhRelease            String qq_id = '\"xxxxxx\"'            buildConfigField \"String\",           \"QQ_ID\", qq_id            buildConfigField \"String\",         \"SINA_ID\", '\"xxxxxx\"'            buildConfigField \"String\",           \"WX_ID\", '\"xxxxxx\"'            buildConfigField \"String\",           \"UM_ID\", '\"xxxxxx\"'            buildConfigField \"String\",       \"WX_SECRET\", '\"xxxxxx\"'            buildConfigField \"String\",   \"SINA_REDIRECT\", '\"xxxxxx\"'            buildConfigField \"String\",   \"ADHUB_INIT_ID\", '\"xxxxxx\"' // å¹¿å‘Šsdkåˆå§‹åŒ–id            buildConfigField \"String\", \"ADHUB_SPLASH_ID\", '\"xxxxxx\"' // å¼€å±å¹¿å‘Šid            buildConfigField \"String\", \"ADHUB_BANNER_ID\", '\"xxxxxx\"' // bannerå¹¿å‘Šid            buildConfigField \"String\",      \"SERVER_URL\", '\"http://xx.xxx.com/\"'            buildConfigField \"String\",        \"LOGO_URL\", '\"http://file.xxxxxx.com/img/xxxxxx.png\"'            manifestPlaceholders = [                    qq_id: qq_id,                    JPUSH_PKGNAME : applicationId,                    JPUSH_APPKEY : \"xxxxxx\", //JPush ä¸Šæ³¨å†Œçš„åŒ…åå¯¹åº”çš„ Appkey.                    JPUSH_CHANNEL : \"developer-default\", //æš‚æ—¶å¡«å†™é»˜è®¤å€¼å³å¯.            ]        &#125;    &#125;    applicationVariants.all &#123;        variant -&gt;            variant.outputs.all &#123;                outputFileName = \"$&#123;variant.productFlavors[0].name&#125;-v$&#123;variant.productFlavors[0].versionName&#125;-$&#123;releaseTime()&#125;.apk\"            &#125;    &#125;    buildTypes &#123;        release &#123;            // ä¸æ˜¾ç¤ºLog            buildConfigField \"boolean\", \"LOG_DEBUG\", \"false\"            signingConfig null            minifyEnabled true            zipAlignEnabled true            // ç§»é™¤æ— ç”¨çš„resourceæ–‡ä»¶            shrinkResources true            proguardFiles getDefaultProguardFile('proguard-android.txt'), 'proguard-rules.pro'        &#125;        debug &#123;            // æ˜¾ç¤ºLog            buildConfigField \"boolean\", \"LOG_DEBUG\", \"true\"            signingConfig null            minifyEnabled false            zipAlignEnabled false            shrinkResources false        &#125;    &#125;    packagingOptions &#123;        exclude 'META-INF/DEPENDENCIES.txt'        exclude 'META-INF/NOTICE'        exclude 'META-INF/NOTICE.txt'        exclude 'META-INF/LICENSE'        exclude 'META-INF/LICENSE.txt'    &#125;    compileOptions &#123;        targetCompatibility JavaVersion.VERSION_1_8        sourceCompatibility JavaVersion.VERSION_1_8    &#125;    dexOptions &#123;        javaMaxHeapSize \"4g\" //æ­¤å¤„å¯æ ¹æ®ç”µè„‘æœ¬èº«é…ç½® æ•°å€¼è¶Šå¤§ å½“ç„¶è¶Šå¿«        preDexLibraries = false    &#125;&#125;repositories &#123;    flatDir &#123;        dirs 'libs', '../adpoymer/libs'    &#125;&#125;dependencies &#123;    implementation fileTree(include: ['*.jar'], dir: 'libs')    implementation \"com.android.support:appcompat-v7:$supportLibraryVersion\"    implementation \"com.android.support:recyclerview-v7:$supportLibraryVersion\"    implementation \"com.android.support:support-v4:$supportLibraryVersion\"    implementation \"com.android.support:design:$supportLibraryVersion\"    implementation \"com.android.support.constraint:constraint-layout:$constraintVersion\"    //æ·»åŠ retrofit2 çš„ä¾èµ– æ·»åŠ è¿™ä¸ªä¾èµ–å°±é»˜è®¤æ·»åŠ äº†okhttpä¾èµ–    compile \"com.squareup.retrofit2:retrofit:$retrofit2Version\"    compile \"com.squareup.retrofit2:converter-gson:$retrofit2Version\"    compile \"com.squareup.retrofit2:adapter-rxjava2:$retrofit2Version\"    compile \"com.squareup.okhttp3:logging-interceptor:$okhttp3Version\"    compile \"com.jakewharton:butterknife:$butterknifeVersion\"    annotationProcessor \"com.jakewharton:butterknife-compiler:$butterknifeVersion\"    compile \"io.reactivex.rxjava2:rxandroid:$rx2Version\"    compile \"com.github.xujiaji:xmvp:$xmvpVersion\"    implementation \"com.github.autume:CircleProgressDialog:$CircleProgressDialogVersion\"    compile \"com.ogaclejapan.smarttablayout:library:$smarttabVersion\"    compile \"com.github.CymChad:BaseRecyclerViewAdapterHelper:$adapterHelperVersion\"    compile \"com.github.bumptech.glide:glide:$glideVersion\"    annotationProcessor \"com.github.bumptech.glide:compiler:$glideVersion\"    compile \"com.makeramen:roundedimageview:$roundedimageviewVersion\"    compile \"org.greenrobot:eventbus:$eventbusVersion\"    annotationProcessor \"com.github.hotchemi:permissionsdispatcher-processor:$dispatcherVersion\"    compile \"com.jaeger.statusbarutil:library:$statusbarutilVersion\"    compile(\"com.github.hotchemi:permissionsdispatcher:$dispatcherVersion\") &#123;        exclude module: \"support-v13\"    &#125;    implementation \"com.github.LuckSiege.PictureSelector:picture_library:$picture_libraryVersion\"    implementation 'me.drakeet.library:crashwoodpecker:2.1.1'    implementation 'com.github.chenupt.android:springindicator:1.0.2@aar'    debugImplementation 'com.amitshekhar.android:debug-db:1.0.4'    implementation 'com.umeng.sdk:common:1.5.3'    implementation 'com.umeng.sdk:analytics:7.5.3'    implementation 'com.liulishuo.filedownloader:library:1.7.5'    implementation project(':banner')    implementation project(':xdialog')    implementation project(':shareutil')    implementation project(':update')    implementation project(':pay')//    implementation project(':adhub')    implementation project(':imagewatcher')    implementation files('libs/lite-orm-1.9.2.jar')    implementation 'jp.wasabeef:blurry:2.1.1'    implementation \"com.google.android:flexbox:$flexboxVersion\"    implementation 'cn.jiguang.sdk:jpush:3.1.6'  // æ­¤å¤„ä»¥JPush 3.1.6 ç‰ˆæœ¬ä¸ºä¾‹ã€‚    implementation 'cn.jiguang.sdk:jcore:1.2.5'  // æ­¤å¤„ä»¥JCore 1.2.5 ç‰ˆæœ¬ä¸ºä¾‹ã€‚    compile(name: 'sdk-release', ext: 'aar')    compile(name: 'open_ad_sdk', ext: 'aar')    compile(name: 'adpoymer-3.4.35', ext: 'aar')    implementation 'pl.droidsonroids.gif:android-gif-drawable:1.0.+'&#125;\n\n\nDemo åœ°å€https://github.com/xujiaji/OneForAllApk\nç»“æŸå°±è¿™æ ·å°±å¯ä»¥è§£æ”¾å¤§é‡åŠ³åŠ¨åŠ›å•¦ï¼æ¯æ¬¡é¡¹ç›®æ‰“åŒ…å„ç§è½¯ä»¶ï¼Œé€‰ä¸€ä¸‹å°±ojbkï¼Œå“ˆå“ˆå“ˆ~å¦‚æœæœ‰äº›é…ç½®åœ¨å…¶ä»–æ¸ é“æ²¡æœ‰çš„ï¼Œä¹Ÿå¯é€šè¿‡BuildConfigåœ¨javaä¸­åˆ¤æ–­å¦‚æœæ˜¯æŸæŸæ¸ é“é‚£ä¹ˆå±è”½ã€‚over\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/one-for-more/banner.png","plink":"https://blog.xujiaji.com/post/android-project-one-for-more/"},{"title":"XMVPï¼šä¸€ä¸ªé€šè¿‡æ³›å‹å®ç°çš„MVPæ¡†æ¶2å¹´çš„æ¼”åŒ–è·¯","date":"2018-09-21T10:22:15.000Z","author":"xujiaji","updated":"2019-04-08T06:57:05.292Z","content":"\nXMVPæ¡†æ¶æ˜¯æˆ‘çš„ç¬¬ä¸€ä¸ªæ¡†æ¶ï¼Œåˆšä»Androidèµ·æ­¥ç¬¬ä¸€æ¬¡äº†è§£MVPæ¨¡å¼æ—¶å†³å¿ƒå†™ä¸€ä¸ªè‡ªå·±çš„ä¸œè¥¿æ¡†æ¶ï¼Œåˆ°ç°åœ¨å·²è¿ç”¨åœ¨æˆ‘å†™çš„å¤šä¸ªé¡¹ç›®ä¸­ã€‚è™½ç„¶ä¸¤å¹´äº†ï¼Œä½†æ ¸å¿ƒçš„æ€è·¯æ²¡æœ‰æ”¹å˜ï¼Œåˆ°ç°åœ¨å˜æ¢ä¹Ÿä¸æ˜¯å¤ªå¤šï¼Œç²¾ç®€äº†ä¸€äº›ä»£ç ï¼Œæ·»åŠ äº†ä¸€äº›åŠŸèƒ½ã€‚\n\n\nèµ·æ­¥2016è¿™æ˜¯ä¸ªåˆšå‡ºç¤¾ä¼šæ‰¾å·¥ä½œç—›è‹¦çš„æ—¶æœŸï¼Œæˆ‘ä¸ªäººä¸å¤ªå–œæ¬¢ç”Ÿæ´»ä¸­éº»çƒ¦çš„äº‹æƒ…ã€‚å®‰é™æ˜¯æˆ‘çš„æœ¬æ€§ï¼Œäºæ˜¯æƒ³å†™ä¸ªå±äºè‡ªå·±çš„æ¡†æ¶ï¼Œä¸ºæœªæ¥åšäº›é“ºå«ã€‚äºæ˜¯ï¼Œä¾¿æœ‰äº†XMVPï¼Œåå­—â€œXâ€æ˜¯è‡­ä¸è¦è„¸çš„åŠ ä¸Šäº†è‡ªå·±åå­—çš„å¼€å¤´å­—æ¯ã€‚\nç›®æ ‡è¯¥æ¡†æ¶çš„ç›®æ ‡å¾ˆç®€å•ï¼Œä¸ºäº†çœæ‰Viewã€Modelã€Presenterå±‚ä¹‹é—´çš„ä¾èµ–å®ç°è¿‡ç¨‹ï¼Œé€šè¿‡ç®€å•çš„é…ç½®ï¼Œæ¡†æ¶è‡ªåŠ¨å®ç°ä¾èµ–å…³ç³»\nå®ç°çš„åŸç†ï¼šè·å–é…ç½®çš„æ³›å‹ç±»å‹ï¼Œé€šè¿‡åå°„å®ä¾‹åŒ–På±‚å’ŒMå±‚ã€‚\nä»£ç 1. å…³é”®èƒ½è®©æˆ‘å¼€å§‹åšè¿™ä¸ªæ¡†æ¶çš„æ ¸å¿ƒä»£ç å¦‚ä¸‹ï¼š\n\nä¼ å…¥å¯¹è±¡çš„Classå’Œéœ€è¦è¿‡æ»¤æ³›å‹å¾—çš„åŒ¹é…çš„å¯¹è±¡ï¼Œç„¶åéå†klassä¸­é…ç½®çš„æ³›å‹åˆ¤æ–­æ˜¯ä¸æ˜¯filterClassçš„å­ç±»ï¼Œå¦‚æœæ˜¯åˆ™æ‰¾åˆ°äº†é…ç½®çš„æ³›å‹ç±»å‹ã€‚\n\n1234567891011121314public static &lt;T&gt; Class&lt;T&gt; getGenericClass(Class&lt;?&gt; klass, Class&lt;?&gt; filterClass) &#123;    Type type = klass.getGenericSuperclass(); // è·å–çˆ¶ç±»Classç±»å‹ï¼Œå®ƒåŒ…å«äº†æ‰€é…ç½®çš„æ³›å‹ç±»å‹    if (type == null || !(type instanceof ParameterizedType)) return null; // åˆ¤æ–­æ˜¯å¦æ˜¯æ³›å‹ç±»å‹    ParameterizedType parameterizedType = (ParameterizedType) type;    Type[] types = parameterizedType.getActualTypeArguments(); // ç”±äºä¸€ä¸ªç±»å¯èƒ½ä¸æ­¢é…ç½®äº†ä¸€ä¸ªæ³›å‹ï¼Œè·å–è¯¥å¯¹è±¡æ‰€æœ‰æ³›å‹ç±»å‹    for (Type t : types) &#123;        Class&lt;T&gt; tClass = (Class&lt;T&gt;) t;        if (filterClass.isAssignableFrom(tClass)) &#123; // é€šè¿‡filterClassæ‰¾åˆ°éœ€è¦çš„ç›®æ ‡ç±»å‹            return tClass;        &#125;    &#125;    return null;&#125;\n2. ä½¿ç”¨ä¹Ÿéå¸¸ç®€å•ï¼Œç²¾ç®€ä»£ç å¦‚ä¸‹æ‰€ç¤ºï¼Œ4æ­¥é…ç½®å°±å®ç°äº†MVP\n\né¦–å…ˆå®šä¹‰å¥‘çº¦ï¼ˆContractï¼‰ï¼Œå®šä¹‰Viewã€Modelã€Presenterçš„æ¥å£ï¼Œå¹¶ä¸”éƒ½éœ€è¦ç»§æ‰¿è‡ªXContract\nåˆ›å»ºModelå®ç°ç±»\nåˆ›å»ºPresenterå®ç°ç±»ç»§æ‰¿XBasePresenterï¼Œæ³›å‹ä¸­å…³è”Viewæ¥å£å’ŒModelå®ç°ç±»\nåˆ›å»ºViewå®ç°ç±»ç»§æ‰¿XBaseActivityæˆ–å…¶å­ç±»ï¼Œæ³›å‹ä¸­å…³è”Presenterå®ç°ç±»\n\n12345678910111213141516171819// å¥‘çº¦public interface HomeContract &#123;    interface Presenter extends XContract.Presenter&#123;&#125;    interface View extends XContract.View&#123;&#125;    interface Model extends XContract.Model &#123;&#125;&#125;// Må±‚å®ç°public class HomeModel implements HomeContract.Model &#123;&#125;// På±‚å®ç°public class HomePresenter  extends XBasePresenter&lt;HomeContract.View, HomeModel&gt;  implements HomeContract.Presenter &#123;&#125;// Vå±‚å®ç°public class HomeActivity  extends XBaseActivity&lt;HomePresenter&gt;  implements HomeContract.View &#123;&#125;\n3. æœ€åˆXMVPæ¡†æ¶åšå‡ºæ—¶å†™çš„ä¸€ç¯‡æ–‡ç«  å°äº†ä¸€ä¸ªAndroid MVPæ¡†æ¶ï¼Œå°±å«XMVPå§ï¼\n\n\nå°±è¿™æ ·ï¼Œç¬¬ä¸€é˜¶æ®µå®£å‘Šå®Œæ¯•ï¼Œç„¶åå°±æ˜¯ä¼˜åŒ–å’Œä¿®å¤ä¸€äº›bugï¼Œå½“ç„¶ä¸Šé¢çš„getGenericClassè¿™ä¸ªæ–¹æ³•ä¹Ÿæ˜¯åæœŸä¼˜åŒ–è¿‡çš„ç»“æœã€‚\n\næƒ³å·æ‡’äº†å°±å¼€å‘äº†MVPManageræ’ä»¶ï¼Œå¿«é€Ÿç”ŸæˆXMVPä»£ç ä¹Ÿå°±æ˜¯XMVPæ¡†æ¶å¼€å‘å‡ºæ¥ä¹Ÿå°±1ä¸ªæœˆä¹‹å†…çš„äº‹æƒ…å§ï¼è¿™æ—¶æ„Ÿè§‰å†™å¥‘çº¦ï¼ˆContractï¼‰ï¼Œå†™XMVPå„ä¸ªå®ç°ç±»ï¼Œéƒ½æ˜¯é‡å¤çš„åŠ³åŠ¨åŠ›ï¼Œæ¯ä¸€ä¸ªæ–°çš„ç•Œé¢å°±å¾—å»åˆ›å»ºè¿™ä¹ˆäº›æ–‡ä»¶å¤ªè¿‡è¾›è‹¦ã€‚ç»“æœè™½ç„¶å˜å¾—æœ‰æ¡ç†æœ‰æ¨¡å—ï¼Œä½†æ˜¯å·¥ä½œé‡æœ‰äº›é‡å¤å’Œå¢åŠ ï¼Œæœ‰äº›æ—¶å€™é…ç½®æ³›å‹å¿˜äº†è¿˜éœ€è¦çœ‹ä¹‹å‰æ˜¯æ€ä¹ˆé…ç½®çš„ã€‚\nå½“æ—¶å…¶å®ä¹Ÿæœ‰åˆ›å»ºMVPæ–‡ä»¶çš„æ’ä»¶ä¹‹ç±»çš„ä¸œè¥¿ï¼Œä½†æ˜¯ä¸ç¬¦åˆXMVPçš„å®æƒ…ï¼Œæ³›å‹è¿˜æ˜¯å¾—è‡ªå·±åŠ¨æ‰‹ï¼Œäºæ˜¯å†³å¿ƒè‡ªå·±å†™ä¸€ä¸ªintellijæ’ä»¶ï¼Œå½“ç„¶åœ¨ASä¸­ä¹Ÿèƒ½ä½¿ç”¨ã€‚\nåˆ›å»ºMVPä»£ç æˆªå›¾ï¼Œè¿™æ˜¯æœ€æ–°çš„åˆ›å»ºä»£ç ç•Œé¢çš„æˆªå›¾\nåœ¨1.0çš„åŸºç¡€ä¸Šï¼Œå¢åŠ äº†å¯å°†åŒä¸€ä¸ªæ¨¡å—æ”¾ä¸€ä¸ªåŒ…ä¸­æˆ–å°†MVPåˆ†åœ¨å¯¹åº”çš„åŒ…ä¸­çš„é€‰é¡¹ï¼›å¢åŠ äº†å¯ä»¥ä¸æ˜¯XMVPæ¡†æ¶çš„æƒ…å†µä¸‹ä½¿ç”¨\n\n\nè¿™æ˜¯ä¸€å¼ åŠ¨æ€å›¾ï¼Œæ˜¯ä¸€å¼ æ—§ç‰ˆæœ¬çš„æ¼”ç¤ºå›¾ã€‚åªéœ€è¦å’Œä¸Šé¢çš„æˆªå›¾ç»“åˆæ¥çœ‹ä¸€ä¸‹å“¦\næœ€åè¿˜æœ‰ä¸ªé€†å‘å¢åŠ æˆ–åˆ é™¤XMVPå¥‘çº¦ä¸­å®šä¹‰æ–¹æ³•çš„åŠŸèƒ½\nä¼šåŒæ—¶æ›´æ–°å®ç°ç±»çš„æ–¹æ³•ï¼Œæœ¬äººæ˜¯å†™å‡ºè¿™ä¸ªåŠŸèƒ½ï¼Œä½†å‡ ä¹ä¸ç”¨çš„å•¦\n\n\nåˆšåˆšå¼€å‘å‡ºæ¥MVPManagerçš„æ—¶å€™ï¼Œæˆ‘ä¹Ÿå†™äº†ç¯‡æ–‡ç« ä»‹ç» è¿™ä¸ªASæ’ä»¶èƒ½å¸®ä½ å¿«é€Ÿç®¡ç†MVP\n\nå°±è¿™æ ·ï¼Œç¬¬äºŒé˜¶æ®µç»“æŸäº†ã€‚å…¶ä¸»è¦ç›®çš„å°±æ˜¯ä¸ºäº†è§£å†³MVPé‡å¤é€»è¾‘çš„ä»£ç é‡é—®é¢˜\n\nå®è·µä¸­çš„æ›´æ–°åœ¨ä¸æ–­çš„å®è·µè¿ç”¨ä¸­ä¹Ÿå‘ç°äº†å¾ˆå¤šæ²¡æœ‰è€ƒè™‘åˆ°æˆ–è€…å¿½ç•¥çš„é—®é¢˜ï¼Œå…¶ä¸­æœ€æ˜ åƒæ·±åˆ»çš„ä¸è¿‡äºæœ‰æ¬¡ä¸Šçº¿åº”ç”¨çš„æ—¶å€™ï¼Œæ··æ·†å±…ç„¶ä¼šå¯¼è‡´æ— æ³•åˆ›å»ºPresenterç†¬å¤œæ‰¾äº†å¾ˆä¹…ã€‚\nè¿˜æœ‰å°±æ˜¯å¿½ç•¥äº†Fragmentæœ‰appåŒ…å’Œv4åŒ…ä¸¤ä¸ªåœ°æ–¹ï¼Œæ¡†æ¶ä¸­åªå†™äº†ä¸€ä¸ªï¼Œè€ƒè™‘çš„éƒ½æ¯”è¾ƒç‰‡é¢ã€‚\nåªæœ‰åœ¨å®è·µä¸­æ‰èƒ½çœŸæ­£çš„è€ƒéªŒï¼Œä¸€ç›´ä»¥æ¥å¤§æ¦‚å°±æˆ‘å’Œå°‘æ•°çš„å°ä¼™ä¼´åœ¨ä½¿ç”¨ã€‚è™½ç„¶ç”¨çš„æ¯”è¾ƒå°‘ï¼Œä½†æ˜¯å†™å‡ºæ¥åå°±è¦å¯¹å®ƒè´Ÿè´£å˜›ï¼\nä½¿ç”¨ä¸­çš„ä¸€äº›ä¸ªäººæŠ€å·§1. å¾ˆå¤šæ—¶å€™ï¼ŒActivityå’ŒPresenterï¼Œæ›´æˆ–è€…Modeléƒ½æœ‰å…±ç”¨çš„åœ°æ–¹ï¼Œæ­¤æ—¶æˆ‘ä»¬éœ€è¦ä½œå‡ºæå–æŠ½è±¡ã€‚äºæ˜¯æˆ‘ä»¬å°±éœ€è¦ç»§æ‰¿XBaseActivityã€XBaseFragmentã€XBasePresenterå†åšä¸€å±‚æŠ½è±¡ï¼Œè¿™æ ·å¦‚æœä»¥åä¸æƒ³ç”¨XMVPæ¡†æ¶æœ‰æ›´å¥½çš„é€‰æ‹©ä¹Ÿæ›´å¥½æ›¿æ¢å“ˆã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n\nBaseActivity.java\n\n1234567public abstract class BaseActivity&lt;T extends XBasePresenter&gt; extends XBaseActivity&lt;T&gt; &#123;  @Override  public void onInitCircle() &#123;    super.onInitCircle();    ButterKnife.bind(this);  &#125;&#125;\n\nBasePresenter.java\n\n123456789101112public class BasePresenter&lt;T extends XContract.View, E extends XContract.Model&gt; extends XBasePresenter&lt;T, E&gt; &#123;    protected CompositeDisposable mCompositeDisposable;    @Override    public void end() &#123;        super.end();        if (mCompositeDisposable != null) &#123;            mCompositeDisposable.clear();            mCompositeDisposable = null;        &#125;    &#125;&#125;\nå‘ä¸Šé¢è¿™æ ·ï¼Œæˆ‘ä»¬é€šè¿‡ä¸€ä¸ªä¸­é—´å±‚ï¼Œå¤„ç†ä¸€äº›æˆ‘ä»¬éœ€è¦ç»Ÿä¸€è°ƒç”¨çš„æˆ–å¤„ç†çš„ä¸€äº›ä¸œè¥¿\n2. å¯¹äºPresenterå›è°ƒModelå¤„ç†åè¿”å›çš„æ•°æ®ç›‘å¬ï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸€ä¸ªé€šç”¨ç›‘å¬æ¥å£ï¼Œå¦‚ä¸‹ï¼š\n1234public interface GenericListener&lt;T&gt; &#123;    void success(T t);    void error(int code, String err);&#125;\n\nå¹¶ä¸”ï¼Œæˆ‘ä»¬å¯ä»¥å¯¹è¿™ä¸ªæ¥å£è¿›è¡Œå®ç°ï¼Œæˆ‘ä»¬å¯ä»¥ç»Ÿä¸€å¯¹é”™è¯¯ä¿¡æ¯åšäº›æç¤ºæˆ–å¤„ç†\n\n1234567891011public abstract class GenericListenerImp&lt;T&gt; implements GenericListener&lt;T&gt; &#123;  public GenericListenerImp(/*å¯ä»¥ä¼ å…¥è¿›æ¥base viewæˆ–base presenterï¼Œå¦‚æœæœ‰é”™è¯¯å¯ä»¥è°ƒç”¨å¯¹åº”æ–¹æ³•ç»Ÿä¸€å¤„ç†*/) &#123;  &#125;  @Override  public void error(int code, String err) &#123;    // å¯¹é”™è¯¯åšå‡ºç»Ÿä¸€å¤„ç†  &#125;&#125;\n3. æˆ‘ä»¬æœ€å¸¸ç”¨çš„å°±æ˜¯åˆ·æ–°åŠ è½½åˆ—è¡¨äº†ï¼Œå‡ ä¹æ‰€æœ‰appä¸­éƒ½éœ€è¦ï¼Œå¹¶ä¸”åœ¨åŒä¸€ä¸ªåº”ç”¨ä¸­çš„åŠ è½½é€»è¾‘éƒ½æ˜¯ä¸€æ ·çš„ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å°†å…¶æŠ½è±¡å‡ºæ¥ï¼Œä½¿ç”¨çš„æ—¶å€™ä¼šéå¸¸æ–¹ä¾¿ã€‚\n\né¦–å…ˆå®šä¹‰ä¸€ä¸ªåŸºç¡€åˆ·æ–°å¥‘çº¦ï¼Œæ¯ä¸€ä¸ªæœ‰åˆ·æ–°çš„viewçš„æ¥å£éƒ½ç›´æ¥ä»è¿™é‡Œç»§æ‰¿\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445public interface BaseRefreshContract &#123;    interface Presenter extends XContract.Presenter &#123;        /**         * è¯·æ±‚æ•°æ®         */        void requestLoadListData(int page);        /**         * è¯·æ±‚æ›´æ–°åˆ—è¡¨æ•°æ®         */        void requestUpdateListData();    &#125;    interface View &lt;X&gt; extends XContract.View &#123;        /**         * æ›´æ–°åˆ—è¡¨æˆåŠŸ         */        void updateListSuccess(List&lt;X&gt; datas, boolean isEnd);        /**         * æ›´æ–°å¤±è´¥         */        void updateListFail(String err);        /**         * åŠ è½½æ•°æ®æˆåŠŸ         */        void loadListDataSuccess(List&lt;X&gt; datas, int currentPage, boolean isEnd);        /**         * åŠ è½½æ•°æ®å¤±è´¥         * @param err         */        void loadListDataFail(String err);        /**         * æ•°æ®å·²ç»è¢«åŠ è½½å®Œ         */        void loadListDateOver();    &#125;&#125;\n\nç„¶åæŠ½è±¡Viewï¼Œè¿™é‡Œä»¥Activityä¸ºä¾‹ï¼ŒFragmentä¸€è‡´ã€‚æˆ‘ä½¿ç”¨äº†SwipeRefreshLayoutä½œä¸ºåˆ·æ–°ï¼ŒBaseRecyclerViewAdapterHelperå¤„ç†å¡«å……æ•°æ®å’ŒåŠ è½½æ•°æ®\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116public abstract class BaseRefreshActivity&lt;E ,X extends BaseQuickAdapter&lt;E, BaseViewHolder&gt;, T extends XBasePresenter&gt; extends BaseActivity&lt;T&gt; implements        BaseRefreshContract.View&lt;E&gt;,        BaseQuickAdapter.RequestLoadMoreListener,        SwipeRefreshLayout.OnRefreshListener &#123;    protected int currentPage;//å½“å‰çš„é¡µé¢    protected X mAdapter;    protected boolean isEnd;    protected SwipeRefreshLayout swipeLayout;    protected RecyclerView mRecyclerView;    @Override    public void onInitCircle() &#123;        super.onInitCircle();        mAdapter = getAdapter();        mRecyclerView = getRecyclerView();        swipeLayout = getSwipeLayout();        swipeLayout.setOnRefreshListener(this);        mAdapter.setOnLoadMoreListener(this, mRecyclerView);        mRecyclerView.setAdapter(mAdapter);    &#125;    protected abstract X getAdapter();    protected abstract SwipeRefreshLayout getSwipeLayout();    protected abstract RecyclerView getRecyclerView();    /**     * æ›´æ–°åˆ—è¡¨æˆåŠŸ     */    @Override    public void updateListSuccess(List&lt;E&gt; datas, boolean isEnd) &#123;        this.isEnd = isEnd;        currentPage = 1;        mAdapter.setNewData(datas);        swipeLayout.setRefreshing(false);        if (isEnd) &#123;            loadListDateOver();        &#125; else &#123;            mAdapter.setEnableLoadMore(true);            mAdapter.loadMoreComplete();        &#125;    &#125;    /**     * æ›´æ–°å¤±è´¥     */    @Override    public void updateListFail(String err) &#123;        swipeLayout.setRefreshing(false);        mAdapter.setEnableLoadMore(true);        ToastUtil.getInstance().showLongT(err);    &#125;    /**     * åŠ è½½æ•°æ®æˆåŠŸ     */    @Override    public void loadListDataSuccess(List&lt;E&gt; datas, int currentPage, boolean isEnd) &#123;        this.currentPage = currentPage;        this.isEnd = isEnd;        mAdapter.addData(datas);        swipeLayout.setEnabled(true);        mAdapter.loadMoreComplete();    &#125;    /**     * åŠ è½½æ•°æ®å¤±è´¥     *     * @param err     */    @Override    public void loadListDataFail(String err) &#123;        swipeLayout.setEnabled(true);        mAdapter.loadMoreFail();        ToastUtil.getInstance().showLongT(err);    &#125;    /**     * æ•°æ®å·²ç»è¢«åŠ è½½å®Œ     */    @Override    public void loadListDateOver() &#123;        mAdapter.loadMoreEnd();    &#125;    @Override    public void onRefresh() &#123;        if (!swipeLayout.isRefreshing())        &#123;            swipeLayout.setRefreshing(true);        &#125;        getPresenter().requestUpdateListData();        mAdapter.setEnableLoadMore(false);    &#125;    @Override    public void onLoadMoreRequested() &#123;        if (isEnd) &#123;            loadListDateOver();            return;        &#125;        swipeLayout.setEnabled(false);        getPresenter().requestLoadListData(++currentPage);    &#125;    protected BaseRefreshContract.Presenter getPresenter() &#123;        if (presenter instanceof BaseRefreshContract.Presenter) &#123;            return  (BaseRefreshContract.Presenter) presenter;        &#125; else &#123;            throw new RuntimeException(\"presenter please extends BaseRefreshContract.Presenter\");        &#125;    &#125;&#125;\n\nä½¿ç”¨ï¼šå®šä¹‰ä¸€ä¸ªåˆ—è¡¨é¡µé¢çš„å¥‘çº¦\n\n1234567891011public interface ArticleDetailContract &#123;    interface View extends BaseRefreshContract.View&lt;CircleMsgEntity.CommentBean&gt; &#123;    &#125;    interface Presenter extends BaseRefreshContract.Presenter &#123;    &#125;    interface Model extends XContract.Model &#123;      void catArticleDetails(int articleId, int page, CompositeDisposable cd, NetRequestListener&lt;Result&lt;CircleMsgEntity&gt;&gt; listener);    &#125;&#125;\n\nä½¿ç”¨ï¼šViewå®ç°å±‚ï¼Œç”±äºè¿™æ˜¯ä¸€ä¸ªå…¬å¸é¡¹ç›®ä¸­çš„ç±»ï¼Œçœç•¥çš„æ‰€æœ‰çš„æ— å…³ä»£ç CircleMsgEntity.CommentBean æ˜¯ä¸€ä¸ªAdapter(ArticleCommentAdapter)å¡«å……çš„å®ä½“ç±»ArticleCommentAdapter æ˜¯ä¸€ä¸ªç»§æ‰¿BaseRecyclerViewAdapterHelperæ¡†æ¶ä¸­çš„BaseQuickAdapterçš„ç±»ï¼Œå¹¶ä¸”è¯¥ç±»æ˜¯è¿™æ ·çš„ï¼špublic class ArticleCommentAdapter extends BaseQuickAdapter&lt;CircleMsgEntity.CommentBean, BaseViewHolder&gt; å¿…é¡»ä¿è¯Activityç¬¬ä¸€ä¸ªæ³›å‹å’ŒAdapterçš„ç¬¬ä¸€ä¸ªæ³›å‹ç±»å‹ä¸€è‡´\n\n1234567891011121314151617181920212223242526272829303132333435public class ArticleDetailActivity extends BaseRefreshActivity&lt;CircleMsgEntity.CommentBean, ArticleCommentAdapter, ArticleDetailPresenter&gt; implements ArticleDetailContract.View &#123;    @BindView(R.id.recycler)    RecyclerView recycler;    @BindView(R.id.refresh)    SwipeRefreshLayout refresh;    @Override    public void onInitCircle() &#123;        super.onInitCircle();        onRefresh();    &#125;    @Override    public int layoutId() &#123;        return R.layout.activity_article_detail;    &#125;    @Override    protected ArticleCommentAdapter getAdapter() &#123;        return new ArticleCommentAdapter(ArticleCommentAdapter.TYPE_NORMAL);    &#125;    @Override    protected SwipeRefreshLayout getSwipeLayout() &#123;        refresh.setColorSchemeResources(R.color.yellow);        return refresh;    &#125;    @Override    protected RecyclerView getRecyclerView() &#123;        recycler.setLayoutManager(new LinearLayoutManager(this));        return recycler;    &#125;&#125;\n\nä½¿ç”¨ï¼š Presenterå®ç°å±‚\n\n123456789101112131415161718192021222324252627282930313233343536373839404142public class ArticleDetailPresenter extends BasePresenter&lt;ArticleDetailContract.View,ArticleDetailModel&gt; implements ArticleDetailContract.Presenter &#123;    @Override    public void start() &#123;        super.start();        mCompositeDisposable = new CompositeDisposable();    &#125;    @Override    public void requestLoadListData(int page) &#123;        model.catArticleDetails(view.getArticleId(), page, mCompositeDisposable, new NetRequestListener&lt;Result&lt;CircleMsgEntity&gt;&gt;() &#123;            @Override            public void success(Result&lt;CircleMsgEntity&gt; circleMsgEntityResult) &#123;                ResultListBean&lt;List&lt;CircleMsgEntity.CommentBean&gt;&gt; resultListBean = circleMsgEntityResult.getData().getCommentList();                view.loadListDataSuccess(resultListBean.getList(), resultListBean.getPage(), resultListBean.getPage() &gt;= resultListBean.getPagecount());            &#125;            @Override            public void error(String err) &#123;                view.loadListDataFail(err);            &#125;        &#125;);    &#125;    @Override    public void requestUpdateListData() &#123;        model.catArticleDetails(view.getArticleId(), 1, mCompositeDisposable, new NetRequestListener&lt;Result&lt;CircleMsgEntity&gt;&gt;() &#123;            @Override            public void success(Result&lt;CircleMsgEntity&gt; circleMsgEntityResult) &#123;                ResultListBean&lt;List&lt;CircleMsgEntity.CommentBean&gt;&gt; resultListBean = circleMsgEntityResult.getData().getCommentList();                view.updateListSuccess(resultListBean.getList(), resultListBean.getPage() &gt;= resultListBean.getPagecount());                view.displayArticleDetail(circleMsgEntityResult.getData());            &#125;            @Override            public void error(String err) &#123;                view.updateListFail(err);            &#125;        &#125;);    &#125;&#125;\n\nModelå±‚ï¼Œå»è¯·æ±‚åˆ—è¡¨æ•°æ®\n\n1234567public class ArticleDetailModel implements ArticleDetailContract.Model &#123;    @Override    public void catArticleDetails(int articleId, int page, CompositeDisposable cd, NetRequestListener&lt;Result&lt;CircleMsgEntity&gt;&gt; listener) &#123;        Observer&lt;Result&lt;CircleMsgEntity&gt;&gt; observer = ModelHelper.getObserver(cd, listener, true); // å¯¹rxjavaè¿”å›çš„æ•°æ®è¿›è¡Œç»Ÿä¸€å¤„ç†        Http.getInstance().getArticleDetails(articleId, page, observer);    &#125;&#125;\nè¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥ä¸æ–­çš„å¤ç”¨BaseRefreshActivityã€ArticleDetailContractæ¥è®©åˆ·æ–°åŠ è½½ç»Ÿä¸€ï¼Œå½“ç„¶åœ¨æ‚¨å®é™…çš„ä½¿ç”¨è¿‡ç¨‹ä¸­è‚¯å®šè¿˜éœ€è¦è°ƒæ•´ã€‚è¿™é‡Œåªç»™æˆ‘äº†æˆ‘è‡ªå·±çš„ä¸€äº›æ€è·¯å’Œå®ç°æ–¹å¼ã€‚\n\nå¦‚æœæˆ‘ä»¬éœ€è¦å…¶ä»–çš„æŠ½è±¡æ—¶ï¼Œåªéœ€è¦æ³¨æ„åƒåˆ·æ–°ä¸€æ ·å°†æ³›å‹ç»§æ‰¿å…³ç³»æ ‡å‡†ä¸Šå°±å¯ä»¥å•¦ã€‚å¦‚æœModelä¹Ÿå¯ä»¥æŠ½å–å‡ºæ¥ï¼Œå¤ç”¨æ—¶åªéœ€è¦ç»§æ‰¿æŠ½è±¡å‡ºæ¥çš„Modelã€‚\n\nç›®å‰ç›®å‰XMVPæ¡†æ¶å·²æ›´æ–°åˆ°1.2.2ï¼ŒåºŸå¼ƒäº†ä¸€äº›ä»¥å‰çš„æ–¹æ³•ï¼ˆå½“ç„¶ç°åœ¨è¿˜èƒ½ç”¨ï¼‰ã€‚æ·»åŠ äº†æ›´å¤šViewå±‚çš„è¾…åŠ©æ–¹æ³•ï¼Œä¸ºäº†å·ä¸ªæ‡’ï¼Œå°±ç›´æ¥å±•ç¤ºæ–°å¢çš„æ–¹æ³•ä»£ç å•¦ï¼\n\nåŸºæœ¬å‘¨æœŸ\n\n1234567891011121314151617181920212223242526272829303132333435363738/** * author: xujiaji * created on: 2018/9/4 10:57 * description: å®šä¹‰Viewç›¸å…³å‘¨æœŸ &lt;br /&gt; Define View related Cycle */public interface XViewCycle &#123;    /**     * åœ¨ super &#123;@link android.app.Activity#onCreate(Bundle)&#125;ä¹‹å‰è¢«è°ƒç”¨              &lt;br /&gt;  will be called before super class &#123;@link android.app.Activity#onCreate(Bundle)&#125; called     */    void onBeforeCreateCircle();    /**     * åœ¨ super &#123;@link android.app.Activity#onCreate(Bundle)&#125;ä¹‹å‰è¢«è°ƒç”¨ï¼Œå¹¶ä¸”æœ‰Bundle &lt;br /&gt;  will be called before super class &#123;@link android.app.Activity#onCreate(Bundle)&#125; called     * @param savedInstanceState è¯¥å‚æ•°ä¸å¯èƒ½ä¸ºnull                                  &lt;br /&gt; this parameter cannot be null     */    void onBundleHandle(@NonNull Bundle savedInstanceState);    /**     * è·å–å¸ƒå±€çš„id                                &lt;br /&gt; get layout id     * åœ¨ &#123;@link #onBeforeCreateCircle &#125;ä¹‹åè¢«è°ƒç”¨ &lt;br /&gt; will be called after &#123;@link #onBeforeCreateCircle &#125; called     * @return xmlå¸ƒå±€id                         &lt;br /&gt; xml layout id     */    int layoutId();    /**     *  åœ¨è¿™é‡Œé¢è¿›è¡Œåˆå§‹åŒ–                    &lt;br /&gt; initialize here     *  åœ¨ &#123;@link #layoutId()&#125; ä¹‹åè¢«è°ƒç”¨   &lt;br /&gt; will be called after &#123;@link #layoutId()&#125; called     */    void onInitCircle();    /**     * è¿™é‡Œé¢å†™ç›‘å¬äº‹ä»¶                       &lt;br /&gt; write listens event here     * åœ¨ &#123;@link #onInitCircle()&#125; ä¹‹åè¢«è°ƒç”¨ &lt;br /&gt; will be called after &#123;@link #onInitCircle()&#125; called     */    void onListenerCircle();&#125;\n\nActiviyä¸­\n\n1234567891011/** * author: xujiaji * created on: 2018/9/11 15:05 * description: å®šä¹‰Activity Viewç›¸å…³å‘¨æœŸ &lt;br /&gt; Define Activity View related Cycle */public interface XActivityCycle extends XViewCycle &#123;    /**     * å¤„ç†ä¸Šä¸ªé¡µé¢ä¼ é€’è¿‡æ¥çš„æ•°æ® &lt;br /&gt; Handle the data passed from the previous page     */    void onIntentHandle(@NonNull Intent intent);&#125;\n\nFragmentä¸­\n\n12345678910111213141516171819202122232425262728293031323334353637383940/** * author: xujiaji * created on: 2018/9/4 10:57 * description: å®šä¹‰Fragment Viewç›¸å…³å‘¨æœŸ &lt;br /&gt; Define Fragment View related Cycle */public interface XFragViewCycle extends XViewCycle &#123;    /**     * å¤„ç†&#123;@link Fragment#getArguments()&#125; çš„å€¼ï¼Œå¦‚æœæœ‰æ‰ä¼šè°ƒç”¨  &lt;br /&gt; Handle the value of &#123;@link Fragment#getArguments()&#125; , if it is there, it will be called     * @param bundle     */    void onArgumentsHandle(@NonNull Bundle bundle);    void onVisible();    void onInvisible();    void onLazyLoad();    /**     * å¿½ç•¥&#123;@link #isFirstLoad() &#125;çš„å€¼ï¼Œå¼ºåˆ¶åˆ·æ–°æ•°æ®ï¼Œä½†ä»è¦æ»¡è¶³ &#123;@link #isFragmentVisible()&#125; &amp;&amp; &#123;@link #isPrepared()&#125; &lt;br /&gt;     * Ignore the value of &#123;@link #isFirstLoad() &#125; to force refresh data, but still satisfy &#123;@link #isFragmentVisible()&#125; &amp;&amp; &#123;@link #isPrepared()&#125;     */    void setForceLoad(boolean forceLoad);    boolean isForceLoad();    boolean isPrepared();    boolean isFirstLoad();    boolean isFragmentVisible();    /**     * æ˜¯å¦æ˜¯åœ¨ViewPagerä¸­ï¼Œé»˜è®¤ä¸ºtrue     * whether in ViewPager, default is true     * @return     */    boolean isInViewPager();&#125;\nå¯ä»¥çœ‹åˆ°Fragmentä¸­å®šä¹‰çš„æ–¹æ³•æ˜¯æ¯”è¾ƒå¤šçš„ï¼Œå› ä¸ºç”±äºæ‡’åŠ è½½æ¯”è¾ƒå¸¸ç”¨ï¼Œæ–°å¢äº†æ‡’åŠ è½½ã€‚æˆ‘ä»¬å¦‚æœéœ€è¦åŠ è½½æ•°æ®ï¼Œå¯ç›´æ¥åœ¨onLazyLoad()æ–¹æ³•ä¸­è¿›è¡Œã€‚\n\néœ€è¦æ³¨æ„ï¼šå¦‚æœFragmentä¸æ˜¯å’ŒViewPagerç»“åˆï¼Œéœ€è¦å°†isInViewPagerè¿”å›falseï¼Œé»˜è®¤è¿”å›çš„trueã€‚å¦‚æœä¸è¿™æ ·ï¼Œå¯èƒ½ä¼šå¯¼è‡´é€šè¿‡FragmentMangeræäº¤çš„Fragmentæ— æ³•è°ƒç”¨åˆ°onLazyLoadæ–¹æ³•ã€‚\n\næœ€åé€šè¿‡å†™è¿™ä¸ªæ¡†æ¶å­¦åˆ°äº†æ€è€ƒå¾ˆå¤šä¸œè¥¿ï¼Œå¹¶ä¸”åæœŸä¹Ÿä¼šç»§ç»­æ›´æ–°ï¼Œæˆ‘è‡ªå·±å†™é¡¹ç›®ä¸­ä¹Ÿåœ¨ä½¿ç”¨ã€‚å¯èƒ½æœ‰äº›åœ°æ–¹è€ƒè™‘çš„ä¸å……è¶³ï¼Œè°¢è°¢å¤§å®¶ä¹Ÿå¯ä»¥æå»ºè®®ã€‚å½“ç„¶è¿™åªæ˜¯MVPçš„ä¸€ç§å®ç°æ€è·¯ï¼Œå…¶ä»–çš„è¿˜æ˜¯æœ‰å¾ˆå¤šçš„ï¼Œè¿™é‡Œå¤§å®¶ä¹Ÿè®¸éƒ½æœ‰ä¸€å®šäº†è§£å“ˆã€‚\nXMVPåœ°å€ï¼šhttps://github.com/xujiaji/XMVP\næ¬¢è¿å¤§å®¶Starã€Forkã€PR (ã€ƒâ€™â–½â€™ã€ƒ)\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/xmvp/banner.png","plink":"https://blog.xujiaji.com/post/xmvp-framework/"},{"title":"iOS Objective-C Learn Note","date":"2018-09-05T10:11:24.000Z","author":"xujiaji","updated":"2018-11-02T07:20:12.000Z","content":"æºä»£ç æ–‡ä»¶æ‰©å±•åå¯¹æ¯”\n\n\n\nå¤´æ–‡ä»¶\nå®ç°æ–‡ä»¶\n\n\n\n\ncè¯­è¨€\n.h\n.c\n\n\nc++è¯­è¨€\n.h\n.cpp\n\n\nocè¯­è¨€\n.h\n.m\n\n\noc&amp;c++\n.h\n.mm\n\n\n\nç±»çš„å®šä¹‰\nå®šä¹‰ä¸€ä¸ªSimpleClassç±»\n\n123@interface SimpleClass: NSObject@end\nç±»çš„å±æ€§ç”³æ˜\né€šè¿‡@property\n\n123456789101112@property NSString *firstName;@property NSString *lastName;//æŒ‡é’ˆç±»å‹ï¼Œæ˜¯ä¸€ä¸ªå¯¹è±¡@property NSNumber *yearOfBirth;//åŸºç¡€ç±»å‹ï¼Œæ˜¯ä¸€ä¸ªå€¼ç±»å‹@property int yearOfBirth;//ä¸€ä¸ªåªè¯»çš„å±æ€§@property (readonly) NSString *firstName;\nå‡å·æ–¹æ³•å’ŒåŠ å·æ–¹æ³•ï¼ˆæœ¬è´¨å°±æ˜¯ä¸€ä¸ªå‡½æ•°ï¼‰\nå‡å·æ–¹æ³•ï¼ˆæ™®é€šæ–¹æ³•åˆç§°å¯¹è±¡æ–¹æ³•ï¼‰\nåŠ å·æ–¹æ³•ï¼ˆç±»æ–¹æ³•ï¼Œåˆç§°é™æ€æ–¹æ³•ï¼‰\n\nå®Œæ•´çš„ä¾‹å­\næ¥å£XYZPerson.h\n\n123@interface XYZPerson: NSObject-(void)sayHello;@end\n\nå®ç°XYZPerson.m\n\n1234567#import \"XYZPerson.h\"@implementation XYZPerson-(void)sayHello &#123;  // åŠ äº†@ç¬¦å·ï¼Œè¡¨ç¤ºæ˜¯OCç±»å‹çš„å­—ç¬¦ä¸²ã€‚ä¸åŠ è¡¨ç¤ºæ˜¯çº¯Cè¯­è¨€çš„å­—ç¬¦æ•°ç»„  NSLog(@\"Hello, World!\");&#125;@end\nç®€å•çš„ç¨‹åº12345678#import &lt;Foundation/Foundation.h&gt;int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        // insert code here...        NSLog(@\"Hello, World!\");    &#125;    return 0;&#125;\nåŸºæœ¬æ•°æ®ç±»å‹\n\n\nç±»å‹\nè¿›åˆ¶ä½\nä¾‹å­\n\n\n\n\nint\n32ä½\nint a = 0;\n\n\nfloat\n32ä½\nfloat f = 1.0;\n\n\ndouble\n64ä½\ndouble num;\n\n\nchar\n8ä½\nchar c = â€˜Aâ€™;\n\n\n\nå…¶ä»–ç±»å‹\n\n\n\nNSString\n@â€hello worldâ€\n\n\nâ€œhello worldâ€\nCè¯­è¨€å­—ç¬¦ä¸²ç±»å‹\n\n\n\né™å®šè¯\n\n\né™å®šè¯\nä¾‹å­\næè¿°\n\n\n\n\nlong\nlong a;\n//å®Œæ•´å†™æ³•ä¸ºï¼šlong int a;å…¶å®ç°åœ¨intå·²ç»32ä½äº†å°±ç›¸å½“äºint a;\n\n\nlong long\nlong long int a;\n\n\n\nshort\nshort int a; short a;\n// 16ä½æ•´å‹\n\n\nunsigned\nunsigned int a;\n// æ— ç¬¦å·\n\n\nsigned\nsigned int a;\n// æœ‰ç¬¦å·\n\n\n\nç®—æœ¯è¡¨è¾¾å¼ä¸è¿ç®—ç¬¦\n\n\nåç§°\nè¡¨ç¤º\n\n\n\n\nèµ‹å€¼\n=\n\n\nä¸€å…ƒè¿ç®—ç¬¦\n++ --\n\n\näºŒå…ƒè¿ç®—ç¬¦\n+ - * / %\n\n\nä¸‰ç›®è¿ç®—ç¬¦\n2 &gt; 3 ? YES : NO\n\n\n\nifè¯­å¥ï¼ˆé0å°±æ˜¯çœŸï¼‰\n\n\n\nå€¼\n\n\n\n\nçœŸ\nYES æ‰€æœ‰é0çš„å€¼\n\n\nå‡\nNO 0\n\n\n\n\nç®€å•ä¾‹å­\n\n1234567891011121314#import &lt;Foundation/Foundation.h&gt;int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        int a = 1;        int b = 2;        if (a &gt; b) &#123;            NSLog(@\"è¿™å¥è¯æ˜¯çœŸçš„\");        &#125; else &#123;            NSLog(@\"è¿™å¥è¯æ˜¯å‡çš„ %hhd\", NO);        &#125;    &#125;    return 0;&#125;\ngoto è·³è½¬è¯­å¥ï¼Œè·³è½¬çš„å‰é¢å®šä¹‰çš„æ ‡ç­¾å¤„123456789101112131415161718192021222324252627282930#import &lt;Foundation/Foundation.h&gt;int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        int i = 0;    // å®šä¹‰æ ‡ç­¾a    a:        i ++;        NSLog(@\"içš„å€¼ä¸º%d\", i);//        if(i &lt; 5) goto a;        if (i &lt; 5) &#123;            goto a; // è·³è½¬åˆ°æ ‡ç­¾a        &#125; else &#123;            goto b; // è·³è½¬åˆ°æ ‡ç­¾b        &#125;        NSLog(@\"============\"); // ç”±äºä¸Šé¢ç›´æ¥è·³è½¬åˆ°äº†bæ ‡ç­¾ï¼Œå› æ­¤è¯¥è¯­å¥å¾—ä¸åˆ°æ‰§è¡Œ    b:&#123;        NSLog(@\"è·³åˆ°bäº†\");    &#125;    &#125;    return 0;&#125;// è¾“å‡ºï¼š// 2018-09-05 22:23:53.800654+0800 les1[971:104767] içš„å€¼ä¸º1// 2018-09-05 22:23:53.800827+0800 les1[971:104767] içš„å€¼ä¸º2// 2018-09-05 22:23:53.800858+0800 les1[971:104767] içš„å€¼ä¸º3// 2018-09-05 22:23:53.800876+0800 les1[971:104767] içš„å€¼ä¸º4// 2018-09-05 22:23:53.800889+0800 les1[971:104767] içš„å€¼ä¸º5// 2018-09-05 22:23:53.800902+0800 les1[971:104767] è·³åˆ°bäº†\nwhile å¾ªç¯è¯­å¥1234567891011        int i = 0;        while (i &lt; 5) &#123;            i++;            NSLog(@\"Hello world! i = %d\", i);        &#125;// è¾“å‡º// Hello world! i = 1// Hello world! i = 2// Hello world! i = 3// Hello world! i = 4// Hello world! i = 5\ndo while å¾ªç¯ï¼Œè‡³å°‘æ‰§è¡Œä¸€æ¬¡123456do &#123;    NSLog(@\"hello!\");&#125; while (0)// è¾“å‡ºï¼š// hello!\nfor å¾ªç¯12345678910for (int i = 0; i &lt; 5; i++) &#123;    NSLog(@\"i = %d\", i);&#125;// è¾“å‡º// i = 1// i = 2// i = 3// i = 4// i = 5\nå¾ªç¯æ§åˆ¶breakã€continue\nbreakï¼š ç»ˆæ­¢å¾ªç¯\ncontinue: è·³è¿‡å½“å‰å¾ªç¯\n\nswitchåˆ†æ”¯è¯­å¥123456789101112131415161718int i = 2;switch (i) &#123;    case 0:        NSLog(@\"i = 0\");        break;    case 1:        NSLog(@\"i = 1\");        break;    case 2:        NSLog(@\"i = 2\");        break;    case 3:        NSLog(@\"i = 3\");        break;    default:        NSLog(@\"NO\");        break;&#125;\nå‡½æ•°çš„åŸºæœ¬å†™æ³•12345678910111213141516171819202122#import &lt;Foundation/Foundation.h&gt;/* * æ±‚é¢ç§¯çš„å‡½æ•° * ä¼ å…¥å€¼ï¼Œè®¡ç®—å¹¶è¿”å›é¢ç§¯å€¼ */double area(double a, double b) &#123;    return a * b;&#125;// æ— å‚æ— è¿”å›çš„å‡½æ•°void show() &#123;    NSLog(@\"this is a test!\");&#125;int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        NSLog(@\"value = %f\", area(5.0, 3.0));        show();    &#125;    return 0;&#125;\nmainå‡½æ•°ä¸­çš„é»˜è®¤å‚æ•°123456789int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        NSLog(@\"argc = %d\", argc);        for (int i = 0; i &lt; argc; i++) &#123;            NSLog(@\"%s\", argv[i]);        &#125;    &#125;    return 0;&#125;\n\nç»ˆç«¯è¿è¡Œ\n\n1234567891011121314$ ls -ltotal 56-rwxr-xr-x@ 1 username  staff  27984  9  5 23:21 les1$ ./les12018-09-05 23:28:27.313 les1[1369:176584] argc = 12018-09-05 23:28:27.313 les1[1369:176584] ./les1$ ./les1 -a -b -c2018-09-05 23:28:39.782 les1[1370:176617] argc = 42018-09-05 23:28:39.782 les1[1370:176617] ./les12018-09-05 23:28:39.782 les1[1370:176617] -a2018-09-05 23:28:39.782 les1[1370:176617] -b2018-09-05 23:28:39.782 les1[1370:176617] -c\nåˆ›å»ºç±»\nå¤´æ–‡ä»¶People.h\n\n12345#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject@end\n\nå®ç°æ–‡ä»¶People.m\n\n12345#import \"People.h\"@implementation People@end\nå®ä¾‹åŒ–å¯¹è±¡\nå¯¼å…¥ç±»çš„å¤´æ–‡ä»¶\n[]ä¸­å†™å‡½æ•°çš„è°ƒç”¨\nalloc å‡½æ•°ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´\ninit å‡½æ•°è¿›è¡Œåˆå§‹åŒ–æ“ä½œ\n\n12345678910111213141516#import &lt;Foundation/Foundation.h&gt;#import \"People.h\" // å¯¼å…¥ç±»å¤´æ–‡ä»¶int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        // å®ä¾‹åŒ–å¯¹è±¡        // [] å‡½æ•°çš„è°ƒç”¨        // [ç±»å æ–¹æ³•å]        // [å¯¹è±¡å æ–¹æ³•å]        // alloc - ä¸ºå¯¹è±¡åˆ†é…å†…å­˜ç©ºé—´        // init - è¿›è¡Œåˆå§‹åŒ–æ“ä½œ        People * p1 = [[People alloc] init];        People * p2 = [[People alloc] init];      &#125;    return 0;&#125;\nå±æ€§å’Œæˆå‘˜å˜é‡\nç±»å†…ä½¿ç”¨æˆå‘˜å˜é‡ã€ç±»å¤–ä½¿ç”¨å±æ€§\nå®šä¹‰æˆå‘˜å˜é‡ï¼Œæ­¤æ—¶å¤–éƒ¨æ— æ³•è®¿é—®ã€‚å¦‚æœè¦è®©å¤–éƒ¨å¯è®¿é—®éœ€è¦åŠ ä¸Šï¼ˆä¸å»ºè®®ï¼‰ï¼š@public\nå±æ€§æ˜¯ä¸ºäº†è®©ç±»å¤–å¯ä»¥è®¿é—®æˆå‘˜å˜é‡\nå±æ€§å°±æ˜¯æˆå‘˜å˜é‡çš„å¤–éƒ¨æ¥å£\nå¯å°†å±æ€§æ‹†å¼€ï¼Œå†™æˆgetå’Œsetä¸¤éƒ¨åˆ†\n\n\nPeople.h\n\n123456789101112131415161718// ç±»å†…ä½¿ç”¨æˆå‘˜å˜é‡ã€ç±»å¤–ä½¿ç”¨å±æ€§#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject&#123;    // å®šä¹‰æˆå‘˜å˜é‡ï¼Œæ­¤æ—¶å¤–éƒ¨æ— æ³•è®¿é—®ã€‚å¦‚æœè¦è®©å¤–éƒ¨å¯è®¿é—®éœ€è¦åŠ ä¸Šï¼š@public    // @public    // NSString * _peopleName; // å¦‚æœå®šä¹‰äº†è¯¥æˆå‘˜å˜é‡çš„å±æ€§ï¼Œé‚£ä¹ˆå¯ä»¥ä¸å†™ã€‚ç¼–è¯‘å™¨ä¼šä¸ºæˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆä¸€ä¸ªå«_peopleNameçš„æˆå‘˜å˜é‡    int _peopleAge;&#125;// å±æ€§æ˜¯ä¸ºäº†è®©ç±»å¤–å¯ä»¥è®¿é—®æˆå‘˜å˜é‡// å±æ€§å°±æ˜¯æˆå‘˜å˜é‡çš„å¤–éƒ¨æ¥å£@property(nonatomic, strong)NSString * peopleName;// å°†å±æ€§æ‹†å¼€- (void) setAge:(int) age;- (int) getAge;@end\n\nPeople.m\n\n123456789101112131415161718192021222324#import \"People.h\"&#123;   int _peopleSex; // ä¹Ÿå¯ä»¥å°†æˆå‘˜å˜é‡å®šä¹‰åœ¨mæ–‡ä»¶ä¸­ï¼Œæ²¡ä»€ä¹ˆåŒºåˆ«&#125;@implementation People- (instancetype)init&#123;    self = [super init];    if (self) &#123;        _peopleName = @\"å¼ ä¸‰\";    &#125;    return self;&#125;- (void) setAge:(int) age&#123;    _peopleAge = age;&#125;- (int) getAge&#123;    return _peopleAge;&#125;@end\n\nmain.m\n\n123456789101112#import &lt;Foundation/Foundation.h&gt;#import \"People.h\"int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        People * p1 = [[People alloc] init];        p1.peopleName = @\"æå››\"; // é€šè¿‡å±æ€§è®¾ç½®åå­—        NSLog(@\"p1 name %@\", [p1 peopleName]); // é€šè¿‡å±æ€§è·å–åå­—        [p1 setAge:23]; // é€šè¿‡å‡½æ•°è®¾ç½®å¹´é¾„        NSLog(@\"p1 age %d\", [p1 getAge]); // é€šè¿‡å‡½æ•°è·å–å¹´é¾„    &#125;    return 0;&#125;\nå‡½æ•°\nè°ƒç”¨æ–¹æ³•æ˜¯ç”¨ä¸­æ‹¬å·\n-ã€+ æ–¹æ³•çš„ç±»å‹ï¼ˆå‡å·ä»£è¡¨å¯¹è±¡æ–¹æ³•ï¼ŒåŠ å·ä»£è¡¨ç±»æ–¹æ³•ï¼‰\nåŠ å·æ–¹æ³•å’Œå‡å·æ–¹æ³•ä¹‹é—´çš„ç›¸äº’è°ƒç”¨é€»è¾‘å’Œjavaä¸€æ ·\næ–¹æ³•åï¼šå»æ‰æ–¹æ³•ç±»å‹å’Œå‚æ•°ç±»å‹å°±æ˜¯æ–¹æ³•å\n(int) è¿”å›å€¼ç±»å‹int\n:(int) x     ä»£è¡¨æ–¹æ³•æœ‰å‚æ•°ï¼Œå‚æ•°ç±»å‹intï¼Œå‚æ•°åx\n\n\nPeople.h\n\n12345678910111213141516171819#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject/* ç”³æ˜æ–¹æ³• -ã€+ æ–¹æ³•çš„ç±»å‹ï¼ˆå‡å·ä»£è¡¨å¯¹è±¡æ–¹æ³•ï¼ŒåŠ å·ä»£è¡¨ç±»æ–¹æ³•ï¼‰ åŠ å·æ–¹æ³•å’Œå‡å·æ–¹æ³•ä¹‹é—´çš„ç›¸äº’è°ƒç”¨é€»è¾‘å’Œjavaä¸€æ ·(int) è¿”å›å€¼ç±»å‹ :(int) x     ä»£è¡¨æ–¹æ³•æœ‰å‚æ•°ï¼Œå‚æ•°ç±»å‹intï¼Œå‚æ•°åx æ–¹æ³•åï¼šå»æ‰æ–¹æ³•ç±»å‹å’Œå‚æ•°ç±»å‹å°±æ˜¯æ–¹æ³•å */- (int) report;+ (void) report1;- (int) showWithA:(int) a;- (int) showWithA:(int) a andB:(int) b;@end\n\nPeople.m\n\n1234567891011121314151617181920212223242526272829#import \"People.h\"@implementation People&#123;    NSString *_name;&#125;static NSString *_name1;- (int)report&#123;    _name = @\"abc\";    NSLog(@\"-å·æ–¹æ³•:report\");    return 22;&#125;+ (void)report1&#123;//     _name = @\"abc\"; ç¼–è¯‘é”™è¯¯ï¼Œ+å·æ–¹æ³•ç›¸å½“äºjavaä¸­çš„é™æ€æ–¹æ³•    _name1 = @\"abc\";//é™æ€æ–¹æ³•å¯è°ƒç”¨é™æ€å˜é‡    NSLog(@\"+å·æ–¹æ³•ï¼šreport1\");&#125;- (int) showWithA:(int) a&#123;    return a;&#125;- (int) showWithA:(int) a andB:(int) b&#123;    return a + b;&#125;@end\n\nmain.m\n\n12345678910111213141516#import &lt;Foundation/Foundation.h&gt;#import \"People.h\"int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        // [] è°ƒç”¨æ–¹æ³•        People *p1 = [[People alloc] init];//        NSLog(@\"return value %d\", [p1 report]);//        [People report1];        int a1 = [p1 showWithA:10];        NSLog(@\"a1 = %d\", a1);        int a2 = [p1 showWithA:10 andB:20];        NSLog(@\"a2 = %d\", a2);    &#125;    return 0;&#125;\nåˆå§‹åŒ–å‡½æ•°\nPeople.h\n\n1234567891011#import &lt;Foundation/Foundation.h&gt;@interface People : NSObject// åˆå§‹åŒ–æ–¹æ³•//- (id) init;//ä»»æ„ç±»å‹//è™½ç„¶ä¸Šé¢çš„ä¹Ÿå¯ä»¥ä½†æ˜¯æ¨èä¸‹é¢- (instancetype) init; // å½“å‰ç±»å‹ï¼Œå½“å‰æ˜¯Peopleç±»å‹// è‡ªå®šä¹‰åˆå§‹åŒ–æ–¹æ³•- (instancetype) initPeople:(NSString *) name age:(int) age;@end\n\nPeople.m\n\n1234567891011121314151617181920212223242526272829#import \"People.h\"@implementation People&#123;    int _age;    int _name;&#125;// é‡å†™åˆå§‹åŒ–æ–¹æ³•- (instancetype)init&#123;    self = [super init];    if (self) &#123;        _age = 23;        NSLog(@\"age = %d\", _age);    &#125;    return self;&#125;- (instancetype)initPeople:(NSString *)name age:(int)age&#123;    self = [super init];    if (self) &#123;        _age = age;        _name = name;        NSLog(@\"age = %d, name = %@\", _age, name);    &#125;    return self;&#125;@end\n\nmain.m\n\n12345678910#import &lt;Foundation/Foundation.h&gt;#import \"People.h\"int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        People *p1 = [[People alloc] init];        People * p2 = [[People alloc] initPeople:@\"xu\" age:24];    &#125;    return 0;&#125;\n\nè¾“å‡º\n\n12age = 23age = 24, name = xu\nå°è£…\nè®¿é—®ä¿®é¥°ç¬¦\n\n\n\n\nå£°æ˜\nä½œç”¨\n\n\n\n\n@public\nå…¬æœ‰çš„ï¼Œ åœ¨ç±»ä¸­å’Œç±»å¤–éƒ½å¯ä»¥ä½¿ç”¨å¹¶ä¸”å¯ä»¥è¢«ç»§æ‰¿\n\n\n@private\nç§æœ‰çš„ï¼Œåœ¨ç±»ä¸­å¯ä»¥ä½¿ç”¨ï¼Œç±»å¤–æ— æ³•è°ƒç”¨ï¼Œä¸å¯ä»¥è¢«ç»§æ‰¿\n\n\n@protected\nå—ä¿æŠ¤çš„ï¼ˆé»˜è®¤ï¼‰ï¼Œåœ¨ç±»ä¸­å¯ä»¥ä½¿ç”¨ï¼Œç±»å¤–æ— æ³•è°ƒç”¨ï¼Œä½†æ˜¯å¯ä»¥è¢«ç»§æ‰¿\n\n\n@package\næ¡†æ¶æƒé™ï¼Œåœ¨æ¡†æ¶å†…ç›¸å½“äºå—ä¿æŠ¤ï¼Œåœ¨æ¡†æ¶å¤–ç›¸å½“äºç§æœ‰\n\n\n\n\næ–¹æ³•æ˜¯æ²¡æœ‰è®¿é—®ä¿®é¥°ç¬¦çš„åŒcè¯­è¨€ä¸€æ ·ï¼Œå¦‚æœä¸æƒ³è®©å¤–éƒ¨è®¿é—®ï¼Œå»æ‰.hä¸­çš„æ–¹æ³•å®šä¹‰å°±å¯ä»¥äº†ã€‚\n\n\nMyClass.h\n\n12345678910#import &lt;Foundation/Foundation.h&gt;@interface MyClass : NSObject&#123;    @public    int _classInt;&#125;@property(nonatomic, strong) NSString * className;-(void) report;@end\n\nMyClass.m\n\n123456789#import \"MyClass.h\"@implementation MyClass- (void)report&#123;    NSLog(@\"class name = %@\", _className);    NSLog(@\"class name = %d\", _classInt);&#125;@end\n\nmain.m\n\n12345678910111213#import &lt;Foundation/Foundation.h&gt;#import \"MyClass.h\"int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        MyClass *c = [[MyClass alloc] init];        c.className = @\"My Class\";        // ä½¿ç”¨æŒ‡å‘æ¥è°ƒç”¨ç±»ä¸­çš„å…¬æœ‰æˆå‘˜å˜é‡        c-&gt;_classInt = 22;        [c report];    &#125;ÃŸ    return 0;&#125;\nç»§æ‰¿\ninterface æ—¶å€™ å†’å· ä»£è¡¨ç»§æ‰¿\n\n\nçˆ¶ç±»\n\n123456789101112131415161718#import &lt;Foundation/Foundation.h&gt;@interface MyClass : NSObject&#123;    int _claseInt;&#125;@property(nonatomic, strong) NSString * name;- (void) report;@end#import \"MyClass.h\"@implementation MyClass- (void)report&#123;    _claseInt = 23;    NSLog(@\"name = %@, value = %d\", _name, _claseInt);&#125;@end\n\nå­ç±»\n\n123456789101112131415#import \"MyClass.h\"// interface æ—¶å€™ å†’å· ä»£è¡¨ç»§æ‰¿@interface MySubClass : MyClass-(void) show;@end#import \"MySubClass.h\"@implementation MySubClass- (void)show&#123;    _claseInt = 100;    [self report];&#125;@end\n\nmain.m\n\n12345678910111213141516#import &lt;Foundation/Foundation.h&gt;#import \"MyClass.h\"#import \"MySubClass.h\"int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        MyClass *c = [[MyClass alloc] init];        c.name = @\"xu\";        [c report];        MySubClass *sc = [[MySubClass alloc] init];        sc.name = @\"xu\";//        [sc report];        [sc show];    &#125;    return 0;&#125;\n\nè¾“å‡º\n\n12name = xu, value = 23name = xu, value = 23\nå¤šæ€\nçˆ¶ç±»Printer.h  Printer.m\n\n12345678910111213#import &lt;Foundation/Foundation.h&gt;@interface Printer : NSObject- (void) print;@end#import \"Printer.h\"@implementation Printer- (void)print&#123;    NSLog(@\"æˆ‘æ˜¯ä¸€ä¸ªæ‰“å°æœº\");&#125;@end\n\nå­ç±»ColorPrinter.h  ColorPrinter.m\n\n12345678910111213#import \"Printer.h\"@interface ColorPrinter : Printer@end#import \"ColorPrinter.h\"@implementation ColorPrinter- (void)print&#123;    [super print]; // å­ç±»ä¸­è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•    NSLog(@\"æˆ‘æ˜¯ä¸€ä¸ªå½©è‰²æ‰“å°æœº\");&#125;@end\n\nmain.m\n\n1234567891011121314#import &lt;Foundation/Foundation.h&gt;#import \"ColorPrinter.h\"int main(int argc, const char * argv[]) &#123;    @autoreleasepool &#123;        ColorPrinter *cp = [[ColorPrinter alloc] init];        [cp print];        // çˆ¶ç±»å¯ä»¥å¼•ç”¨å­ç±»å‹        Printer * p = [[ColorPrinter alloc] init];        [p print];    &#125;    return 0;&#125;\n\nè¾“å‡º\n\n1234æˆ‘æ˜¯ä¸€ä¸ªæ‰“å°æœºæˆ‘æ˜¯ä¸€ä¸ªå½©è‰²æ‰“å°æœºæˆ‘æ˜¯ä¸€ä¸ªæ‰“å°æœºæˆ‘æ˜¯ä¸€ä¸ªå½©è‰²æ‰“å°æœº\n","plink":"https://blog.xujiaji.com/post/iOS-Objective-C-Learn/"},{"title":"Git Commit Standard","date":"2018-09-05T02:21:44.000Z","author":"xujiaji","updated":"2019-04-08T06:55:24.990Z","content":"è®°å½•ä¸€ä¸‹Gitçš„æäº¤è§„èŒƒï¼Œæ–¹ä¾¿ä»¥åæŸ¥é˜…\n\næäº¤å‘½ä»¤\ngit commit -m &quot;æäº¤ä¿®æ”¹ä¿¡æ¯&quot;ï¼Œè¿™æ ·è¿™åªèƒ½æœ‰ä¸€è¡Œä¿¡æ¯\ngit commitï¼Œä¼šè¿›å…¥viæ–‡æœ¬ç¼–è¾‘å™¨ï¼Œå¯å†™å¤šè¡Œã€‚\n\næäº¤ä¿¡æ¯çš„æ ¼å¼\næ¯æ¬¡æäº¤ä¿¡æ¯éƒ½åŒ…æ‹¬ä¸‰ä¸ªéƒ¨åˆ†ï¼šHeaderã€Bodyå’ŒFooterã€‚å…¶ä¸­ï¼ŒHeader æ˜¯å¿…éœ€çš„ï¼ŒBody å’Œ Footer å¯ä»¥çœç•¥ã€‚\n\n12345&lt;type&gt;(&lt;scope&gt;): &lt;subject&gt;// ç©ºä¸€è¡Œ&lt;body&gt;// ç©ºä¸€è¡Œ&lt;footer&gt;\n\næ–‡å­—æè¿°\n\n123456789# æ ‡é¢˜è¡Œï¼š50ä¸ªå­—ç¬¦ä»¥å†…ï¼Œæè¿°ä¸»è¦å˜æ›´å†…å®¹## ä¸»ä½“å†…å®¹ï¼šæ›´è¯¦ç»†çš„è¯´æ˜æ–‡æœ¬ï¼Œå»ºè®®72ä¸ªå­—ç¬¦ä»¥å†…ã€‚ éœ€è¦æè¿°çš„ä¿¡æ¯åŒ…æ‹¬:## * ä¸ºä»€ä¹ˆè¿™ä¸ªå˜æ›´æ˜¯å¿…é¡»çš„? å®ƒå¯èƒ½æ˜¯ç”¨æ¥ä¿®å¤ä¸€ä¸ªbugï¼Œå¢åŠ ä¸€ä¸ªfeatureï¼Œæå‡æ€§èƒ½ã€å¯é æ€§ã€ç¨³å®šæ€§ç­‰ç­‰# * ä»–å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜? å…·ä½“æè¿°è§£å†³é—®é¢˜çš„æ­¥éª¤# * æ˜¯å¦å­˜åœ¨å‰¯ä½œç”¨ã€é£é™©?## å°¾éƒ¨ï¼šå¦‚æœéœ€è¦çš„åŒ–å¯ä»¥æ·»åŠ ä¸€ä¸ªé“¾æ¥åˆ°issueåœ°å€æˆ–è€…å…¶å®ƒæ–‡æ¡£ï¼Œæˆ–è€…å…³é—­æŸä¸ªissueã€‚\n&lt;type&gt;\n\n\nValue\nDescription\n\n\n\n\nfeat\nfeatureæ–°åŠŸèƒ½\n\n\nfix\nä¿®å¤bug\n\n\ndoc\nä»…ä»…ä¿®æ”¹äº†æ–‡æ¡£ï¼Œæ¯”å¦‚README, CHANGELOG, CONTRIBUTEç­‰ç­‰\n\n\nstyle\nä»£ç æ ¼å¼æ”¹å˜ï¼Œä¸æ”¹å˜ä»£ç é€»è¾‘\n\n\nrefactor\nä»£ç é‡æ„ï¼Œæ²¡æœ‰åŠ æ–°åŠŸèƒ½æˆ–è€…ä¿®å¤bug\n\n\nperf\nä¼˜åŒ–ç›¸å…³ï¼Œæ¯”å¦‚æå‡æ€§èƒ½ã€ä½“éªŒ\n\n\ntest\næµ‹è¯•ç”¨ä¾‹ï¼ŒåŒ…æ‹¬å•å…ƒæµ‹è¯•ã€é›†æˆæµ‹è¯•ç­‰\n\n\nchore\næ”¹å˜æ„å»ºæµç¨‹ã€æˆ–è€…å¢åŠ ä¾èµ–åº“ã€å·¥å…·ç­‰\n\n\nrevert\nå›æ»šåˆ°ä¸Šä¸€ä¸ªç‰ˆæœ¬\n\n\n\n&lt;scope&gt;\n\n\nValue\nDescription\n\n\n\n\nall\nè¡¨ç¤ºå½±å“é¢å¤§ ï¼Œå¦‚ä¿®æ”¹äº†ç½‘ç»œæ¡†æ¶  ä¼šå¯¹çœŸä¸ªç¨‹åºäº§ç”Ÿå½±å“\n\n\nloation\nè¡¨ç¤ºå½±å“å°ï¼ŒæŸä¸ªå°å°çš„åŠŸèƒ½\n\n\nmodule\nè¡¨ç¤ºä¼šå½±å“æŸä¸ªæ¨¡å— å¦‚ç™»å½•æ¨¡å—ã€é¦–é¡µæ¨¡å— ã€ç”¨æˆ·ç®¡ç†æ¨¡å—ç­‰ç­‰\n\n\n\n&lt;subject&gt;\nsubjectæ˜¯ commit ç›®çš„çš„ç®€çŸ­æè¿°ï¼Œä¸è¶…è¿‡50ä¸ªå­—ç¬¦ã€‚\nä»¥åŠ¨è¯å¼€å¤´ï¼Œç¬¬ä¸€ä¸ªå­—æ¯å°å†™ï¼Œä½¿ç”¨ç¬¬ä¸€äººç§°ç°åœ¨æ—¶ï¼Œæ¯”å¦‚changeï¼Œè€Œä¸æ˜¯changedæˆ–changesç¬¬ä¸€ä¸ªå­—æ¯å°å†™\nç»“å°¾ä¸åŠ å¥å·â€.â€\n\n&lt;body&gt;å¯¹æœ¬æ¬¡ commit çš„è¯¦ç»†æè¿°ï¼Œå¯ä»¥åˆ†æˆå¤šè¡Œã€‚\n&lt;footer&gt;\nå¹¶è”Issueï¼Œæœ¬æ¬¡æäº¤å¦‚æœå’Œæ‘¸ä¸ªissueæœ‰å…³ç³»åˆ™éœ€è¦å†™ä¸Šè¿™ä¸ªï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\n1Issue #1, #2, #3\n\nå…³é—­ Issueï¼Œå¦‚æœå½“å‰æäº¤ä¿¡æ¯è§£å†³äº†æŸä¸ªissueï¼Œé‚£ä¹ˆå¯ä»¥åœ¨ Footer éƒ¨åˆ†å…³é—­è¿™ä¸ª issueï¼Œå…³é—­çš„æ ¼å¼å¦‚ä¸‹ï¼š\n1Close #1, #2, #3\n\n\nå®Œæ•´ä¾‹å­12345678910feat(all): add loginadd login in project- qq login- weixin login- sina loginIssue #1, #2Close #1, #2\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/git/git_commit.jpg","plink":"https://blog.xujiaji.com/post/Git-Commit-Standard/"},{"title":"iOSç”¨UISegmentedControlè®¾è®¡ä¸€ä¸ªé¡¶éƒ¨åˆ†é¡µå¯¼èˆª-Swiftï¼ˆç¿»è¯‘æ–‡ï¼‰","date":"2018-07-23T06:36:32.000Z","author":"xujiaji","updated":"2019-04-08T06:55:47.295Z","content":"\nåŸæ–‡ï¼šã€ŠDesigning a Button Bar-Style UISegmentedControl in Swiftã€‹\n\n\næˆ‘æ­£åœ¨åšä¸€ä¸ªé¡¹ç›®ï¼Œé¡¹ç›®é‡Œé¢æˆ‘æƒ³ç”¨UISegmentedControlåšä¸€ä¸ªç®€æ´çš„â€œåº•éƒ¨æ¡å½¢æ ·å¼â€çš„è®¾è®¡ã€‚å®ƒæ²¡æœ‰è¾¹æ¡†ï¼Œæ‰€é€‰ä¸‹æ–¹æœ‰ä¸€ä¸ªå°é•¿æ¡ï¼Œå½“ä½ é€‰æ‹©ä¸€ä¸ªå…ƒç´ åä»–ä¼šç›¸åº”çš„ç§»åŠ¨è¿‡å»ã€‚æˆ‘æ‰¾åˆ°å‡ ä¸ªéå¸¸å¥½çš„ç¬¬ä¸‰æ–¹åº“æ¥å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œä½†æ˜¯æˆ‘åœ¨è¿™äº›ç±»åº“ä¸Šé‡åˆ°äº†ä¸€äº›éº»çƒ¦ï¼Œäºæ˜¯æˆ‘å°è¯•è‡ªå·±åšã€‚æˆ‘ä»¥è‡ªåŠ¨å¸ƒå±€çº¦æŸï¼Œä»¥swiftä»£ç æ–¹å¼æ„å»ºè§†å›¾ï¼Œå¹¶ä¸ºäº†ç®€å•èµ·è§ï¼Œå°†æ‰€æœ‰ä¸»é¢˜å†…è”å®Œæˆã€‚\nå‡†å¤‡å¼€å§‹æˆ‘ä»¬åœ¨Swift playgroundä¸­åšè¿™äº›äº‹æƒ…ï¼Œå› æ­¤è®©æˆ‘ä»¬ä»åŸºæœ¬çš„ä¸œè¥¿å¼€å§‹ï¼Œåˆ›å»ºä¸€ä¸ªæ–°çš„UIViewå¹¶ä¸”æ·»åŠ ä¸€ä¸ªå¸¦æœ‰3ä¸ªç‰‡æ®µçš„UISegmentedControlï¼Œå¦å¤–éœ€è¦æ³¨æ„ï¼Œæˆ‘æ„å»ºçº¦æŸçš„æ–¹å¼æ˜¯å‡è®¾æ‰€æœ‰ç‰‡æ®µé•¿åº¦æƒ³ç­‰çš„æƒ…å†µã€‚å¦‚æœä¸æ˜¯çš„è¯ï¼Œä¼šå¯¼è‡´åº•éƒ¨é•¿æ¡åœ¨ç›¸åº”çš„ä½ç½®ä¸Šå˜å¾—å¤ªå®½æˆ–ä¸å¤Ÿå®½ã€‚\n1234567891011121314151617181920212223242526272829import UIKitimport PlaygroundSupport// å®¹å™¨Viewlet view = UIView(frame: CGRect(x: 0, y: 0, width: 400, height: 100))view.backgroundColor = .whitelet segmentedControl = UISegmentedControl()// æ·»åŠ ç‰‡æ®µsegmentedControl.insertSegment(withTitle: \"One\", at: 0, animated: true)segmentedControl.insertSegment(withTitle: \"Two\", at: 1, animated: true)segmentedControl.insertSegment(withTitle: \"Three\", at: 2, animated: true)// è®©ç¬¬ä¸€ä¸ªç‰‡æ®µé»˜è®¤é€‰ä¸­segmentedControl.selectedSegmentIndex = 0// è®¾ç½®ä¸ºfalseï¼Œæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€çº¦æŸsegmentedControl.translatesAutoresizingMaskIntoConstraints = false// æ·»åŠ UISegmentedControlåˆ°å®¹å™¨Viewview.addSubview(segmentedControl)// çº¦æŸåˆ°å®¹å™¨çš„é¡¶éƒ¨segmentedControl.topAnchor.constraint(equalTo: view.topAnchor).isActive = true// é™åˆ¶ä¸ºå®¹å™¨viewçš„å®½åº¦segmentedControl.widthAnchor.constraint(equalTo: view.widthAnchor).isActive = true// è®¾ç½®é«˜åº¦segmentedControl.heightAnchor.constraint(equalToConstant: 40).isActive = truePlaygroundPage.current.liveView = view\næ­¤æ—¶å®æ—¶çª—å£å·²ç»ä¸ºæˆ‘ä»¬å±•ç¤ºäº†åŸºæœ¬çš„UISegmentedControlã€‚ä¸è¦å¿˜è®°å°†isActiveå±æ€§é™„åŠ åˆ°æ¯ä¸ªè‡ªåŠ¨å¸ƒå±€çº¦æŸï¼Œå…¶å€¼ä¸ºtrueï¼Œå¦åˆ™ä»–ä»¬å°†ä¸èµ·ä½œç”¨ã€‚\né¢œè‰²ã€å­—ä½“å’Œè¾¹æ¡†Oh Myï¼æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬åˆ é™¤æ‰backgroundColorå’ŒtintColorï¼Œåˆ é™¤åè¾¹æ¡†å’Œå·²é€‰æ‹©çš„ç‰‡æ®µèƒŒæ™¯é¢œè‰²å°†ä¼šæ¶ˆå¤±ã€‚123// å°†ä¸‹é¢çš„ä»£ç æ·»åŠ åˆ° selectedSegmentIndexä¸‹é¢segmentedControl.backgroundColor = .clearsegmentedControl.tintColor = .clear\nå¦‚æœä½ çœ‹å®æ—¶çª—å£ï¼Œæˆ‘ä»¬åˆ é™¤äº†tintColoråï¼ŒUISegmentedControlå·²ç»æ¶ˆå¤±ï¼Œç°åœ¨æ²¡æœ‰é¢œè‰²äº†ã€‚è¦æ¢å¤æ ‡ç­¾ï¼Œè®©æˆ‘ä»¬æ›´æ”¹æ‰€é€‰ç‰‡æ®µå’Œæœªé€‰ç‰‡æ®µçš„å­—ä½“ã€æ–‡æœ¬é¢œè‰²å’Œå¤§å°ã€‚12345678910// æ·»åŠ è¿™äº›ä»£ç åˆ° segmentedControl.tintColor = .clear åsegmentedControl.setTitleTextAttributes([    NSAttributedStringKey.font: UIFont(name: \"DINCondensed-Bold\", size: 18)!,    NSAttributedStringKey.foregroundColor: UIColor.lightGray    ], for: .normal)segmentedControl.setTitleTextAttributes([    NSAttributedStringKey.font : UIFont(name: \"DINCondensed-Bold\", size: 18)!,    NSAttributedStringKey.foregroundColor: UIColor.orange    ], for: .selected)\nåˆ°è¿™å„¿å·®ä¸å¤šäº†ï¼ç°åœ¨æˆ‘ä»¬å¿…é¡»åœ¨æ‰€é€‰æ®µä¸‹æ–¹æ·»åŠ ä¸€ä¸ªé•¿æ¡æ ã€‚\nä¸ºé€‰å®šç‰‡æ®µåº•éƒ¨æ·»åŠ é•¿æ¡è¿™ä¸ªé•¿æ¡åªæ˜¯ä¸€ä¸ªç®€å•çš„UIViewï¼Œç„¶åå°†å…¶backgroundColorä¸å…¶æ‰€é€‰ç‰‡æ®µå­—ä½“çš„é¢œè‰²ç›¸åŒ¹é…ã€‚æˆ‘ä»¬å°†é€‰æ‹©çš„ç‰‡æ®µå­—ä½“é¢œè‰²å’Œé•¿æ¡éƒ½è®¾ç½®ä¸ºæ©™è‰²ã€‚å¹¶ä¸”æˆ‘ä»¬è¦ä¸ºé•¿æ¡è®¾ç½®translatesAutoresizingMaskIntoConstraintsä¸ºfalseã€‚1234let buttonBar = UIView()// è®¾ç½®ä¸ºfalseï¼Œæˆ‘ä»¬æ‰èƒ½ä½¿ç”¨è‡ªåŠ¨å¸ƒå±€çº¦æŸbuttonBar.translatesAutoresizingMaskIntoConstraints = falsebuttonBar.backgroundColor = UIColor.orange\næ¥ä¸‹æ¥ï¼Œå°†buttonBarä½œä¸ºå­Viewæ·»åŠ åˆ°å®¹å™¨viewä¸­12// æ·»åŠ åˆ° view.addSubview(segmentedControl)ä¹‹åview.addSubview(buttonBar)\næœ€ç»ˆï¼Œæˆ‘ä»¬éœ€è¦ç»™å®ƒä¸ªå®½åº¦ã€é«˜åº¦å’Œä½ç½®ï¼Œåœ¨segmentedControlä¹‹åæ·»åŠ è¿™äº›çº¦æŸ12345678// çº¦æŸå®ƒçš„é¡¶éƒ¨ä½ç½®åœ¨ç‰‡æ®µçš„åº•éƒ¨ä½ç½®buttonBar.topAnchor.constraint(equalTo: segmentedControl.bottomAnchor).isActive = true// è®¾ç½®é•¿æ¡çš„é«˜åº¦buttonBar.heightAnchor.constraint(equalToConstant: 5).isActive = true// çº¦æŸå®ƒçš„å·¦ä¾§å’Œç‰‡æ®µçš„å·¦ä¾§é‡åˆbuttonBar.leftAnchor.constraint(equalTo: segmentedControl.leftAnchor).isActive = true// çº¦æŸå®ƒçš„å®½åº¦ = ç‰‡æ®µå®¹å™¨å®½åº¦ / ç‰‡æ®µä¸ªæ•°buttonBar.widthAnchor.constraint(equalTo: segmentedControl.widthAnchor, multiplier: 1 / CGFloat(segmentedControl.numberOfSegments)).isActive = true\næ­£å¦‚æœ€åé‚£æ¡æ³¨é‡Šæ‰€è¯´ï¼Œæˆ‘ä»¬éœ€è¦é•¿æ¡çš„å®½åº¦ä¸ºsegmentedControlçš„å®½åº¦é™¤ä»¥ç‰‡æ®µä¸ªä¸ªæ•°ã€‚è¿™ä¿è¯äº†é•¿æ¡å®½åº¦å°†ä¸å•ä¸ªç‰‡æ®µçš„å®½åº¦å®Œå…¨åŒ¹é…ï¼ŒåŒæ ·è¿™é‡Œæ˜¯å‡è®¾æ‰€æœ‰çš„æ®µéƒ½æ˜¯æƒ³ç­‰çš„å®½åº¦ã€‚åˆå§‹è§†å›¾ç°åœ¨å·²å®Œæˆï¼æœ€åä¸€æ­¥ï¼Œæˆ‘ä»¬éœ€è¦è®©é•¿æ¡éšæ‰€é€‰çš„ç‰‡æ®µç§»åŠ¨ã€‚\né•¿æ¡æ åŠ¨ç”»å½“æ‰€é€‰ç‰‡æ®µå‘ç”Ÿæ”¹å˜æ—¶ï¼ŒsegmentedControléœ€è¦è°ƒç”¨ä¸€ä¸ªå‡½æ•°æ¥å¤„ç†é•¿æ¡æ åœ¨xè½´ä¸Šçš„ä½ç½®è½¬æ¢ï¼Œä½¿å…¶è·‘åˆ°é€‰æ‹©çš„ç‰‡æ®µä¸‹æ–¹ã€‚å®šä¹‰ä¸ªResponderç±»ï¼Œå¹¶æ·»åŠ æ–¹æ³•ï¼Œç„¶ååœ¨segmentedControlå˜é‡ä¸Šæ·»åŠ å›è°ƒï¼ŒsegmentedControlçš„å€¼æ”¹å˜æ—¶ä¼šè§¦å‘ã€‚1234567891011// åœ¨importå£°æ˜ä¸‹æ–¹class Responder: NSObject &#123;    @objc func segmentedControlValueChanged(_ sender: UISegmentedControl) &#123;    &#125;&#125;let responder = Responder()...// åœ¨PlaygroundPage.current.liveView = viewå£°æ˜çš„ä¸Šæ–¹segmentedControl.addTarget(responder, action: #selector(responder.segmentedControlValueChanged(_:)), for: UIControlEvents.valueChanged)\nä¸€å®šè¦ç¡®ä¿senderä½œä¸ºæ–¹æ³•å‚æ•°ç±»å‹ï¼Œå› ä¸ºæˆ‘ä»¬éœ€è¦åœ¨è°ƒç”¨å‡½æ•°æ—¶è®¿é—®å®ƒã€‚æœ€åè®©æˆ‘ä»¬æ¥å®Œæˆæœ€åä¸€å—æ‹¼å›¾ï¼ŒbuttonBaråœ¨xè½´çš„ç§»åŠ¨ï¼Œå®ƒå°†ç§»åŠ¨åˆ°è¢«é€‰ä¸­çš„ç‰‡æ®µä¸‹12345@objc func segmentedControlValueChanged(_ sender: UISegmentedControl) &#123;  UIView.animate(withDuration: 0.3) &#123;      buttonBar.frame.origin.x = (segmentedControl.frame.width / CGFloat(segmentedControl.numberOfSegments)) * CGFloat(segmentedControl.selectedSegmentIndex)  &#125;&#125;\né•¿æ¡å› è¯¥å»çš„xè½´ä½ç½® = (segmentedControlçš„å®½åº¦ / ç‰‡æ®µä¸ªæ•°) * å½“å‰ç‰‡æ®µçš„ä¸‹æ ‡\nç§ç§ï¼æˆ‘ä»¬çš„åŠ¨ç”»æŒ‰é’®æ å‡ºæ¥äº†\nç»“è®ºæˆ‘å¸Œæœ›è¿™ç¯‡æ–‡ç« æ‰€æä¾›çš„ä¿¡æ¯ï¼Œèƒ½ä½œä¸ºä½ åœ¨çœ‹äº†è®¸å¤šç±»åº“æˆ–iOSåº”ç”¨åçš„ä¸€ä¸ªDIYè§£å†³æ–¹æ¡ˆã€‚ä½ å¯ä»¥å°†è¿™é‡Œçš„UISegmentedControlè¿æ¥åˆ°UIPageViewControlleræˆ–UIScrollViewä½œä¸ºåˆ†æ®µå†…å®¹ç›´æ¥ç§»åŠ¨çš„æ–¹å¼ã€‚ä½ è¿™å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°playgroudä»£ç åœ¨Github Gistï¼Œç¥æ‚¨iOSå¼€å‘é¡ºåˆ©ï¼\n\n\nè¡¥å……è¯´æ˜ï¼šä¸‹é¢é“¾æ¥åˆ°çš„æ˜¯æˆ‘åœ¨ç»ƒä¹ çš„æ—¶å€™å†™çš„ä»£ç ï¼Œä¾›å‚è€ƒï¼\n\nhttps://github.com/xujiaji/Learn-iOS/blob/master/TabSegmentedControl.playground/Contents.swift\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/ios-uisegmented-design/display.gif","plink":"https://blog.xujiaji.com/post/ios-uisegmented-design/"},{"title":"iOSå¼€å‘-é›¶ç¢ç¬”è®°","date":"2018-07-16T00:08:16.000Z","author":"xujiaji","updated":"2019-10-14T15:55:36.881Z","content":"è®°å½•ä¸€äº›iOSå­¦ä¹ è¿‡ç¨‹ä¸­çš„ç¬”è®°\niOSå¼€å‘-é›¶ç¢ç¬”è®°åˆ›å»ºé¡¹ç›®ç›®å½•ç»“æ„\nAppDelegate.swift:ç”Ÿå‘½å‘¨æœŸåŠå˜é‡çš„å®šä¹‰\nViewController.swift: MVCçš„C\nAssets.xcasset:æ”¾èµ„æºæ–‡ä»¶ï¼Œå¦‚å›¾ç‰‡ç­‰\ninfo.plistï¼šé…ç½®æ–‡ä»¶\nxxxTest: å•å…ƒæµ‹è¯•\nProducts:ç”Ÿæˆçš„æ–‡ä»¶\nMain.storyboard: è§†å›¾\n\nå¿«æ·æ·»åŠ æ³¨é‡Š1option + command + /\nå…³é—­è½¯é”®ç›˜\nå…³é—­ä»£ç \n\n1textField.resignFirstResponder()\n\nå…³é—­æ–¹å¼1ï¼šåœ¨Controllerä¸­é‡å†™touchesEnded()æ–¹æ³•ï¼Œç„¶ååœ¨è¿™é‡Œé¢å…³é—­è½¯ä»¶ç›˜ï¼Œæ„æ€æ˜¯ç‚¹å‡»ç©ºç™½å¤„å…³é—­\n\n123override func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) &#123;    name.resignFirstResponder()&#125;\n\nå…³é—­æ–¹å¼2ï¼šç‚¹å‡»ä¸‹ä¸€æ­¥æ—¶ï¼Œå…³é—­è½¯é”®ç›˜ï¼›Controllerå®ç°UITextFieldDelegateåè®®ï¼›å®ç°UITextFieldDelegateåè®®ä¸­çš„textFieldShouldReturnæ–¹æ³•ï¼›\n\n1234func textFieldShouldReturn(_ textField: UITextField) -&gt; Bool &#123;    textField.resignFirstResponder()    return true&#125;\nUIDatePickeré€‰æ‹©æ—¶é—´åè®¡ç®—å¹´é¾„123456func calAge(by datePicker: UIDatePicker) -&gt; Int? &#123;    let gregorian = NSCalendar(calendarIdentifier: .gregorian)    let now = Date()    let components = gregorian?.components(NSCalendar.Unit.year, from: datePicker.date, to: now, options: NSCalendar.Options.init(rawValue: 0))    return components?.year&#125;\né¡µé¢è·³è½¬ï¼Œä¼ é€’æ•°æ®æœ‰ä¸¤ä¸ªControllerï¼šViewControllerå’ŒGalleryViewControllerã€‚ä»ViewControllerè·³è½¬åˆ°GalleryViewControllerã€‚ViewControlleré‡å†™æ–¹æ³•ï¼šprepareï¼Œè¯¥æ–¹æ³•åœ¨é¡µé¢è·³è½¬æ—¶ä¼šè¢«è°ƒç”¨ï¼Œæˆ‘ä»¬éœ€è¦åœ¨é‡Œé¢åˆ¤æ–­æ˜¯è·³è½¬åˆ°å“ªä¸ªé¡µé¢ã€‚\n12345678910111213141516171819202122232425override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123;    // éœ€è¦ç»™Segueå–å    if segue.identifier == \"GoToGallery\" &#123;        let index = beautyPicker.selectedRow(inComponent: 0)        var imageName: String?        switch index &#123;        case 0:            imageName = \"fangbingbing\"        case 1:            imageName = \"libingbing\"        case 2:            imageName = \"wangfei\"        case 3:            imageName = \"yangmi\"        case 4:            imageName = \"zhouxu\"        default:            imageName = nil        &#125;        // å¾—åˆ°ä¸‹ä¸€ä¸ªé¡µé¢çš„Controller        let vc = segue.destination as! GalleryViewController        vc.imageName = imageName    &#125;&#125;\né€šè¿‡å›¾ç‰‡æ–‡ä»¶åè®¾ç½®å›¾ç‰‡1beautyImage.image = UIImage(named: imageName)\nunwind segueå…³é—­é¡µé¢å…³é—­é¡µé¢åï¼ŒControllerå¯ä»¥è·å¾—ä¸Šä¸ªé¡µé¢ä¼ å›æ¥çš„å€¼è¯¥æ–¹æ³•å†™åœ¨å‰ä¸€ä¸ªé¡µé¢123@IBAction func closedPrePage(segue: UIStoryboardSegue) &#123;    print(\"closed\")&#125;\nTableViewä¸‹ç§»ä¸€ä¸ªçŠ¶æ€æ çš„é«˜åº¦è§£å†³\næ–¹æ³•ä¸€\n123if #available(iOS 11.0, *) &#123;    tableView.contentInsetAdjustmentBehavior = .never&#125;\n\næ–¹æ³•äºŒï¼Œå†…å®¹ä¸Šéƒ¨åˆ†åŒºåŸŸå‘ä¸Šåç§»ä¸€ä¸ªçŠ¶æ€æ çš„é«˜åº¦\n1collectionView?.contentInset.top = -UIApplication.shared.statusBarFrame.height\n\n\nTableView æ·»åŠ åˆ·æ–°1234567891011let refreshControl = UIRefreshControl()// åˆå§‹åŒ–åˆ·æ–°refreshControl.backgroundColor = UIColor.blue //è®¾ç½®åˆ·æ–°çš„èƒŒæ™¯é¢œè‰²refreshControl.attributedTitle = NSAttributedString(string: \"åˆ·æ–°ä¸€ä¸‹ï¼š\\(Data())\", attributes: [NSAttributedStringKey.foregroundColor: UIColor.white]) // è®¾ç½®å­—ä½“é¢œè‰²refreshControl.tintColor = UIColor.green // åŠ è½½èŠèŠ±é¢œè‰²refreshControl.tintAdjustmentMode = .dimmed // è‰²å½©è°ƒæ•´æ¨¡å¼refreshControl.addTarget(self, action: #selector(addcount), for: .valueChanged) //æ·»åŠ æ–¹æ³•ç›®æ ‡// æ·»åŠ è¯¥åˆ·æ–°tableView.refreshControl = refreshControl\nåˆ·æ–°æ–¹æ³•\n12345@objc func addcount() &#123;    dataArrary.append(contentsOf: dataArrary)    tableView.reloadData()    refreshControl.endRefreshing()&#125;\nå‘é¡¹ç›®æ·»åŠ å­—ä½“https://developer.apple.com/documentation/uikit/text_display_and_fonts/adding_a_custom_font_to_your_app\nç”±äºiOSçš„ç”¨çš„å­—ä½“åç§°å¹¶ä¸æ˜¯æ–‡ä»¶åç§°ï¼Œè€Œæ˜¯å­—ä½“æœ¬èº«åç§°ã€‚ä¸‹é¢ä»£ç æœç´¢æ‰€æœ‰å­—ä½“ï¼Œç„¶åæˆ‘ä»¬åœ¨æ§åˆ¶å°ï¼Œæ‰¾åˆ°å¤šå‡ºæ¥çš„åç§°ã€‚\n12345678for family: String in UIFont.familyNames&#123;    print(\"\\(family)\")    for names: String in UIFont.fontNames(forFamilyName: family)    &#123;        print(\"== \\(names)\")    &#125;&#125;\nè®¾ç½®tabbar å­—ä½“å’Œå­—ä½“å¤§å°12345override func viewDidLoad() &#123;    super.viewDidLoad()    let appearance = UITabBarItem.appearance()    appearance.setTitleTextAttributes([NSAttributedStringKey.font: UIFont(name: \"Ubuntu-Light\", size: 9)!], for: .normal)&#125;\nUIButton ç›¸å…³UIButton.isEnabled = falseåå›¾ç‰‡æŒ‰é’®çš„èƒŒæ™¯å›¾ç‰‡è¢«æ”¹å˜1UIButton.adjustsImageWhenDisabled = false\næ‰©å±•æ·»åŠ åœ†è§’ã€è¾¹æ¡†ã€è¾¹æ¡†é¢œè‰²12345678910111213141516171819202122232425262728293031@IBDesignable extension UIButton &#123;    @IBInspectable var borderWidth: CGFloat &#123;        set &#123;            layer.borderWidth = newValue        &#125;        get &#123;            return layer.borderWidth        &#125;    &#125;    @IBInspectable var cornerRadius: CGFloat &#123;        set &#123;            layer.cornerRadius = newValue        &#125;        get &#123;            return layer.cornerRadius        &#125;    &#125;    @IBInspectable var borderColor: UIColor? &#123;        set &#123;            guard let uiColor = newValue else &#123; return &#125;            layer.borderColor = uiColor.cgColor        &#125;        get &#123;            guard let color = layer.borderColor else &#123; return nil &#125;            return UIColor(cgColor: color)        &#125;    &#125;&#125;\næ‰©å±•å›¾ç‰‡åœ¨ä¸Šï¼Œæ–‡å­—åœ¨ä¸‹1234567891011121314extension UIButton &#123;    func alignVertical(spacing: CGFloat = 6.0, imageBottom: CGFloat = 0.0) &#123;        guard let imageSize = self.imageView?.image?.size,            let text = self.titleLabel?.text,            let font = self.titleLabel?.font            else &#123; return &#125;        self.titleEdgeInsets = UIEdgeInsets(top: 0.0, left: -imageSize.width, bottom: -(imageSize.height + spacing), right: 0.0)        let labelString = NSString(string: text)        let titleSize = labelString.size(withAttributes: [NSAttributedStringKey.font: font])        self.imageEdgeInsets = UIEdgeInsets(top: -(titleSize.height + spacing), left: 0.0, bottom: imageBottom, right: -titleSize.width)        let edgeOffset = abs(titleSize.height - imageSize.height) / 2.0;        self.contentEdgeInsets = UIEdgeInsets(top: edgeOffset, left: 0.0, bottom: edgeOffset, right: 0.0)    &#125;&#125;\nç»™UIButtonå›¾ç‰‡æŸ“è‰²1234let button = UIButton(type: .custom)let image = UIImage(named: \"image_name\")?.withRenderingMode(.alwaysTemplate)button.setImage(image, for: .normal)button.tintColor = UIColor.red\nUITableViewæˆ–UICollectionViewè¢«TabBaré®ç›–\nUITableViewè°ƒç”¨reloadDataå¯¼è‡´ç§»åŠ¨åˆ°åˆ—è¡¨é¡¶éƒ¨å¤±æ•ˆ12345UIView.animate(withDuration: 0, animations: &#123;    self.tableView.contentOffset = CGPoint.zero&#125;, completion: &#123; _ in    self.tableView.reloadData()&#125;)\nNavigationBarå¯¼è‡´CollectionViewCellæˆ–TableViewCellåç§»1self.collectionView?.contentInsetAdjustmentBehavior = .automatic\nè·å–appç‰ˆæœ¬12345/// è·å–ç‰ˆæœ¬ålet appVersion = Bundle.main.infoDictionary![\"CFBundleShortVersionString\"] as? String/// è·å–ç‰ˆæœ¬å·let versionNumber = Bundle.main.infoDictionary![\"CFBundleVersion\"] as? String\næ‰“å¼€ç½‘é¡µæœ¬è½¯ä»¶çš„appstore123456789101112// App Store URL.let appStoreLink = \"https://itunes.apple.com/cn/app/id1144351773?mt=8\"/* First create a URL, then check whether there is an installed app that can open it on the device. */if let url = URL(string: appStoreLink), UIApplication.shared.canOpenURL(url) &#123;    // Attempt to open the URL.    UIApplication.shared.open(url, options: [:], completionHandler: &#123;(success: Bool) in        if success &#123;            print(\"Launching \\(url) was successful\")        &#125;&#125;)&#125;\nè®¾ç½®åœ†å½¢å±•ç¤ºå›¾åƒ\nè®¾ç½®UIImageViewå®½åº¦å’Œé«˜åº¦ï¼Œå‡å¦‚è®¾ç½®ä¸º60*60\nè®¾ç½®è¿è¡Œæ—¶å±æ€§ï¼Œè®¾ç½®åœ†å¼§ä¸º30ï¼ˆæ­£æ–¹å½¢è¾¹é•¿åº¦ä¸€åŠï¼‰\nå‹¾é€‰Clip to Boundsï¼Œ\n\nUIScrollViewå¡«å……åˆ°é¡¶éƒ¨ï¼ˆå»æ‰çŠ¶æ€æ åˆ°ç©ºç™½é—´è·ï¼‰\nContent Insets é€‰æ‹©Never\nå»æ‰é€‰ä¸­çš„Safe Area Relative Margins\n\nUIImage é«˜æ–¯æ¨¡ç³Šæ‰©å±•12345678910111213extension UIImage &#123;    func blurred(radius: CGFloat) -&gt; UIImage &#123;        let ciContext = CIContext(options: nil)        guard let cgImage = cgImage else &#123; return self &#125;        let inputImage = CIImage(cgImage: cgImage)        guard let ciFilter = CIFilter(name: \"CIGaussianBlur\") else &#123; return self &#125;        ciFilter.setValue(inputImage, forKey: kCIInputImageKey)        ciFilter.setValue(radius, forKey: \"inputRadius\")        guard let resultImage = ciFilter.value(forKey: kCIOutputImageKey) as? CIImage else &#123; return self &#125;        guard let cgImage2 = ciContext.createCGImage(resultImage, from: inputImage.extent) else &#123; return self &#125;        return UIImage(cgImage: cgImage2)    &#125;&#125;\nä¸¤ä¸ªUIImage åˆå¹¶æ‰©å±•1234567891011121314151617extension UIImage &#123;  func overlayWith(image: UIImage, posX: CGFloat, posY: CGFloat) -&gt; UIImage &#123;    let newWidth = size.width &lt; posX + image.size.width ? posX + image.size.width : size.width    let newHeight = size.height &lt; posY + image.size.height ? posY + image.size.height : size.height    let newSize = CGSize(width: newWidth, height: newHeight)    UIGraphicsBeginImageContextWithOptions(newSize, false, 0.0)    draw(in: CGRect(origin: CGPoint.zero, size: size))    image.draw(in: CGRect(origin: CGPoint(x: posX, y: posY), size: image.size))    let newImage = UIGraphicsGetImageFromCurrentImageContext()!    UIGraphicsEndImageContext()    return newImage  &#125;&#125;\nSDWebImageView ä¸‹è½½å›¾ç‰‡\næ–¹å¼ä¸€\n1234img.sd_setImage(with: URL(string: \"http://url\"),  placeholderImage: #imageLiteral(resourceName: \"default_square\")) &#123; image, error, cacheType, url in&#125;\n\næ–¹å¼äºŒ\n12345678910SDWebImageDownloader  .shared()  .downloadImage(with: URL(string: \"http://url\"),    options: SDWebImageDownloaderOptions.init(rawValue: 0),    progress: nil,    completed: &#123; image, data, error, finished in    if finished &#123;    &#125;&#125;)\n\n\nAVPlayerViewController è§†é¢‘æ’­æ”¾12345678910import AVKitfunc playVideoByUrl(string: String) &#123;    let videoURL = URL(string: string)    let player = AVPlayer(url: videoURL!)    let playerViewController = AVPlayerViewController()    playerViewController.player = player    self.present(playerViewController, animated: true) &#123;        playerViewController.player!.play()    &#125;&#125;\nä¸ºUIImageViewæ·»åŠ çš„ç‚¹å‡»æ‰‹åŠ¿æ— æ•ˆ\nå‹¾é€‰ä¸ŠUser Interaction Enabled\nä»£ç ä¸­è®¾ç½®uiimageview.userInteractionEnabled = true\n\nPHAssetè·å–æ–‡ä»¶è·¯å¾„12345678910111213141516171819202122232425extension PHAsset &#123;    func getURL(completionHandler : @escaping ((_ responseURL : URL?) -&gt; Void))&#123;        if self.mediaType == .image &#123;            let options: PHContentEditingInputRequestOptions = PHContentEditingInputRequestOptions()            options.canHandleAdjustmentData = &#123;(adjustmeta: PHAdjustmentData) -&gt; Bool in                return true            &#125;            self.requestContentEditingInput(with: options, completionHandler: &#123;(contentEditingInput: PHContentEditingInput?, info: [AnyHashable : Any]) -&gt; Void in                completionHandler(contentEditingInput!.fullSizeImageURL as URL?)            &#125;)        &#125; else if self.mediaType == .video &#123;            let options: PHVideoRequestOptions = PHVideoRequestOptions()            options.version = .original            PHImageManager.default().requestAVAsset(forVideo: self, options: options, resultHandler: &#123;(asset: AVAsset?, audioMix: AVAudioMix?, info: [AnyHashable : Any]?) -&gt; Void in                if let urlAsset = asset as? AVURLAsset &#123;                    let localVideoUrl: URL = urlAsset.url as URL                    completionHandler(localVideoUrl)                &#125; else &#123;                    completionHandler(nil)                &#125;            &#125;)        &#125;    &#125;&#125;\nUIView ç›¸å…³é€šè¿‡UIViewè·å–çˆ¶UIViewController123456789101112extension UIView &#123;    var parentViewController: UIViewController? &#123;        var parentResponder: UIResponder? = self        while parentResponder != nil &#123;            parentResponder = parentResponder!.next            if let viewController = parentResponder as? UIViewController &#123;                return viewController            &#125;        &#125;        return nil    &#125;&#125;\nString ç›¸å…³htmlçš„å­—ç¬¦ä¸²ï¼Œå°†ä»£ç è½¬æˆå¯¹åº”æ•ˆæœ12345678910111213extension String &#123;    var htmlToAttributedString: NSAttributedString? &#123;        guard let data = data(using: .utf8) else &#123; return NSAttributedString() &#125;        do &#123;            return try NSAttributedString(data: data, options: [.documentType: NSAttributedString.DocumentType.html, .characterEncoding:String.Encoding.utf8.rawValue], documentAttributes: nil)        &#125; catch &#123;            return NSAttributedString()        &#125;    &#125;    var htmlToString: String &#123;        return htmlToAttributedString?.string ?? \"\"    &#125;&#125;\næ­£åˆ™è¡¨è¾¾å¼åŒ¹é…12345678910111213141516/// æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…extension String &#123;    func matchingStrings(regex: String) -&gt; [String] &#123;        do &#123;            let regex = try NSRegularExpression(pattern: regex)            let results = regex.matches(in: self,                                        range: NSRange(self.startIndex..., in: self))            return results.map &#123;                String(self[Range($0.range, in: self)!])            &#125;        &#125; catch let error &#123;            print(\"invalid regex: \\(error.localizedDescription)\")            return []        &#125;    &#125;&#125;\nDataæ‹¼æ¥æ•°æ®1234567extension Data &#123;    mutating func append(_ string: String, using encoding: String.Encoding = .utf8) &#123;        if let data = string.data(using: encoding) &#123;            append(data)        &#125;    &#125;&#125;\næ‰“ä¹±æ•°ç»„é¡ºåº123456789101112extension Array&#123;    mutating func randamArray() &#123;        var list = self        for index in 0..&lt;list.count &#123;            let newIndex = Int(arc4random_uniform(UInt32(list.count-index))) + index            if index != newIndex &#123;                list.swapAt(index, newIndex)            &#125;        &#125;        self = list    &#125;&#125;\nUIImageç›¸å…³é«˜æ–¯æ¨¡ç³Šå›¾ç‰‡12345678910111213extension UIImage &#123;    func blurred(radius: CGFloat) -&gt; UIImage &#123;        let ciContext = CIContext(options: nil)        guard let cgImage = cgImage else &#123; return self &#125;        let inputImage = CIImage(cgImage: cgImage)        guard let ciFilter = CIFilter(name: \"CIGaussianBlur\") else &#123; return self &#125;        ciFilter.setValue(inputImage, forKey: kCIInputImageKey)        ciFilter.setValue(radius, forKey: \"inputRadius\")        guard let resultImage = ciFilter.value(forKey: kCIOutputImageKey) as? CIImage else &#123; return self &#125;        guard let cgImage2 = ciContext.createCGImage(resultImage, from: inputImage.extent) else &#123; return self &#125;        return UIImage(cgImage: cgImage2)    &#125;&#125;\nä¸¤å¼ å›¾ç‰‡å åŠ æˆä¸€å¼ å›¾ç‰‡1234567891011121314151617extension UIImage &#123;    func overlayWith(image: UIImage, posX: CGFloat, posY: CGFloat) -&gt; UIImage &#123;        let newWidth = size.width &lt; posX + image.size.width ? posX + image.size.width : size.width        let newHeight = size.height &lt; posY + image.size.height ? posY + image.size.height : size.height        let newSize = CGSize(width: newWidth, height: newHeight)        UIGraphicsBeginImageContextWithOptions(newSize, false, 0.0)        draw(in: CGRect(origin: CGPoint.zero, size: size))        image.draw(in: CGRect(origin: CGPoint(x: posX, y: posY), size: image.size))        let newImage = UIGraphicsGetImageFromCurrentImageContext()!        UIGraphicsEndImageContext()        return newImage    &#125;&#125;\nç¼©æ”¾å›¾ç‰‡12345678910extension UIImage &#123;    func scaled(withSize size: CGSize) -&gt; UIImage &#123;        UIGraphicsBeginImageContextWithOptions(size, false, 0.0)        defer &#123; UIGraphicsEndImageContext() &#125;        draw(in: CGRect(x: 0.0, y: 0.0, width: size.width, height: size.height))        return UIGraphicsGetImageFromCurrentImageContext()!    &#125;&#125;\nJsonç›¸å…³Jsonç¼–ç 12345678910extension JSONEncoder &#123;    /// å°†å®ä½“ç±»è½¬æ¢æˆJsonæ•°æ®    func toJson&lt;T: Encodable&gt;(_ entity: T) -&gt; String? &#123;        guard let encodedData = try? encode(entity) else &#123;            return nil        &#125;        return String(data: encodedData, encoding: .utf8)    &#125;&#125;\nJsonè§£ç 12345678910extension JSONDecoder &#123;    func from&lt;T: Decodable&gt;(_ type: T.Type, json: String) -&gt; T? &#123;        do &#123;            return try decode(type, from: json.data(using: .utf8)!)        &#125;        catch &#123;            return nil        &#125;    &#125;&#125;\nè¯·æ±‚å­—æ®µç¼–ç ä¸ºå­—ç¬¦ä¸²ï¼Œå½¢å¼å¦‚ï¼škey=value&amp;key=value&amp;key=value123456789101112131415161718192021extension Dictionary &#123;    func percentEscaped() -&gt; String &#123;        return map &#123; (key, value) in            let escapedKey = \"\\(key)\".addingPercentEncoding(withAllowedCharacters: .urlQueryValueAllowed) ?? \"\"            let escapedValue = \"\\(value)\".addingPercentEncoding(withAllowedCharacters: .urlQueryValueAllowed) ?? \"\"            return escapedKey + \"=\" + escapedValue            &#125;            .joined(separator: \"&amp;\")    &#125;&#125;extension CharacterSet &#123;    static let urlQueryValueAllowed: CharacterSet = &#123;        let generalDelimitersToEncode = \":#[]@\" // does not include \"?\" or \"/\" due to RFC 3986 - Section 3.4        let subDelimitersToEncode = \"!$&amp;'()*+,;=\"        var allowed = CharacterSet.urlQueryAllowed        allowed.remove(charactersIn: \"\\(generalDelimitersToEncode)\\(subDelimitersToEncode)\")        return allowed    &#125;()&#125;\nUIViewController ç›¸å…³æ·»åŠ å­UIViewController12345678910111213141516extension UIViewController &#123;    /// æ·»åŠ å­ViewController    func addSubController(child: UIViewController, to: UIView? = nil) &#123;        addChildViewController(child)        if let to = to &#123;            child.view.frame = to.frame            to.addSubview(child.view)        &#125;        else &#123;            child.view.frame = view.frame            view.addSubview(child.view)        &#125;        child.didMove(toParentViewController: self)    &#125;&#125;\nç§»é™¤å­UIViewController12345678extension UIViewController &#123;    /// ç§»é™¤å­ViewController    func removeSubController(child: UIViewController) &#123;        child.willMove(toParentViewController: nil)        child.removeFromParentViewController()        child.view.removeFromSuperview()    &#125;&#125;\nå…³é—­é¡µé¢å…³é—­å½“å‰é¡µé¢123456extension UIViewController &#123;    /// å…³é—­å½“å‰é¡µé¢    func closePage() &#123;        self.dismiss(animated: true, completion: nil)    &#125;&#125;\nå…³é—­æ‰€æœ‰é¡µé¢ï¼Œé™¤å¼€æœ€ä¸‹çº§çš„é‚£ä¸ªé¡µé¢1234567891011extension UIViewController &#123;    func closeAllPage() &#123;        //è·å–æ ¹VC        var rootVC = self.presentingViewController        while let parent = rootVC?.presentingViewController &#123;            rootVC = parent        &#125;        //é‡Šæ”¾æ‰€æœ‰ä¸‹çº§è§†å›¾        rootVC?.dismiss(animated: true, completion: nil)    &#125;&#125;\næ˜¾ç¤ºå’Œå…³é—­èŠèŠ±ç­‰å¾…åŠ è½½12345678910111213141516171819202122extension UIViewController &#123;    class func displaySpinner(onView : UIView) -&gt; UIView &#123;        let spinnerView = UIView.init(frame: onView.bounds)        spinnerView.backgroundColor = UIColor.init(red: 0.5, green: 0.5, blue: 0.5, alpha: 0.5)        let ai = UIActivityIndicatorView.init(activityIndicatorStyle: .whiteLarge)        ai.startAnimating()        ai.center = spinnerView.center        DispatchQueue.main.async &#123;            spinnerView.addSubview(ai)            onView.addSubview(spinnerView)        &#125;        return spinnerView    &#125;    class func removeSpinner(spinner :UIView) &#123;        DispatchQueue.main.async &#123;            spinner.removeFromSuperview()        &#125;    &#125;&#125;\n\næ˜¾ç¤º\n\n1let sp = UIViewController.displaySpinner(onView: self.view)\n\nå…³é—­\n\n1UIViewController.removeSpinner(spinner: sp)\nIAP å†…è´­\nä½¿ç”¨\n\n\né™¤ä»£ç å¤–çš„å†…è´­å‡†å¤‡å·¥åºå·²OK\nè·å–äº§å“æ•°æ®ï¼šé€šè¿‡IAPHelper.shared.fetchAvailableProductsä»è‹¹æœæœåŠ¡å™¨è·å–æ‰€æœ‰ä¼ å…¥çš„äº§å“idçš„äº§å“ä¿¡æ¯ï¼Œä¼ å…¥çš„å‚æ•°æ˜¯äº§å“çš„idå­—ç¬¦ä¸²æ•°ç»„\næ”¯ä»˜ï¼šIAPHelper.shared.purchase(id: id)ï¼Œidæ˜¯äº§å“id\n1234567891011121314151617IAPHelper.shared.purchase(id: selectItem!.product_id) &#123;alert, product, transaction in  if alert == .purchased &#123; //è´­ä¹°æˆåŠŸ      if let receiptUrl = Bundle.main.appStoreReceiptURL, let receiptData = NSData(contentsOf: receiptUrl) &#123;          let receiptString = receiptData.base64EncodedString(options: NSData.Base64EncodingOptions(rawValue: 0))          // å¯¹receiptStringåŠ å¯†å­—ç¬¦ä¸²è¿›è¡ŒéªŒè¯      &#125;  &#125;  else if alert == .restored &#123;  &#125;  else if alert == .purchasing &#123;  &#125;  else &#123;  &#125;&#125;\n\n\n\nIAPHelper ä»£ç \n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081828384858687888990919293949596979899100101102103104105106107108109110111112113114115116117118119120121122123124125126127128129130131132import StoreKitenum IAPHelperAlertType&#123;    case disabled    case restored    case purchased    case purchasing    case setProductIds    func message() -&gt; String&#123;        switch self &#123;        case .setProductIds: return \"æœªè®¾ç½®äº§å“idï¼Œè¯·è°ƒç”¨ fetchAvailableProducts()\"        case .disabled: return \"è´­ä¹°å·²å–æ¶ˆ\"        case .restored: return \"æ‚¨å·²æˆåŠŸæ¢å¤è´­ä¹°\"        case .purchased: return \"æ‚¨å·²æˆåŠŸè´­ä¹°æ­¤å•†å“\"        case .purchasing: return \"æ­£åœ¨è´­ä¹°...\"        &#125;    &#125;&#125;class IAPHelper: NSObject &#123;    static let shared = IAPHelper()    private override init() &#123; &#125;    fileprivate var productID = \"\"    fileprivate var productsRequest = SKProductsRequest()    fileprivate var productDict = [String:SKProduct]()    fileprivate var fetchProductCompletion: (([SKProduct])-&gt;Void)?    fileprivate var productToPurchase: SKProduct?    var purchaseProductCompletion: ((IAPHelperAlertType, SKProduct?, SKPaymentTransaction?) -&gt; Void)?    // MARK: - è´­ä¹°äº§å“    func canMakePurchases() -&gt; Bool &#123;  return SKPaymentQueue.canMakePayments()  &#125;    func purchase(id: String, completion: @escaping ((IAPHelperAlertType, SKProduct?, SKPaymentTransaction?)-&gt;Void)) &#123;        self.purchaseProductCompletion = completion        self.productToPurchase = productDict[id]        guard let product = self.productToPurchase else &#123;            print(IAPHelperAlertType.setProductIds.message())            fatalError(IAPHelperAlertType.setProductIds.message())        &#125;        if self.canMakePurchases() &#123;            let payment = SKPayment(product: product)            SKPaymentQueue.default().add(self)            SKPaymentQueue.default().add(payment)            print(\"é‡‡è´­äº§å“: \\(product.productIdentifier)\")            productID = product.productIdentifier        &#125;        else &#123;            completion(.disabled, nil, nil)        &#125;    &#125;    // MARK: - æ¢å¤è´­ä¹°    func restorePurchase()&#123;        SKPaymentQueue.default().add(self)        SKPaymentQueue.default().restoreCompletedTransactions()    &#125;    // MARK: - è·å–å¯ç”¨çš„iapäº§å“    func fetchAvailableProducts(by ids: [String], completion: @escaping (([SKProduct])-&gt;Void))&#123;        self.fetchProductCompletion = completion        // æŠŠæ‚¨çš„IAPäº§å“idæ”¾åˆ°è¿™é‡Œé¢        guard !ids.isEmpty else &#123;            print(\"æ²¡æœ‰è®¾ç½®äº§å“id\")            fatalError(IAPHelperAlertType.setProductIds.message())        &#125;        productsRequest = SKProductsRequest(productIdentifiers: Set(ids))        productsRequest.delegate = self        productsRequest.start()    &#125;&#125;extension IAPHelper: SKProductsRequestDelegate, SKPaymentTransactionObserver&#123;    // MARK: - è¯·æ±‚IAPäº§å“    func productsRequest (_ request:SKProductsRequest, didReceive response:SKProductsResponse) &#123;        if (response.products.count &gt; 0) &#123;            for product in response.products &#123;                print(\"product.productIdentifier = \\(product.productIdentifier)\")                self.productDict[product.productIdentifier] = product            &#125;            self.fetchProductCompletion?(response.products)        &#125;    &#125;    func paymentQueueRestoreCompletedTransactionsFinished(_ queue: SKPaymentQueue) &#123;        self.purchaseProductCompletion?(.restored, nil, nil)    &#125;    // MARK:- IAPä»˜æ¬¾é˜Ÿåˆ—    func paymentQueue(_ queue: SKPaymentQueue, updatedTransactions transactions: [SKPaymentTransaction]) &#123;        print(\"è°ƒç”¨äº†å‡ æ¬¡å•Šï¼ï¼ï¼\")        for transaction:AnyObject in transactions &#123;            if let trans = transaction as? SKPaymentTransaction &#123;                switch trans.transactionState &#123;                case .purchased:                    print(\"äº§å“å·²è´­ä¹°\")                    SKPaymentQueue.default().finishTransaction(transaction as! SKPaymentTransaction)                    self.purchaseProductCompletion?(.purchased, self.productToPurchase, trans)                    break                case .failed:                    print(\"äº§å“è´­ä¹°å¤±è´¥\\(trans.error.debugDescription)\")                    SKPaymentQueue.default().finishTransaction(transaction as! SKPaymentTransaction)                    self.purchaseProductCompletion?(.disabled, self.productToPurchase, trans)                    break                case .purchasing:                    print(\"æ­£åœ¨è´­ä¹°...\")                    self.purchaseProductCompletion?(.purchasing, self.productToPurchase, trans)                    break                case .restored:                    print(\"äº§å“å·²æ¢å¤è´­ä¹°\")                    SKPaymentQueue.default().finishTransaction(transaction as! SKPaymentTransaction)                    self.purchaseProductCompletion?(.restored, self.productToPurchase, trans)                    break                default: break                &#125;            &#125;        &#125;    &#125;&#125;\nåˆ¤æ–­é€€æ ¼ç¬¦â€\\bâ€https://stackoverflow.com/a/29505548/9724892\n123456789func textField(textField: UITextField, shouldChangeCharactersInRange range: NSRange, replacementString string: String) -&gt; Bool &#123;    if let char = string.cString(using: String.Encoding.utf8) &#123;        let isBackSpace = strcmp(char, \"\\\\b\")        if (isBackSpace == -92) &#123;            print(\"Backspace was pressed\")        &#125;    &#125;    return true&#125;\nCocoaPodså•ç‹¬ä¸ºä¸€äº›åº“è®¾ç½®ç‰ˆæœ¬åœ¨Podfileæœ«å°¾åŠ å…¥\n12345678910swift_versions_of_pods = &#123; 'swiftScan' =&gt; '4.0', 'CWActionSheet' =&gt; '4.0' &#125;post_install do |installer|  installer.pods_project.targets.each do |target|    defined_swift_version = swift_versions_of_pods[target.name]    next if defined_swift_version.blank?    target.build_configurations.each do |config|      config.build_settings['SWIFT_VERSION'] = defined_swift_version    end  endend\nä»£ç ä¸­ä¸ºlabelæ·»åŠ ç‚¹å‡»äº‹ä»¶12345678910override func viewDidLoad() &#123;    super.viewDidLoad()    let tap = UITapGestureRecognizer(target: self, action: #selector(tapFunction))    label.isUserInteractionEnabled = true    label.addGestureRecognizer(tap)&#125;@objc func tapFunction(sender: UITapGestureRecognizer) &#123;    print(\"tap working\")&#125;\néœ€è¦ç»™æ‰‹åŠ¿ä¼ å…¥é¢å¤–çš„æ•°æ®\nåˆ›å»ºä¸€ä¸ªtapæ‰‹åŠ¿å­ç±»\n1234class TopicUITapGestureRecognizer : UITapGestureRecognizer &#123;    var id = Int()    var title = String()&#125;\n\nå¤„ç†æ•°æ®\n123@objc func tapFunction(sender: TopicUITapGestureRecognizer) &#123;    print(\"ç‚¹å‡»äº†: \\(sender.id), \\(sender.title)\")&#125;\n\næ·»åŠ äº‹ä»¶è®¾ç½®æ•°æ®\n12345let tap = TopicUITapGestureRecognizer(target: self, action: #selector(tapFunction))tap.id = topic.id ?? 0tap.title = topic.topic ?? \"\"label.isUserInteractionEnabled = truelabel.addGestureRecognizer(tap)\n\n\nå½“Swiftçš„æšä¸¾ç±»å‹ä¼ å…¥æ•°ç»„åˆ°OCä¸­æ—¶æŠ¥é”™å¼‚å¸¸ä¿¡æ¯\n1'NSInvalidArgumentException', reason: '-[__SwiftValue iconNormal]: unrecognized\nè§£å†³: ä¼ å…¥æšä¸¾ç±»å‹.rawValue\nhttps://stackoverflow.com/questions/39643394/swift-3-error-swiftvalue-unsignedintegervalue-unrecognized-selector/\nè·å–Appç¼“å­˜å¤§å°ã€æ¸…ç†Appç¼“å­˜123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354class AppCacheCleanUtil &#123;    /// è·å–appç¼“å­˜å¤§å°    static func getCacheSize() -&gt; String &#123;        // å–å‡ºcacheæ–‡ä»¶å¤¹ç›®å½•        let cachePath = NSSearchPathForDirectoriesInDomains(.cachesDirectory, .userDomainMask, true).first        // å–å‡ºæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶æ•°ç»„        let fileArr = FileManager.default.subpaths(atPath: cachePath!)        //å¿«é€Ÿæšä¸¾å‡ºæ‰€æœ‰æ–‡ä»¶å è®¡ç®—æ–‡ä»¶å¤§å°        var size = 0        for file in fileArr! &#123;            // æŠŠæ–‡ä»¶åæ‹¼æ¥åˆ°è·¯å¾„ä¸­            let path = cachePath! + (\"/\\(file)\")            // å–å‡ºæ–‡ä»¶å±æ€§            let floder = try! FileManager.default.attributesOfItem(atPath: path)            // ç”¨å…ƒç»„å–å‡ºæ–‡ä»¶å¤§å°å±æ€§            for (key, fileSize) in floder &#123;                // ç´¯åŠ æ–‡ä»¶å¤§å°                if key == FileAttributeKey.size &#123;                    size += (fileSize as AnyObject).integerValue                &#125;            &#125;        &#125;        let totalCache = Double(size) / 1024.00 / 1024.00        return String(format: \"%.2f\", totalCache)    &#125;    /// æ¸…ç†appç¼“å­˜æ–‡ä»¶    static func clearCache() &#123;        let cachePath = NSSearchPathForDirectoriesInDomains(.cachesDirectory, .userDomainMask, true).first        // å–å‡ºæ–‡ä»¶å¤¹ä¸‹æ‰€æœ‰æ–‡ä»¶æ•°ç»„        let fileArr = FileManager.default.subpaths(atPath: cachePath!)        // éå†åˆ é™¤        for file in fileArr! &#123;            let path = cachePath?.appendingFormat(\"/\\(file)\")            if FileManager.default.fileExists(atPath: path!) &#123;                do &#123;                    try FileManager.default.removeItem(atPath: path!)                &#125; catch &#123;                &#125;            &#125;        &#125;    &#125;&#125;\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/ios-note/20190319220203.jpg","plink":"https://blog.xujiaji.com/post/ios-study-note/"},{"title":"Swiftå­¦ä¹ ç¬”è®°","date":"2018-07-09T13:21:34.000Z","author":"xujiaji","updated":"2018-12-25T15:23:05.699Z","content":"è®°å½•ä¸€äº›swiftçš„åŸºæœ¬ç‰¹æ€§ï¼Œä»¥ä¾¿ä½¿ç”¨çš„æ—¶å€™æ–¹ä¾¿æŸ¥é˜…ã€‚\nå­¦ä¹ åœ°å€ï¼šhttps://www.imooc.com/t/108955\nå…ƒç»„\nå®šä¹‰ï¼šå¯æ”¾å…¥å„ç§ç±»å‹æ•°æ®ï¼Œå…ƒç»„é•¿åº¦è‡ªç”±\n\n12var point = (5, 2)var httpResponse = (404, \"Not Found\")\n\nå¯å…ˆé¢„å®šç±»å‹æ¥å®šä¹‰\n\n123var point2: (Int, Int, Int) = (10, 5, 2)var httpResponse2: (Int, String) = (200, \"OK\")let point4: (x: Int, y: Int) = (10, 5)\n\nå–å€¼\n\n12345678910111213141516// ç¬¬ä¸€ç§æ–¹å¼var point = (5, 2)var(xx, yy) = point// ç¬¬äºŒç§æ–¹å¼point.0point.1// ç¬¬ä¸‰ç§æ–¹å¼let point3 = (x: 3, y: 2)point3.xpoint3.y// ç¬¬å››ç§æ–¹å¼ï¼ˆåªå–ç›¸å…³æ•°æ® æ˜¯å¦ç™»å½•ï¼‰let loginResult = (true, \"xujiaji\")let (isLoginSuccess, _ ) = loginResult\nprintæ‰“å°\næ­£å¸¸æƒ…å†µä¸‹\n\n1print(\"a message\")\n\næ‹¼æ¥ï¼Œï¼ˆç»“æœï¼š1 2 3 4ï¼‰\n\n1print(1, 2, 3, 4)\n\næ’å€¼ï¼šåœ¨æ‹¼æ¥çš„ä¸­é—´æ’å…¥å€¼ï¼Œé»˜è®¤æ˜¯ç©ºæ ¼\n\n12// ç»“æœï¼š1-2-3-4print(1, 2, 3, 4, separator:\"-\")\n\nç»“å°¾ï¼šé»˜è®¤æ˜¯å›è½¦â€œ\\nâ€\n\n12// ç»“æœï¼š1 -- 2 -- 3 -- 4:)helloprint(1, 2, 3, 4, separator:\" -- \", terminator:\":)\")\n\nå¦ä¸€ç§æ‹¼æ¥æ–¹å¼ï¼š\\()\n\n123let y = 2, z = 4// ç»“æœï¼š2 * 4 = 8print(\"\\(y) * \\(z) = \\(y*z)\")\nifæ¡ä»¶åˆ¤æ–­\nåŸºæœ¬ç”¨æ³•ï¼Œæ¡ä»¶å¿…é¡»æ˜¯Boolç±»å‹ï¼Œå¯å†™è¡¨è¾¾å¼ï¼Œä½†ç»“æœå¿…é¡»æ˜¯Bool\n\n123456789let imTrue:Bool = truelet imFalse = falseif imFalse &#123;    print(\"I'm True\")&#125;else &#123;    print(\"I'm False\")&#125;\n\næ”¯æŒä¸‰ç›®è¿ç®—ç¬¦\n\nforå¾ªç¯\nåŸºæœ¬ç”¨æ³•\n\n1234// ä»2æ‰“å°åˆ°10for index in 2...10 &#123;    print(index)&#125;\n\nå‰é—­åå¼€ï¼Œç»å¸¸ç”¨äºå¾ªç¯æ•°ç»„\n\n1234// ä»0æ‰“å°åˆ°9for index in 0..&lt;10 &#123;    print(index)&#125;\n\nä¸‹åˆ’çº¿å¿½ç•¥å€¼\n\n123for _ in 1...10 &#123;&#125;\n\nåå‘éå†\n\n1234// ç»“æœï¼šä»10æ‰“å°åˆ°1for i in (1...10).reversed() &#123;    print(i)&#125;\n\nstrideï¼Œfromå¼€å§‹æ•°ï¼Œtoç»“å°¾æ•°ï¼ˆä¸åŒ…æ‹¬ç»“å°¾æ•°ï¼‰ï¼Œthroughç»“å°¾æ•°ï¼ˆåŒ…æ‹¬ç»“å°¾æ•°ï¼‰ï¼Œbyæ¯æ¬¡å¾ªç¯çš„è·¨åº¦(å¯ä»¥æ˜¯æµ®ç‚¹æ•°)\n\n1234567891011121314// ç»“æœï¼š 0 2 4 6 8for i in stride(from: 0, to: 10, by: 2) &#123;    print(i)&#125;// ç»“æœï¼š0 2 4 6 8 10for i in stride(from: 0, through: 10, by: 2) &#123;    print(i)&#125;// ç»“æœï¼šä»10éå†åˆ°1for i in stride(from: 10, to: 0, by: -1) &#123;    print(i)&#125;\nwhileå¾ªç¯\nå’Œjavaæ²¡ä»€ä¹ˆåŒºåˆ«ï¼Œåªæ˜¯æ²¡æœ‰å°æ‹¬å·\n\n\nè‡³å°‘æ‰§è¡Œä¸€æ¬¡å¾ªç¯ï¼Œç›¸å½“äºjavaä¸­çš„do while\n\n123repeat &#123;  è¯­å¥&#125; while æ¡ä»¶\nswitch1. æ³¨æ„switch caseä¸­ä¸ç”¨å†™breakï¼Œ caseåå¯ä»¥åŒ¹é…å¤šä¸ªå€¼é€—å·éš”å¼€2. ä¸å¯ä»¥ç©·ä¸¾ï¼ˆæ˜¯å¦çŸ¥é“æ‰€æœ‰å¯èƒ½æ€§ï¼‰ï¼Œå¿…é¡»åŠ ä¸Šdefault:å¦‚æœæ²¡æœ‰è¯­å¥å¯ä»¥ç”¨breakæ˜¾ç¤ºè·³å‡ºæˆ–()è¡¨ç¤ºç©ºè¯­å¥3. å¯ä»¥ç”¨å­—ç¬¦ä¸²ï¼Œæµ®ç‚¹æ•°ï¼Œå¸ƒå°”ç­‰swiftåŸºç¡€æ•°æ®ç»“æ„4. caseåé¢å¯ä»¥è·ŸåŒºé—´ï¼Œå¦‚ 1 ..&lt; 605. caseè¿˜å¯ä»¥å¯¹å…ƒç»„è¿›è¡Œåˆ¤æ–­ï¼Œå¹¶ä¸”å…ƒç»„å¯ä»¥é€šè¿‡_è¿›è¡Œå¿½ç•¥ï¼›å…ƒç»„ä¸­è¿˜å¯ä»¥ç”¨åŒºé—´ï¼Œå¦‚case (-2...2, -2...2):ï¼›è¿˜å¯ä»¥å’Œå…ƒç»„è§£åŒ…ä¸€èµ·ç”¨ï¼Œå¦‚case (let x, let y):6. è¯­å¥ç»“æŸååŠ ä¸Šfallthroughå…³é”®å­—ï¼Œå¯è®©æ¡ä»¶å‘ä¸‹åˆ¤æ–­7. caseä¸­ç”¨whereå¯ä»¥åŠ ä¸Šæ¡ä»¶åˆ¤æ–­è¿›è¡Œé™åˆ¶12345678910let point = (3, 3)switch point &#123;case let(x, y) where x == y:    print(\"It's on the line x == y!\")case let(x, y) where x == -y:    print(\"It's on the line x == -y\")case let(x, y):    print(\"It's just an ordinary point.\")    print(\"The point is (\\(x), \\(y)\")&#125;\n8. switch caseè¿˜å¯ä»¥ç”¨if case æ¥ç®€åŒ–ä»£ç 1234567891011121314151617let age = 19switch age &#123;case 10...19:    print(\"You're a teenage.\")default:    print(\"You're not a teenage.\")&#125;// ç”¨ if case ç®€åŒ–åif case 10...19 = age &#123;    print(\"You're a teenage.\")&#125;// è¿˜å¯ä»¥åŠ ä¸Šwhereæ¡ä»¶åˆ¤æ–­ï¼Œwhereå¯ç›´æ¥çœç•¥é€šè¿‡é€—å·éš”å¼€if case 10...19 = age, age &gt;= 18 &#123;    print(\"You're a teenage and in a college\")&#125;\n9. caseå…³é”®å­—è¿˜å¯ä»¥ç”¨äºfor12345678910for i in 1...100 &#123;    if i % 3 == 0 &#123;        print(i)    &#125;&#125;// ç”¨caseæ¥å†™for case let i in 1...100 where i%3 == 0 &#123;    print(i)&#125;\næ§åˆ¶è½¬ç§»\nç»™å¾ªç¯èµ·åå­—\n\n123456789// è¡¨ç¤ºå¦‚æœå¾—åˆ°ç»“æœï¼Œä¸ä»…breakå†…éƒ¨å¾ªç¯ï¼Œä¹Ÿç»“æŸå¤–éƒ¨å¾ªç¯findAnswer: for m in 1...300 &#123;    for n in 1...300 &#123;        if m*m*m*m - n*n == 15*m*n &#123;            print(m, n)            break findAnswer        &#125;    &#125;&#125;\nguard\nå®ˆå«ï¼Œå¦‚æœæ¡ä»¶ä¸æˆç«‹ï¼Œé‚£ä¹ˆå°†ä¼šæ‰§è¡Œelse\n\n1234567891011func fun(money:Int, price: Int, capacity:Int, volume: Int) &#123;    guard money &gt;= price else &#123;        print(\"Not enough money\")        return    &#125;    guard capacity &gt;= volume else &#123;        print(\"Not enough capacity\")        return    &#125;    print(\"I can buy it\")&#125;\nå­—ç¬¦ä¸²1var str = \"Hello, playground\"\n1. åˆ¤æ–­æ˜¯å¦ä¸ºç©º12var emptyString = \"\"emptyString.isEmpty\n2. æ’å€¼1234let name = \"xujiaji\"let age = 24let height = 1.7let s = \"My name is \\(name). I'm \\(age) years old. I'm \\(height) meters tall.\"\n3. å¾ªç¯å­—ç¬¦ä¸²123for c in str &#123;    print(c)&#125;\n4. å£°æ˜å­—ç¬¦1let mark: Character = \"!\"\n5. æ‹¼æ¥å­—ç¬¦1str.append(mark)\n6. å­—ç¬¦ä¸²é•¿åº¦1str.count\n7. å¾—åˆ°å­—ç¬¦ä¸²å¼€å¤´ä¸‹æ ‡ï¼š str.startIndex ï¼›å¾—åˆ°æœ«å°¾ä¸‹æ ‡ï¼šstr.endIndex8. å¾—åˆ°å­—ç¬¦ä¸²å‰5ä¸ªå­—ç¬¦ï¼ˆoffsetByè¡¨ç¤ºåç§»é‡ï¼‰1str[str.index(str.startIndex, offsetBy: 5)]\n9. å¾—åˆ°å­—ç¬¦ä¸²æŸä¸‹æ ‡çš„å‰ä¸€ä¸ªå­—ç¬¦æˆ–åä¸€ä¸ªå­—ç¬¦123let spaceIndex = str.index(str.startIndex, offsetBy: 6)str[str.index(before: spaceIndex)]str[str.index(after: spaceIndex)]\n10. å¾—åˆ°å¼€å§‹åˆ°spaceIndexä¸‹æ ‡ä¹‹é—´çš„å­—ç¬¦ä¸²1str[str.startIndex..&lt;spaceIndex]\n11. å¾—åˆ°ä¸€ä¸ªä¸‹æ ‡èŒƒå›´1let  range = startIndex..&lt;str.index(before: spaceIndex)\n12. å°†ä¸Šé¢èŒƒå›´æ›¿æ¢æˆHi1str.replaceSubrange(range, with: \"Hi\")\n13. æœ«å°¾æ’å…¥é—®å·1str.insert(\"?\", at: str.endIndex)\n14. ç§»é™¤å¯¹åº”ä¸‹æ ‡çš„å­—ç¬¦1str.remove(at: str.index(before: str.endIndex))\n15. ç§»é™¤æŸä¸ªä¸‹æ ‡èŒƒå›´å­—ç¬¦1str.removeSubrange(str.index(str.endIndex, offsetBy:-2)..&lt;str.endIndex)\n16. å¤§å°å†™è½¬æ¢123456// è½¬å¤§å†™str.uppercased()// è½¬å°å†™str.lowercased()// é¦–å­—å¤§å†™str.capitalized\n17. æ˜¯å¦åŒ…å«123456// æ˜¯å¦åŒ…å«Histr.contains(\"Hi\")// å‰ç¼€æ˜¯å¦æ˜¯Histr.hasPrefix(\"Hi\")// åç¼€æ˜¯å¦æ˜¯!!str.hasSuffix(\"!!\")\n18. æ ¼å¼åŒ–å­—ç¬¦ä¸²123456// ç»“æœï¼š 0.33333...let ss0 = \"one third is \\(1.0/3.0)\"// ç»“æœï¼š 0.33let ss1 = String(format: \"one third is %.2f\", 1.0/3.0)// ç»“æœï¼š 0.33let ss2 = NSString(format: \"one third is %.2f\", 1.0/3.0) as String\n19. å­—ç¬¦ä¸²æˆªå–1234567var ss3:NSString = \"one third is 0.33\"// ä»ä¸‹æ ‡4å¼€å§‹æˆªå–åˆ°æœ€åss3.substring(from: 4)// ä»å¼€å§‹æˆªå–åˆ°ä¸‹æ ‡3ss3.substring(to: 3)// æˆªå–ä¸‹æ ‡ä»4å¼€å§‹ï¼Œæˆªå–5ä¸ªé•¿åº¦ss3.substring(with: NSMakeRange(4, 5))\n20. String å’Œ NSStringçš„åŒºåˆ«\n\næœ‰ä¸€ä¸ªè¡¨æƒ…çš„æ—¶å€™Stringé•¿åº¦ä¸º1ï¼Œ NSStringé•¿åº¦ä¸º2\n\n21. å»é™¤å‰åå¤šä½™æ— æ•ˆå­—ç¬¦123let s6 = \"   --- Hello -----    \" as NSString// å»é™¤å‰åç©ºæ ¼å’Œä¸‹åˆ’çº¿s6.trimmingCharacters(in: CharacterSet(charactersIn: \" -\"))\nOptional1. å®šä¹‰å¯é€‰å‹123var errorCode: Int? = 404errorCode = nilvar imOptional: String? = nil\n2. å…·ä½“ç±»å‹å¯ä»¥èµ‹å€¼ç»™å¯é€‰é¡¹å‹ï¼Œä½†åè¿‡æ¥å¯é€‰å‹æ˜¯ä¸èƒ½èµ‹å€¼ç»™å…·ä½“ç±»å‹çš„ã€‚3. å¼ºåˆ¶è§£åŒ…ï¼Œä½†ä¸èƒ½ä¸ºnilå¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸1234var errorCode: Int? = nilerrorCode = 404// errorCode! å¼ºåˆ¶è§£åŒ…print(\"code\", errorCode!)\n4. åŠ ä¸Šnilåˆ¤æ–­1234567891011// ç¬¬ä¸€ç§å†™æ³•var errorCode: String? = nilif errorCode != nil &#123;    \"The errorCode is \" + errorCode!&#125;else &#123;    \"No error\"&#125;// ç¬¬äºŒç§å†™æ³•ï¼ˆç®€åŒ–ï¼‰ï¼Œç”¨ä¸¤ä¸ªé—®å·\"The errorCode is \\(errorCode ?? \"no error\")\"\n5. å¯é€‰å‹è§£åŒ…123456789101112131415161718var errorCode: String? = \"404\"if let errorCode = errorCode &#123;    \"The errorCode is \" + errorCode&#125;else &#123;    \"No error\"&#125;var errorMessage: String? = \"Not found\"// errorCodeæœ‰å€¼ï¼Œå¹¶ä¸”errorMessageæœ‰å€¼if let errorCode = errorCode, let errorMessage = errorMessage &#123;    \"The errorCode is \" + errorCode + \"\\nThe errorMessage is \" + errorMessage&#125;// errorCodeæœ‰å€¼ï¼Œå¹¶ä¸”errorMessageæœ‰å€¼ï¼Œå¹¶ä¸”errorCodeç­‰äº404if let errorCode = errorCode, let _ = errorMessage, errorCode == \"404\" &#123;    print(\"Page not found\")&#125;\n6. å¯é€‰å‹è°ƒç”¨12345678910111213141516var errorMessage: String? = \"Not Found\"// æ™®é€šåˆ¤æ–­è°ƒç”¨if let errorMessage = errorMessage &#123;    errorMessage.uppercased()&#125;// ?. æ–¹å¼è°ƒç”¨ï¼Œå’Œä¸Šé¢æ•ˆæœæ˜¯ä¸€æ ·çš„errorMessage?.uppercased()// å®šä¹‰ä¸ç”¨å†™â€œ? =â€æ–¹å¼ï¼Œå¯é€‰å‹çš„è°ƒç”¨çš„ç»“æœä¹Ÿæ˜¯å¯é€‰å‹çš„var uppercaseErrorMessage = errorMessage?.uppercased()// ä¹Ÿå¯ä»¥è°ƒç”¨åï¼Œå¦‚æœå­˜åœ¨ä½¿ç”¨è¯¥å¯¹è±¡if let errorMessage = errorMessage?.uppercased() &#123;    errorMessage&#125;\n6. å®é™…è¿ç”¨12345var ageInput: String = \"16\"var age = Int(ageInput) // è¿”å›çš„æ˜¯ï¼šInt?if let age = Int(ageInput), age &lt; 20 &#123;    print(\"You're a teenage\")&#125;\n7. éšå¼å¯é€‰ç±»å‹ï¼Œè¿ç”¨åœ¨èƒ½è‚¯å®šçš„è¡¨ç¤ºæœ‰å€¼çš„æƒ…å†µä¸‹12345678// åé¢è·Ÿï¼è¡¨ç¤ºæ˜¯éšå¼å¯é€‰ç±»å‹var errorMessage: String! = nilerrorMessage = \"Not Found\"\"The message is \" + errorMessageerrorMessage = nil// ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œæ‰€ä»¥éšå¼å¯é€‰ç±»å‹å±é™©çš„//\"The message is \" + errorMessage\nArray1. ç©ºæ•°ç»„çš„å®šä¹‰123456789101112131415// æœ‰æ•°æ®æ—¶çš„å®šä¹‰ï¼Œ æ³¨æ„ç±»å‹å¿…é¡»ç»Ÿä¸€var numbers = [1, 2, 3, 4, 5]var vowels = [\"A\", \"B\", \"C\"]// å®šä¹‰çš„æ—¶ç¡®å®šå¥½ç±»å‹//var numbers: [Int] = [0,1,2,3,4,5]// å®šä¹‰ç©ºæ•°ç»„var emptyArr1:[Int] = []var emptyArr2:Array&lt;Int&gt; = []var emptyArr3 = [Int]()var emptyArr4 = Array&lt;Int&gt;()// å®šä¹‰æ—¶ç»Ÿä¸€èµ‹å€¼var allZeros = Array&lt;Int&gt;(repeating: 0, count: 5) // [0, 0, 0, 0, 0]var allZeros2 = [Int](repeating: 0, count: 5) // [0, 0, 0, 0, 0]\n2. æ•°ç»„æŸ¥è¯¢åŸºæœ¬ä½¿ç”¨æ–¹å¼12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667var numbers = [1, 2, 3, 4, 5]var vowels = [\"A\", \"E\", \"I\", \"O\", \"U\"]var emptyArr = [Int]()// è·å–æ•°ç»„é•¿åº¦vowels.count// åˆ¤æ–­æ˜¯å¦ä¸ºç©ºnumbers.isEmpty // falseemptyArr.isEmpty // true// è·å–é¦–å…ƒç´ æˆ–æœ«å…ƒç´ vowels.first // \"A\"vowels.last // \"U\"emptyArr.first // nil// å¯é€‰å‹è§£åŒ…if let firstVomel = vowels.first &#123;    print(\"The first vowel is \" + firstVomel)&#125;// å¼ºåˆ¶è§£åŒ…ï¼Œç”±è‡ªå·±ä¿è¯å®‰å…¨vowels.first!// è·å–æ•°ç»„çš„æœ€å¤§å€¼æˆ–æœ€å°å€¼numbers.min()numbers.max()// ä»åŸæ•°ç»„ä¸­å–å‡ºå­æ•°ç»„numbers[2..&lt;4] // [3, 4]numbers[2..&lt;numbers.count] // [3, 4, 5]// åŒ…å«vowels.contains(\"A\") // truevowels.contains(\"B\") // false// è·å–ä¸‹æ ‡vowels.index(of: \"E\") // 1if let index = vowels.index(of: \"E\") &#123;    print(\"E is vowel in position \\(index+1).\")&#125;else &#123;    print(\"E is not a vowel.\")&#125;// é€šè¿‡ä¸‹æ ‡éå†for i in 0..&lt;numbers.count &#123;    numbers[i]&#125;// ç›´æ¥éå†å…ƒç´ for number in numbers &#123;    print(number)&#125;// åŒæ—¶éå†ä¸‹æ ‡å’Œå…ƒç´ for (i, vowel) in vowels.enumerated() &#123;    print(\"\\(i + 1): \\(vowel)\")&#125;// æ¯”è¾ƒï¼Œä¸javaä¸åŒï¼Œswiftæ¯”è¾ƒçš„æ˜¯å…ƒç´ var oneToFive = [1, 2, 3, 4, 5]numbers == oneToFive // true// ç”±äºæ¯”è¾ƒæ•°ç»„æ—¶ä¸å…ƒç´ çš„é¡ºåºæœ‰å…³ï¼Œæ‰€ä»¥ä¸‹æ–¹ç»“æœä¸ºfalsevar oneToFive2 = [1, 2, 4, 3, 5]numbers == oneToFive2 // false\n3. æ•°ç»„æ’å…¥å€¼çš„åŸºæœ¬æ“ä½œ123456789var courses = [\"A course\", \"B course\", \"C course\"]// æ·»åŠ å…ƒç´ courses.append(\"D course\") //[\"A course\", \"B course\", \"C course\", \"D course\"]courses += [\"E course\"] //[\"A course\", \"B course\", \"C course\", \"D course\", \"E course\"]// æ ¹æ®ä½ç½®æ’å…¥å…ƒç´ courses.insert(\"a course\", at: 1) //[\"A course\", \"a course\", \"B course\", \"C course\", \"D course\", \"E course\"]\n4. æ•°ç»„åˆ é™¤å…ƒç´ çš„åŸºæœ¬æ“ä½œ12345678910var courses = [\"A course\", \"B course\", \"C course\", \"D course\"]// åˆ é™¤æœ€åä¸€ä¸ªå…ƒç´ courses.removeLast() //\"D course\"// åˆ é™¤ç¬¬ä¸€ä¸ªå…ƒç´ courses.removeFirst() //\"A course\"courses // [\"B course\", \"C course\"]// ä»ä¸‹æ ‡0å¼€å§‹åˆ é™¤1ä¸ªcourses.removeSubrange(0..&lt;1) //[\"C course\"]// åˆ é™¤æ‰€æœ‰å…ƒç´ courses.removeAll()\n5. ä¿®æ”¹å…ƒç´ çš„åŸºæœ¬æ“ä½œ123456789101112var courses = [\"A course\", \"B course\", \"C course\", \"D course\"]// ä¿®æ”¹ä¸‹æ ‡ä¸º0çš„å…ƒç´ courses[0] = \"1 course\"courses // [\"1 course\", \"B course\", \"C course\", \"D course\"]// ä¿®æ”¹ä¸‹æ ‡1åˆ°2çš„å…ƒç´ courses[1...2] = [\"2 course\", \"3 course\"]courses // [\"1 course\", \"2 course\", \"3 course\", \"D course\"]// åˆå¹¶å¹¶ä¿®æ”¹0åˆ°2çš„å…ƒç´ courses[0...2] = [\"A course\"]courses // [\"A course\", \"D course\"]\nNSArray1. NSArrayæ˜¯ä¸€ä¸ªç±»ï¼ŒArrayæ˜¯ä¸€ä¸ªç»“æ„2. NSArrayé‡Œå¯ä»¥æ”¾ä¸åŒç±»å‹çš„å…ƒç´ ï¼Œå¦‚ï¼švar arr: NSArray = [1, &quot;Hello&quot;, 3.0]\nDict1. å­—å…¸çš„åˆå§‹åŒ–å’ŒæŸ¥è¯¢çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼12345678910111213141516171819202122232425262728293031323334353637383940414243// åˆ›å»ºä¸€ä¸ªæœ‰æ•°æ®çš„å­—å…¸var dict = [\"swift\": \"é›¨ç‡•ï¼›å¿«é€Ÿ\", \"python\": \"å¤§èŸ’\", \"java\":\"çˆªå“‡å²›\", \"groovy\": \"ç»å¦™çš„ï¼›æ—¶é«¦çš„\"]// åˆ›å»ºç©ºå­—å…¸var emptyDict1: [String:Int] = [:]var emptyDict2: Dictionary&lt;Int, String&gt; = [:]var emptyDict3 = [String:String]()var emptyDict4 = Dictionary&lt;Int, Int&gt;()// é€šè¿‡keyè·å–å­—å…¸æ•°æ®dict[\"swift\"] // \"é›¨ç‡•ï¼›å¿«é€Ÿ\"dict[\"C++\"] // nil// å¯é€‰å‹è§£åŒ…if let value = dict[\"swift\"] &#123;    print(\"swift çš„æ„æ€æ˜¯ï¼š\\(value)\")&#125;//å­—å…¸æ•°æ®çš„æ•°é‡dict.count // 4dict.isEmpty // falseemptyDict1.isEmpty // true//éå†æ‰€æœ‰keyfor key in dict.keys &#123;    print(key)&#125;// éå†æ‰€æœ‰valuefor value in dict.values &#123;    print(value)&#125;// éå†keyå’Œvaluefor (key, value) in dict &#123;    print(\"\\(key): \\(value)\")&#125;// ä¸¤ä¸ªå­—å…¸å¯¹æ¯”ï¼šæ¯”è¾ƒçš„keyå’Œå¯¹åº”çš„valueï¼Œç”±äºå­—å…¸æ˜¯æ— åºçš„ï¼Œå› æ­¤ä¸‹æ–¹ç­‰å¼ä¹Ÿæˆç«‹let dict1 = [1: \"A\", 2: \"B\", 3: \"C\"]let dict2 = [1: \"A\", 3: \"C\", 2: \"B\"]dict1 == dict2 // true\n2. å­—å…¸çš„ä¿®æ”¹å’Œåˆ é™¤1234567891011121314151617181920212223242526272829303132// letçš„å­—å…¸ä¸å¯ä¿®æ”¹var user = [\"name\": \"xujiaji\", \"password\": \"123456\", \"occupation\": \"programmer\"]// ä¿®æ”¹å€¼user[\"occupation\"] = \"freelancer\"// è°ƒç”¨æ–¹æ³•ä¿®æ”¹å€¼ä¼šè¿”å›ä¹‹å‰çš„å€¼user.updateValue(\"abcdefg\", forKey: \"password\") // \"123456\"user //[\"name\": \"xujiaji\", \"password\": \"abcdefg\", \"occupation\": \"freelancer\"]let oldPassword = user.updateValue(\"abcdefg\", forKey: \"password\")if let oldPassword = oldPassword, let newPassword = user[\"password\"], oldPassword == newPassword &#123;    print(\"æ³¨æ„ï¼šä¿®æ”¹åçš„å¯†ç å’Œä¹‹å‰çš„ä¸€æ ·ï¼Œå¯èƒ½å¯¼è‡´å®‰å…¨é—®é¢˜\")&#125;// ç›´æ¥æ·»åŠ æ–°çš„keyå’Œvalueuser[\"email\"] = \"jiajixu@qq.com\"user // [\"name\": \"xujiaji\", \"occupation\": \"freelancer\", \"email\": \"jiajixu@qq.com\", \"password\": \"abcdefg\"]// é€šè¿‡æ–¹æ³•æ·»åŠ æ–°çš„keyå’Œvalueuser.updateValue(\"https://blog.xujiaji.com\", forKey: \"website\") // niluser // [\"name\": \"xujiaji\", \"occupation\": \"freelancer\", \"email\": \"jiajixu@qq.com\", \"password\": \"abcdefg\", \"website\": \"https://blog.xujiaji.com\"]// åˆ é™¤keyå’Œvalueuser[\"website\"] = nil// é€šè¿‡è°ƒç”¨æ–¹æ³•åˆ é™¤keyå’Œvalueif let email = user.removeValue(forKey: \"email\") &#123;    print(\"ç”µå­é‚®ç®±\\(email)åˆ é™¤æˆåŠŸ\")&#125;// åˆ é™¤æ‰€æœ‰æ•°æ®user.removeAll()\nSet1. åˆå§‹åŒ–å’ŒåŸºæœ¬ä½¿ç”¨12345678910111213141516171819202122232425262728293031323334353637// åˆ›å»ºä¸€ä¸ªæœ‰æ•°æ®çš„Seté›†åˆï¼Œå’Œæ•°ç»„å®šä¹‰æ–¹å¼å·®ä¸å¤šï¼Œä½†æ˜¯åŠ ä¸Šäº†ç±»å‹ç”³æ˜var skillsOfA: Set&lt;String&gt; = [\"swift\", \"OC\"]// åˆ›å»ºç©ºSeté›†åˆvar emptySet1: Set&lt;String&gt; = []var emptySet2 = Set&lt;String&gt;()//é›†åˆæ˜¯æ— åºçš„ï¼Œå¹¶ä¸”æ²¡æœ‰é‡å¤var vowels = Set([\"A\", \"E\", \"I\", \"O\", \"U\", \"U\"]) //&#123;\"O\", \"A\", \"I\", \"U\", \"E\"&#125;var skillsOfB: Set = [\"HTML\", \"CSS\", \"JavaScript\"]// é›†åˆå…ƒç´ ä¸ªæ•°skillsOfA.count // 2var set: Set = [2, 2, 2, 2]set.count // 1// é›†åˆæ˜¯å¦ä¸ºç©ºskillsOfB.isEmpty // falseemptySet1.isEmpty // true// å¿«é€Ÿè·å–é›†åˆä¸­çš„ç¬¬ä¸€ä¸ªå…ƒç´ skillsOfA.first // \"swift\"// åŒ…å«skillsOfA.contains(\"swift\") // true// éå†for skill in skillsOfB &#123;    print(skill)&#125;// æ¯”è¾ƒçš„å€¼ï¼Œå’Œé¡ºåºæ— å…³let setA: Set = [1, 2, 3]let setB: Set = [3, 2, 1, 1, 1, 1]setA == setB // true\n2. å…ƒç´ çš„æ’å…¥å’Œåˆ é™¤1234567891011121314151617181920212223var skillsOfA: Set&lt;String&gt; = [\"swift\", \"OC\"]var skillsOfB: Set&lt;String&gt; = [\"HTML\", \"CSS\", \"Javacript\"]var skillsOfC: Set&lt;String&gt; = []// æ·»åŠ å…ƒç´ skillsOfC.insert(\"swift\")skillsOfC.insert(\"HTML\")skillsOfC.insert(\"CSS\")skillsOfC //&#123;\"swift\", \"CSS\", \"HTML\"&#125;// é‡å¤æ·»åŠ skillsOfC.insert(\"CSS\")skillsOfC //&#123;\"swift\", \"CSS\", \"HTML\"&#125;// åˆ é™¤å…ƒç´ skillsOfC.remove(\"CSS\")skillsOfC //&#123;\"swift\", \"HTML\"&#125;// åˆ é™¤æ²¡æœ‰çš„å…ƒç´ skillsOfC.remove(\"Javascript\") //nilif let _ = skillsOfC.remove(\"HTML\") &#123;    print(\"HTML is removed\")&#125;\n3. é›†åˆä¹‹é—´çš„æ“ä½œï¼šå¹¶é›†ã€äº¤é›†ã€å‡é›†ã€å¼‚æˆ–12345678910111213141516171819202122232425262728293031var skillsOfA: Set&lt;String&gt; = [\"swift\", \"OC\"]var skillsOfB: Set&lt;String&gt; = [\"HTML\", \"CSS\", \"Javacript\", \"Java\"]var skillsOfC: Set&lt;String&gt; = [\"swift\", \"Java\"]// å¹¶é›†skillsOfA.union(skillsOfC) //&#123;\"swift\", \"OC\", \"Java\"&#125;skillsOfA //&#123;\"swift\", \"OC\"&#125;// å¹¶é›†æ“ä½œåæ”¹å˜skillsOfAçš„å€¼skillsOfA.formUnion(skillsOfC) //&#123;\"swift\", \"OC\", \"Java\"&#125;skillsOfA //&#123;\"swift\", \"OC\", \"Java\"&#125;// äº¤é›†skillsOfB.intersection(skillsOfC) // &#123;\"Java\"&#125;skillsOfB // &#123;\"Java\", \"HTML\", \"CSS\", \"Javacript\"&#125;skillsOfB.formIntersection(skillsOfC) // &#123;\"Java\"&#125;skillsOfB // &#123;\"Java\"&#125;// å‡é›†skillsOfA.subtracting(skillsOfC)skillsOfA // &#123;\"swift\", \"OC\", \"Java\"&#125;skillsOfA.subtract(skillsOfC)skillsOfA // &#123;\"OC\"&#125;// å¼‚æˆ–skillsOfA.symmetricDifference(skillsOfC)skillsOfA // &#123;\"OC\"&#125;skillsOfA.formSymmetricDifference(skillsOfC)skillsOfA // &#123;\"OC\", \"swift\", \"Java\"&#125;// å¯æ“ä½œæ•°ç»„skillsOfA.union([\"Java\", \"Android\"])\n4. é›†åˆä¸­çš„å­é›†ï¼Œè¶…é›†åˆç›¸ç¦»çš„åˆ¤æ–­123456789101112131415161718var skillsOfA: Set&lt;String&gt; = [\"swift\", \"OC\"]var skillsOfB: Set&lt;String&gt; = [\"HTML\", \"CSS\", \"Javacript\", \"Java\"]var skillsOfC: Set&lt;String&gt; = [\"swift\", \"Java\"]var skillsOfD: Set = [\"swift\"]// æ˜¯å¦æ˜¯å­é›†ï¼ˆDæ˜¯å¦åŒ…å«Aï¼‰skillsOfD.isSubset(of: skillsOfA) // true// æ˜¯å¦æ˜¯çœŸå­é›† ï¼ˆDæ˜¯å¦åŒ…å«Aï¼Œå¹¶ä¸”D != Aï¼‰skillsOfD.isStrictSubset(of: skillsOfA) // true// æ˜¯å¦æ˜¯è¶…é›†ï¼ˆä¸å­é›†ç›¸åï¼‰skillsOfA.isSuperset(of: skillsOfD) // true// æ˜¯å¦æ˜¯çœŸè¶…é›†skillsOfA.isStrictSuperset(of: skillsOfD) // true// åˆ¤æ–­ç›¸ç¦»(ä¸¤é›†åˆæ²¡æœ‰å…±æœ‰å…ƒç´ )skillsOfA.isDisjoint(with: skillsOfB) // trueskillsOfA.isDisjoint(with: skillsOfC) // false\nFunctionå‚æ•°éƒ¨åˆ†1. æ–¹æ³•çš„åŸºæœ¬å®šä¹‰123456789101112131415161718192021222324252627282930313233//  å‡½æ•°çš„åŸºæœ¬æ„å»ºfunc sayHelloTo(name: String) -&gt; String &#123;    return \"Hello \" + name&#125;// è°ƒç”¨sayHelloTo(name: \"xujiaji\")// é€šè¿‡æ·»åŠ ä¸‹åˆ’çº¿ï¼Œè°ƒç”¨çš„æ—¶å€™å¯ä»¥çœç•¥å‚æ•°åfunc sayHelloTo(_ name: String) -&gt; String &#123;    return \"Hello \" + name&#125;sayHelloTo(\"xujiaji\")// å‡½æ•°å‚æ•°ä¸­åŒ…å«å¯é€‰å‹func sayHelloTo(name: String?) -&gt; String &#123;    return \"Hello \" + (name ?? \"Guest\")&#125;var nickname: String? = nilsayHelloTo(name: nickname)// æ²¡æœ‰å‚æ•°ä¸æ²¡æœ‰è¿”å›å€¼çš„å‚æ•°func printHello() &#123;    print(\"Hello\")&#125;// æ˜¾ç¤ºçš„è¯´æ˜æ²¡æœ‰è¿”å›å€¼//func printHello() -&gt; () &#123;//&#125;// Void = ()//func printHello() -&gt; Void &#123;//&#125;\n2. å†™ä¸€ä¸ªå¾—åˆ°æ•°ç»„ä¸­æœ€å¤§å’Œæœ€å°å€¼çš„æ–¹æ³•123456789101112131415161718192021func findMaxAndMin(numbers: [Int]) -&gt; (max: Int, min: Int)? &#123;    guard !numbers.isEmpty else &#123;        return nil    &#125;    var minValue = numbers[0]    var maxValue = numbers[0]    for number in numbers &#123;        minValue = min(minValue, number)        maxValue = max(maxValue, number)    &#125;    return (maxValue, minValue)&#125;var scores: [Int]? = [202, 1234, 5678, 334, 982, 555]scores = scores ?? []if let result = findMaxAndMin(numbers: scores!) &#123;    print(\"The max value is \\(result.max)\")    print(\"The min value is \\(result.min)\")&#125;\n3. æ–¹æ³•çš„å¤–éƒ¨å‚æ•°åå’Œå†…éƒ¨å‚æ•°å1234567891011121314151617181920212223// ä¸€èˆ¬å†™æ³•ï¼Œå†…éƒ¨å‚æ•°ååŒæ—¶ä¹Ÿæ˜¯å¤–éƒ¨å‚æ•°åfunc sayHelloTo(name: String, greeting: String) -&gt; String &#123;    return \"\\(greeting), \\(name)\"&#125;sayHelloTo(name: \"Playground\", greeting: \"Hello\")// ä¸ºå‚æ•°æä¾›å¤–éƒ¨å‚æ•°åï¼Œè®©è¯­ä¹‰æ›´åŠ çš„æ˜ç¡®func sayHello(to name: String, withGreetingWord greeting: String) -&gt; String &#123;    return \"\\(greeting), \\(name)\"&#125;sayHello(to: \"Playground\", withGreetingWord: \"Hello\")// ä¸€ä¸ªè®¡ç®—ä¹˜æ³•çš„æ–¹æ³•func mutiply(num1: Int, x num2: Int) -&gt; Int &#123;    return num1 * num2&#125;mutiply(num1: 4, x: 2)// ä¸‹æ–¹ä¹˜æ³•è™½è¯­ä¹‰æ˜ç¡®ä½†æ˜¯ï¼Œç¡®æ˜¾å¾—å¤æ‚ï¼Œç›´æ¥ä¼ å…¥ä¸¤ä¸ªå€¼ä¼šæ›´åŠ å¾—å½“ã€‚äºæ˜¯æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸‹åˆ’çº¿å¿½ç•¥å‚æ•°åfunc mutiply(_ num1: Int, _ num2: Int) -&gt; Int &#123;    return num1 * num2&#125;mutiply(4, 2)\n4. é»˜è®¤å‚æ•°å’Œå¯å˜å‚æ•°1234567891011121314151617181920212223// é»˜è®¤å‚æ•°çš„ä½¿ç”¨func sayHello(to name: String = \"Playground\", withGreetingWord greeting: String = \"Hello\", punctuation: String = \"!\") -&gt; String &#123;    return \"\\(greeting), \\(name)\\(punctuation)\"&#125;sayHello() // \"Hello, Playground!\"sayHello(to: \"Bob\") // \"Hello, Bob!\"sayHello(to: \"Bob\", withGreetingWord: \"Bye\") //\"Bye, Bob!\"// å¯å˜å‚æ•°çš„ä½¿ç”¨// è®¡ç®—å¹³å±€å€¼func mean(_ numbers: Double ... ) -&gt; Double &#123;    var sum: Double = 0    for number in numbers &#123;        sum += number    &#125;    return sum / Double(numbers.count)&#125;mean(1, 2, 3.4, 7.5)// printæ˜¯ä¸€ä¸ªéå¸¸å¥½çš„æœ‰é»˜è®¤å‚æ•°å’Œå¯å˜å‚æ•°çš„å‡½æ•°ï¼Œå¯å˜å‚æ•°ä¸ä¸€å®šæ”¾åœ¨æœ€åprint(\"Hello\", 1, 2, 3, separator: \",\", terminator: \".\") // \"Hello,1,2,3.\"\n5. å¸¸é‡å‚æ•°ã€å˜é‡å‚æ•°12345678910111213// å‡½æ•°çš„å‚æ•°é»˜è®¤éƒ½æ˜¯ä¸å¯å˜çš„func toBinary(_ num: Int) -&gt; String &#123;    // è®©ä¼ å…¥çš„å‚æ•°numç§°ä¸ºå¯å˜å‚æ•°    var num = num    var res = \"\"    repeat &#123;        res = String(num%2) + res        num /= 2    &#125; while num != 0    return res&#125;toBinary(12) // \"1100\"\n6. inout123456789101112131415161718192021222324252627// var å‚æ•°æ˜¯å€¼ä¼ é€’ï¼Œä¸èƒ½å»¶ç»­åˆ°å‡½æ•°ä½“å¤–é¢var x = 100toBinary(x)x// å¦‚æœéœ€è¦å»¶ç»­åˆ°å¤–é¢func swapTwoInt(a: inout Int, b: inout Int) &#123;//    let t: Int = a//    a = b//    b = t// é€šè¿‡å…ƒç»„å¯ç›´æ¥äº¤æ¢å€¼    (a, b) = (b, a)&#125;var a: Int = 1var b: Int = 2// ä¼ å…¥aå’Œbçš„å¼•ç”¨swapTwoInt(a: &amp;a, b: &amp;b)ab// swiftæä¾›çš„äº¤æ¢æ–¹æ³•swap(&amp;a, &amp;b)ab\nç±»å‹éƒ¨åˆ†1. å‡½æ•°ç±»å‹çš„åŸºæœ¬æ¦‚å¿µ12345678910111213141516171819// å‡½æ•°ç±»å‹func add(_ a: Int, _ b: Int) -&gt; Int &#123;    return a + b&#125;// æ–¹æ³•ä¹Ÿå¯ä»¥èµ‹å€¼let anotherAdd = add// ä¹Ÿå¯ä»¥å£°æ˜ç±»å‹// let anotherAdd: (Int,Int)-&gt;Int = addanotherAdd(3, 4)func sayHello(to name: String) &#123;    print(\"Hello, \\(name)!\")&#125;let anotherSayHello1 = sayHellolet anotherSayHello2: (String) -&gt; () = sayHellolet anotherSayHello3: (String) -&gt; Void = sayHello\n2. å¦‚ä½•ä½¿ç”¨å‡½æ•°ç±»å‹ï¼Ÿ1234567891011121314151617181920212223242526272829var arr: [Int] = []for _ in 0..&lt;100 &#123;    arr.append(Int(arc4random() % 1000))&#125;arr// é»˜è®¤æ’åºarr.sort()arr// åœ¨æ’åºä¸­ä½¿ç”¨å‡½æ•°å‚æ•°func biggerNumberFirst(_ a: Int, _ b: Int) -&gt; Bool &#123;    return a &gt; b&#125;// æ’åºä½¿ç”¨æˆ‘ä»¬è‡ªå·±å®šä¹‰çš„è§„åˆ™arr.sort(by: biggerNumberFirst)arrfunc cmpByNumberString(_ a: Int, _ b: Int) -&gt; Bool &#123;    return String(a) &lt; String(b)&#125;arr.sort(by: cmpByNumberString)func near500(_ a: Int, _ b: Int) -&gt; Bool &#123;    return abs(a - 500) &lt; abs(b - 500)&#125;// è¿”å›æ’åºç»“æœï¼Œæ’åºä¸ä¼šå½±å“arrçš„é¡ºåºarr.sorted(by: near500)arr\n3. å®šä¹‰å‡½æ•°ç±»å‹å‚æ•°1234567891011121314151617181920func changeScores(_ scores: inout [Int], by changeScore: (Int)-&gt;Int) &#123;    for (i, score) in scores.enumerated() &#123;        // ä¸éœ€è¦çŸ¥é“æ–¹æ³•çš„å…·ä½“å®šä¹‰        scores[i] = changeScore(score)    &#125;&#125;func change1(score: Int) -&gt; Int &#123;    return Int(sqrt(Double(score)) * 10)&#125;func change2(score: Int) -&gt; Int &#123;    return score + 3&#125;var scores1 = [36, 61, 78, 89, 99]changeScores(&amp;scores1, by: change1) // [60, 78, 88, 94, 99]var scores2 = [88, 101, 124, 137, 150]changeScores(&amp;scores2, by: change2) // [91, 104, 127, 140, 153]\n4. é«˜é˜¶å‡½æ•°mapã€filterã€reduce12345678910111213141516171819202122232425262728293031func change(num: Int) -&gt; Int &#123;    return num + 2&#125;var numbers = [65, 91, 45, 89, 99]// mapnumbers.map(change) //[67, 93, 47, 91, 101]func isPassOrFail(num: Int) -&gt; String &#123;    return num &lt; 60 ? \"Fail\" : \"Pass\"&#125;numbers.map(isPassOrFail) //[\"Pass\", \"Pass\", \"Fail\", \"Pass\", \"Pass\"]// filterfunc fail(num: Int) -&gt; Bool &#123;    return num &lt; 60&#125;numbers.filter(fail) //[45]// reducefunc add(num1: Int, num2: Int) -&gt; Int &#123;    return num1 + num2&#125;numbers.reduce(0, add) //389numbers.reduce(0, +) //389func concatenate(str: String, num: Int) -&gt; String &#123;    return str + String(num) + \" \"&#125;numbers.reduce(\"\", concatenate) //\"65 91 45 89 99 \"\n5. å‡½æ•°ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹12345678910111213141516171819func tier1MailFee(weight: Int) -&gt; Int &#123;    return 1 * weight&#125;func tier2MailFee(weight: Int) -&gt; Int &#123;    return 3 * weight&#125;func feeByUnitPrice(price: Int, weight: Int) -&gt; Int &#123;    // å‡½æ•°ä½œä¸ºå‡½æ•°çš„è¿”å›ç±»å‹    func chooseMailFee(by weight: Int) -&gt; (Int) -&gt; Int &#123;        return weight &lt;= 10 ? tier1MailFee : tier2MailFee    &#125;    let mailFeeByWeight = chooseMailFee(by: weight)    return mailFeeByWeight(weight) + price * weight&#125;feeByUnitPrice(price: 50, weight: 8)\né—­åŒ…1. åŸºæœ¬ä½¿ç”¨æ–¹å¼123456789101112var arr = [3, 2, 4, 5, 8]// ä¹‹å‰çš„å†™æ³•func bigger(a: Int, b: Int) -&gt; Bool &#123;    return a &gt; b&#125;arr.sort(by: bigger) // [8, 5, 4, 3, 2]// é—­åŒ…çš„å†™æ³•arr.sort(by: &#123; (a: Int, b: Int) -&gt; Bool in    return a &gt;  b&#125;) // [8, 5, 4, 3, 2]\n2. ä¸Šé¢çš„ä»£ç å¯ç®€å†™1234567891011121314// å¦‚æœé—­åŒ…åªæœ‰ä¸€è¡Œä»£ç ï¼Œå¯æ”¾åœ¨åŒä¸€è¡Œarr.sort(by: &#123; (a: Int, b: Int) -&gt; Bool in return a &gt; b &#125;)// ç”±äºè‡ªåŠ¨ä¼šå¾—åˆ°å‚æ•°å’Œè¿”å›å€¼ç±»å‹ï¼Œ å¯è¿™æ ·å†™arr.sort(by: &#123; a, b in return a &gt; b&#125;)// ç”±äºçŸ¥é“éœ€è¦returnï¼Œå¯ç®€å†™ä¸ºarr.sort(by: &#123; a, b in a &gt; b&#125;)// ç”±äºå‚æ•°æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå…ƒç»„æœ‰æ ‡è¯†ï¼Œå¯ç®€å†™ä¸ºarr.sort(by: &#123; $0 &gt; $1 &#125;)// ç”±äºâ€œ&gt;â€æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°arr.sort(by: &gt;)\n3. ç»“å°¾é—­åŒ…çš„ä½¿ç”¨12345678910111213141516171819202122232425var arr = [3, 2, 4, 5, 8]arr.sort(by: &#123; a, b in return a &gt; b &#125;)// å¦‚æœå‡½æ•°å‚æ•°åœ¨æœ€åï¼Œæˆ‘ä»¬å¯ä»¥æ˜¯ä½¿ç”¨ç»“å°¾é—­åŒ…arr.sort() &#123; a, b in    return a &gt; b&#125;// å¦‚æœæ²¡æœ‰å…¶ä»–å‚æ•°ï¼Œå¯å°†å°æ‹¬å·å¤œçœç•¥äº†arr.sort &#123; a, b in    return a &gt; b&#125;// å°†æ•°ç»„ä¸­çš„åè¿›åˆ¶æ•°å­—å…¨éƒ¨æ”¹ä¸ºäºŒè¿›åˆ¶arr.map&#123; number -&gt; String in    // å°†numberçš„ä¸å¯å˜æ”¹ä¸ºå¯å˜    var number = number    var res = \"\"    repeat &#123;        res = String(number % 2) + res        number /= 2    &#125; while number != 0    return res&#125;\n4. å°¾é—­åŒ…åœ¨IOSåŠ¨ç”»ä¸­çš„è¿ç”¨12345678910111213let showView = UIView(frame: CGRect(x: 0, y: 0, width: 300, height: 300))let rectangle = UIView(frame: CGRect(x: 0, y: 0, width: 50, height: 50))rectangle.center = showView.centerrectangle.backgroundColor = UIColor.redshowView.addSubview(rectangle)UIView.animate(withDuration: 2.0) &#123;    rectangle.backgroundColor = UIColor.blue    rectangle.frame = showView.frame&#125;import PlaygroundSupportPlaygroundPage.current.liveView = showView\n5. é—­åŒ…ï¼Œå†…å®¹æ•è·123456// æ•°å€¼æ•è·// ç”³æ˜å˜é‡var num = 300arr.sort&#123; a , b in    abs(a-num) &lt; abs(b-num)&#125;\n6. é—­åŒ…å’Œå‡½æ•°æ˜¯å¼•ç”¨ç±»å‹12345678910111213func runningMetersWithMetersPerDay(_ metersPerDay: Int) -&gt; () -&gt; Int &#123;    var totalMeters = 0    return &#123;        totalMeters += metersPerDay        return totalMeters    &#125;&#125;var planA = runningMetersWithMetersPerDay(2000)// æ³¨æ„æ¯æ¬¡éƒ½ä¸æ˜¯ä»0å¼€å§‹ç›¸åŠ ï¼Œå› ä¸ºè¿”å›çš„æ˜¯é—­åŒ…çš„å¼•ç”¨planA() //2000planA() //4000planA() //6000\nenum1. æšä¸¾çš„åŸºæœ¬ä½¿ç”¨123456789101112131415161718192021222324252627282930313233343536// å®šä¹‰æšä¸¾ç±»å‹enum Month &#123;    case January    case February    case March    case April    case May    case June    case July    case August    case September    case October    case November    case December&#125;// å®šä¹‰æšä¸¾ä¹Ÿå¯ä»¥å†™æˆä¸€è¡Œenum Season &#123;    case Spring, Summer, Autumn, Winter&#125;// å¦‚æœç¡®å®šäº†æšä¸¾ç±»å‹ï¼Œåˆ™å¯ä»¥çœç•¥æšä¸¾åå­—ï¼Œå¦‚ï¼šMonth.March å†™æˆ .Marchfunc season(month: Month) -&gt; Season &#123;    switch month &#123;    case .March, .April, .May:        return .Spring    case .June, .July, .August:        return .Summer    case .September, .October, .November:        return .Autumn    case .December, .January, .February:        return .Spring    &#125;&#125;season(month: Month.April) //Spring\n2. æšä¸¾çš„åŸå§‹å€¼1234567891011121314151617181920212223242526272829303132333435363738394041// enum Month: Int è¡¨åMonthçš„åŸå§‹å€¼æ˜¯intç±»å‹çš„ï¼Œå¹¶ä¸”åŸå§‹å€¼ä¼šè‡ªåŠ¨é€’å¢enum Month: Int&#123;    case January = 1, Febuary, March, April, May, June, July, August, September, October, November, December&#125;// è¿”å›è·ç¦»æ–°çš„ä¸€å¹´è¿˜æœ‰å¤šå°‘ä¸ªæœˆï¼ŒrawValueå¾—åˆ°åŸå§‹å€¼func monthBeforeNewYear(month: Month) -&gt; Int &#123;    return 12 - month.rawValue&#125; // 4// å¯ä»¥é€šè¿‡åŸå§‹å€¼è·å–åˆ°å¯¹åº”çš„æšä¸¾å€¼if let theMonth = Month(rawValue: 8) &#123;    print(\"\\(monthBeforeNewYear(month: theMonth)) months before New Year!\") //4 months before New Year!&#125;// raw valueä¸ºæ•´å‹çš„æšä¸¾ç±»å‹ï¼Œå¦‚æœä¸æ˜¾ç¤ºç»™å‡ºæ•´å‹å€¼ï¼Œåˆ™ä»0å¼€å§‹enum Grade: Int&#123;    case F,E,D,C,B,A&#125;// æšä¸¾ç±»å‹çš„raw valueå€¼ä¸ä¸€å®šæ˜¯é¡ºåºçš„enum Coin: Int&#123;    case Penny = 1    case Nickel = 5    case Dime = 10    case Quarter = 25&#125;let coin: Coin = .Quarterprint(\"It's \\(coin.rawValue) cents\") //It's 25 cents// ä½¿ç”¨Stringä½œä¸ºraw valueï¼Œå¦‚æœæˆ‘ä»¬æ²¡æœ‰ç¡®å®šåŸå§‹å€¼ï¼Œé‚£ä¹ˆswiftä¼šè‡ªåŠ¨ä»¥æšä¸¾å€¼çš„åå­—ä½œä¸ºåŸå§‹å€¼enum ProgrammingLanguage2: String&#123;    case Swift    case ObjectiveC = \"Objective-C\"    case C    case Java&#125;let myFavoriteLanguage2: ProgrammingLanguage2 = .Swiftprint( \"\\(myFavoriteLanguage2.rawValue) is my favorite language.\") //Swift is my favorite language.\n3. å¹¶è”å€¼12345678910111213141516171819202122232425262728293031// Associate Value å’Œ Raw value åªèƒ½å­˜åœ¨ä¸€ä¸ªenum ATMStatus &#123;    case Success(Int)    case Error(String)    case Waiting // ä¹Ÿå¯ä»¥æ²¡æœ‰Associate Value&#125;// ä½™é¢var balance = 1000// è·å–ATMStatusfunc withdraw(amount: Int) -&gt; ATMStatus &#123;    if balance &gt;= amount &#123;        balance -= amount        return .Success(balance)    &#125;    else &#123;        return .Error(\"Not enough money\")    &#125;&#125;// è§£åŒ…ç›¸åº”çš„ Associate Valueï¼Œä¹Ÿå¯å¿½ç•¥ï¼Œå°±åƒ.Waitingé‚£æ ·å°±è¡Œäº†switch withdraw(amount: 100) &#123;case let .Success(newBlance):    print(\"\\(newBlance) Yuan left in your account\")case let .Error(errorMesssage):    print(\"Error:\\(errorMesssage)\")case .Waiting:    print(\"Waiting for processing\")&#125;\n4. æœ‰å¤šä¸ªå¹¶è”å€¼çš„æƒ…å†µ1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162// Associate valueå…¶å®åªæœ‰ä¸€ä¸ªï¼Œå…¶å®ä¸‹é¢è¡¨ç¤ºçš„æ˜¯ä¸€ä¸ªå…ƒç»„ï¼Œå¹¶ä¸”ä¸ºå…ƒç»„ç±»å‹å–äº†ä¸ªåå­—enum Shape &#123;    case Square(side: Double)    case Rectangle(width: Double, height: Double)    case Circle(centerx: Double, centery: Double, radius: Double)    case Point&#125;// åˆå§‹åŒ–ä¸€äº›å›¾å½¢let square = Shape.Square(side: 10)let rectangle = Shape.Rectangle(width: 20, height: 30)let circle = Shape.Circle(centerx: 0, centery: 0, radius: 15)let point = Shape.Point// è®¡ç®—è¡¨é¢ç§¯func area(shape: Shape) -&gt; Double &#123;    switch shape &#123;    case let .Square(side):        return side * side    case let .Rectangle(width, height):        return width * height    case let .Circle(_, _, r): // é€šè¿‡ä¸‹åˆ’çº¿å¿½ç•¥ä¸ç”¨çš„å‚æ•°        return .pi * r * r    case .Point:        return 0    &#125;&#125;// å¾—å‡ºè¡¨é¢ç§¯çš„ç»“æœarea(shape: square)area(shape: rectangle)area(shape: circle)area(shape: point)// ====================================================================// enumå¯ä»¥æœ‰æ–¹æ³•enum Shape&#123;    case Square(side: Double)    case Rectangle(width: Double, height: Double)    case Circle(centerx: Double, centery: Double, radius: Double)    case Point    func area() -&gt; Double&#123;        switch self &#123;        case let .Square(side):            return side*side        case let .Rectangle( width , height ):            return width * height        case let .Circle( _ , _ , r ):            //swift 2: return M_PI*r*r            //swift3ä¸­PIæ”¾åœ¨äº†Doubleç±»ä¸‹ã€‚è¿™æ ·æ˜¯ä¸æ˜¯æ›´æ–¹ä¾¿è®°å¿†ï¼Ÿ            return .pi*r*r      //swift 3        case .Point:            return 0        &#125;    &#125;&#125;// ä½¿ç”¨let square = Shape.Square(side: 10)square.area()\n5. å¯é€‰å‹å®é™…ä¸Šæ˜¯æšä¸¾ç±»å‹123456789101112131415161718192021222324var age: Int? = 17print(age!)age = nil// å¯ä»¥çœ‹åˆ°å¯é€‰ç±»å‹å¯ä»¥é€šè¿‡æšä¸¾çš„æ–¹å¼èµ‹å€¼age = .some(2) // 2var website: Optional&lt;String&gt; = Optional.some(\"blog.xujiaji.com\")website = .none // nil// ä»¥enumçš„è§’åº¦æ¥è¿›è¡Œè§£åŒ…switch website &#123;case .none:    print(\"No website\")case let .some(website):    print(\"The website is \\(website)\")&#125;// ä»¥Optionalçš„æ–¹å¼è§£åŒ…if let website = website &#123;    print(\"The website is \\(website)\")&#125;else &#123;    print(\"No website\")&#125;\n6. æšä¸¾çš„é€’å½’è°ƒç”¨123456789101112131415161718192021222324252627// æšä¸¾é€’å½’ï¼Œä½¿ç”¨indirectå…³é”®å­—ã€‚ä¹Ÿå¯ä»¥ç›´æ¥åŠ åœ¨enumå…³é”®å­—åé¢ï¼ˆå¦‚ï¼šenum indirect ArithmeticExpressionï¼‰ï¼Œæ­¤æ—¶caseå…³é”®å­—å‰é¢å°±ä¸å¿…åŠ äº†enum ArithmeticExpression &#123;    case Number(Int)    indirect case Addition(ArithmeticExpression, ArithmeticExpression)    indirect case Multiplication(ArithmeticExpression, ArithmeticExpression)&#125;// è®¡ç®— (5 + 4) * 2let five = ArithmeticExpression.Number(5)let four = ArithmeticExpression.Number(4)let sum = ArithmeticExpression.Addition(five, four)let two = ArithmeticExpression.Number(2)let prouct = ArithmeticExpression.Multiplication(sum, two)func evaluate(_ expression: ArithmeticExpression) -&gt; Int &#123;    switch expression &#123;    case let .Number(value):        return value    case let .Addition(left, right):        return evaluate(left) + evaluate(right)    case let .Multiplication(left, right):        return evaluate(left) * evaluate(right)    &#125;&#125;// è®¡ç®—ç»“æœevaluate(prouct)\n7. æšä¸¾æ˜¯å€¼ç±»å‹\nstruct1. ç»“æ„ä½“çš„åŸºæœ¬ä½¿ç”¨123456789101112131415161718192021222324// å£°æ˜ä¸€ä¸ªç»“æ„ä½“struct Location &#123;    let latitude: Double    let longitude: Double&#125;// åˆå§‹åŒ–ç»“æ„ä½“let appleHeadQuarterLocation = Location(latitude: 37.3230, longitude: -122.0322)let googleHeadQuarterLocation: Location = Location(latitude: 37.4220, longitude: -122.0841)// è·å–å±æ€§å€¼appleHeadQuarterLocation.latitudegoogleHeadQuarterLocation.longitude// ç»“æ„ä½“ä¸­æœ‰ç»“æ„ä½“struct Place &#123;    let location: Location    var name: String&#125;var googleHeadQuarter = Place(location: googleHeadQuarterLocation, name: \"Google\")// å› ä¸ºå£°æ˜çš„æ˜¯varï¼Œæ‰€ä»¥å¯ä¿®æ”¹googleHeadQuarter.name = \"G\"\n2. ç»“æ„ä½“çš„åˆå§‹åŒ–ç»“æ„ä½“é‡å®šä¹‰çš„å¸¸é‡æˆ–å˜é‡éƒ½å¿…é¡»åˆå§‹åŒ–ã€‚å¯é€‰å‹å¯ä»¥ä¸ç”¨åˆå§‹åŒ–ï¼Œå› ä¸ºé»˜è®¤åˆå§‹å€¼ä¸ºnilï¼Œè¯•äº†ä¸‹å¯é€‰å‹éœ€è¦æ˜¯varï¼Œå¦‚æœæ˜¯letï¼Œåˆ™å¿…é¡»ç›´æ¥èµ‹å€¼ã€‚123456789101112131415161718192021222324252627282930313233343536struct Location &#123;    let latitude: Double    let longitude: Double    // è‡ªå®šä¹‰æ„é€ ï¼Œ å½“è‡ªå·±å†™äº†æ„é€ å‡½æ•°åå°±æ²¡æœ‰äº†é»˜è®¤çš„æ„é€ å‡½æ•°    init(coordinateString: String) &#123;        let commaIndex = coordinateString.range(of: \",\")!.lowerBound //å¾—åˆ°é€—å·çš„ä¸‹æ ‡        let firstElement = coordinateString[..&lt;commaIndex]        let secondElement = coordinateString[coordinateString.index(after: commaIndex)...]        latitude = Double(firstElement)!        longitude = Double(secondElement)!    &#125;    // å½“æ²¡æœ‰é»˜è®¤çš„æ„é€ çš„æ—¶å€™ï¼Œæˆ‘ä»¬å¯ä»¥è‡ªå·±æ·»åŠ è¿™ä¸ªæ„é€     init(latitude: Double, longitude: Double) &#123;        self.latitude = latitude        self.longitude = longitude    &#125;    init() &#123;        latitude = 0.0        longitude = 0.0    &#125;    // é»˜è®¤åˆå§‹å€¼ä¸ºnil    var placeName: String?    init(latitude: Double, longitude: Double, placeName: String) &#123;        self.latitude = latitude        self.longitude = longitude        self.placeName = placeName    &#125;&#125;let location = Location(coordinateString: \"111.1234,222.3333\")location.latitude // 111.1234location.placeName // nil\n3. å¤±è´¥çš„æ„é€ å‡½æ•°\n\nå°±æ˜¯è¯´æ„é€ å‡½æ•°å¯ä»¥æ˜¯å¤±è´¥çš„ï¼Œå½“æˆ‘ä»¬return nilæ—¶å€™ã€‚ä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åˆå§‹åŒ–ç»“æ„ä½“çš„æ—¶å€™å¾—åˆ°çš„æ˜¯å¯é€‰å‹\nç”¨guardå¯ä»¥è½»æ¾ç®€åŒ–if elseåµŒå¥—çš„åˆ¤æ–­ä»£ç \n\n12345678910111213141516171819struct Location &#123;    let latitude: Double    let longitude: Double    init?(coordinateString: String) &#123;        guard let commaIndex = coordinateString.range(of: \",\")?.lowerBound else &#123;            return nil        &#125;        guard let firstElement = Double(coordinateString[..&lt;commaIndex]) else &#123;            return nil        &#125;        guard let secondElement = Double(coordinateString[coordinateString.index(after: commaIndex)...]) else &#123;            return nil        &#125;        latitude = firstElement        longitude = secondElement    &#125;&#125;\n\nguardè¿˜å¯ä»¥å°†ä¸Šé¢çš„ä»£ç ä¼˜åŒ–\n\n12345678910111213141516struct Location &#123;    let latitude: Double    let longitude: Double    init?(coordinateString: String) &#123;        guard            let commaIndex = coordinateString.range(of: \",\")?.lowerBound,            let firstElement = Double(coordinateString[..&lt;commaIndex]),            let secondElement = Double(coordinateString[coordinateString.index(after: commaIndex)...])        else &#123;            return nil        &#125;        latitude = firstElement        longitude = secondElement    &#125;&#125;\n4. ç»“æ„ä½“ä¸­å¯å®šä¹‰æ–¹æ³•ï¼Œ è¿™é‡Œç›´æ¥åœ¨ä¸Šé¢ä»£ç ä¸­æ·»åŠ æ–¹æ³•123456789101112131415161718struct Location &#123;    ...    func printLocation() &#123;        print(\"The Location is \\(self.latitude), \\(self.longitude)\")    &#125;    func isNorth() -&gt; Bool &#123;        return self.latitude &gt; 0    &#125;    func isSouth() -&gt; Bool &#123;        return !self.isNorth()    &#125;    func distanceTo(location: Location) -&gt; Double &#123;        return sqrt(pow(self.latitude - location.latitude, 2) + pow(self.longitude - location.longitude, 2))    &#125;&#125;\n5. ç»“æ„ä½“æ˜¯å€¼ç±»å‹çš„ï¼Œå°±æ˜¯å½“åšå€¼æ¥å‡ºæ¥ï¼Œèµ‹å€¼å³æ˜¯æ‹·è´6. Int, Float, Double, Bool, String, Array, Dictionary, Set ç­‰éƒ½æ˜¯ç»“æ„ä½“\nclass1. ç±»çš„åŸºæœ¬ä½¿ç”¨æ–¹å¼ç±»ä¸åƒç»“æ„ä½“ä¸€æ ·ï¼Œç±»ä¸èƒ½è‡ªåŠ¨åˆå§‹åŒ–ï¼Œå› æ­¤æˆ‘ä»¬éœ€è¦è‡ªå·±ä¸ºå˜é‡èµ‹å€¼12345678910111213141516171819202122232425262728class Person &#123;    var firstName: String    var lastName: String    init(firstName: String, lastName: String) &#123;        self.firstName = firstName        self.lastName = lastName    &#125;    // ç±»å’Œç»“æ„ä½“ä¸€æ ·ï¼Œä¹Ÿå¯ä»¥å®šä¹‰å¯ä»¥å¤±è´¥çš„æ„é€     init?(fullName: String) &#123;        guard let spaceIndex = fullName.range(of: \" \")?.lowerBound else &#123;            return nil        &#125;        firstName = String(fullName[..&lt;spaceIndex])        lastName = String(fullName[fullName.index(after: spaceIndex)...])    &#125;    func fullName() -&gt; String &#123;        return \"\\(self.firstName) \\(self.lastName)\"    &#125;&#125;let person1 = Person(firstName: \"Alexander\", lastName: \"Hamilton\")person1.fullName() // \"Alexander Hamilton\"let person2 = Person(fullName: \"Jiaji Xu\")person2?.firstName //\"Jiaji\"\n2. ç±»æ˜¯å¼•ç”¨ç±»å‹1234567891011121314class Person &#123;    var name: String    init(name: String) &#123;        self.name = name    &#125;&#125;let person1 = Person(name: \"Tom\")person1.name // Tomlet person2 = person1person2.name = \"Bob\"person2.name // Bobperson1.name // Bob\n3. æ–¹æ³•çš„å¯å˜å’Œä¸å¯å˜\n\nç±»çš„æ–¹æ³•ä¸­å¯æ”¹å˜å˜é‡çš„å€¼\n\n123456789101112131415class Person &#123;    var name: String    var career: String    init(name: String, career: String) &#123;        self.name = name        self.career = career    &#125;    func change(career: String) &#123;        self.career = career    &#125;&#125;let person = Person(name: \"Bob\", career: \"Developer\")person.change(career: \"Teacher\")\n\nç»“æ„ä½“ç”±äºæ˜¯å€¼ä¼ é€’ï¼Œæ‰€ä»¥ä¸å¯æ”¹å˜å˜é‡çš„å€¼ï¼Œåƒä¸Šé¢å†™ä¼šæŠ¥é”™ï¼Œæç¤ºimmutableï¼ˆä¸å¯å˜ï¼‰ã€‚ä½†æ˜¯å¯ä»¥ä¸ºæ–¹æ³•åŠ ä¸Šå…³é”®å­—mutatingï¼Œæ¯æ¬¡æ”¹å˜éƒ½ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬è¦†ç›–æ—§çš„å€¼\n\n1234567891011121314151617181920enum Switch&#123;    case On    case Off    mutating func click()&#123;        switch self&#123;        case .On:            self = .Off        case .Off:            self = .On        &#125;    &#125;&#125;var button = Switch.Offbutton.click()var button2 = Switch.Onbutton == button2\n4. ç±»ä¸ç±»ä¹‹é—´çš„ç­‰ä»·ï¼Œæ¯”è¾ƒä¸¤ä¸ªå˜é‡æ˜¯å¦æŒ‡å‘çš„åŒä¸€ä¸ªä¸œè¥¿1234567891011121314151617class Person &#123;    var name: String    init(name: String) &#123;        self.name = name    &#125;&#125;let person1 = Person(name: \"Bob\")let person2 = person1// ä¸èƒ½ä½¿ç”¨â€œ==â€åˆ¤æ–­ï¼š// person1 == person2person1 === person2 // truelet person3 = Person(name: \"Bob\")person1 === person3 // falseperson1 !== person3 // true\n5. ä»€ä¹ˆæ—¶å€™ç”¨ç±»ä»€ä¹ˆæ—¶å€™ç”¨ç»“æ„ä½“\n\næŠŠç»“æ„ä½“çœ‹ä½œæ˜¯å€¼\nä½ç½® ï¼ˆç»çº¬åº¦ï¼‰\nåæ ‡ ï¼ˆäºŒç»´ï¼Œä¸‰ç»´åæ ‡ï¼‰\næ¸©åº¦\nâ€¦\n\n\næŠŠç±»çœ‹ä½œæ˜¯ç‰©ä½“\näºº\nè½¦\nåŠ¨ç‰©\nâ€¦\n\n\nå¦‚æœä¸å¸Œæœ›æ¯æ¬¡ä¼ é€’éƒ½åˆ›å»ºä¸€ä¸ªæ–°çš„å‰¯æœ¬ï¼Œé‚£ä¹ˆå°±ç”¨ç±»ï¼Œå¦åˆ™ç”¨ç»“æ„ä½“\nç±»å¯ä»¥è¢«ç»§æ‰¿\nç»“æ„ä½“æ¯”ç±»æ›´åŠ â€œè½»é‡çº§â€\n\nå±æ€§å’Œæ–¹æ³•1. è®¡ç®—å‹å±æ€§ï¼šè‡ªåŠ¨æ›´å…·å…¶ä»–ä¿¡æ¯è®¡ç®—å‡ºå€¼1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859struct Point &#123;    var x = 0.0    var y = 0.0&#125;struct Size &#123;    var width = 0.0    var height = 0.0&#125;class Rectangle &#123;    var origin: Point    var size: Size    init(origin: Point, size: Size) &#123;        self.origin = origin        self.size = size    &#125;    // å†™æ³•ä¸€//    var center: Point &#123;//        let centerX = origin.x + size.width / 2//        let centerY = origin.y + size.height / 2//        return Point(x: centerX, y: centerY)//    &#125;    // å†™æ³•äºŒ//    var center: Point &#123;//        get &#123;//            let centerX = origin.x + size.width / 2//            let centerY = origin.y + size.height / 2//            return Point(x: centerX, y: centerY)//        &#125;//    &#125;    // å†™æ³•ä¸‰ï¼šä¸Šé¢çš„å†™æ³•æ˜¯åªè¯»çš„ï¼Œæ— æ³•ä¸ºcenterèµ‹å€¼ã€‚å¦‚æœè¦èµ‹å€¼ï¼Œåˆ™éœ€è¦äº›setter    var center: Point&#123;        get&#123;            let centerX = origin.x + size.width/2            let centerY = origin.y + size.height/2            return Point(x: centerX, y: centerY)        &#125;        // (newCenter)å¯ä»¥è¢«çœç•¥        // åœ¨setterçš„&#123;&#125;ä¸­ç”¨é»˜è®¤åç§°newValueä»£æ›¿ä¼ å…¥å€¼        set(newCenter)&#123;            origin.x = newCenter.x - size.width/2            origin.y = newCenter.y - size.height/2        &#125;    &#125;&#125;var rect = Rectangle(origin: Point(), size: Size(width: 10, height: 5))rect.center// å†™æ³•ä¸‰å¯ä¸ºcenterèµ‹å€¼ï¼Œå¹¶ä¸”ä¼šè‡ªåŠ¨æ”¹å˜åæ ‡rect.center = Point(x: 10, y: 10)rect\n2. ç±»å‹å±æ€§ï¼ˆType Propertyï¼‰ï¼Œé™æ€å˜é‡å°±å’Œjavaä¸­çš„é™æ€å˜é‡å·®ä¸å¤šï¼Œå†™æ³•ä¹Ÿä¸€æ ·ï¼Œä¸è¿‡å¿…é¡»é€šè¿‡ç±»å‹åè·å–12345class Player &#123;    // å®šä¹‰ç±»å‹å±æ€§ï¼Œä¸èƒ½é€šè¿‡self.æ¥å¼•ç”¨ï¼Œç±»ä¸­ä¹Ÿä¸å¯ç›´æ¥å¼•ç”¨    // ä¸è®ºåˆ›å»ºå¤šå°‘ä¸ªå®ä¾‹ï¼Œéƒ½åªå­˜åœ¨ä¸€ä¸ªè¯¥å˜é‡    static var highestScore = 0&#125;\n3. ç±»å‹æ–¹æ³•ï¼ˆType Methodï¼‰ï¼Œé™æ€æ–¹æ³•ï¼Œè¿™é‡Œä¸¾äº†ä¸€ä¸ªåˆ›å»ºå•ä½çŸ©é˜µçš„ç±»å‹æ–¹æ³•123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263struct Matrix &#123;    var m: [[Int]]    var row: Int    var col: Int    init?(_ arr2d: [[Int]]) &#123;        guard arr2d.count &gt; 0 else &#123;            return nil        &#125;        let row = arr2d.count        let col = arr2d[0].count        for i in 1..&lt;row &#123;            if arr2d[i].count != row &#123;                return nil            &#125;        &#125;        self.m = arr2d        self.row = row        self.col = col    &#125;    static func identityMatrix(n: Int) -&gt; Matrix? &#123;        if n &lt; 0 &#123;            return nil        &#125;        var arr2d: [[Int]] = []        for i in 0..&lt;n &#123;            var row = [Int](repeating: 0, count: n)            row[i] = 1            arr2d.append(row)        &#125;        return Matrix(arr2d)    &#125;    func printMatrix() &#123;        for i in 0..&lt;row &#123;            for j in 0..&lt;col &#123;                print(m[i][j], terminator: \"\\t\")            &#125;            print()        &#125;    &#125;&#125;let m = Matrix([[1, 2], [3, 4]])m?.printMatrix()// ç›´æ¥é€šè¿‡ç±»å‹åç›´æ¥è°ƒç”¨let e = Matrix.identityMatrix(n: 6)e?.printMatrix()//è¾“å‡º//1    2//3    4//1    0    0    0    0    0//0    1    0    0    0    0//0    0    1    0    0    0//0    0    0    1    0    0//0    0    0    0    1    0//0    0    0    0    0    1\n4. å±æ€§è§‚å¯Ÿå™¨\n\næ³¨æ„willSetå’ŒdidSetä¸ä¼šåœ¨å˜é‡ç›´æ¥åˆå§‹åŒ–å’Œæ„é€ æ–¹æ³•ä¸­è¢«è°ƒç”¨\nä¸€ä¸ªç”µç¯çš„æ¡ˆä¾‹\n\n1234567891011121314151617181920212223242526272829303132333435363738394041class LightBulb &#123;    static let maxCurrent = 30    var current = 0 &#123;        // å¯ä»¥ä¸å£°æ˜å˜é‡ånewCurrentï¼Œå¯ç›´æ¥ä½¿ç”¨newValue        // å¦‚å…¶åï¼Œæ­¤æ—¶æ˜¯åœ¨è®¾ç½®æ–°å€¼ä¹‹å‰è¢«è°ƒç”¨        willSet(newCurrent) &#123;            // æ­¤æ—¶ï¼Œ currentè¿˜æ˜¯ä»¥å‰çš„å€¼            print(&quot;|\\(current)-\\(newCurrent)| = \\(abs(current - newCurrent))&quot;)        &#125;        // Property observer å¯ä»¥ç”¨æ¥é™åˆ¶å€¼æˆ–æ ¼å¼        // ä¹Ÿå¯ä»¥ç”¨æ¥å¹¶è”é€»è¾‘        // å¯ä»¥ä¸å£°æ˜å˜é‡oldCurrentï¼Œå¯ç›´æ¥ä½¿ç”¨oldValueè·å–åŸæ¥çš„å€¼        // å¦‚å…¶åï¼Œæ­¤æ—¶æ˜¯å·²ç»è®¾ç½®å¥½æ–°çš„å€¼åè¢«è°ƒç”¨        didSet(oldCurrent) &#123;            if current == LightBulb.maxCurrent &#123;                print(&quot;Pay attention, the current value get to the maxinum point.&quot;)            &#125;            else if current &gt; LightBulb.maxCurrent&#123;                print(&quot;Current too high, falling back to previous setting.&quot;)                current = oldCurrent            &#125;            print(&quot;The current is \\(current)&quot;)        &#125;    &#125;&#125;let bulb = LightBulb()bulb.current = 20bulb.current = 30bulb.current = 40//ç»“æœ//|0-20| = 20//The current is 20//|20-30| = 10//Pay attention, the current value get to the maxinum point.//The current is 30//|30-40| = 10//Current too high, falling back to previous setting.//The current is 30\n\nä¸€ä¸ªä¸»é¢˜åˆ‡æ¢çš„æ¡ˆä¾‹\n\n1234567891011121314151617181920212223242526272829303132333435363738394041enum Theme &#123;    case DayMode    case NightMode&#125;class UI &#123;    var fontColor: UIColor!    var backgroundColor: UIColor!    var themeMode: Theme = .DayMode &#123;        // æ¯å½“æ”¹å˜äº†ä¸»é¢˜çš„æ—¶å€™ï¼Œå°±å»æ”¹å˜å¯¹åº”çš„é…è‰²        didSet &#123;            self.changeMode(themeMode)        &#125;    &#125;    init() &#123;        self.themeMode = .DayMode        self.changeMode(themeMode)    &#125;    // ç”±äºå¤šå¤„ç”¨åˆ°äºæ˜¯æå–å‡ºæ¥    func changeMode(_ newMode: Theme) &#123;        switch newMode &#123;        case .DayMode:            fontColor = UIColor.black            backgroundColor = UIColor.white        case .NightMode:            fontColor = UIColor.white            backgroundColor = UIColor.black        &#125;    &#125;&#125;let ui = UI()ui.themeModeui.fontColor //  é»‘ui.backgroundColor // ç™½ui.themeMode = .NightModeui.fontColor // ç™½ui.backgroundColor // é»‘\n5. å»¶è¿Ÿå±æ€§ï¼ˆLazy Propertyï¼‰123456789101112131415161718192021222324252627282930313233class ClosedRange &#123;    let start: Int    let end: Int    // æ¯æ¬¡è°ƒç”¨éƒ½ä¼šé‡æ–°è®¡ç®—    var width: Int &#123;        return end - start + 1    &#125;    // ä½¿ç”¨æ‡’åŠ è½½ï¼Œåªæœ‰ç¬¬ä¸€æ¬¡è°ƒç”¨æ˜¯æ‰ä¼šè®¡ç®—ï¼Œè§£å†³èµ„æºé‡å¤è®¡ç®—æˆ–è¯»å–ç­‰é—®é¢˜    lazy var sum: Int = &#123;        var res = 0        for i in self.start...self.end &#123;            res += i        &#125;        return res    &#125;()    init?(start: Int, end: Int) &#123;        if start &gt; end &#123;            return nil        &#125;        self.start = start        self.end = end    &#125;&#125;if let range = ClosedRange(start: 0, end: 10_000) &#123;    range.width    range.sum    range.sum    range.sum&#125;\n6. è®¿é—®æ§åˆ¶\n\nprivate ç§æœ‰è®¿é—®æ§åˆ¶ï¼Œæ ‡è¯†äº†çš„å˜é‡å’Œæ–¹æ³•åªèƒ½åœ¨åŒä¸€ä¸ªæ–‡ä»¶ä¸­æ‰èƒ½è®¿é—®\ninternal é»˜è®¤è®¿é—®æ§åˆ¶ï¼ŒåŒä¸€ä¸ªç›®å½•ä¸‹å¯è®¿é—®\npublic å…¬æœ‰è®¿é—®æ§åˆ¶ï¼Œæ ‡è¯†åä»»ä½•åœ°æ–¹éƒ½å¯è®¿é—®\n\n7. å•ä¾‹æ¨¡å¼123456789101112131415161718192021222324// Sourcesæ–‡ä»¶å¤¹ä¸­ GameManager.swiftpublic class GameManager &#123;    public static let defaultManager = GameManager()    public var score = 0    public var level = 0    private init() &#123;    &#125;    public func addScore() &#123;        score += 10    &#125;&#125;// ä¸»æ–‡ä»¶ä¸­let gameManager = GameManager.defaultManagergameManager.addScore()gameManager.score // 10let gm = GameManager.defaultManagergm.addScore()gm.score // 20\nç»§æ‰¿å’Œæ„é€ å‡½æ•°1. ç»§æ‰¿åŸºæœ¬ä½¿ç”¨æ–¹å¼ç»§æ‰¿æŸä¸ªç±»ä½¿ç”¨å†’å·â€:â€è·Ÿä¸Šç»§æ‰¿çš„ç±»ç»§æ‰¿å¯ä»¥ä½¿ç”¨çˆ¶ç±»ä¸­éç§æœ‰çš„å±æ€§ï¼ˆä¸åœ¨ä¸€ä¸ªæ–‡ä»¶çš„æƒ…å†µä¸‹ï¼‰finalå…³é”®å­—å¯ä»¥è®©è¯¥ç±»ä¸å†æœ‰å­ç±»123456789101112131415161718192021222324252627282930313233class Avatar &#123;    var name: String    var life = 100 // è¡€æ¡    var isAlive: Bool = true // æ˜¯å¦å­˜æ´»    init(name: String) &#123;        self.name = name    &#125;    // è¢«æ”»å‡»æ—¶è°ƒç”¨    func beAttacked(attack: Int) &#123;        life -= attack        if life &lt;= 0 &#123;            isAlive = false        &#125;    &#125;&#125;// ç»§æ‰¿class User: Avatar &#123;    var leve = 0&#125;let player = User(name: \"Jiaji\")player.nameplayer.lifeplayer.beAttacked(attack: 20)player.life// ä½¿ç”¨finalï¼Œè¡¨ç¤ºæœ€ç»ˆçš„ç±»ï¼Œé˜»æ­¢è¿›ä¸€æ­¥çš„ç»§æ‰¿final class Magician: User &#123;    var magic = 100&#125;\n2. å¤šæ€123456789101112131415161718192021222324252627282930313233// ç®€åŒ–å¤§é‡ä»£ç class Avatar &#123;    var name: String    init(name: String) &#123;        self.name = name    &#125;&#125;class User: Avatar &#123;&#125;final class Magician: User &#123;&#125;class Monster: Avatar &#123;&#125;// å¤šæ€func printName(avatar: Avatar) &#123;    print(\"name is \\(avatar.name)\")&#125;let user = User(name: \"Bob\")let user2 = Magician(name: \"Tom\")let mons = Monster(name: \"no1\")// åªè¦éƒ½æ˜¯ç»§æ‰¿Avataré‚£ä¹ˆå°±å¯ä»¥ä¼ å…¥è¿™ä¸ªæ–¹æ³•ï¼Œ ä¸åœ¨ä¹å…·ä½“çš„ç±»printName(avatar: user)printName(avatar: user2)printName(avatar: mons)//ç»“æœ//name is Bob//name is Tom//name is no1\n3. é‡è½½ï¼Œ é€šè¿‡å…³é”®å­—overrideå³å¯å¤å†™çˆ¶ç±»ä¸­çš„æˆå‘˜ç§æœ‰æˆå‘˜æ— æ³•è¦†å†™ï¼›finalæˆå‘˜æ— æ³•è¦†å†™ï¼›123456789101112131415161718192021222324252627282930313233343536373839404142class SuperClass &#123;    var description: String &#123;        return \"This is SuperClass\"    &#125;    func fun1() &#123;        print(\"SuperClass fun1()\")    &#125;    // æ ‡è®°äº†finalåï¼Œæ— æ³•è¢«å­ç±»è¦†å†™    final func fun2() &#123;        print(\"SuperClass fun2()\")    &#125;&#125;class SubClass: SuperClass &#123;    override var description: String &#123;        return \"This is SubClass\"    &#125;    override func fun1() &#123;        print(\"SubClass fun1()\")    &#125;&#125;let claz = SuperClass()let claz2 = SubClass()let arr: [SuperClass] = [claz, claz2]for c in arr &#123;    print(c.description)    c.fun1()    c.fun2()&#125;//ç»“æœ//This is SuperClass//SuperClass fun1()//SuperClass fun2()//This is SubClass//SubClass fun1()//SuperClass fun2()\n4. å­ç±»æ„é€ ä¸­è°ƒç”¨çˆ¶ç±»æ„é€ \n\nå¿…é¡»å°†å­ç±»åˆå§‹åŒ–å®Œæˆï¼Œæ‰èƒ½è°ƒç”¨çˆ¶ç±»æ„é€ åˆå§‹åŒ–çˆ¶ç±»\né€šè¿‡super.initè°ƒç”¨çˆ¶ç±»æ„é€ \n\n5. ä¸¤æ®µå¼æ„é€ \n\nç¬¬ä¸€æ®µï¼šæ„é€ åˆå€¼\nåœ¨æ‰€æœ‰å˜é‡æ²¡æœ‰åˆå§‹åŒ–å®Œæˆä¹‹å‰ï¼Œä¸èƒ½è°ƒç”¨å…¶ä»–æ–¹æ³•\nçˆ¶ç±»çš„æˆå‘˜å˜é‡ï¼Œå³ä½¿æœ‰åˆå§‹å€¼ï¼Œä¹Ÿä¸èƒ½ä½¿ç”¨\nå¯ä»¥æ¶‰åŠé€»è¾‘ï¼Œä½†é€»è¾‘ä¸èƒ½æ¶‰åŠåˆ°self\né™æ€çš„å¯ä»¥ä½¿ç”¨\n\n\nè°ƒç”¨superæ„é€ (å¦‚æœéœ€è¦çš„è¯)\nç¬¬äºŒæ®µï¼šæ‰€æœ‰æˆå‘˜å˜é‡åˆå§‹åŒ–å®Œæˆä»¥åï¼Œè¿›è¡Œæˆå‘˜å˜é‡ç›¸å…³çš„é€»è¾‘è°ƒæ•´\n\n6. æ–¹ä¾¿çš„æ„é€ å‡½æ•°å’ŒæŒ‡å®šçš„æ„é€ å‡½æ•°ä¸€èˆ¬çš„æ„é€ å°±æ˜¯æŒ‡å®šçš„æ„é€ å‡½æ•°ï¼›åŠ äº†convenienceçš„æ„é€ å°±æ˜¯æ–¹ä¾¿çš„æ„é€ å‡½æ•°ï¼Œæ–¹ä¾¿çš„æ„é€ å‡½æ•°åªèƒ½selfè°ƒç”¨è¯¥ç±»çš„æŒ‡å®šæ„é€ å‡½æ•°ï¼›123456789101112131415161718192021class Avatar &#123;    var name: String    // è¿™ç§å«åšæŒ‡å®šæ„é€ å‡½æ•°    init(name: String) &#123;        self.name = name    &#125;&#125;class User: Avatar &#123;    // è¿™ç§å«åšæŒ‡å®šæ„é€ å‡½æ•°    override init(name: String) &#123;        super.init(name: name)    &#125;    // è¿™ç§å«åšæ–¹ä¾¿çš„æ„é€ å‡½æ•°ï¼Œconvenienceç›´æ¥ç¿»è¯‘è¿‡æ¥å°±æ˜¯ï¼šæ–¹ä¾¿    // æ–¹ä¾¿çš„æ„é€ å‡½æ•°åªèƒ½è°ƒç”¨è¯¥ç±»è‡ªèº«çš„æ„é€ å‡½æ•°ï¼Œä¸èƒ½è°ƒç”¨superçš„    // è¦è°ƒç”¨è¯¥ç±»è‡ªèº«çš„æ„é€ ï¼Œå¿…é¡»åŠ ä¸Šconvenience    convenience init(firstName: String, lastName: String) &#123;        self.init(name: \"\\(firstName) \\(lastName)\")    &#125;&#125;\n7. å­ç±»æ„é€ å‡½æ•°çš„ç»§æ‰¿å¦‚æœå­ç±»æ²¡æœ‰å®ç°ä»»ä½•çˆ¶ç±»çš„æŒ‡å®šæ„é€ å‡½æ•°ï¼Œåˆ™è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰æŒ‡å®šæ„é€ å‡½æ•°ï¼›å¦‚æœå­ç±»å®ç°äº†çˆ¶ç±»æ‰€æœ‰çš„æŒ‡å®šæ„é€ å‡½æ•°ï¼Œåˆ™è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰ä¾¿åˆ©æ„é€ å‡½æ•°ï¼›1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556class Avatar &#123;    var name: String    init(name: String) &#123;        self.name = name    &#125;//    init(num: Int) &#123;//        self.name = String(num)//    &#125;    convenience init(firstName: String, lastName: String) &#123;        self.init(name: \"\\(firstName) \\(lastName)\")    &#125;&#125;//å®ç°äº†çˆ¶ç±»æ‰€æœ‰æŒ‡å®šæ„é€ çš„æƒ…å†µä¸‹ï¼Œå¦‚æœæƒ³çœ‹æ²¡æœ‰å®ç°å®Œçš„æƒ…å†µï¼Œå°†Avataræ³¨é‡Šçš„ä»£ç æ”¾å¼€class User: Avatar &#123;    var group: String    init(name: String, group: String) &#123;        self.group = group        super.init(name: name)    &#125;    convenience init(group: String) &#123;        let name = User.generateUserName()        self.init(name: name, group: group)    &#125;    convenience override init(name: String) &#123;        self.init(name: name, group: \"\")    &#125;    static func generateUserName() -&gt; String&#123;        return \"Player\" + String(Int(arc4random()%1_000_000))    &#125;&#125;// æ²¡æœ‰å®ç°ä»»ä½•æŒ‡å®šæ„é€ çš„æƒ…å†µclass Monster: Avatar &#123;    // å­ç±»æ²¡æœ‰å®ç°ä»»ä½•çˆ¶ç±»æ„é€ çš„æƒ…å†µ,è‡ªåŠ¨ç»§æ‰¿çˆ¶ç±»çš„æ‰€æœ‰æŒ‡å®šæ„é€ å‡½æ•°    // å¯ç›´æ¥ç”¨selfè°ƒç”¨ï¼Œç›¸å½“äºMonsterå·²ç»æœ‰äº†init(name: type)    convenience init(type: String)&#123;        self.init(name: type)    &#125;&#125;//å¦‚æœå°†Avatarä¸­çš„init(num: Int)çš„æ„é€ çš„æ³¨é‡Šè§£å¼€è¯¥å¥å®ä¾‹åŒ–å°†ä¼šæŠ¥é”™ï¼Œå› ä¸ºæ”¾å¼€åï¼Œå­ç±»Userå¹¶æ²¡æœ‰å®ç°çˆ¶ç±»çš„init(num: Int)let user = User(firstName: \"John\", lastName: \"Snow\")// å¯ä»¥é€šè¿‡ä¸‰ç§æ–¹å¼å®ä¾‹åŒ–ï¼Œå…¶ä¸­ç¬¬äºŒç§ç»§æ‰¿è‡ªçˆ¶ç±»ï¼Œç¬¬ä¸‰ç§çˆ¶ç±»çš„æ–¹ä¾¿æ„é€ èƒ½ç›´æ¥ä½¿ç”¨let zombie = Monster(type: \"Zombie\")let zombie2 = Monster(name: \"Zombie\")let zombie3 = Monster(firstName: \"Mr.\", lastName: \"Zombie\")\n8. requiredæ„é€ 123456789101112131415161718192021222324252627class Avatar &#123;    var name: String    // è¡¨ç¤ºå­ç±»å¿…é¡»å®ç°è¯¥æ„é€ æ–¹æ³•    required init(name: String) &#123;        self.name = name    &#125;    init(num: Int) &#123;        self.name = String(num)    &#125;&#125;// å¦‚æœæ²¡æœ‰å®ç°ä»»ä½•çˆ¶ç±»æŒ‡å®šæ„é€ ï¼Œé‚£ä¹ˆé»˜è®¤ä¼šå®ç°æ‰€æœ‰çˆ¶ç±»æŒ‡å®šæ„é€ class NPC:Avatar &#123;&#125;class User: Avatar &#123;    override init(num: Int) &#123;        super.init(num: num)    &#125;    // å¦‚æœé‡å†™äº†ä¸€ä¸ªçˆ¶ç±»æ„é€ ï¼ˆå¦‚ä¸Šé¢çš„æ„é€ ï¼‰ï¼Œé‚£ä¹ˆå¿…é¡»å®ç°çˆ¶ç±»å¼ºåˆ¶è¦å®ç°çš„æ„é€     required init(name: String) &#123;        super.init(name: name)    &#125;&#125;\n9. ç»“æ„ä½“ä¸­çš„æ„é€ ç”±äºç»“æ„ä½“ä¸­æ²¡æœ‰ç»§æ‰¿çš„å…³ç³»ï¼Œæ‰€ä»¥ä¸ç”¨ç”³æ˜æ˜¯æ–¹ä¾¿çš„æ„é€ è¡¨ç¤ºè¦è°ƒç”¨è‡ªå·±çš„æ„é€ ã€‚123456struct TestInit &#123;    init(a: Int) &#123;&#125;    init(b: Int, c: Int) &#123;        self.init(a: b + c) // ç›´æ¥selfè°ƒç”¨å°±è¡Œäº†    &#125;&#125;\næ–‡æ¡£æ³¨é‡Š1. å¤šè¡Œæ–‡æ¡£æ³¨é‡Š1234/**å¤šè¡Œæ–‡æ¡£æ³¨é‡Šå¤šè¡Œæ–‡æ¡£æ³¨é‡Š*/\n2. å•è¡Œæ–‡æ¡£æ³¨é‡Šï¼Œå¤šä¸ªå•è¡Œåˆåœ¨ä¸€èµ·å’Œå¤šè¡Œæ•ˆæœä¸€æ ·1/// å•è¡Œæ–‡æ¡£æ³¨é‡Š\n3. ä½¿ç”¨çš„æ˜¯Markdownæ ¼å¼ä¹¦å†™4. å‚æ•°æ³¨é‡Š1123/// - Parameter item1: This is item1/// - Parameter item2: This is item2func show2(item1: String, item2: String) &#123;&#125;\n5. å‚æ•°æ³¨é‡Š21234/// - Parameters:///   - item1: This is item1///   - item2: This is item2func show2(item1: String, item2: String) &#123;&#125;\n6. è¿”å›ä¿¡æ¯ã€å¼‚å¸¸ä¿¡æ¯æ³¨é‡Š12345/// - Returns: the result String./// - Throws: nil errorfunc show1() throws -&gt; String &#123;    return &quot;&quot;&#125;\n7. ä¸€äº›å¯¹äºç®—æ³•æˆ–å…¶ä»–ç”¨é€”çš„ä¸€äº›å…³é”®å­—123456789101112131415161718192021/// å¯¹äºç®—æ³•æˆ–å…¶ä»–ç”¨é€”çš„ä¸€äº›å…³é”®å­— `Precondition`, `Postcondition`, `Requires`, `Invariant`, `Complexity`, `Important` and `Warning`.////// å‡è®¾è¿™æ˜¯ä¸€ä¸ªç®—æ³•////// - Precondition: å‰ç½®æ¡ä»¶/// - Postcondition: åç½®æ¡ä»¶/// - Requires: ç®—æ³•æ‰€éœ€è¦çš„å†…å®¹/// - Invariant: å¾ªç¯ä¸å˜é‡/// - Complexity: å¤æ‚åº¦/// - Important: ä¸€äº›é‡è¦çš„ä¿¡æ¯/// - Warning: ä¸€äº›è­¦å‘Šä¿¡æ¯/// - Attention: ä¸€äº›è­¦å‘Šä¿¡æ¯/// - Note: ä¸€äº›ç›¸åº”çš„è®°å½•/// - Remark: ä¸€äº›è¯„è®º////// - Parameter object: The algorithm will use this single object to change the world./// - Throws: `MyError.JustImpossible` if the algorithm&apos;s precondition can not be satisfied./// - Returns: the object contains all the information in the universe.func mysteriousAlgorithm(object: AnyObject) &#123;    return&#125;\n8. ä¸€äº›å…ƒä¿¡æ¯123456789/// - Author: ä½œè€…/// - Author: å‡ ä¸ªäººä¸€èµ·å®Œæˆ.../// - Copyright: ç‰ˆæƒä¿¡æ¯/// - Date: æ—¶é—´/// - Since: é¡¹ç›®èµ·å§‹æ—¥æœŸ/// - Version: å¯¹åº”çš„ç‰ˆæœ¬å·func show() &#123;&#125;\n9. MARK\n\nåˆ†å‰²ç±»è§†å›¾\n\n1// MARK: -\n\næ·»åŠ åˆ†å‰²ç±»è§†å›¾å¹¶æ·»åŠ è¯¥åŒºåŸŸæ ‡é¢˜\n\n1// MARK: - Methods\n10. TODOåœ¨ç±»è§†å›¾ä¸­å»ºç«‹ä»»åŠ¡æé†’1// TODO: ä»¥ååœ¨è¿™é‡Œè¦å¹²å˜›å¹²å˜›\n11. FIXMEéœ€è¦ä¿®å¤ï¼Œä½†å æ—¶æ— å…³ç´§è¦ï¼Œåœ¨ç±»è§†å›¾ä¸­ä¼šæœ‰æé†’1// FIXME: Support Swift 2.2\nä¸‹æ ‡1. åŸºæœ¬ä½¿ç”¨æ–¹å¼å¯ä»¥è‡ªå·±å®šä¹‰ä¸‹æ ‡çš„ç±»å‹ï¼Œå¦‚åŒæ•°ç»„å’Œå­—å…¸ä¸€æ ·è®¿é—®æ–¹å¼ï¼›éœ€è¦å…³é”®å­—subscriptï¼›12345678910111213141516171819202122232425262728293031323334353637383940414243444546struct Vector3 &#123;    var x: Double = 0.0    var y: Double = 0.0    var z: Double = 0.0    // å‚æ•°ç±»å‹å¯ä»¥éšæ„æŒ‡å®š    // éœ€è¦æœ‰ä¸ªè¿”å›å€¼    // å¦‚æœéœ€è¦é€šè¿‡ä¸‹æ ‡æ¥è®¾ç½®å€¼ï¼Œåˆ™éœ€è¦æ·»åŠ set    subscript(index: Int) -&gt; Double? &#123;        get &#123;            switch index &#123;            case 0: return x            case 1: return y            case 2: return z            default: return nil            &#125;        &#125;        set &#123;            guard let newValue = newValue else &#123; return &#125;            switch index &#123;            case 0: x = newValue            case 1: y = newValue            case 2: z = newValue            default: return            &#125;        &#125;    &#125;    subscript(axis: String) -&gt; Double? &#123;        switch axis &#123;        case \"x\", \"X\": return x        case \"y\", \"Y\": return y        case \"z\", \"Z\": return z        default: return nil        &#125;    &#125;&#125;var v = Vector3(x: 1.0, y: 2.0, z: 3.0)v[0] // 1// æ·»åŠ äº†setæ‰èƒ½è®¾ç½®å€¼v[0] = 100.0 // 100v[\"x\"] // 100\n2. å¤šç»´ä¸‹æ ‡å¯å®šä¹‰å¤šä¸ªä¸‹æ ‡ï¼›1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253struct Matrix &#123;    var data: [[Double]]    let r: Int    let c: Int    init(row: Int, col: Int) &#123;        self.r = row        self.c = col        self.data = [[Double]]()        for _ in 0..&lt;r &#123;            let aRow = Array(repeating: 0.0, count: col)            data.append(aRow)        &#125;    &#125;    // è¿”å›ç¡®åˆ‡æœ‰å€¼    subscript(x: Int, y: Int) -&gt; Double &#123;        get&#123;            assert( x &gt;= 0 &amp;&amp; x &lt; r &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; c , \"Index Out of Range\")            return data[x][y]        &#125;        set&#123;            assert( x &gt;= 0 &amp;&amp; x &lt; r &amp;&amp; y &gt;= 0 &amp;&amp; y &lt; c , \"Index Out of Range\")            data[x][y] = newValue        &#125;    &#125;    // å¦‚æœæƒ³ä½¿ç”¨ m[1][1]    subscript(row: Int) -&gt; [Double]&#123;        get&#123;            assert( row &gt;= 0 &amp;&amp; row &lt; r , \"Index Out of Range\")            return data[row]        &#125;        set(vector)&#123;            assert( vector.count == c , \"Column Number does NOT match\")            data[row] = vector        &#125;    &#125;&#125;var m = Matrix(row: 2, col: 2)//m[2,2]m[1,1] = 1// å¦‚æœæƒ³ä½¿ç”¨ m[1][1]m[1][1]m[1]m[0] = [1.5,4.5]\nè¿ç®—ç¬¦é‡è½½è¿ç®—ç¬¦æœ¬èº«å°±æ˜¯ä¸€ä¸ªå‡½æ•°1. é‡è½½è¿ç®—ç¬¦åŸºæœ¬æ“ä½œ1234567891011121314151617181920// é‡è½½è¿ç®—ç¬¦func + (left: Vector3, right: Vector3) -&gt; Vector3 &#123;    return Vector3(x: left.x + right.x, y: left.y + right.y, z: left.z + right.z)&#125;// é‡è½½å•ç›®è¿ç®—ç¬¦ï¼Œprefixè¡¨ç¤º - æ˜¯ä¸€ä¸ªå‰ç½®è¿ç®—ç¬¦ï¼Œç›¸å¯¹åº”çš„æ˜¯postfixprefix func - (v: Vector3) -&gt; Vector3 &#123;    return Vector3(x: -v.x, y: -v.y, z: -v.z)&#125;// é‡è½½ += è¿™ç§è¿ç®—static func += (left: inout Vector3, right: Vector3) &#123;    left = left + right&#125;let va = Vector3(x: 1.0, y: 2.0, z: 3.0)let vb = Vector3(x: 3.0, y: 4.0, z: 5.0)let vc = vb + vavc.x\n2. é‡è½½æ¯”è¾ƒè¿ç®—ç¬¦1234567891011121314// é‡è½½æ¯”è¾ƒè¿ç®—ç¬¦func == (left: Vector3, right: Vector3) -&gt; Bool &#123;    return left.x == right.x &amp;&amp; left.y == right.y &amp;&amp; left.z == right.z&#125;func != (left: Vector3, right: Vector3) -&gt; Bool &#123;    return !(left == right)&#125;let va = Vector3(x: 1.0, y: 2.0, z: 3.0)let vb = Vector3(x: 3.0, y: 4.0, z: 5.0)va == vbva != vb\n3. è‡ªå®šä¹‰è¿ç®—ç¬¦å¦‚æœæ˜¯ASCIIå­—ç¬¦ï¼Œåªèƒ½æ˜¯ï¼š/ = - + ! * % &lt; &gt; &amp; | ^ ~ä¹‹å¼€å¤´ ã€‚æˆ–è€…æ˜¯Unicodeçš„å­—ç¬¦12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667struct Vector3 &#123;    var x: Double = 0.0    var y: Double = 0.0    var z: Double = 0.0    func length() -&gt; Double &#123;        return sqrt(x*x + y*y + z*z)    &#125;&#125;func + (left: Vector3, right: Vector3) -&gt; Vector3&#123;    return Vector3(x: left.x + right.x, y: left.y + right.y, z: left.z + right.z)&#125;func * (left: Vector3, right: Vector3) -&gt; Double&#123;    return left.x * right.x + left.y * right.y + left.z * right.z&#125;func += (left: inout Vector3, right: inout Vector3)&#123;    left = left + right&#125;// å•ç›®è¿ç®—ç¬¦çš„å®šä¹‰postfix operator +++postfix func +++ (vector: inout Vector3) -&gt; Vector3 &#123;    var addOn = Vector3(x: 1.0, y: 1.0, z: 1.0)    vector += addOn    return vector&#125;prefix operator +++prefix func +++ (vector: inout Vector3) -&gt; Vector3 &#123;    let res = vector    var addOn = Vector3(x: 1.0, y: 1.0, z: 1.0)    vector += addOn    return res&#125;// åŒç›®è¿ç®—ç¬¦çš„å®šä¹‰// è®¡ç®—ä¸¤ä¸ªå‘é‡çš„å¤¹è§’infix operator ^func ^ (left: Vector3, right: Vector3) -&gt; Double &#123;    return acos((left * right) / (left.length() * right.length()))&#125;//è®¡ç®—é˜¶å±‚ï¼Œå®šä¹‰ä¼˜å…ˆç»„precedencegroup ExponentPrecedence&#123;    // æ˜¯ä»å·¦å‘å³è®¡ç®—è¿˜æ˜¯ä»å³å‘å·¦è®¡ç®—    associativity: left    // å®šä¹‰ä¼˜å…ˆçº§ï¼Œç”¨lowerThanæˆ–higherThanæ¥å®šä¹‰    higherThan: MultiplicationPrecedence&#125;infix operator **: ExponentPrecedencefunc **(x: Double, p: Double) -&gt; Double &#123;    return pow(x, p)&#125;1+2**3**2 // 65var va = Vector3(x: 1.0, y: 2.0, z: 3.0)var vb = Vector3(x: 3.0, y: 4.0, z: 5.0)va++++++vbva ^ vb\nExtension1. åŸºæœ¬ä½¿ç”¨æ–¹å¼æ‰©å±•ï¼›æ‰©å±•å±æ€§æ—¶ï¼Œåªèƒ½æ‰©å±•è®¡ç®—å‹å±æ€§ï¼›åªèƒ½åˆ›å»ºæ–¹ä¾¿çš„æ„é€ å‡½æ•°convenienceï¼›12345678910111213141516171819202122232425262728293031323334class Test &#123;    var value: String    init(value: String) &#123;        self.value = value    &#125;&#125;// æ‰©å±•ç”¨æ–¹æ³•ä¸Šæ—¶extension Test &#123;    func beautifulValue() -&gt; String &#123;        return \"beautiful \" + self.value    &#125;&#125;let test = Test(value: \"girl\")test.beautifulValue() //\"beautiful girl\"// æ‰©å±•ç”¨å˜é‡ä¸Šæ—¶ï¼Œå¿…é¡»æ˜¯è®¡ç®—å‹å˜é‡extension Test &#123;    var len: Int &#123;        return self.value.count    &#125;&#125;test.len // 4// æ‰©å±•ç”¨æ„é€ æ—¶ï¼Œå¿…é¡»æ˜¯æ–¹ä¾¿æ„é€ extension Test &#123;    convenience init (firstName: String, lastName: String) &#123;        self.init(value: \"\\(firstName) \\(lastName)\")    &#125;&#125;let test2 = Test(firstName: \"Jiaji\", lastName: \"Xu\")\n2. åµŒå¥—ç±»å‹å¦‚æœæŸç±»å‹åªæœ‰åœ¨ä¸€ä¸ªç±»å‹é‡Œé¢èµ·ä½œç”¨ï¼Œé‚£ä¹ˆå¯ä»¥å°†è¯¥ç±»å‹æ”¾åˆ°é‡Œé¢ï¼Œå¦‚Stringçš„Indexç±»å‹ï¼›æ‰©å±•ï¼Œå¯æ‰©å±•åµŒå¥—ç±»å‹ï¼›æ‰©å±•å¯æ‰©å±•ä¸‹æ ‡ï¼›1234567891011121314151617181920212223242526272829303132333435class Rectangle &#123;    var origin: (x: Double, y: Double)    var width: Double    var height: Double    init(origin: (Double, Double), width: Double, height: Double) &#123;        self.origin = origin        self.width = width        self.height = height    &#125;&#125;extension Rectangle &#123;    enum Vertex: Int &#123;        case LeftTop, RightTop, RightBottom, LeftBottom    &#125;    subscript(index: Int) -&gt; (Double, Double) &#123;        assert(index &gt;= 0 &amp;&amp; index &lt; 4, \"Index in Rectange Out of Range.\")        switch Vertex(rawValue: index)! &#123;        case .LeftTop:            return origin        case .RightTop:            return (x: origin.x + width, y: origin.y)        case .RightBottom:            return (x: origin.x + width, y: origin.y + height )        case .LeftBottom:            return (x: origin.x, y: origin.y + height )        &#125;    &#125;&#125;let rect = Rectangle(origin: (0.0, 0.0), width: 4, height: 3)rect[0]rect[1]\n3. æ‰©å±•æ ‡å‡†åº“// Intè¿˜æœ‰å¾ˆå¤šå¯ä»¥åšenxtensionçš„åœ°æ–¹// å¦‚ 12345[2]// å¦‚ toBinary, toHex// å¦‚ isPrime// extensionåœ¨Appå¼€å‘ä¸­è¢«ç»å¸¸ä½¿ç”¨// å¦‚ String, UIColorç­‰åŸºç¡€ç±»çš„ä½¿ç”¨// åœ¨Appå¼€å‘ä¸­, ä¸€ä¸ªç•Œé¢å¯èƒ½éœ€è¦å¤„ç†å¤šä¸ªäº‹ä»¶: è¡¨æ ¼æ˜¾ç¤º, ç”¨æˆ·è¾“å…¥, å¯¼èˆª, åŠ¨ç”», æ•°æ®å­˜å‚¨â€¦// æ­¤æ—¶å¯ä»¥ä½¿ç”¨extensionåˆ†éš”å¼€;123456789101112131415161718192021222324252627282930313233343536373839extension Int &#123;    var square: Int &#123;        return self * self    &#125;    var cube: Int &#123;        return self * self * self    &#125;    func inRange(start: Int, to: Int) -&gt; Bool &#123;        return self &gt;= start &amp;&amp; self &lt; to    &#125;    func repetitions(task: (Int) -&gt; Void) &#123;        for _ in 0..&lt;self &#123;            task(self)        &#125;    &#125;&#125;let num = 8num.squarenum.cubenum.inRange(start: 0, to: 10)num.repetitions &#123; index in    print(\"hello \\(index)\")&#125;// è¾“å‡º//hello 8//hello 8//hello 8//hello 8//hello 8//hello 8//hello 8//hello 8\nGenericæ³›å‹ï¼š åªå…³å¿ƒå…·ä½“æ“ä½œï¼Œä¸å…³å¿ƒå…·ä½“ç±»å‹1. ç”¨åœ¨æ–¹æ³•ä¸Š123456789func swapTwoThings&lt;T&gt;(a: inout T, b: inout T) &#123;    (a, b) = (b, a)&#125;var hello = \"Hello\"var bye = \"Bye\"swapTwoThings(a: &amp;hello, b: &amp;bye)hello // \"Bye\"bye // \"Hello\"\n2. ç”¨åœ¨ç±»å‹ä¸Š123456789101112131415161718192021222324252627282930313233struct Stack&lt;T&gt; &#123;    var items = [T]()    func  isEmpty() -&gt; Bool &#123;        return items.count == 0    &#125;    mutating func push(_ item: T) &#123;        items.append(item)    &#125;    mutating func pop() -&gt; T? &#123;        guard !self.isEmpty() else &#123;            return nil        &#125;        return items.removeLast()    &#125;&#125;extension Stack &#123;    func top() -&gt; T? &#123;        return items.last    &#125;    func count() -&gt; Int &#123;        return items.count    &#125;&#125;var s = Stack&lt;Int&gt;()s.push(1)s.push(2)s.pop()\nprotocol1. åè®®çš„åŸºæœ¬ä½¿ç”¨åè®®ï¼›åªå®šä¹‰ï¼Œä¸å®ç°ï¼›ä¸èƒ½ä¸ºåè®®è®¾ç½®é»˜è®¤çš„å‚æ•°å€¼ï¼Œå˜é‡ä¹Ÿä¸èƒ½æœ‰é»˜è®¤å€¼ï¼›å˜é‡åªèƒ½ç”¨var123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566// protocol Pet: class &#123;&#125; è¡¨ç¤ºå¦‚æœåè®®ç»§æ‰¿classï¼Œåˆ™è¯¥åè®®ä¸èƒ½åº”ç”¨äºç»“æ„ä½“protocol Pet &#123;    // ä¸èƒ½å³åˆå§‹å€¼    var name: String &#123; get set &#125;    // ç»Ÿä¸€ä½¿ç”¨varå…³é”®å­—    var birthPlace: String &#123; get &#125;    // å¯¹äºæ–¹æ³•ï¼Œä¸èƒ½æœ‰å®ç°    func playWith()    //å¯¹äºæ–¹æ³•ï¼Œä¸èƒ½æœ‰é»˜è®¤å‚æ•°ï¼ˆé»˜è®¤å‚æ•°å°±æ˜¯ä¸€ç§å®ç°ï¼‰    // func fed(food: String = \"leftover\")    func fed()    func fed(food: String)    // å¯ä»¥ä½¿ç”¨mutatingå…³é”®å­—ï¼Œå¼ºè°ƒåœ¨ç»“æ„ä½“é‡åº”è¯¥ä¿®æ”¹å…¶ä¸­å†…å®¹    mutating func changeName(newName: String)&#125;// åè®®å¯ç»§æ‰¿protocol PetBird: Pet &#123;    var flySpeed: Double&#123; get &#125;    var flyHeight: Double&#123; get &#125;&#125;struct Dog: Pet &#123;    // å¯ä»¥ä½¿ç”¨è®¡ç®—å‹å±æ€§    //    private var myDoggyName = \"Puppy\"    //    var name: String&#123;    //        get&#123;    //            return myDoggyName    //        &#125;    //        set&#123;    //            myDoggyName = newValue    //        &#125;    //    &#125;    var name: String    // åè®®ä¸­å®šä¹‰çš„åªè¯»ï¼Œå¯¹äºä¸€ä¸ªå…·ä½“ç±»çš„å®ç°ï¼Œä¸ä¸€å®šæ˜¯åªè¯»ï¼Œä½†æ˜¯ä½œä¸ºPetæ—¶æ˜¯åªè¯»çš„ï¼    // let birthPlace: String    var birthPlace: String    func playWith() &#123;        print(\"Wong!\")    &#125;    func fed() &#123;        print(\"I want a bone.\")    &#125;    // åœ¨å…·ä½“å®ç°ä¸Šå¯ä»¥åŠ é»˜è®¤å‚æ•°    func fed(food: String = \"Bone\") &#123;    &#125;    mutating func changeName(newName: String) &#123;        name = newName    &#125;&#125;var myDog: Dog = Dog(name: \"summer\", birthPlace: \"beijing\")myDog.birthPlace = \"beijing\"var aPet: Pet = myDog// å½“ä½œä¸ºPetæ¥æ“ä½œçš„æ—¶å€™ï¼Œæ˜¯æ— æ³•ä¸ºbirthPlaceèµ‹å€¼çš„// aPet.birthPlace = \"shanghai\"\n2. åè®®å’Œæ„é€ å‡½æ•°12345678910111213141516171819202122232425262728293031323334353637383940414243protocol Pet &#123;    var name: String &#123; get set &#125;    init(name: String)&#125;class Animal &#123;    var type: String = \"mammal\"&#125;// å¦‚æœä¸€ä¸ªç±»æœ‰ç»§æ‰¿çš„ç±»ï¼Œåˆ™ç±»å¿…é¡»æ”¾åœ¨å‰é¢// çˆ¶ç±»åªèƒ½æœ‰ä¸€ä¸ªï¼Œ åè®®å¯ä»¥æœ‰å¤šä¸ªclass Dog: Animal, Pet &#123;    var name: String = \"Pup\"    // å¦‚æœprotocolæœ‰initï¼Œ åˆ™åœ¨classä¸­å¿…é¡»å£°æ˜requiredï¼Œå¼ºåˆ¶è®©å­ç±»å®ç°    required init(name: String) &#123;        self.name = name    &#125;&#125;final class Cat: Animal, Pet &#123;    var name: String    // å¦‚æœæ˜¯final classï¼Œinitå¯ä»¥æ²¡æœ‰requiredï¼Œå› ä¸ºå®ƒä¸å†ä¼šè¢«ç»§æ‰¿    init(name: String) &#123;        self.name = name    &#125;&#125;class Bird: Animal &#123;    var name: String = \"bird ...\"    init(name: String) &#123;        // çœç•¥...    &#125;&#125;class Parrot: Bird &#123;    // å¦‚æœåªç»§æ‰¿Birdï¼Œåˆ™åªéœ€è¦åŠ overrideæˆ–Bird initæ˜¯requiredï¼Œé‚£ä¹ˆåªéœ€è¦required    // å› ä¸ºæœ‰Petï¼Œ åˆ™requiredä¹Ÿä¸èƒ½çœç•¥    required override init(name: String) &#123;        super.init(name: name + \" \" + name)    &#125;&#125;\n3. ä¸ºä»€ä¹ˆä½¿ç”¨åè®®åè®®æè¿°çš„æ˜¯æŸç§ç‰¹æ€§ï¼›å¦‚ä¸‹é¢çš„ä¾‹å­ï¼Œé€šè¿‡åè®®ï¼Œæˆ‘ä»¬å¯ä»¥å°†ç»§æ‰¿è‡ªä¸åŒçˆ¶ç±»ä¸åŒç±»å‹çš„ä¸œè¥¿ï¼Œç”±äºæŸç§ä¸€æ ·çš„ç‰¹æ€§ï¼Œæˆ‘ä»¬å¯ä»¥ä¾è¿™ç‰¹æ€§æŠŠå®ƒä»¬å½’ä¸ºä¸€ç±»ã€‚123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869protocol Pet &#123;    var name: String &#123; get set &#125;&#125;protocol Flyable &#123;    var flySpeed: Double &#123; get &#125;    var flyHeight: Double &#123; get &#125;&#125;class Animal &#123;&#125;class Dog: Animal, Pet &#123;    var name: String = \"Puppy\"&#125;class Cat: Animal, Pet &#123;    var name: String = \"Kitten\"&#125;class Bird: Animal, Flyable &#123;    var flySpeed: Double    var flyHeight: Double    init(flySpeed: Double, flyHeight: Double) &#123;        self.flySpeed = flySpeed        self.flyHeight = flyHeight    &#125;&#125;class Parrot: Bird, Pet &#123;    var name: String    init(name: String, flySpeed: Double, flyHeight: Double) &#123;        self.name = name + \" \" + name        super.init(flySpeed: flySpeed, flyHeight: flyHeight)    &#125;&#125;class Sparrow: Bird &#123;    var color = UIColor.gray&#125;class Vehicle &#123;&#125;class Plane: Vehicle, Flyable &#123;    var model: String    var flySpeed: Double    var flyHeight: Double    init(model: String, flySpeed: Double, flyHeight: Double) &#123;        self.model = model        self.flyHeight = flyHeight        self.flySpeed = flySpeed    &#125;&#125;var dog = Dog()var cat = Cat()var parrot = Parrot(name: \"hi\", flySpeed: 10.0, flyHeight: 100.0)let pets: [Pet] = [dog, cat, parrot]var sparrow = Sparrow(flySpeed: 15.0, flyHeight: 80.0)var plane = Plane(model: \"Boeing 747\", flySpeed: 200.0, flyHeight: 10_000)let flyers: [Flyable] = [parrot, sparrow, plane]for flyer in flyers &#123;    print(\"Fly speed: \\(flyer.flySpeed), Fly Height: \\(flyer.flyHeight)\")&#125;\n3. ç±»å‹åˆ«å(typealias)1234567891011121314typealias Length = Doubleextension Double &#123;    var m: Length &#123; return self &#125;    var cm: Length &#123; return self * 100.0 &#125;    var km: Length &#123; return self / 1000.0 &#125;    var ft: Length &#123; return self / 3.28084 &#125;&#125;let runningDistance: Length = 3.54.kmrunningDistance// ä½¿ç”¨çš„æ—¶å€™ç›´æ¥ä½¿ç”¨AudioSampleï¼Œå¦‚æœéœ€è¦æ”¹ä¸ºUInt32æˆ–å…¶å®ƒæ—¶ç›´æ¥æ”¹è¿™é‡Œï¼Œè€Œä¸å¿…æ¯ä¸ªåœ°æ–¹éƒ½å»æ”¹typealias AudioSample = UInt64\n4. å¹¶è”ç±»å‹(associatedtype)ï¼Œåœ¨åè®®ä¸­ä½¿ç”¨åˆ«å12345678910111213141516171819202122232425262728protocol WeightCalculable &#123;    // åè®®ä¸­å£°æ˜å®ç°ç±»éœ€è¦ä½¿ç”¨åˆ«åï¼Œç”¨associatedtype    associatedtype WeightType    var weight: WeightType &#123; get &#125;&#125;// åœ¨å…·ä½“å®ç°ç±»ä¸­ï¼Œç”¨typealiasclass iPhone7: WeightCalculable &#123;    typealias WeightType = Double    var weight: WeightType &#123;        return 0.114    &#125;&#125;class Ship: WeightCalculable &#123;    typealias WeightType = Int    var weight: WeightType    init(weight: WeightType) &#123;        self.weight = weight    &#125;&#125;extension Int &#123;    typealias Weight = Int    var t: Weight &#123; return 1_000 * self &#125;&#125;let titanic = Ship(weight: 46_328_000)\n5. Swfitæ ‡å‡†åº“ä¸­çš„å¸¸ç”¨åè®®12345678910111213141516171819202122232425262728293031323334struct Record: Equatable, Comparable, CustomStringConvertible &#123;    var wins: Int    var losses: Int    // åè®®CustomStringConvertibleä¸­çš„å®šä¹‰ï¼Œå¯ç›´æ¥è¢«printæ‰“å°    var description: String &#123;        return \"WINS: \\(wins), LOSSES: \\(losses)\"    &#125;    var boolValue: Bool &#123;        return wins &gt; losses    &#125;&#125;// åè®®Equatableçš„ä½œç”¨ï¼Œæˆ‘ä»¬åªéœ€è¦å®ç°==ï¼Œæˆ‘ä»¬å°±å¯ä»¥ç”¨!=func ==(left: Record, right: Record) -&gt; Bool &#123;    return left.wins == right.wins &amp;&amp; left.losses == right.losses&#125;// åè®®Comparableçš„ä½œç”¨ï¼Œå½“æˆ‘ä»¬å®šä¹‰äº†&lt;ï¼Œä¸Šé¢å³å®šä¹‰äº†==ï¼Œæ­¤æ—¶æˆ‘ä»¬å¯ä»¥ä½¿ç”¨&lt;=,&gt;,&gt;=func &lt;(left: Record, right: Record) -&gt; Bool &#123;    if left.wins != right.wins &#123;        return left.wins &lt; right.wins    &#125;    return left.losses &gt; right.losses&#125;let record = Record(wins: 10, losses: 5)let record2 = Record(wins: 11, losses: 5)record &gt;= record2print(record) //WINS: 10, LOSSES: 5var records = [Record(wins: 10, losses: 3), Record(wins: 8, losses: 5), Record(wins: 8, losses: 8)]// å½“æˆ‘ä»¬å®ç°äº†Comparableï¼Œå¯ç›´æ¥æ’åºrecords.sort()\né¢å‘åè®®ç¼–ç¨‹1. æ‰©å±•åè®®å’Œé»˜è®¤å®ç°123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051protocol Record: CustomStringConvertible &#123;    var wins: Int &#123; get &#125;    var losses: Int &#123; get &#125;    func winningPercent() -&gt; Double&#125;// æ‰©å±•ä¸€ä¸ªåè®®çš„æ—¶å€™ï¼Œå¯ä»¥å¯¹åè®®è¿›è¡Œå®ç°extension Record &#123;    // å®ç°CustomStringConvertibleåè®®ä¸­çš„descriptionï¼Œå®ç°Recordçš„å°±å¯ä»¥ä¸ç”¨å®ç°è¿™ä¸ª    var description: String &#123;        return \"WINS: \\(wins), LOSSES: \\(losses)\"    &#125;    // æ‰©å±•åè®®ä¸­è¿˜å¯ä»¥å†™å…¶ä»–æ–¹æ³•çš„å®ç°    func shoutWins() &#123;        print(\"WE WIN\", wins, \"TIMES!!!\")    &#125;    // æ‰©å±•ä¸­è¿˜å¯ä»¥å¯¹å®šä¹‰çš„å˜é‡è¿›è¡Œè®¡ç®—ï¼Œè®¡ç®—çš„æ˜¯å¯¹åº”å®ç°ç±»ä¸­å€¼    var gamePlayed: Int &#123;        return wins + losses    &#125;&#125;struct BaseballRecord: Record &#123;    var wins: Int    var losses: Int    func winningPercent() -&gt; Double &#123;        return Double(wins) / Double(gamePlayed)    &#125;&#125;let teamRecord = BaseballRecord(wins: 2, losses: 10)print(teamRecord)teamRecord.shoutWins()// æ‰©å±•æ ‡å‡†åº“ä¸­çš„åè®®extension CustomStringConvertible &#123;    var descriptionWithDate: String &#123;        return NSData().description + \" \" + description    &#125;&#125;print(teamRecord.descriptionWithDate)// è¾“å‡º// WINS: 2, LOSSES: 10// WE WIN 2 TIMES!!!// &lt;&gt; WINS: 2, LOSSES: 10\n2. æ ¹æ®æ¡ä»¶æ‰©å±•åè®®123456789101112131415161718192021222324252627282930313233343536protocol Record &#123;    var wins: Int &#123;get&#125;    var losses: Int &#123;get&#125;&#125;extension Record &#123;    var gamePlayed: Int &#123;        return wins + losses    &#125;    func winningPercent() -&gt; Double &#123;        return Double(wins) / Double(gamePlayed)    &#125;&#125;protocol Tieable &#123;    var ties: Int &#123;get set&#125;&#125;// è¯¥æ‰©å±•è¡¨ç¤ºï¼šå®ç°è¯¥åè®®çš„å®ä¾‹åˆå®ç°äº†Tieableåè®®ä¼šè¿›å…¥è¿™ä¸ªæ‰©å±•// ç”±äºå®ç°äº†Tieableæ‰©å±•åçš„å®ä½“éœ€è¦æ”¹å˜ä¸€äº›è®¡ç®—æ–¹å¼extension Record where Self: Tieable &#123;    var gamePlayed: Int &#123;        return wins + losses + ties    &#125;    // å¦‚æœä¸å†™è¦†å†™è¿™ä¸ªæ–¹æ³•ï¼Œå®ä¾‹ä¼šè°ƒç”¨ä¸Šé¢æ‰©å±•ä¸­çš„æ–¹æ³•ï¼Œå¹¶è°ƒç”¨ä¸Šé¢æ‰©å±•ä¸­çš„gamePlayedï¼Œä¼šå¯¼è‡´è®¡ç®—ç»“æœä¸å¯¹    func winningPercent() -&gt; Double &#123;        return Double(wins) / Double(gamePlayed) // gamePlayed = wins + losses + ties    &#125;&#125;struct FootballRecord: Record, Tieable &#123;    var wins: Int    var losses: Int    var ties: Int&#125;let footballTeam = FootballRecord(wins: 1, losses: 1, ties: 1)footballTeam.gamePlayedfootballTeam.winningPercent()\n3. åè®®èšåˆåœ¨æ–¹æ³•çš„å‚æ•°ä¸­èšåˆå¤šä¸ªåè®®ä¸ºä¼ å…¥æ¡ä»¶12345678910111213141516171819202122232425262728293031323334protocol Prizable &#123;    func isPrizable() -&gt; Bool&#125;// è¯¥æ–¹æ³•è¡¨ç¤ºå®ä¾‹å¿…é¡»åŒæ—¶å®ç°äº†CustomStringConvertibleå’ŒPrizableä¸¤ä¸ªåè®®æ‰èƒ½ä¼ å…¥func award(one: CustomStringConvertible &amp; Prizable)&#123;    if one.isPrizable()&#123;        print(one)        print(\"Congratulation! You won a prize!\")    &#125;    else&#123;        print(one)        print(\"You can not have the prize!\")    &#125;&#125;struct Student: CustomStringConvertible, Prizable &#123;    var score: Int    init(score: Int) &#123;        self.score = score    &#125;    var description: String &#123;        return \"score = \\(score)\"    &#125;    func isPrizable() -&gt; Bool &#123;        return score &gt; 60    &#125;&#125;award(one: Student(score: 80))\n4. æ³›å‹çº¦æŸ1234567// ä¼ å…¥æ•°ç»„ï¼Œæ‰¾å‡ºæœ€å¤§å€¼func topOne&lt;T: Comparable&gt;(seq:[T]) -&gt; T &#123;    assert(seq.count &gt; 0)    return seq.reduce(seq[0]) &#123; max($0, $1) &#125;&#125;topOne(seq: [1, 4, 7, 2, 3])\n5. åˆ›å»ºè‡ªå·±çš„å§”æ‰˜æ¨¡å¼1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162protocol TurnBaseGameDelegate &#123;    func gameStart()    func playMove()    func gameEnd()    func gameOver() -&gt; Bool&#125;// å›åˆåˆ¶æ¸¸æˆprotocol TurnBasedGame &#123;    var turn: Int &#123; get set &#125;    func play()&#125;// å®ç°äº†æ¸¸æˆçš„é€»è¾‘ï¼Œä½†æ˜¯å…·ä½“æ˜¯ä»€ä¹ˆæ¸¸æˆä¸çŸ¥é“ï¼Œå§”æ‰˜å‡ºå»åˆ«äººå®ç°class SinglePlayerTurnBasedGame: TurnBasedGame &#123;    var delegate: TurnBaseGameDelegate!    var turn = 0    func play() &#123;        delegate.gameStart()        while !delegate.gameOver() &#123;            print(\"ROUND\", turn, \":\")            delegate.playMove()            turn += 1        &#125;        delegate.gameEnd()    &#125;&#125;// å®ç°äº†å§”æ‰˜çš„åè®®// æ·éª°å­æ¸¸æˆclass RollNumberGame: SinglePlayerTurnBasedGame, TurnBaseGameDelegate &#123;    var score = 0    override init() &#123;        super.init()        delegate = self    &#125;    func gameStart() &#123;        score = 0        turn = 0        print(\"Welcome to Roll Number Game.\")        print(\"Try to use least turn to make total 100 scores!\")    &#125;    func playMove() &#123;        let rollNumber = Int(arc4random() % 6) + 1        score += rollNumber        print(\"You rolled a\", rollNumber, \"! The score is\", score, \"now!\")    &#125;    func gameEnd() &#123;        print(\"Congratulation! You win the game in\", turn, \"ROUND!\")    &#125;    func gameOver() -&gt; Bool &#123;        return score &gt;= 30    &#125;&#125;let rollingNumber = RollNumberGame()rollingNumber.play()\n6. å¯é€‰çš„åè®®æ–¹æ³•å¯é€‰æ–¹æ³•éœ€è¦ç”¨@objcæ ‡è®°ï¼Œå®ç°çš„å®ä½“å¯å®ç°ï¼Œå¯ä¸å®ç°ï¼Œç”¨çš„æ—¶å€™å½“åšå¯é€‰ç±»å‹æ¥ç”¨123456789@objc protocol TurnBaseGameDelegate &#123;    func gameStart()    func playMove()    func gameEnd()    func gameOver() -&gt; Bool    @objc optional func turnStart()    @objc optional func turnEnd()&#125;\né”™è¯¯å¤„ç†1. å¼ºåˆ¶é€€å‡ºç¨‹åº12345678910111213141516171819assert(1&lt;0, \"Error msg\") // åªåœ¨æµ‹è¯•é˜¶æ®µæ‰æœ‰æ•ˆ// è¾“å‡ºï¼š// Assertion failed: Error msg: file LearnError.playground, line 5//===========================================assertionFailure()//è¾“å‡ºï¼š//Fatal error: file LearnError.playground, line 7//===========================================assertionFailure(\"Error msg\")//è¾“å‡ºï¼š//Fatal error: Error msg: file LearnError.playground, line 7//===========================================precondition(1&gt;0) // æ»¡è¶³æ¡ä»¶ä¹Ÿä¼šé€€å‡ºprecondition(1&gt;0, \"Error\")fatalError(\"Error\") // ä¸¥é‡çš„é”™è¯¯\n2. é”™è¯¯å¤„ç†12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879808182838485868788899091929394959697class VendingMachine &#123;    struct Item &#123;        enum ItemType: String &#123;            case Water            case Cola            case Juice        &#125;        let type: ItemType        let price: Int        var count: Int    &#125;    enum ItemError: Error, CustomStringConvertible &#123;        case NoSuchItem        case NotEnoughMoney(Int)        case OutOfStock        var description: String &#123;            switch self &#123;            case .NoSuchItem:                 return \"Not Such Item\"            case .NotEnoughMoney(let price) : return \"Not Enough Money. \\(price) Yuan needed.\"            case .OutOfStock:                 return \"Out of Stock\"            &#125;        &#125;    &#125;    private var items = [\"MIneral Water\": Item(type: .Water, price: 2, count: 10),                         \"Coca Cola\": Item(type: .Cola, price: 3, count: 5),                         \"Orange Juice\": Item(type: .Juice, price: 5, count: 3)]    func vend(itemName: String, money: Int) throws -&gt; Int &#123;        guard let item = items[itemName] else &#123;            throw ItemError.NoSuchItem        &#125;        guard money &gt;= item.price else &#123;            throw ItemError.NotEnoughMoney(item.price)        &#125;        guard item.count &gt; 0 else &#123;            throw ItemError.OutOfStock        &#125;        items[itemName]!.count -= 1        return money - item.price    &#125;    func display() &#123;        print(\"Want something to drink?\")        for itemName in items.keys &#123;            print(\"*\", itemName)        &#125;        print(\"===========================\")    &#125;&#125;let machine = VendingMachine()machine.display()var pocketMoney = 6// å¯èƒ½æŠ›å‡ºå¼‚å¸¸ï¼Œä½†ä¸ç®¡ä¸é¡¾ï¼ŒæŠ›å‡ºå¼‚å¸¸åç›´æ¥å´©æºƒpocketMoney = try! machine.vend(itemName: \"Coca Cola\", money: pocketMoney)// å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™å¾—åˆ°ä¸€ä¸ªnillet p = try? machine.vend(itemName: \"Coca Cola\", money: pocketMoney)// å¼‚å¸¸å¤„ç†ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸åˆ™è¿›å…¥å¯¹åº”çš„å¼‚å¸¸å¤„ç†ï¼Œå¦‚æœéƒ½æ²¡æœ‰æ•è·åˆ°ï¼Œåˆ™è¿›å…¥æœ€åä¸€ä¸ªå¤„ç†do&#123;    pocketMoney = try machine.vend(itemName: \"Coca Cola\", money: pocketMoney)    print(pocketMoney,\"Yuan left\")&#125;catch VendingMachine.ItemError.NoSuchItem&#123;    print(\"No Such Item\")&#125;catch VendingMachine.ItemError.NotEnoughMoney(let price)&#123;    print(\"Not Enough Money.\" , price , \"Yuan needed.\")&#125;catch VendingMachine.ItemError.OutOfStock&#123;    print(\"Out of Stock\")&#125;catch&#123;    print(\"Error occured during vending.\")&#125;// æ•è·å¼‚å¸¸ï¼Œå¹¶å¾—åˆ°å¼‚å¸¸å®ä¾‹do&#123;    pocketMoney = try machine.vend(itemName: \"Coca Cola\", money: pocketMoney)    print(pocketMoney,\"Yuan left\")&#125;catch let error as VendingMachine.ItemError&#123;    print(error)&#125;catch&#123;    print(\"Error occured during vending.\")&#125;\n3. deferç›¸å½“äºjavaä¸­çš„fanallyï¼Œç”¨äºæŠ›å‡ºå¼‚å¸¸æˆ–æ²¡æœ‰æŠ›å‡ºå¼‚å¸¸éƒ½éœ€è¦æ‰§è¡Œçš„è¯­å¥ï¼›ä½¿ç”¨æ–¹å¼ï¼š123456789101112131415161718192021func vend(itemName itemName: String, money: Int) throws -&gt; Int&#123;    // å’Œä»£ç å¹³çº§    defer&#123;        print(\"Have a nice day\")    &#125;    guard let item = items[itemName] else&#123;        throw VendingMachine.ItemError.NoSuchItem    &#125;    ...    // å¦‚æœæœ‰å¤šä¸ªdeferï¼Œåˆ™ä¼šå€’å™æ‰§è¡Œ    // å¦‚æœå‰æ–¹å°±æŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™è¯¥å±€ä¸ä¼šæ‰§è¡Œ    defer&#123;        print(\"Thank you\")    &#125;    ...    return money - item.price&#125;\nå†…å­˜ç®¡ç†1. ææ„å‡½æ•°ï¼Œå®ä¾‹é”€æ¯å‰åœ¨è¿™é‡Œåšä¸€äº›å¤„ç†ã€‚ç”±äºå†…å­˜è‡ªåŠ¨é”€æ¯å®ä¾‹ç”¨çš„æƒ…å†µæ¯”è¾ƒå°‘123456789101112131415161718192021222324252627282930313233343536class Person &#123;    init() &#123;        print(\"init...\")    &#125;    func doSomething() &#123;        print(\"doing something\")    &#125;    deinit &#123;        print(\"person is leaving!!!\")    &#125;&#125;var person: Person? = Person()// å½“èµ‹å€¼ä¸ºnilåï¼Œå®ä¾‹ä¼šè¢«é”€æ¯person = nil// å½“å®ä¾‹è¶…å‡ºä½œç”¨åŸŸåï¼Œå®ä¾‹ä¼šè¢«é”€æ¯func inTheShop() &#123;    print(\"======\")    print(\"Welcome\")    let person: Person = Person()    person.doSomething()&#125;inTheShop()// è¾“å‡º//init...//person is leaving!!!//======//Welcome//init...//doing something//person is leaving!!!\n2. å¼•ç”¨è®¡æ•°å½“å¼•ç”¨å®ä¾‹çš„å˜é‡ä¸º0çš„æ—¶å€™ï¼Œé‚£ä¹ˆå°±ä¼šè¢«é‡Šæ”¾ï¼›ARCï¼šAutomatic Reference Count3. å¼ºå¼•ç”¨å¾ªç¯å’Œweakweakå¿…é¡»æ˜¯ä¸€ä¸ªå¯é€‰å‹çš„å˜é‡12345678910111213141516171819202122232425262728293031323334353637class Person&#123;    var apartment: Apartment?    init()&#123;        print(\"Person is initialized\")    &#125;    deinit&#123;        print(\"Person is being deinitialized!\")    &#125;&#125;class Apartment&#123;    // å¼±å¼•ç”¨å¿…é¡»æ˜¯å¯é€‰å‹    // weakå¿…é¡»æ˜¯var    // å½“å¼±å¼•ç”¨çš„å®ä¾‹è¢«é”€æ¯çš„æ—¶å€™ï¼Œtenantä¼šè¢«èµ‹å€¼ä¸ºnil    weak var tenant: Person?    init()&#123;        print(\"Apartment is initialized!\")    &#125;    deinit&#123;        print(\"Apartment is being deinitialized!\")    &#125;&#125;var liuyubobobo: Person? = Person()var imoocApartment: Apartment? = Apartment()liuyubobobo!.apartment = imoocApartmentimoocApartment!.tenant = liuyuboboboliuyubobobo = nilimoocApartment?.tenant //nilimoocApartment = nil// ä¸¤ç§é¡ºåºå†…å­˜éƒ½èƒ½å¤Ÿæ­£ç¡®é‡Šæ”¾\n4. unownedå’Œä¸Šé¢ä¸€æ ·ä¹Ÿæ˜¯å¼±å¼•ç”¨ï¼ŒåŒºåˆ«åœ¨äºå®ƒåªèƒ½ä¿®é¥°å¸¸é‡letï¼Œä¸èƒ½æ˜¯å¯é€‰çš„ï¼›æ·»åŠ äº†unownedçš„å®ä¾‹æœ€å¥½åœ¨unownedå¼•ç”¨çš„å¯¹è±¡ä¹‹å‰é”€æ¯ï¼Œå› ä¸ºå¦‚æœä¸è¿™æ ·è®¿é—®unownedå¸¸é‡æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸5. å¼ºå¼•ç”¨å¾ªç¯123456789101112131415161718192021222324252627282930313233343536class Country&#123;    let name: String    //let capital: City    var capital: City! // ç”±äºå®šä¹‰æˆè¿™ç§éšå¼çš„å¯é€‰ï¼Œè¡¨ç¤ºå æ—¶ä¸ä¼šèµ‹å€¼ï¼Œä½†è‚¯å®šä¼šè¢«èµ‹å€¼    init(countryName: String, capitalName: String)&#123;        self.name = countryName        //-------ä¸¤æ®µæ„é€ ä»æ­¤åˆ†å‰²-------        self.capital = City(cityName: capitalName, country: self) // ç”±äºå æ—¶ä¸ç”¨èµ‹å€¼ï¼Œæ‰€ä»¥åˆ°äº†ç¬¬äºŒæ®µæ„é€ ï¼Œäºæ˜¯å¯ä»¥ä½¿ç”¨self        print(\"Country\", name, \"is intialized.\")    &#125;    deinit&#123;        print(\"Country\",name,\"is being deinitialized!\")    &#125;&#125;class City&#123;    let name: String    unowned let country: Country    init(cityName: String, country: Country)&#123;        self.name = cityName        self.country = country        print(\"City\", name, \"is intialized.\")    &#125;    deinit&#123;        print(\"City\",name,\"is being deinitialized!\")    &#125;&#125;var china: Country? = Country(countryName: \"China\", capitalName: \"Beijing\")china = nil\n6. é—­åŒ…ä¸­çš„å¼ºå¼•ç”¨å¾ªç¯12345678910111213141516171819202122232425262728class SmartAirConditioner&#123;    var temperature: Int = 26    var temperatureChange: ((Int) -&gt; ())!    init()&#123;        temperatureChange = &#123; [weak self]newTemperature in            guard let `self` = self else &#123;                return            &#125;            if abs(newTemperature - self.temperature) &gt;= 10&#123;                print(\"It's not healthy to do it!\")            &#125;            else&#123;                self.temperature = newTemperature                print(\"New temperature \\(newTemperature) is set!\")            &#125;        &#125;    &#125;    deinit&#123;        print(\"Smart Air-conditioner is being deinitialized!\")    &#125;&#125;var airCon: SmartAirConditioner? = SmartAirConditioner()airCon?.temperatureairCon?.temperatureChange(100)airCon?.temperatureChange(24)airCon = nil\nç±»å‹æ£€æŸ¥å’Œç±»å‹è½¬æ¢1. ç±»å‹æ£€æŸ¥is1234567class Person &#123;&#125;class Student: Person &#123;&#125;var person: Person = Student()person is Student // true\n2. ç±»å‹è½¬æ¢as1234// ç¡®å®šç±»å‹ï¼ˆå¤±è´¥æœ‰é£é™©ï¼‰let stu1 = person as! Student// å¯é€‰ç±»å‹ï¼ˆå¤±è´¥ä¸ºnilï¼‰let stu2 = person as? Student\n3. å¯ä»¥ç”¨åœ¨åè®®ä¸Š4. NSObject,AnyObjectå’ŒAny12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455class Person&#123;    var name: String    init(name: String)&#123;        self.name = name    &#125;&#125;//var objects: NSArray = [//    CGFloat(3.1415926),//    \"imooc\",//    UIColor.blueColor(),//    NSDate(),//    Int(32),//    Array&lt;Int&gt;([1,2,3])//]//var objects = [//    CGFloat(3.1415926),//    \"imooc\",//    UIColor.blueColor(),//    NSDate(),//    Int(32),//    Array&lt;Int&gt;([1,2,3]),//    Person(name: \"liuyubobobo\")//]////// a ä¸ºAnyObject//let a = objects[0]//var objects: [AnyObject] = [//    CGFloat(3.1415926),//    \"imooc\",//    UIColor.blueColor(),//    NSDate(),//    Int(32),//    Array&lt;Int&gt;([1,2,3]),//    Person(name: \"liuyubobobo\")//]////objects.append( &#123; (a:Int) -&gt; Int in//    return a*a&#125; )var objects: [Any] = [    CGFloat(3.1415926),    \"imooc\",    //swift 2: UIColor.blueColor(),    //swift3ä¸­ï¼Œé¢œè‰²ä»â€œxxxColor()â€å˜æˆäº†\"xxx\"ã€‚ç›´æ¥è°ƒç”¨UIColor.xxxå³å¯    UIColor.blue,                //swift 3    NSDate(),    Int(32),    Array&lt;Int&gt;([1,2,3]),    Person(name: \"liuyubobobo\")]objects.append( &#123; (a:Int) -&gt; Int in    return a*a&#125; )\nä¸€äº›æ³¨æ„äº‹é¡¹1. å˜é‡å¯ä»¥ç”¨ä¸­æ–‡ï¼Œæ”¯æŒUnicodeå­—ç¬¦ï¼Œå¹¶ä¸”å¯ä»¥ç”¨è¡¨æƒ…2. swiftæ²¡æœ‰ ++ -- è¿ç®—3. ç±»å‹éƒ½éœ€è¦æ˜¾ç¤ºçš„è‡ªå·±å»è½¬æ¢4. Arrayã€Setã€Dictionaryã€Stringç­‰ç»“æ„ä½“éƒ½æ˜¯å€¼ç±»å‹çš„\n","plink":"https://blog.xujiaji.com/post/swift-study-note/"},{"title":"Dagger2 çš„æ·±å…¥åˆ†æä¸ä½¿ç”¨","date":"2018-06-26T16:00:00.000Z","author":"xujiaji","updated":"2019-04-08T06:55:53.838Z","content":"\nDagger2 çš„æ·±å…¥åˆ†æä¸ä½¿ç”¨å¬é—»Daggerå¤§åå¾ˆä¹…ï¼Œä½†ä¸€ç›´æ²¡æœ‰å»å­¦ï¼Œç›´åˆ°ä¸å¾—ä¸å­¦ ã€’â–½ã€’ã€‚è¿™ä¸ªæ¡†æ¶å¼€å§‹çš„æ—¶ä¸æ˜¯å¾ˆå¥½ç†è§£ï¼Œçœ‹äº†ä¸€äº›æ–‡ç« è¿˜æ˜¯æ²¡æœ‰ç†è§£åˆ°ç²¾é«“ï¼Œä¼¼æ‡‚éæ‡‚ï¼Œäºæ˜¯è‡ªå·±åšäº†äº›ç®€å•çš„æµ‹è¯•ä»£ç è§‚å¯ŸDaggeræ³¨è§£çš„ä½œç”¨ã€‚å°†å­¦ä¹ å’Œç†è§£çš„è¿‡ç¨‹åˆ†äº«å‡ºæ¥ï¼Œå¸Œæœ›èƒ½å¸®åˆ°ä¸€äº›å­¦äº›Daggerçš„æœ‹å‹ï¼ŒåŒæ—¶æˆ‘ä¹Ÿå·©å›ºæ€»ç»“ä¸€ä¸‹ã€‚\næœ¬ç¯‡æ–‡ç« ä¸è®²ï¼ŒDaggerå“ªé‡Œå¥½å“ªé‡Œå¥½ï¼åªè®²æ€ä¹ˆç”¨çš„å’Œä¸€äº›åŸç†ï¼\nDaggeræ˜¯ä»€ä¹ˆï¼Ÿ\nDaggeræ˜¯ä¸€ä¸ªä¾èµ–æ³¨å…¥æ¡†æ¶ï¼ˆDependency injectionï¼‰ï¼Œç®€ç§°DIã€‚å‡å¦‚æœ‰Aå’ŒBä¸¤ä¸ªå¯¹è±¡ï¼ˆBç›¸å½“äºæ˜¯DIï¼‰ï¼ŒAä¸­å¹¶æ²¡æœ‰å¯¹è‡ªå·±å†…éƒ¨çš„æˆå‘˜è¿›è¡Œåˆå§‹åŒ–ï¼Œå®ƒçš„æˆå‘˜åˆå§‹åŒ–å…¨éƒ¨æ˜¯Bç±»æ³¨å…¥è¿›æ¥ã€‚\n\nå¤§éƒ¨åˆ†æ³¨å…¥æ¡†æ¶æ˜¯åŸºäºåå°„å®ç°çš„ï¼ŒDaggeræ—¨åœ¨è§£å†³è®¸å¤šå›°æ‰°åŸºäºåå°„çš„è§£å†³æ–¹æ¡ˆçš„å¼€å‘å’Œæ€§èƒ½é—®é¢˜ï¼ŒDaggerçš„ä¾èµ–æ³¨å…¥æ˜¯é€šè¿‡javaä»£ç æ¥å®ç°çš„ã€‚ç›¸å½“äºä½ è‡ªå·±å¯ä»¥ç”¨javaæ‰‹å†™ä¾èµ–æ³¨å…¥ä»£ç ï¼Œä½†è¿™æ ·çš„è¯å°±ä¼šæ›´å¤§çš„å·¥ä½œé‡ï¼Œäºæ˜¯Daggeré€šè¿‡æ³¨è§£ç­‰å¸®æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆç›¸å…³çš„ä¾èµ–æ³¨å…¥é€»è¾‘ä»£ç ã€‚\n\né¢â€¦ï¼Œæœ‰ç‚¹ä¸€å¤´é›¾æ°´çš„æ„Ÿè§‰å§ï¼å¦‚æœå¤§å®¶æƒ³çŸ¥é“è¯¦ç»†æ¦‚å¿µçš„è¯ï¼Œå¯ä»¥å»æœç´¢ä¸€ä¸‹å•¦ï¼\n\nåœ¨ä¸‹é¢æ‰€è®²çš„éƒ½æ˜¯ä»¥å®é™…çš„ä»£ç æ“ä½œä¸ºä¸»ï¼Œæ¥å»è§‚å¯Ÿç»“æœï¼Œä»£ç æœ¬ç¯‡ä¸ä¼šæ¶‰åŠAndroid é¡µé¢ï¼Œåªæƒ³é€šè¿‡ç®€å•çš„ä»£ç æ¥ç†æ¸…æ¥šDaggerç”ŸæˆDIçš„é€»è¾‘ã€‚\n\n\néœ€è¦æ·»åŠ çš„ä¾èµ–å®˜æ–¹Dagger2é¡¹ç›®åœ°å€ï¼šhttps://github.com/google/dagger\n1234dependencies &#123;    implementation 'com.google.dagger:dagger:2.15'    annotationProcessor 'com.google.dagger:dagger-compiler:2.15'&#125;\næ³¨è§£ä½¿ç”¨æ¬¢è¿æ¥åˆ°æœ¬ç¯‡æœ€ç²¾å½©çš„åœ°æ–¹ï¼å‚è€ƒè‡ªå®˜æ–¹çš„ä½¿ç”¨æŒ‡å—\n\nç¬¦å·å«ä¹‰å‚è€ƒè¡¨ï¼š\n\n\n\n\nç¬¦å·â•â•â–¶\n\n\n\n\n\n\n\n\n\n\n\n\nå«ä¹‰â•â•â–¶\nprivateå˜é‡\nprivateæ–¹æ³•\nprotectedå˜é‡\nprotectedæ–¹æ³•\nåŒ…ç§æœ‰ å˜é‡\nåŒ…ç§æœ‰æ–¹æ³•\npublic å˜é‡\npublic æ–¹æ³•\n\n\n\n\n\n\nç¬¦å·\nå«ä¹‰\nç®€å•ä¾‹å­\n\n\n\n\n\nç»§æ‰¿\nclass A{}class B extend A{}\n\n\n\nå®ç°æ¥å£\ninterface I{}class A implements I{}\n\n\n\nä¾èµ–\nclass A{}class B{ã€€ã€€void fun(A c) {}}\n\n\n\nå¹¶è”\nclass A{}class B{ã€€ã€€A a;}\n\n\n\nclass\nclass A{}\n\n\n\nabstract\nabstract class A{}\n\n\n\ninterface\ninterface A{}\n\n\n\nenum\nenum A{}\n\n\n...\nçœç•¥ä»£ç \nclass A {...}\n\n\n\nå’–å•¡æœºç”¨å’–å•¡æœºçš„ä¾‹å­æ¥æ¼”ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹ä¸»è¦çš„å‡ ä¸ªç±»ï¼Œä¸‹é¢æ˜¯ç®€å•å’–å•¡æœºUMLå…³ç³»å›¾ï¼ï¼ˆæŸ¥è€ƒè‡ªDagger2é¡¹ç›®exampleï¼‰\n\n\næ­£å¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¤§æ¦‚ä¼šå†™æˆè¿™æ ·ï¼š\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172737475767778798081/** * å®šä¹‰æ³µæ¥å£ */interface Pump &#123;    void pump();&#125;---------------------------------------------------------------------------------/** * å®šä¹‰åŠ çƒ­å™¨æ¥å£ */interface Heater &#123;    void on();    void off();    boolean isHot();&#125;---------------------------------------------------------------------------------/** * ç”µå­åŠ çƒ­å™¨ */public class ElectricHeater implements Heater &#123;    boolean heating;    @Override    public void on() &#123;        System.out.println(\"~~~~heating~~~~\");        this.heating = true;    &#125;    @Override    public void off() &#123;        this.heating = false;    &#125;    @Override    public boolean isHot() &#123;        return heating;    &#125;&#125;---------------------------------------------------------------------------------/** * çƒ­è™¹å¸ */public class Thermosiphon implements Pump &#123;    private final Heater heater;    Thermosiphon(Heater heater) &#123;        this.heater = heater;    &#125;    @Override    public void pump() &#123;        if (heater.isHot()) &#123;            System.out.println(\"=&gt;=&gt; æŠ½æ°´ =&gt;=&gt;\");        &#125;    &#125;&#125;---------------------------------------------------------------------------------/** * å’–å•¡æœº */public class CoffeeMaker &#123;    Heater heater;    Pump pump;    public CoffeeMaker(Heater heater, Pump pump) &#123;        this.heater = heater;        this.pump = pump;    &#125;    public void brew() &#123;        heater.on();        pump.pump();        System.out.println(\"[_]P coffee! [_]P\");        heater.off();    &#125;&#125;---------------------------------------------------------------------------------/** * å‡ºå’–å•¡æµ‹è¯• */public class CoffeeApp &#123;    public static void main(String[] args) &#123;        Heater heater = new ElectricHeater();//å®ä¾‹åŒ–åŠ çƒ­å™¨        Pump pump = new Thermosiphon(heater);//å®ä¾‹åŒ–æ³µ        CoffeeMaker coffeeMaker = new CoffeeMaker(heater, pump);//å®ä¾‹åŒ–å’–å•¡æœº        coffeeMaker.brew();//å‡ºå’–å•¡    &#125;&#125;\n@Injectæµ‹è¯•æ–‡ä»¶ä½ç½®\n\nå…¶åï¼šæ³¨å…¥ï¼Œ@Injectçš„ç”¨æ³•æ˜¯æ ‡è®°æˆå‘˜å˜é‡ã€æ„é€ æ–¹æ³•æˆ–æˆå‘˜æ–¹æ³•ã€‚\n\næ ‡è®°äº†æ³¨è§£@Injectçš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•ï¼ŒDaggerä¼šè‡ªåŠ¨ä¸ºå…¶æä¾›å®ä¾‹ï¼›æ ‡è®°äº†@Injectçš„æ„é€ æ–¹æ³•è¡¨ç¤ºDaggerå°†ä¼šè‡ªåŠ¨å®ä¾‹åŒ–è¯¥ç±»æä¾›ç»™å…¶ä»–éœ€è¦æ³¨å…¥çš„ç±»ã€‚\n\nåƒè¿™è¿™æ ·ä¸€ä¸ªéœ€è¦æ³¨å…¥çš„æˆå‘˜ï¼Œä¸€ä¸ªæä¾›è¯¥å¯¹è±¡å°±è¿™æ ·å¯¹åº”èµ·æ¥äº†ã€‚ä½†æ˜¯è¿˜å·®ä¸€ä¸ªå°†å®ƒä»¬è”ç³»èµ·æ¥çš„ä¸œè¥¿ï¼Œå®ƒå«Componnetã€‚ä¸‹é¢çš„ä¾‹å­å°†ä¼šæå‰ç”¨åˆ°@Componentæ³¨è§£æ‚¨å¯ä»¥å…ˆä¸å»æ·±å…¥ç†è§£ï¼Œå æ—¶ç†è§£ä¸ºDaggerå¿…è¦å†™çš„çš„ä¸”æ˜¯æ³¨å…¥çš„å…³ç³»è¿æ¥çº½å¸¦ã€‚\n\n\n\nè¿™é‡Œåœ¨æ„é€ æ–¹æ³•ä¸ŠåŠ @Injectå¯ä»¥ç†è§£ä¸ºï¼šæä¾›new ElectricHeater()\n\n123456789/** * ç”µå­åŠ çƒ­å™¨ */public class ElectricHeater implements Heater &#123;    @Inject    public ElectricHeater() &#123;    &#125;    ...&#125;\n\n@Componentèµ·çº½å¸¦ä½œç”¨ï¼Œç”¨æ¥å£æˆ–æŠ½è±¡ç±»æ¥å®šä¹‰ã€‚Thermosiphon getPump()è¡¨ç¤ºå…¶ä»–åœ°æ–¹éœ€è¦æä¾›new Thermosiphon()\n\n1234@Componentpublic interface PumpComponent &#123;    Thermosiphon getPump();&#125;\n\n@Injectæ ‡è®°åœ¨æˆå‘˜å˜é‡ä¸Šï¼Œè¡¨ç¤ºå…¶ä»–åœ°æ–¹éœ€è¦æä¾›ElectricHeaterå¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯ä¸Šä¸Šé¢ä»£ç ä¸­@Injectæ ‡è®°åœ¨æ„é€ æ–¹æ³•çš„ä½œç”¨ã€‚@Injectæ ‡è®°åœ¨æ„é€ æ–¹æ³•ä¸Šï¼Œå¯ä»¥çœ‹åšnew Thermosiphon()ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢æ¥å£ä¸­éœ€è¦çš„å¯¹è±¡ã€‚\n\n123456789101112131415161718/** * çƒ­è™¹å¸ */public class Thermosiphon implements Pump &#123;    @Inject    ElectricHeater heater;    @Inject    public Thermosiphon()    &#123;&#125;    @Override    public void pump() &#123;        if (heater.isHot()) &#123;            System.out.println(\"=&gt;=&gt; æŠ½æ°´ =&gt;=&gt;\");        &#125;    &#125;&#125;\n\næˆ‘ä»¬ç›´æ¥åˆ›å»ºä¸€ä¸ªCoffeeAppç±»ä¸­è¿›è¡Œæµ‹è¯•ï¼ŒDaggerPumpComponentæ˜¯é€šè¿‡aptè‡ªåŠ¨ç”Ÿæˆçš„ç±»ï¼ˆéœ€è¦åœ¨Android studioä¸­ç‚¹å‡»ï¼šBuild -&gt; Make Moduleï¼‰ã€‚\n\n123456789//è¿è¡Œæµ‹è¯•public class CoffeeApp &#123;    public static void main(String[] args) &#123;        // å…¨å†™ï¼šThermosiphon pump = DaggerPumpComponent.builder().build().getPump();        Thermosiphon pump = DaggerPumpComponent.create().getPump();        pump.heater.on();        pump.pump();    &#125;&#125;\n\nCoffeeAppè¿è¡Œç»“æœ\n\n12~~~~heating~~~~=&gt;=&gt; æŠ½æ°´ =&gt;=&gt;\n\næµ‹è¯•ä¸€ä¸‹å°†@Injectæ ‡è®°åœ¨æ–¹æ³•ä¸Šï¼Œä¿®æ”¹Thermosiphonç±»ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n12345678910111213141516171819/** * çƒ­è™¹å¸ */public class Thermosiphon implements Pump &#123;...    @Inject    public void funTest()    &#123;        System.out.println(\"funTest()\");    &#125;    @Inject    public void funTest(ElectricHeater heater)    &#123;        System.out.println(\"heater: \" + this.heater.hashCode());        System.out.println(\"funTest(): \" + heater.hashCode());    &#125;...&#125;\n\nCoffeeAppè¿è¡Œç»“æœ\n\n12345funTest()heater: 692404036funTest(): 1554874502~~~~heating~~~~=&gt;=&gt; æŠ½æ°´ =&gt;=&gt;\n\nä¸€äº›ç»“è®º\n\n\né€šè¿‡DaggerPumpComponent.create().getPump();æ—¢å¯ä»¥å¾—åˆ°Thermosiphonå¯¹è±¡ã€‚\næˆ‘ä»¬çœ‹åˆ°åœ¨Thermosiphonä¸­heateræ˜¯ä»¥ElectricHeateræ¥æ¥æ”¶çš„ï¼Œå¹¶æ²¡æœ‰å‘ä¸Šè½¬å‹ä¸ºæ¥å£Heaterå¼•ç”¨ï¼Œ@Injectæ ‡è®°éœ€è¦æ˜¯ç¡®åˆ‡çš„ç±»å‹ã€‚ç­‰æˆ‘ä»¬å­¦ä¹ äº†ä¸‹é¢@Providesä¸¶@Moduleéƒ¨åˆ†ï¼Œæˆ‘ä»¬å°±èƒ½é—´æ¥çš„ç”¨Heateræ¥å£æ¥æ¥æ”¶ã€‚\né€šè¿‡ä¸Šé¢ä¾‹å­æˆ‘ä»¬æ˜æ˜¾çœ‹åˆ°ï¼Œæˆ‘ä»¬å¹¶æ²¡æœ‰new å¯¹è±¡ï¼Œç„¶è€Œå´æœ‰ElectricHeaterå’ŒThermosiphonè¢«å®ä¾‹åŒ–ï¼Œè¿™å°±æ˜¯Daggerç”Ÿæˆjavaä»£ç ä¸­å¸®æˆ‘ä»¬è¿›è¡Œäº†å®ä¾‹åŒ–çš„æ“ä½œã€‚\næ³¨æ„@Injectæ ‡è®°çš„æˆå‘˜å˜é‡ã€æ–¹æ³•å’Œæ„é€ æ–¹æ³•ä¸èƒ½ä»¥privateä¿®é¥°ã€‚å› ä¸ºå¦‚æœæˆ‘ä»¬ç”¨privateï¼ŒDaggerä»¥javaä»£ç æ³¨å…¥ï¼Œè‡ªç„¶ä¸èƒ½å¸®æˆ‘ä»¬æ³¨å…¥å¯¹è±¡ï¼Œä¼šæŠ¥é”™!ä½ å¯ä»¥è¯•è¯•çœ‹å“¦ï¼(ï¿£â–½ï¿£)~*\nä¹Ÿè®¸ä½ æƒ³é—®DaggerPumpComponentæ˜¯å“ªæ¥çš„ï¼Ÿç”¨@Componentæ ‡è®°çš„æ¥å£ä¼šç”Ÿæˆä¸€ä¸ªä»¥â€œDagger + æ¥å£åâ€çš„ç±»ã€‚\nç»æµ‹è¯•ï¼Œå¦‚æœå°†æˆå‘˜å˜é‡ä¸Šçš„@Injectå»æ‰ï¼Œä¸ä¼šæŠ¥é”™ï¼Œåªæ˜¯æ²¡æœ‰å¼•ç”¨çš„å¯¹è±¡ï¼Œå˜é‡ä¸ºnullã€‚å¦‚æœæˆå‘˜å˜é‡ä¸Šæ ‡è®°äº†@Injectï¼Œè€Œæ²¡æœ‰å¯¹åº”çš„æ³¨å…¥å®ä¾‹ï¼Œåˆ™ä¼šç¼–è¯‘é”™è¯¯ã€‚\nDaggerç”Ÿæˆä»£ç çš„ä½ç½®ï¼šé¡¹ç›®ç›®å½• -&gt; app -&gt; build -&gt; generated -&gt; source -&gt; apt\nå¦‚æœæˆ‘ä»¬å°†@Injectæ ‡è®°åœ¨æ–¹æ³•ä¸Šï¼Œå¦‚æœæœ‰å‚ï¼ŒDaggeræä¾›è¯¥å®ä¾‹ï¼Œç„¶åè‡ªåŠ¨è°ƒç”¨è¯¥æ–¹æ³•ï¼›å¦‚æœæ— å‚åˆ™ç›´æ¥è°ƒç”¨ï¼›å¦‚æœæœ‰å‚æ²¡æœ‰å¯¹åº”çš„å®ä¾‹æä¾›ï¼Œåˆ™æŠ¥é”™ã€‚\n\n\næ¥ä¸‹æ¥å°†ä»Daggerç”Ÿæˆçš„æ³¨å…¥ä»£ç ä¸Šè¿›è¡Œåˆ†æï¼ˆè¿™éƒ¨åˆ†è·³è¿‡ä¹Ÿå¯ä»¥æ»´ï¼(ï½€ãƒ»Ï‰ãƒ»Â´)ï¼‰\nè¿™æ˜¯ä¸Šé¢æ•´ä½“çš„UMLå…³ç³»å›¾ï¼Œâ€œç»¿è‰²â€çš„æ˜¯Daggerè‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ã€‚\n\n1. é€šè¿‡æˆ‘ä»¬å¯¹Daggerçš„ä½¿ç”¨ï¼Œå®ƒä¸ºæˆ‘ä»¬ç”Ÿæˆäº†4ä¸ªç±»ã€‚2. ä»–ä»¬è¿™æ ·å¯¹åº”ï¼š\n\n\n\n\nPumpComponent\nâ€”â€“&gt;\nDaggerPumpComponent\n\n\n@Inject public ElectricHeater() { }\nâ€”â€“&gt;\nElectricHeater_Factory\n\n\n@Inject public Thermosiphon() { }\nâ€”â€“&gt;\nThermosiphon_Factory\n\n\n@Inject ElectricHeater heater;\nâ€”â€“&gt;\nThermosiphon_MembersInjector\n\n\n\né€šè¿‡è§‚å¯Ÿæˆ‘ä»¬å¯ä»¥å¾—å‡ºè¿™äº›ç»“è®ºï¼š\n\nâ‘ PumpComponentæ¥å£ç”Ÿæˆçš„ç±»çš„åå­—ä»¥ï¼šDagger + æ¥å£åã€‚ï¼ˆæˆ‘ä»¬éœ€è¦ä½¿ç”¨ç”Ÿæˆçš„è¿™ä¸ªç±»ï¼Œè¿›è¡ŒDaggeråˆå§‹åŒ–çš„æ“ä½œï¼‰\nâ‘¡@Injectæ ‡è®°äº†æ„é€ æ–¹æ³•ç”Ÿæˆç±»åä»¥ï¼šæ„é€ å + _Factoryï¼Œçš„å‘½åç”Ÿä¸€ä¸ªå·¥å‚ç±»ã€‚ï¼ˆè¯¥å·¥å‚ç±»å°†ç”¨æ¥åˆ›å»ºå¯¹åº”çš„å®ä¾‹ï¼‰\nâ‘¢ç±»ä¸­æœ‰@Injectæ ‡è®°æˆå‘˜å˜é‡æˆ–æ–¹æ³•çš„ç±»ï¼Œä¼šç”Ÿæˆä¸€ä¸ªä»¥ï¼šè¯¥ç±»å + _MembersInjectorï¼Œçš„å‘½åç”Ÿæˆä¸€ä¸ªæ³¨å…¥ç±»ã€‚ï¼ˆè¯¥ç±»å®ç°äº†å°†å®ä¾‹ä¼ é€’åˆ°ç”¨@Injectæ ‡è®°çš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•ï¼‰\n\n3. æ¥çœ‹çœ‹ElectricHeaterçš„å·¥å‚ç±»ElectricHeater_Factoryï¼ˆè¿™æ˜¯ä¸€ä¸ªå·¥å‚è®¾è®¡æ¨¡å¼ä¸­çš„ä¸€ç§å®ç°æ–¹å¼ï¼‰ï¼Œå®ç°ä¸€ä¸ªå·¥å‚æ¥å£Factory&lt;T&gt;(Factory&lt;T&gt;åˆç»§æ‰¿Provider&lt;T&gt;æ¥å£)ã€‚é€šè¿‡get()è·å–ä¸€ä¸ªElectricHeaterå®ä¾‹ï¼Œé€šè¿‡create()è·å–ElectricHeater_Factoryå®ä¾‹ï¼ˆè¿™ä¸ªç±»å¹¶æœªè¢«ä½¿ç”¨ï¼Œå½“ä½ çœ‹åˆ°ä¸‹é¢ä»‹ç»DaggerPumpComponentå°±æ˜ç™½äº†ï¼‰4. æ¥ä¸‹æ¥çœ‹çœ‹Thermosiphon_MembersInjectorï¼Œè¿™ä¸ªç±»å®ç°äº†ä¸º@Injectæ³›å‹æ ‡è®°çš„æˆå‘˜å˜é‡æˆ–æ–¹æ³•ä¼ é€’å€¼çš„æ“ä½œã€‚å¤§å®¶çœ‹injectHeateræ–¹æ³•ï¼Œè¿™é‡Œå°±æ˜¯ä¸ºThermosiphonçš„æˆå‘˜å˜heateræ·»åŠ ä¾èµ–çš„åœ°æ–¹!5. å†çœ‹çœ‹Thermosiphon_Factoryï¼Œè¿™ä¸ªç±»æ¯”ä¸Šä¸€ä¸ªElectricHeater_Factoryå¤æ‚ä¸€ç‚¹ã€‚å› ä¸ºå®ƒåœ¨å®ä¾‹åŒ–Thermosiphonæ—¶ï¼Œéœ€è¦æ³¨å…¥ElectricHeaterå¯¹è±¡ã€‚è¿™æ¯”ElectricHeater_Factoryå¤šäº†ä¸ªæ–¹æ³•å¹¶ä¸”å®ä¾‹è¯¥å·¥å‚ç±»æ—¶å¿…é¡»ä¼ å…¥ElectricHeaterçš„å·¥å‚ç±»å®ä¾‹ã€‚\n\næ„é€ å‚æ•°æ˜¯ElectricHeaterçš„å·¥å‚ï¼Œæ˜¯ä¸ºäº†é€šè¿‡å·¥å‚ç±»è·å¾—ElectricHeaterå¯¹è±¡ï¼›\nå·¥å‚æ–¹æ³•get()ä¸­åˆ›å»ºå®ä¾‹çš„åŒæ—¶ï¼Œé€šè¿‡Thermosiphon_MembersInjectorçš„é™æ€æ–¹æ³•(injectHeater)å‘Thermosiphonæ³¨å…¥ElectricHeaterå¯¹è±¡ï¼Œç„¶åå¾—åˆ°æœ€ç»ˆçš„Thermosiphonå®ä¾‹ï¼›\næœ€åä¸€ä¸ªé™æ€æ–¹æ³•newThermosiphon()è¿”å›ä¸€ä¸ªæ²¡æœ‰æ³¨å…¥ElectricHeaterå®ä¾‹çš„Thermosiphonå¯¹è±¡ã€‚\n\n6. æœ€åçœ‹DaggerPumpComponentè¿™ä¸ªç±»ï¼Œä¸»è¦çœ‹getPump()ã€injectThermosiphonå’ŒBuilderç±»\n\ngetPump()æ˜¯æˆ‘ä»¬åœ¨æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•ï¼Œåœ¨è¿™é‡Œå®ç°æ¥å£æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨injectThermosiphonæ–¹æ³•å¹¶ä¼ å…¥ä¸€ä¸ªæ²¡æœ‰æ³¨å…¥ElectricHeaterå®ä¾‹çš„Thermosiphonï¼Œå¾—åˆ°æœ€ç»ˆçš„Thermosiphon\ninjectThermosiphonæ–¹æ³•ä¸­å¾—åˆ°ä¸Šé¢ä¼ è¿›æ¥çš„Thermosiphonï¼Œç„¶åé€šè¿‡Thermosiphon_MembersInjectoræ³¨å…¥ElectricHeaterå®ä¾‹ã€‚çœ‹åˆ°è¿™é‡Œæˆ‘ä»¬ä¼šå‘ç°ç¬¬â€œ3.â€ä¸­ä»‹ç»çš„ElectricHeater_Factoryå±…ç„¶æ²¡æœ‰ç”¨åˆ°ï¼Œè¿™é‡Œç›´æ¥å°±newäº†ï¼ˆè¿™ä¹Ÿæ˜¯ä¸Šé¢æåˆ°çš„å¹¶æ²¡æœ‰ä½¿ç”¨ElectricHeater_Factoryï¼‰ã€‚\nBuilderå°±æ˜¯ç”¨æ¥åˆ›å»ºDaggerPumpComponentçš„ç±»ï¼Œå­¦åˆ°åé¢ï¼Œè¿™ä¸ªç±»ä¼šæ ¹æ®éœ€æ±‚å˜å¾—å¤æ‚ï¼\n\n@Providesä¸¶@Moduleä¸¶@Bindsæµ‹è¯•æ–‡ä»¶ä½ç½®\n\nç”±äº@Injectæ³¨è§£æ— æ³•åšåˆ°ä»¥ä¸‹å‡ ç‚¹ï¼š\n\n\næ¥å£ç±»å‹æ— æ³•åšä¸ºæ¥æ”¶ç±»å‹\nç¬¬ä¸‰æ–¹ç±»æ— æ³•æ·»åŠ @Injectæ³¨è§£ï¼ˆå› ä¸ºè¿™ä¸ªç±»ä¸æ˜¯è‡ªå·±æŒæ§çš„ï¼‰\n\nè¿™ç§æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ç”¨@Providesæ³¨é‡Šå»æ»¡è¶³ä¾èµ–ï¼Œæ–¹æ³•çš„è¿”å›ç±»å‹ç¡®å®šäº†å®ƒæä¾›ç»™è°çš„ä¾èµ–ã€‚\n\nä½¿ç”¨\n\n\nåˆ›å»ºä¸€ä¸ªç±»ä½œç”¨æ˜¯å­˜æ”¾æä¾›å®ä¾‹çš„æ–¹æ³•ï¼Œçº¦å®šè¯¥ç±»ä»¥Moduleç»“å°¾ï¼ˆä¾¿äºç»Ÿä¸€åˆ†è¾¨ï¼Œå°±åƒæˆ‘ä»¬å®‰å“Activityå‘½åä»¥Activityç»“å°¾ï¼‰\nåœ¨ç±»åä¸Šæ ‡è®°@Moduleæ³¨è§£\nä½¿ç”¨é™æ€æˆ–æ™®é€šæœ‰è¿”å›çš„æ–¹æ³•æ¥æä¾›å®ä¾‹\nåœ¨è¿™äº›æ–¹æ³•å‰éœ€è¦æ ‡è®°@Providesæ³¨è§£\nè¿™äº›æ–¹æ³•ä»¥provideå¼€å¤´ï¼Œä¹Ÿæ˜¯ä¸€ç§çº¦å®š\n\n\n\n\nçœ‹ä¸‹æ–¹è¿™ä¸ªDripCoffeeModuleç±»ï¼Œå®ƒæä¾›äº†ä¸¤ä¸ªå®ä¾‹ï¼Œå¹¶ä¸”å®ƒä»¬çš„è¿”å›ç±»å‹æŒ‡å‘çš„æ˜¯æ¥å£ã€‚ä¹Ÿå°±æ˜¯è¯´æœ‰æŸä¸ªåœ°æ–¹å¯èƒ½éœ€è¦Heaterå’ŒPumpçš„å®ä¾‹ã€‚\n\n123456789101112131415@Modulepublic class DripCoffeeModule&#123;    @Provides    static Heater provideHeater() &#123;        System.out.println(\"provideHeater\");        return new ElectricHeater();    &#125;    @Provides    static Pump providePump(Thermosiphon pump) &#123;        System.out.println(\"providePump\");        return pump;    &#125;&#125;\n\nåœ¨@Componentæ³¨è§£ä¸­æ·»åŠ DripCoffeeModule.classï¼Œå¦‚æœæœ‰å¤šä¸ªå¯å†™ä¸ºï¼š@Component(modules = {DripCoffeeModule.class, ....class,....class})\n\n12345@Component(modules = DripCoffeeModule.class)public interface CoffeeShop&#123;    Pump getPump();&#125;\n\nå…¶ä»–ç±»\n\n1234567891011121314151617181920212223242526/** * ç”µå­åŠ çƒ­å™¨ */public class ElectricHeater implements Heater&#123;    public ElectricHeater()    &#123;        System.out.println(\"ElectricHeater()\");    &#125;    ...&#125;---------------------------------------------------------------------------------/** * çƒ­è™¹å¸ */public class Thermosiphon implements Pump&#123;    private Heater heater;    @Inject    public Thermosiphon(Heater heater) &#123;        System.out.println(\"Thermosiphon() heater = \" + heater);        this.heater = heater;    &#125;    ...&#125;\n\næµ‹è¯•ç±»ï¼š\n\n1234567891011/** * æµ‹è¯• */public class CoffeeApp&#123;    public static void main(String[] args) &#123;        Pump pump = DaggerCoffeeShop.create().getPump();        System.out.println(\"pump = \" + pump);        pump.pump();    &#125;&#125;\n\nCoffeeAppçš„è¾“å‡ºç»“æœï¼š\n\n12345provideHeaterElectricHeater()Thermosiphon() heater = com.example.jiaji.daggertest.coffee3.ElectricHeater@29453f44providePumppump = com.example.jiaji.daggertest.coffee3.Thermosiphon@5cad8086\n\né¦–å…ˆï¼Œæˆ‘ä»¬è°ƒç”¨DaggerCoffeeShop.create().getPump()æƒ³è¦å¾—åˆ°ä¸€ä¸ªPumpå¯¹è±¡ï¼Œäºæ˜¯DripCoffeeModuleä¸­çš„providePumpæ–¹æ³•ä¸ºæˆ‘ä»¬æä¾›ä¸€ä¸ªPumpå®ä¾‹ã€‚\nç„¶åï¼Œæˆ‘ä»¬çœ‹åˆ°providePumpæ–¹æ³•æœ‰å‚æ•°Thermosiphoné‚£ä¹ˆè¿™ä¸ªè¿™ä¸ªå®ä¾‹ä»å“ªæ¥å‘¢ï¼Ÿæˆ‘ä»¬åœ¨Thermosiphonçš„æ„é€ æ–¹æ³•ä¸Šæ ‡è®°@Injectå°±è¡¨ç¤ºæä¾›è¯¥å¯¹è±¡äº†ã€‚\næ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æ·±å…¥åˆ°Thermosiphonç±»åˆä¼šå‘ç°ï¼ŒThermosiphonç±»çš„æ„é€ æ–¹æ³•è¦æ±‚æä¾›Heaterå¯¹è±¡ï¼Œé‚£ä¹ˆé—®é¢˜æ¥äº†Heaterå®ä¾‹ä»å“ªæ¥ï¼Ÿæ‚¨èƒ½æƒ³åˆ°ï¼æˆ‘ä»¬å¯ä»¥çœ‹åˆ°åœ¨DripCoffeeModuleçš„provideHeateræ–¹æ³•æä¾›äº†è¯¥å®ä¾‹ã€‚\næœ€åï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºæ¥ä¸ªå®¹æ˜“ç†è§£çš„å¤§æ¦‚æµç¨‹ï¼š\n\næˆ‘ä»¬éœ€è¦æ³¨æ„ï¼Œå½“@Injectæä¾›äº†å®ä¾‹å¹¶ä¸”Moduleä¸­ä¹Ÿæä¾›è¯¥å®ä¾‹çš„æƒ…å†µä¸‹ï¼ŒDaggerä¼šä¼˜å…ˆModuleä¸­æä¾›çš„å®ä¾‹ã€‚\né€šè¿‡ä¸Šé¢çš„ä¾‹å­ï¼Œæˆ‘ä»¬å¯ä»¥æ³¨æ„åˆ°ï¼š@Injectå¯ä»¥ä¸ºModuleæ–¹æ³•çš„å‚æ•°æä¾›å®ä¾‹\n\næˆ‘ä»¬å¯ä»¥å°†Moduleä¸­çš„æ–¹æ³•åˆ†åˆ°å¤šä¸ªModuleä¸­ï¼Œåªéœ€è¦åœ¨@Componentæ³¨é‡Šä¸­æ·»åŠ ä¸€ä¸‹ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š\n\n1234567891011121314151617181920212223242526@Modulepublic class DripCoffeeModule&#123;    @Provides    static Heater provideHeater() &#123;        System.out.println(\"provideHeater\");        return new ElectricHeater();    &#125;&#125;---------------------------------------------------------------------------------@Modulepublic class DripCoffeeModule2&#123;    @Provides    static Pump providePump(Thermosiphon pump) &#123;        System.out.println(\"providePump\");        return pump;    &#125;&#125;---------------------------------------------------------------------------------@Component(modules = &#123;DripCoffeeModule.class, DripCoffeeModule2.class&#125;)public interface CoffeeShop&#123;    Pump getPump();&#125;\n\nå…¶å®è¿˜æœ‰ç§å†™æ³•ï¼Œæ„æ€æ˜¯è¡¨ç¤ºæŸä¸€ä¸ªModuleåŒ…å«å¦ä¸€ä¸ªModuleã€‚æœ€ç»ˆæ•ˆæœä¸€æ ·çš„ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š\n\n12345678910111213141516171819202122232425@Modulepublic class DripCoffeeModule2&#123;    @Provides    static Pump providePump(Thermosiphon pump) &#123;        System.out.println(\"providePump\");        return pump;    &#125;&#125;---------------------------------------------------------------------------------@Module(includes = DripCoffeeModule2.class)public class DripCoffeeModule&#123;    @Provides    static Heater provideHeater() &#123;        System.out.println(\"provideHeater\");        return new ElectricHeater();    &#125;&#125;---------------------------------------------------------------------------------@Component(modules = DripCoffeeModule.class)public interface CoffeeShop&#123;    Pump getPump();&#125;\n\n@Bindså¯ä»¥ç®€åŒ–DripCoffeeModuleä¸­æä¾›Pumpå®ä¾‹çš„å†™æ³•ï¼Œæ•ˆæœæ˜¯ä¸€æ ·çš„ã€‚\n\n123456789101112@Modulepublic abstract class BModule&#123;    @Binds    abstract Pump bindPump(Thermosiphon pump);&#125;---------------------------------------------------------------------------------@Component(modules = &#123;DripCoffeeModule.class, BModule.class&#125;)public interface CoffeeShop&#123;    ...&#125;\n\næ¥ä¸‹æ¥æ˜¯å¯¹Daggerç”Ÿæˆçš„ä»£ç è¿›è¡Œåˆ†æï¼ˆè¿™éƒ¨åˆ†å¯ä»¥é€‰æ‹©æ€§è·³è¿‡ï¼(ï½€ãƒ»Ï‰ãƒ»Â´)ï¼‰\nè¿™æ˜¯æ•´ä½“çš„UMLå…³ç³»å›¾ï¼Œâ€œç»¿è‰²â€æ˜¯è‡ªåŠ¨ç”Ÿæˆçš„ä»£ç ã€‚(ç”±äºç”Ÿæˆçš„Thermosiphon_Factoryå¹¶æ²¡æœ‰è¢«ä½¿ç”¨ï¼Œäºæ˜¯å°±ä¸æ”¾è¿›æ¥äº†ã€‚)\n\n1. é€šè¿‡ä¸Šé¢çš„ä¸‰éƒ¨åˆ†ä»£ç ï¼ŒDaggerä¹Ÿä¸ºæˆ‘ä»¬ç”Ÿæˆäº†4ä¸ªç±»ã€‚2. ä»–ä»¬è¿™æ ·å¯¹åº”ï¼š\n\n\n\n\nCoffeeShop\nâ€”â€“&gt;\nDaggerCoffeeShop\n\n\n@Provides static Heater provideHeater()\nâ€”â€“&gt;\nDripCoffeeModule_ProvideHeaterFactory\n\n\n@Provides static Pump providePump(Thermosiphon pump)\nâ€”â€“&gt;\nDripCoffeeModule_ProvidePumpFactory\n\n\n@Inject public Thermosiphon() { }\nâ€”â€“&gt;\nThermosiphon_Factory\n\n\n\nä»åå­—ä¸Šæˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼š@Providesæ ‡è®°çš„æä¾›å®ä¾‹çš„æ–¹æ³•å¯¹åº”ç”Ÿæˆäº†ä¸€ä¸ªç±»åä»¥ï¼šæ‰€åœ¨ç±»å + _ + æ–¹æ³•å(é¦–å­—å¤§å†™) + Factoryï¼Œå‘½åç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„å·¥å‚ç±»ã€‚\n3. æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹Thermosiphon_Factoryè¿™ä¸ªæ²¡æœ‰è¢«ä½¿ç”¨çš„ç±»ï¼Œå¦‚æœæ‚¨æ˜¯ä»ä¸Šé¢æŒ¨ç€çœ‹ä¸‹æ¥çš„ï¼Œå°±ä¸€å®šæ˜ç™½ï¼Œå…¶ä»–åœ°æ–¹æ˜¯ç›´æ¥new Thermosiphonï¼Œæ¥ç€å¾€ä¸‹çœ‹æ‚¨å°±ä¼šçœ‹åˆ°ï¼\n\nè¿™ä¸ªç±»å’Œä¸Šé¢ç”Ÿæˆçš„Thermosiphon_Factoryæœ‰äº›ä¸ä¸€æ ·ï¼Œå› ä¸ºä¹‹å‰Thermosiphonæ˜¯æ— å‚æ„é€ ï¼Œç°åœ¨æ·»åŠ äº†Heaterä½œä¸ºæ„é€ çš„å‚æ•°ï¼ˆè¯¥å®ä¾‹åœ¨DripCoffeeModuleæä¾›ï¼‰ã€‚\nå¯ä»¥çœ‹åˆ°è¦å®ä¾‹åŒ–è¿™ä¸ªå·¥å‚ç±»ï¼Œå¿…é¡»è¦ä¼ å…¥Heaterçš„å·¥å‚ç±»ã€‚ç„¶ååœ¨åˆ›å»ºThermosiphonå®ä¾‹æ—¶é€šè¿‡Heaterå·¥å‚ç±»åˆ›å»ºä¸€ä¸ªHeaterå¯¹è±¡ä¼ å…¥æ„é€ æ–¹æ³•ä¸­ã€‚\nå¹¶ä¸”å®ƒè¿˜æ·»åŠ äº†ä¸€ä¸ªnewThermosiphonçš„é™æ€æ–¹æ³•ï¼Œå…è®¸ä¼ å…¥heaterå¯¹è±¡æ¥åˆ›å»ºThermosiphonã€‚\n\n4. æˆ‘ä»¬åœ¨æ¥çœ‹Heaterå·¥å‚ç±»DripCoffeeModule_ProvideHeaterFactoryï¼Œå®ƒç›¸å¯¹æ¯”è¾ƒç®€å•ç‚¹ã€‚\n\nå¯ä»¥çœ‹åˆ°åœ¨åˆ›å»ºHeaterå®ä¾‹æ—¶ï¼Œç›´æ¥é€šè¿‡DripCoffeeModule.provideHeater()è°ƒç”¨æˆ‘ä»¬å®šä¹‰çš„ç›¸å¯¹åº”çš„é™æ€æ–¹æ³•ã€‚\né€šè¿‡Preconditions.checkNotNullåˆæ£€æµ‹äº†æ˜¯å¦æä¾›å¾—æœ‰å®ä¾‹ï¼Œæ²¡æœ‰å°†ä¼šæŠ¥ç¬¬äºŒå‚æ•°ä¼ å…¥çš„é”™è¯¯ä¿¡æ¯ã€‚\nå·¥å‚å®ä¾‹åŒ–æ˜¯é€šè¿‡é™æ€æ–¹æ³•create()å®ä¾‹ï¼›é™æ€æ–¹æ³•newThermosiphonï¼Œå¯ä¸åˆ›å»ºå·¥å‚ç±»çš„æƒ…å†µä¸‹ï¼Œç›´æ¥åˆ›å»ºHeaterå®ä¾‹ã€‚\n\n\n\nDripCoffeeModuleä¸­æä¾›å®ä¾‹çš„æ–¹æ³•ä¸ä»…å¯ä»¥æ˜¯é™æ€æ–¹æ³•ï¼è¿˜å¯ä»¥æ˜¯æ™®é€šæ–¹æ³•æˆ–æŠ½è±¡æ–¹æ³•ã€‚é‚£å¦‚æœæˆ‘ä»¬å°†DripCoffeeModuleä¸­çš„é™æ€æ–¹æ³•çš„staticå»æ‰æ”¹ä¸ºæ™®é€šæ–¹æ³•ç”Ÿæˆçš„ä»£ç åˆæ˜¯æ€ä¹ˆæ ·çš„å‘¢ï¼Ÿ(@Provides static Heater provideHeater()æ”¹ä¸º@Provides Heater provideHeater())çœ‹ä¸‹å›¾ï¼š\n\nå¯ä»¥çœ‹åˆ°DripCoffeeModule_ProvideHeaterFactoryçš„åˆ›å»ºé¡»ä¼ å…¥DripCoffeeModuleå®ä¾‹ï¼Œget()æ–¹æ³•é€šè¿‡è¯¥å®ä¾‹è·å–Heaterå®ä¾‹\nåˆ›å»ºHeaterçš„é™æ€æ–¹æ³•proxyProvideHeateré¡»ä¼ å…¥DripCoffeeModuleå®ä¾‹ã€‚\n\n\n\n\n\n5. æˆ‘ä»¬æ¥çœ‹çœ‹Pumpå¯¹åº”ç”Ÿæˆçš„å·¥å‚ç±»ï¼šDripCoffeeModule_ProvidePumpFactory\n\nåœ¨Moduleä¸­è¿™æ ·å®šä¹‰ï¼š@Provides static Pump providePump(Thermosiphon pump) { return pump; }\nè¿™ä¸ªæ–¹æ³•åˆå¿…é¡»æä¾›Thermosiphonå®ä¾‹ï¼Œå› æ­¤DripCoffeeModule_ProvidePumpFactoryçš„æ„é€ å‚æ•°æ˜¯Thermosiphonçš„å·¥å‚å¯¹è±¡æ¥æä¾›è¯¥å®ä¾‹ï¼ˆget()æ–¹æ³•ä¸­é€šè¿‡è°ƒç”¨é™æ€æ–¹æ³•providePumpå¾—åˆ°Pumpå®ä¾‹çš„æ—¶å€™éœ€è¦è¯¥å·¥å‚ç±»æä¾›ï¼‰\næˆ‘ä»¬çœ‹åˆ°proxyProvidePumpæ–¹æ³•ï¼Œä¹Ÿæ˜¯å¯åœ¨ä¸åˆ›å»ºå·¥å‚ç±»å®ä¾‹çš„æƒ…å†µä¸‹è°ƒç”¨ã€‚\n\nå¦‚æœæˆ‘ä»¬ä¹ŸæŠŠModuleä¸­çš„staticä¿®é¥°å»æ‰åˆä¼šå‘ç”Ÿä»€ä¹ˆæ ·çš„å˜åŒ–å‘¢ï¼Ÿæˆ‘çŒœæ‚¨ä¹Ÿåº”è¯¥èƒ½æƒ³åˆ°äº†ï¼çœ‹ä¸‹å›¾ï¼š\n\næ¯”4ä¸­å»æ‰staticå¤šäº†åˆ’çº¿çš„åœ°æ–¹\nä¹Ÿå°±æ˜¯è¯´å½“æˆ‘ä»¬å®šä¹‰çš„æ–¹æ³•æ˜¯æ™®é€šæ–¹æ³•æ—¶ï¼Œæˆ‘ä»¬å°±å¿…é¡»è¦æä¾›Moduleçš„å®ä¾‹\n\n\n\n6. æœ€åï¼Œæˆ‘ä»¬æ¥çœ‹DaggerCoffeeShopæ˜¯å¦‚ä½•å°†è¿™äº›ä¸œä¸œç»„åˆåœ¨ä¸€èµ·çš„ã€‚\n\næˆ‘ä»¬çœ‹åˆ°getPump()æ–¹æ³•ï¼Œå®ƒåœ¨æ¥å£CoffeeShopä¸­å®šä¹‰ï¼Œé‡Œé¢å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿ\nå®ƒç›´æ¥è°ƒç”¨äº†ä¸Šé¢5æ‰€è®²åˆ°çš„é™æ€æ–¹æ³•proxyProvidePumpæ¥åˆ›å»ºPumpå®ä¾‹ï¼Œä½†æ˜¯éœ€è¦æä¾›Thermosiphonå®ä¾‹ä½œä¸ºå‚æ•°ã€‚ï¼ˆå¦‚æœæ˜¯ç”¨çš„@Bindsæ–¹å¼ï¼Œåˆ™getPump()çš„å®ç°ä¸ºï¼š  public Pump getPump() { return getThermosiphon(); }ï¼‰\näºæ˜¯ï¼Œå®ƒå®šä¹‰äº†æ–¹æ³•getThermosiphon()æ¥åˆ›å»ºè¯¥å®ä¾‹ã€‚çœ‹åˆ°è¯¥æ–¹æ³•äº†å—ï¼Ÿé‡Œé¢æ˜¯ç›´æ¥new Thermosiphonï¼Œè¿™å°±æ˜¯Thermosiphon_Factoryæ²¡æœ‰ç”¨åˆ°çš„åŸå› ã€‚åˆ›å»ºThermosiphonçš„æ„é€ å‚æ•°Heaterç”±DripCoffeeModule_ProvideHeaterFactoryç±»åç›´æ¥è°ƒç”¨é™æ€æ–¹æ³•proxyProvideHeater()å®ƒåˆè°ƒç”¨DripCoffeeModule.provideHeater()æ¥æä¾›ã€‚\n\næ¥ä¸‹æ¥çœ‹åˆ°åˆ›å»ºDaggerCoffeeShopçš„Builderé™æ€å†…éƒ¨ç±»ï¼Œè¿™é‡Œé¢å¯è¦æ¯”æˆ‘ä»¬ä¸Šæ¬¡ç”Ÿæˆçš„DaggerPumpComponentè¦å¤šäº†ä¸€ä¸ªæ–¹æ³•ï¼Œå®ƒå‡ºç°çš„åŸå› å°±æ˜¯å› ä¸ºæˆ‘ä»¬å®šä¹‰äº†Moduleç±»ã€‚\n\nè¿™ä¸ªæ–¹æ³•çš„å‘½åæ–¹å¼æ˜¯å°†æˆ‘ä»¬å®šä¹‰çš„Moduleç±»çš„ç±»åå¼€å¤´å°å†™æ¥ä½œä¸ºåå­—ã€‚\nå®ƒçš„ä½œç”¨æ˜¯æˆ‘ä»¬å¯ä»¥è‡ªå·±åˆ›å»ºModuleï¼Œå¦‚æœä¸è‡ªå·±åˆ›å»ºï¼Œå°†ä¼šè‡ªåŠ¨åˆ›å»ºã€‚\nä½†ä¸ºä»€ä¹ˆè¿™é‡Œæ ‡è®°ä¸ºå¼ƒç”¨å‘¢ï¼Ÿé‚£æ˜¯å› ä¸ºæˆ‘ä»¬Moduleä¸­å…¨æ˜¯é™æ€æ–¹æ³•ï¼Œå®Œå…¨ä¸éœ€è¦å®ä¾‹åŒ–ï¼Œå®ä¾‹åŒ–ä¹Ÿç™½æ­ï¼é‚£æˆ‘ä»¬æ¥çœ‹çœ‹ï¼Œå¦‚æœå°†DripCoffeeModuleä¸­çš„æ–¹æ³•æ”¹ä¸ºæ™®é€šæ–¹æ³•æ˜¯ä»€ä¹ˆæ ·çš„å‘¢ï¼Ÿ\nçœ‹åˆ°äº†å§ï¼å¦‚æœbuild()æ–¹æ³•ä¸­åˆ¤æ–­äº†æˆ‘ä»¬å·²ç»è°ƒç”¨dripCoffeeModuleæ–¹æ³•ä¼ è¿›æ¥Moduleå®ä¾‹ï¼Œé‚£ä¹ˆå°±ä¸å»å®ä¾‹åŒ–äº†ã€‚\nè¿˜è®°å¾—ä¸Šé¢Moduleä¸­æˆ‘ä»¬å»æ‰æä¾›æ–¹æ³•staticåéœ€è¦çš„Moduleå®ä¾‹å—ï¼Ÿå®ä¾‹å°±æ˜¯å¼€å§‹äºè¿™é‡Œçš„ã€‚\ndripCoffeeModuleçš„è°ƒç”¨æ–¹å¼å°±æ˜¯ï¼šDaggerCoffeeShop.builder().dripCoffeeModule(new DripCoffeeModule()).build();ï¼ˆå¦‚æœæˆ‘ä»¬çš„@Componentè¿æ¥äº†å¤šä¸ªModuleé‚£ä¹ˆå°±å¯ä»¥è¿™æ ·ä¼ å…¥è¿™ä¹ˆå¤šä¸ªModuleå®ä¾‹ï¼‰\né‚£ä¹ˆè¿™ä¸ªæ–¹æ³•åˆ°åº•æœ‰ä»€ä¹ˆç¥å¥‡çš„ä½œç”¨å‘¢ï¼Ÿæˆ‘ä»¬æƒ³æƒ³çœ‹ï¼Œå¦‚æœModuleçš„æ„é€ æ–¹æ³•éœ€è¦ä¼ å‚ï¼Œæ­¤æ—¶æˆ‘ä»¬è¯¥æ€ä¹ˆåŠå‘¢ï¼Ÿå¦‚ä¸‹ï¼š\n1234567891011121314151617181920212223242526272829303132333435363738public class TestModuleAttr &#123;    private String str;    public TestModuleAttr(String str) &#123; this.str = str; &#125;    @Override    public String toString() &#123;return \"TestModuleAttr&#123;\" + \"str='\" + str + '\\'' +'&#125;';&#125;&#125;------------------------------------------@Modulepublic class DripCoffeeModule &#123;    private String str;    public DripCoffeeModule(String str) &#123; this.str = str; &#125;    ...    @Provides String provideStr() &#123; return str; &#125;    @Provides TestModuleAttr provideTestModuleAttr(String s) &#123; return new TestModuleAttr(s); &#125;&#125;------------------------------------------@Component(modules = &#123;DripCoffeeModule.class&#125;)public interface CoffeeShop&#123;    Pump getPump();    TestModuleAttr getTestModuleAttr();&#125;------------------------------------------/** * æµ‹è¯• */public class CoffeeApp&#123;    public static void main(String[] args) &#123;        System.out.println(                DaggerCoffeeShop                        .builder()                        .dripCoffeeModule(new DripCoffeeModule(\"Hello world\"))                        .build()                        .getTestModuleAttr());//        Pump pump = DaggerCoffeeShop.create().getPump();//        System.out.println(\"pump = \" + pump);//        pump.pump();    &#125;&#125;\n\nè¾“å…¥ç»“æœï¼šTestModuleAttr{str=&#39;Hello world&#39;}\n\nå½“æˆ‘ä»¬æƒ³å‘æä¾›çš„å¯¹è±¡ä¼ é€’ä¸€äº›åŠ¨æ€çš„ä¸œè¥¿æ—¶ï¼Œå°±å¯ä»¥é€šè¿‡è¿™ç§æ–¹å¼ï¼Œå½“ç„¶ä½ ä¹Ÿä¸ç”¨å‘æˆ‘è¿™æ ·ç»•äº†ä¸ªåœˆå­ï¼Œè¿™é‡Œåªæƒ³è¯´Moduleé‡Œé¢å¯ä»¥ç›¸äº’æä¾›å®ä¾‹ã€‚è¿™é‡Œå¯ä»¥ç›´æ¥@Provides TestModuleAttr provideTestModuleAttr() { return new TestModuleAttr(str); }æå®šã€‚\néœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœModuleå®ä¾‹æ˜¯æœ‰å‚æ„é€ åˆ›å»ºï¼Œæˆ‘ä»¬å¿…é¡»è‡ªå·±å®ä¾‹åŒ–Moduleã€‚å¦åˆ™åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚åŸå› ï¼Œå¦‚ä¸‹ï¼š\n\n\n\n@Componentæµ‹è¯•æ–‡ä»¶ä½ç½®\nä¸Šé¢éƒ½æ¶‰åŠåˆ°äº†å®ƒï¼Œæƒ³å¿…å¤§å®¶ä¹Ÿæœ‰äº›ç†Ÿæ‚‰äº†ã€‚ãƒ¾(à¹‘â•¹â—¡â•¹)ï¾‰â€\nå®˜æ–¹æŠŠè¿™ä¸ªå®šä¹‰å«åšå»ºç«‹å›¾è¡¨ï¼Œå®ƒèµ·åˆ°çš„ä½œç”¨æ˜¯è¿æ¥ä¾èµ–å…³ç³»ï¼Œé€šè¿‡ä¸Šé¢çš„åˆ†æï¼Œæˆ‘ä»¬å¯ä»¥ç›´è§‚çš„çœ‹åˆ°åœ¨DaggerXXX(@Componentä¿®é¥°çš„ç±»æ‰€å¯¹åº”ç”Ÿæˆçš„æ–‡ä»¶)ç±»ä¸­ï¼Œä¸»è¦å°±æ˜¯å°†å„ä¸ªå·¥å‚ç±»å’ŒModuleè¿æ¥èµ·æ¥ã€‚\n\nå¦‚æœæˆ‘ä»¬åƒä¸‹é¢è¿™æ ·å®šä¹‰ä¸€ä¸ªComponentï¼ŒDaggerå°†ä¼šä¸ºæˆ‘ä»¬ç”Ÿæˆä¸€ä¸ªç±»ï¼šDaggerFoo_Bar_BazComponent\n\n123456class Foo &#123;  static class Bar &#123;    @Component    interface BazComponent &#123;&#125;  &#125;&#125;\n\n@Componentä¸ä»…å¯ä»¥è£…é¥°æ¥å£è¿˜å¯ä»¥æ˜¯æŠ½è±¡ç±»ï¼Œæ¯”å¦‚ä¸Šé¢çš„CoffeeShopæ¥å£å¯ä»¥æ”¹æˆè¿™æ ·ï¼š\n\n123456@Component(modules = &#123;DripCoffeeModule.class&#125;)public abstract class CoffeeShop&#123;    abstract Pump getPump();    abstract TestModuleAttr getTestModuleAttr();&#125;\nåœ¨Componentä¸­å®šä¹‰çš„æ–¹æ³•æˆ‘ä»¬åœ¨å¯¹åº”ç”Ÿæˆçš„DaggerXXXå®ä¾‹è°ƒç”¨å¾—åˆ°å¯¹åº”å®ä¾‹ï¼Œäºæ˜¯æˆ‘ä»¬éœ€è¦ä¸ºå…¶æä¾›å¯¹åº”è¿”å›å®ä¾‹ã€‚\n\næ¥ä¸‹æ¥æˆ‘ä»¬æ¥é€šè¿‡æ¨¡æ‹Ÿå®‰å“ä¸­Activityçš„å¯åŠ¨ï¼Œè¯¥ä»£ç å¤§æ¦‚æ¨¡æ‹Ÿäº†ä¸€ä¸‹MVPã€‚ä¸ºäº†ç®€å•ï¼ŒMNActivityä½œä¸ºViewå±‚ï¼Œæˆ‘æ²¡æœ‰å†™MVPæ¥å£çš„Må±‚ã€‚è¿™é‡Œä¸»è¦æ˜¯æƒ³è§£é‡Šä¸ºä»€ä¹ˆåœ¨Compnentæ¥å£ä¸­éœ€è¦å®šä¹‰ä¸€ä¸ªvoid inject(XXXActivity activity);ï¼Œçœ‹åˆ°åˆ«äººè¿™ä¹ˆå†™çš„ï¼ä½†æˆ‘å½“æ—¶çœŸå¿ƒä¸çŸ¥é“è¿™æ˜¯å•¥æ„æ€ï¼äºæ˜¯è¿™é‡Œæˆ‘æƒ³é€šè¿‡ç®€å•çš„ä»£ç å»ç†è§£å®ƒã€‚\n\n\næ¨¡æ‹Ÿä¸€ä¸ªActivityï¼Œä¸€èˆ¬æˆ‘ä»¬åœ¨Activityçš„onCreate()æ–¹æ³•ä¸­æ˜¯è¿™æ ·å†™çš„ã€‚\n123456789101112131415public class MNActivity&#123;    @Inject    MNPresenter presenter;    public void onCreate()    &#123;        System.out.println(\"MNActivity hashCode = \" + hashCode());        DaggerTestComponent                .builder()                .mNModule(new MNModule(this))                .build()                .inject(this);        System.out.println(presenter);    &#125;&#125;\n\nPresenterå±‚ï¼Œåœ¨presenterä¸­ä¸€èˆ¬æˆ‘ä»¬æ˜¯å¼•ç”¨çš„viewçš„æ¥å£ï¼Œè¿™é‡Œæˆ‘ä»¬ç›´æ¥å¼•ç”¨activityã€‚\n\n@Injectæ ‡è®°æ„é€ ï¼Œè¡¨æ˜è¿™é‡Œæä¾›MNPresenterå®ä¾‹\næˆ‘ä»¬çœ‹åˆ°æœ‰æ„é€ æ–¹æ³•å‚æ•°ä¸ºMNActivityï¼Œè¡¨æ˜éœ€è¦å®ä¾‹åŒ–æˆ‘ä»¬åˆéœ€è¦ä¸ºå®ƒæä¾›MNActivityï¼ˆæˆ‘ä»¬é€šè¿‡Moduleæä¾›ï¼‰12345678910public class MNPresenter&#123;    MNActivity mnActivity;    @Inject    MNPresenter(MNActivity mnActivity)    &#123;        this.mnActivity = mnActivity;        System.out.println(\"MNPresenter mnActivity = \" + mnActivity.hashCode());    &#125;&#125;\n\n\n\nå®ä¾‹æä¾›éƒ¨åˆ†ç±»ï¼šModule\n\nMNModuleæ˜¯æœ‰å‚æ„é€ ï¼Œé€šè¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çŸ¥é“è¿™ç§æƒ…å†µå¿…é¡»æˆ‘ä»¬è‡ªå·±å®ä¾‹åŒ–Module\né€šè¿‡provedesActivityæˆ‘ä»¬å¯ä»¥å°†ä¼ é€’è¿›æ¥çš„MNActivityå®ä¾‹ï¼Œæä¾›å‡ºå»ï¼ˆè¿™é‡Œæä¾›ç»™MNPresenterï¼‰123456789101112131415@Modulepublic class MNModule&#123;    MNActivity mnActivity;    public MNModule(MNActivity mnActivity)    &#123;        this.mnActivity = mnActivity;    &#125;    @Provides    MNActivity provedesActivity()    &#123;        return mnActivity;    &#125;&#125;\n\n\n\nç»„è£…çº½å¸¦éƒ¨åˆ†ï¼šComponent\n\ninjectæ–¹æ³•è¿”å›å€¼ä¸ºvoid12345@Component(modules = MNModule.class)public interface TestComponent&#123;    void inject(MNActivity me);&#125;\n\n\n\nå¯åŠ¨Activityç±»\n12345678public class Main&#123;    public static void main(String[] args)    &#123;        MNActivity injectMe = new MNActivity();        injectMe.onCreate();    &#125;&#125;\n\nè¿è¡ŒMainçš„ç»“æœ\n123MNActivity hashCode = 21685669MNPresenter mnActivity = 21685669com.example.jiaji.daggertest.coffee4.MNPresenter@61bbe9ba\n\n\n\nä¸ºä»€ä¹ˆè¿™ä¹ˆç¥å¥‡å‘¢ï¼Ÿå±…ç„¶å°±è¿™æ ·å°±å°†MNPresenterçš„å®ä¾‹æ³¨å…¥åˆ°MNActivityäº†ï¼DaggerTestComponentå®ç°æˆ‘ä»¬å®šä¹‰çš„void inject(MNActivity me);ï¼Œç„¶ååœ¨æ–¹æ³•é‡Œè¿›è¡Œäº†å¦‚è¿™æ ·çš„æ“ä½œï¼ˆç®€åŒ–åï¼‰ï¼šme.presenter = new Presenter(...);\n\n\næˆ‘ä»¬å°†void inject(MNActivity me);çš„å®ç°ä»£ç å’Œä¸Šé¢æµ‹è¯•@Injectæ—¶å®šä¹‰çš„Thermosiphon getPump();çš„å®ç°ä»£ç è¿›è¡Œæ¯”è¾ƒï¼Œæ¥çœ‹çœ‹æœ‰ä½•åŒºåˆ«ã€‚\n\n\næˆ‘ä»¬å…ˆæ¥çœ‹Thermosiphon getPump();æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿé‡æ¸©ä¸€ä¸‹ï¼Œçœ‹ä¸‹å›¾ï¼š\nå®ƒé¦–å…ˆé€šè¿‡Thermosiphon_Factory.newThermosiphon()ç›´æ¥new Thermosiphon()ã€‚\nç„¶åè°ƒç”¨injectThermosiphonæ–¹æ³•å°†å®ä¾‹åŒ–çš„Thermosiphoné€šè¿‡Thermosiphon_MembersInjector.injectHeaterå°†ä¸€ä¸ªElectricHeaterèµ‹å€¼åˆ°å¯¹åº”çš„æˆå‘˜å˜é‡ã€‚\næœ€åå°†ä¸€ä¸ªå®Œæˆçš„Thermosiphonè¿”å›ã€‚\n\n\næˆ‘ä»¬å†æ¥çœ‹void inject(MNActivity me);æ˜¯å¦‚ä½•å®ç°çš„å‘¢ï¼Ÿçœ‹ä¸‹å›¾ï¼š\nè¿™é‡Œinject(MNActivity me)çš„å®ç°çœç•¥æ‰äº†åˆ›å»ºMNActivityçš„è¿‡ç¨‹ï¼Œç›´æ¥è°ƒç”¨injectMNActivityè¿›è¡Œæ³¨å…¥ã€‚\nä¸ºä»€ä¹ˆå‘¢ï¼Ÿå› ä¸ºå½“å‰MNActivityå¯¹è±¡å·²ç»å­˜åœ¨ï¼Œåªéœ€è¦æ³¨å…¥æ ‡æœ‰@Injectçš„æˆå‘˜å˜é‡å°±è¡Œäº†ã€‚\næˆ‘ä»¬æƒ³æƒ³Androidä¸­æ‰“å¼€ä¸€ä¸ªActivityï¼Œä»–æ˜¯é€šè¿‡ç³»ç»Ÿå»å®ä¾‹åŒ–çš„ï¼æˆ‘ä»¬æ—¢ç„¶åœ¨Activityå®ä¾‹ä¹‹ä¸­ï¼Œåˆä½•å¿…å»å®ä¾‹åŒ–å®ƒå‘¢ï¼Ÿå¯¹å§ï¼\n\n\n\nå°†ä¸Šé¢æ‰€å­¦è¿ç”¨åˆ°ä¸€å¼€å§‹çš„å’–å•¡æœºå®ç°1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253545556575859606162636465666768697071727374757677787980818283848586878889--------------------------------------------------------interface Heater &#123;    void on();    void off();    boolean isHot();&#125;--------------------------------------------------------interface Pump &#123;    void pump();&#125;--------------------------------------------------------public class Thermosiphon implements Pump &#123;    private final Heater heater;    @Inject    Thermosiphon(Heater heater) &#123;        System.out.println(\"Thermosiphon(Heater heater) - heaterHash = \" + heater.hashCode());        this.heater = heater;    &#125;    @Override    public void pump() &#123;        if (heater.isHot()) &#123;            System.out.println(\"=&gt;=&gt; æŠ½æ°´ =&gt;=&gt;\");        &#125;    &#125;&#125;--------------------------------------------------------public class ElectricHeater implements Heater &#123;    public ElectricHeater() &#123; System.out.println(\"ElectricHeater()\"); &#125;    boolean heating;    @Override    public void on() &#123;        System.out.println(\"~~~~heating~~~~\");        this.heating = true;    &#125;    @Override    public void off() &#123; this.heating = false; &#125;    @Override    public boolean isHot() &#123; return heating; &#125;&#125;--------------------------------------------------------@Modulepublic class DripCoffeeModule &#123;    @Provides    Heater provideheater() &#123;        System.out.println(\"provideheater()\");        return new ElectricHeater();    &#125;    @Provides    Pump providePump(Thermosiphon pump) &#123;        System.out.println(\"providePump\");        return pump;    &#125;&#125;--------------------------------------------------------/** * å’–å•¡æœº */public class CoffeeMaker &#123;    @Inject    Heater heater;//å½“æˆ‘ä»¬è¦ä½¿ç”¨å®ƒæ—¶æ‰åˆ›å»ºä¸€ä¸ªåŠ çƒ­å™¨    @Inject    Pump pump;//æ³µ    @Inject    CoffeeMaker() &#123; &#125;    public void brew() &#123;        System.out.println(\"CoffeeMaker - heaterHash = \" + heater.hashCode());        heater.on();        pump.pump();        System.out.println(\"[_]P coffee! [_]P\");        heater.off();    &#125;&#125;--------------------------------------------------------@Component(modules = &#123;DripCoffeeModule.class&#125;)public interface CoffeeShop &#123;    CoffeeMaker maker();&#125;--------------------------------------------------------public class CoffeeApp&#123;    public static void main(String[] args)    &#123;        CoffeeShop coffeeShop = DaggerCoffeeShop.builder()                .build();        coffeeShop.maker().brew();    &#125;&#125;\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹è¾“å‡ºç»“æœ\n\n123456789provideheater()ElectricHeater()provideheater()ElectricHeater()Thermosiphon(Heater heater) - heaterHash = 1625635731providePumpCoffeeMaker - heaterHash = 1580066828~~~~heating~~~~[_]P coffee! [_]P\n\nå¤§å®¶æœ‰æœ¨æœ‰å‘ç°ï¼Œå½“è°ƒç”¨heater.on()åè°ƒç”¨pump.pump()å±…ç„¶æ²¡æœ‰å‡ºæ°´(æ²¡æœ‰æ‰“å°ï¼š=&gt;=&gt; æŠ½æ°´ =&gt;=&gt;)\né€šè¿‡è¾“å‡ºç»“æœæˆ‘ä»¬çœ‹åˆ°provideheaterè¢«è°ƒç”¨ä¸¤æ¬¡ä¹Ÿå°±æ˜¯ä¸¤æ¬¡newï¼Œæˆ‘ä»¬è¿˜ä¼šä¼šå‘ç°ï¼šThermosiphonä¸­çš„Heaterå¯¹è±¡å’ŒCoffeeMakerä¸­çš„Heaterå¯¹è±¡æ‰“å°çš„hashCodeä¸ä¸€æ ·ï¼Œè¿™æ ¹æœ¬å°±æ˜¯ä¸¤ä¸ªå®ä¾‹ã€‚æ€ªä¸å¾—CoffeeMakerä¸­heater.on()åpump.pump()ä¸å‡ºæ°´ï¼ŒåŸå› å°±æ˜¯Pumpä¸­åˆæ˜¯å¦ä¸€ä¸ªHeaterå®ä¾‹ã€‚\n\n\nçœ‹æ¥é€šè¿‡ä¸Šé¢çš„å­¦ä¹ ï¼Œæˆ‘ä»¬çš„å’–å•¡æœºè¿˜æœ‰ç‚¹ç¼ºé™·ã€‚æˆ‘ä»¬éœ€è¦é€šè¿‡ä¸‹é¢æ‰€è®²çš„@Singletonæ¥æ‹¯æ•‘ä¸€ä¸‹è¿™ä¸ªå¤šæ¬¡å®ä¾‹åŒ–çš„é—®é¢˜ã€‚\n\n\næœ€åæˆ‘å°†ä¸Šé¢è¿™äº›å¤§è‡´ç†è§£æ€è·¯ç”»äº†å¦‚ä¸‹æµç¨‹å›¾ï¼Œå¸Œæœ›èƒ½å¸®åŠ©æ‚¨ç†è§£ï¼š\n\n\n@Singletonä¸¶@Scopeæµ‹è¯•æ–‡ä»¶ä½ç½®\n\nSingletonï¼šç›´æ¥ç¿»è¯‘è¿‡æ¥æ˜¯ç‹¬ç”Ÿå­çš„æ„æ€ã€‚æˆ‘ä»¬å¯ä»¥è¿™æ ·å»ç†è§£ï¼Œæ ‡è®°äº†@Singletonæä¾›çš„ç±»ï¼Œåœ¨åŒä¸€ä¸ªComponentå®ä¾‹ä¸­(è¿™æ˜¯æ¡ä»¶)åªå­˜åœ¨ä¸€ä¸ªè¯¥å®ä¾‹ï¼Œå¤šæ¬¡éœ€è¦æ—¶ï¼Œæä¾›çš„å®ä¾‹ä¹Ÿåªæ˜¯ç¬¬ä¸€æ¬¡åˆ›å»ºçš„é‚£ä¸ªå®ä¾‹ã€‚\n\n\næˆ‘ä»¬åªéœ€è¦å°†ä¸Šé¢å’–å•¡æœºçš„å®ç°ä»£ç åŠ ä¸¤ä¸ª@Singletonå°±å¯ä»¥è§£å†³é—®é¢˜ï¼å¦‚ä¸‹ä»£ç ï¼š\nåœ¨æä¾›å®ä¾‹é‚£é‡ŒåŠ ä¸ª@Singleton\nåœ¨Componenté‚£é‡ŒåŠ ä¸ª@Singleton\nä¹Ÿå°±æ˜¯è¯´@Singletonèµ·æ•ˆï¼Œå¾—æ·»åŠ ä¸¤å¤„\n\n\n\n123456789101112131415161718192021222324252627@Singleton@Component(modules = &#123;DripCoffeeModule.class&#125;)public interface CoffeeShop &#123;    CoffeeMaker maker();&#125;--------------------------------------------------------@Modulepublic class DripCoffeeModule &#123;    @Singleton    @Provides    Heater provideheater() &#123;        System.out.println(&quot;provideheater()&quot;);        return new ElectricHeater();    &#125;    ...&#125;----------------------------------------------------------------------------------------------------------------è¾“å‡ºæ—¥å¿—ï¼šprovideheater()ElectricHeater()Thermosiphon(Heater heater) - heaterHash = 1872034366providePumpCoffeeMaker - heaterHash = 1872034366~~~~heating~~~~=&gt;=&gt; æŠ½æ°´ =&gt;=&gt;[_]P coffee! [_]P\n\né‚£ä¹ˆå¦‚æœæ˜¯@Injectæ ‡è®°çš„æ„é€ æ–¹æ³•çš„æ–¹å¼æ¥æä¾›çš„å¯¹è±¡ï¼Œ@Singletonè¯¥å¦‚ä½•æ ‡è®°å‘¢ï¼Ÿå¦‚ä¸‹ä»£ç ï¼š\n\n\næ”¾åˆ°ç±»åä¹‹ä¸Š123456789101112131415161718192021222324252627282930@Singletonpublic class SingletonTest&#123;    @Inject    public SingletonTest()&#123;&#125;&#125;--------------------------------------------------------public class CoffeeMaker &#123;    ...    @Inject    SingletonTest singletonTest1;    @Inject    SingletonTest singletonTest2;    @Inject    SingletonTest singletonTest3;    ...    public void brew() &#123;        ...        System.out.println(                &quot;singletonTest1 = &quot; + singletonTest1.hashCode() + &quot;\\n&quot;                + &quot;singletonTest2 = &quot; + singletonTest2.hashCode() + &quot;\\n&quot;                + &quot;singletonTest3 = &quot; + singletonTest3.hashCode() + &quot;\\n&quot;);    &#125;&#125;----------------------------------------------------------------------------------------------------------------è¾“å‡ºæ—¥å¿—ï¼š...singletonTest1 = 1581781576singletonTest2 = 1581781576singletonTest3 = 1581781576\n\n\n\nä¸ºä»€ä¹ˆè¯´ä¸Šé¢æ¡ä»¶æ˜¯éœ€è¦åœ¨ä¸€ä¸ªComponentå®ä¾‹ä¸­ï¼ŸåŸå› æ˜¯å¦‚æœComponentè¢«å¤šæ¬¡å®ä¾‹åŒ–ï¼Œé‚£ä¹ˆä¸åŒçš„Componentä¸­@Singletonæ ‡è®°çš„å®ä¾‹ä¹Ÿå°†ä¸åŒï¼\n\n\næ¥çœ‹çœ‹ä¸‹é¢æˆ‘ä»¬å¦‚æœæœ‰å¤šä¸ªComponentå®ä¾‹çš„æƒ…å†µ\næˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹CoffeeAppè¿™ä¸ªç±»ï¼Œè®©ä»–é‡å¤è°ƒç”¨brew()æ–¹æ³•å’Œé‡æ–°åˆ›å»ºComponent\n12345678910111213141516public class CoffeeApp&#123;    public static void main(String[] args)    &#123;        CoffeeShop coffeeShop = DaggerCoffeeShop.builder()                .build();        coffeeShop.maker().brew();        System.out.println(\"*************************************\");        coffeeShop.maker().brew();        System.out.println(\"*************************************\");        DaggerCoffeeShop.builder()                .build()                .maker()                .brew();    &#125;&#125;\n\nè¾“å‡ºç»“æœ(æˆ‘ä»¬åªçœ‹ä¸€äº›å…³é”®éƒ¨åˆ†)ï¼š\n1234567891011121314151617...CoffeeMaker - heaterHash = 1872034366...singletonTest1 = 1581781576...*************************************...CoffeeMaker - heaterHash = 1872034366...singletonTest1 = 1581781576...*************************************...CoffeeMaker - heaterHash = 1725154839...singletonTest1 = 1670675563...\n\nä»è¾“å‡ºä¿¡æ¯ä¸­æˆ‘ä»¬å¯çœ‹å‡ºï¼Œç¬¬ä¸€æ¬¡å’Œç¬¬äºŒæ¬¡éƒ½æ˜¯åŒä¸€ä¸ªheaterå®ä¾‹ï¼Œç¬¬ä¸‰æ¬¡å´æ˜¯ä¸åŒçš„å®ä¾‹ï¼Œå› ä¸ºæˆ‘ä»¬é‡æ–°å®ä¾‹åŒ–äº†ä¸€ä¸ªComponentã€‚\n\nå¦‚æœæˆ‘ä»¬æƒ³åœ¨å¤šä¸ªåœ°æ–¹è°ƒç”¨çš„æ—¶å€™ä¹Ÿå¾—åˆ°åŒä¸€ä¸ªComponentå®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥å°†Componentä½œä¸ºæŠ½è±¡ç±»ï¼Œå¹¶æ”¹ä¸ºå•ä¾‹ã€‚å¦‚ä¸‹ï¼š\n12345678910111213141516@Component(modules = &#123;DripCoffeeModule.class&#125;)public abstract class CoffeeShop &#123;    private static CoffeeShop instance;    abstract CoffeeMaker maker();    public static CoffeeShop getInstance()    &#123;        if (instance == null)        &#123;            synchronized (CoffeeShop.class)            &#123;                instance = DaggerCoffeeShop.create();            &#125;        &#125;        return instance;    &#125;&#125;\n\næˆ‘ä»¬çš„ä½¿ç”¨çš„æ—¶å€™ï¼Œç›´æ¥è¿™æ ·ï¼šCoffeeShop.getInstance().maker().brew()\n\næˆ‘ä»¬åœ¨Androidä¸­ï¼Œå¯ä»¥æŠŠè¿™ç§å…¨å±€çš„å®šä¹‰æ”¾åˆ°Applicationä¸­ä¹Ÿå¯ä»¥ç¡®ä¿åœ¨è¯¥è¿›ç¨‹ä¸­çš„å”¯ä¸€ã€‚\n\n\nä¸Šé¢è®²äº†@Singletonï¼Œé‚£ä¹ˆ@Scopeåˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ@Scopeæ˜¯ç”¨æ¥æ ‡è¯†æ³¨è§£çš„ã€‚æˆ‘ä»¬çœ‹ä¸€ä¸‹ï¼Œ@Singletonçš„æºç ä½ å°±æ˜ç™½äº†ï¼\n\n1234@Scope@Documented@Retention(RUNTIME)public @interface Singleton &#123;&#125;\n\nç”¨@Scopeæ ‡è¯†çš„æ³¨è§£éƒ½æœ‰@Singletonçš„åŠŸèƒ½ï¼Œäºæ˜¯æˆ‘ä»¬å¯ä»¥å®šä¹‰æˆ‘ä»¬è‡ªå·±æƒ³è¦çš„åå­—æ¥å®ç°ç›¸åŒåŠŸèƒ½ã€‚\nä½†éœ€è¦æ³¨æ„ä¸€ç‚¹å°±æ˜¯ç”¨çš„æ—¶å€™ç›¸å¯¹åº”çš„æ³¨è§£å¿…é¡»æ˜¯åŒä¸€ä¸ªï¼ˆæ¯”æ–¹è¯´æˆ‘å®šä¹‰äº†ä¸€ä¸ª@MySingleï¼Œå°±ä¸èƒ½åœ¨Componenté‚£é‡Œç”¨@MySingleçš„åŒæ—¶ï¼Œå¯¹åº”çš„æä¾›å¯¹è±¡é‚£é‡Œå´ç”¨çš„æ˜¯@Singletonï¼‰\n\n\nåˆåˆ°äº†æˆ‘ä»¬åˆ†æç”Ÿæˆä»£ç çš„ç¯èŠ‚ï¼Œå¤§å®¶å¯ä»¥é€‰æ‹©æ€§è·³è¿‡å“¦ï¼(ã€ƒâ€™â–½â€™ã€ƒ)\n\n\næˆ‘ä»¬ç›´æ¥æ¥çœ‹DaggerCoffeeShopè¿™ä¸ªç±»ï¼Œå…¶ä»–éƒ½å’Œä¸Šé¢è®²è§£çš„ä¸€æ ·ï¼Œå˜åŒ–å°±åœ¨è¯¥ç±»ï¼\næˆ‘ä»¬çœ‹åˆ°ä¸‹å›¾ç”»çº¢çº¿çš„éƒ¨åˆ†ï¼ä»–å°†@Singletonæ ‡è®°çš„å¯¹è±¡ç›´æ¥æ”¾åˆ°äº†DaggerCoffeeShopä½œä¸ºæˆå‘˜å˜é‡ï¼ˆç”±äºä»£ç å¤ªå¤šï¼Œæˆ‘å°†CoffeeMakerä¸­çš„SingletonTestéƒ½æ³¨é‡Šäº†ï¼‰ã€‚\nç­‰ç­‰ï¼Provider&lt;Heater&gt;æ ¹æ®ä¸Šé¢æˆ‘ä»¬å¯¹å·¥å‚ä»£ç çš„ç ”ç©¶ï¼æ¯æ¬¡è°ƒç”¨get()ä¸éƒ½ä¼šé‡æ–°å®ä¾‹åŒ–ä¸€ä¸ªå¯¹è±¡å—ï¼Ÿä¸ºä»€ä¹ˆæ¯æ¬¡get()éƒ½æ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Ÿè¿™å°±æ˜¯ç¬¬äºŒæ ¹çº¢çº¿DoubleCheckçš„å°è£…èµ·çš„ä½œç”¨äº†ï¼\n\n\nDoubleCheck.provideræäº†ä»€ä¹ˆåå ‚ï¼Ÿå¤§å®¶è·Ÿç€æˆ‘ç‚¹è¿›å»æ‚„æ‚„ï¼\n\næˆ‘ä»¬çœ‹åˆ°è¿™ä¸ªé™æ€æ–¹æ³•ï¼å¾ˆæ˜æ˜¾ï¼Œå®ƒæ˜¯ä¸ºäº†åˆ›å»ºä¸€ä¸ªDoubleCheckå¯¹è±¡ï¼Œå¦‚æœä¼ è¿›æ¥çš„å°±æ˜¯DoubleCheckå¯¹è±¡ï¼Œåˆ™ç›´æ¥è¿”å›å®ä¾‹ã€‚\n1234567public static &lt;P extends Provider&lt;T&gt;, T&gt; Provider&lt;T&gt; provider(P delegate) &#123;    checkNotNull(delegate);    if (delegate instanceof DoubleCheck) &#123;        return delegate;    &#125;    return new DoubleCheck&lt;T&gt;(delegate);&#125;\n\næˆ‘ä»¬çœ‹åˆ°DoubleCheckç±»ä¹Ÿæ˜¯å®ç°äº†Provideræ¥å£çš„ï¼Œæ‰€ä»¥åœ¨DaggerCoffeeShopä¸­æ‰èƒ½ç›´æ¥ç”¨Provideræ¥å¼•ç”¨ã€‚å®ƒæ—¢ç„¶ä¹Ÿæ˜¯ä¸€ä¸ªProviderå´åˆè¦ä¼ å…¥ä¸€ä¸ªProviderï¼Œå®ƒèµ·äº†ä¸€ä¸ªä»£ç†çš„ä½œç”¨ã€‚\n\nä¸ºä»€ä¹ˆget()è°ƒç”¨åæ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼ŸåŸå› æ˜¯get()ä¸­è¿›è¡Œäº†å¤„ç†ï¼Œå¦‚æœget()è¿‡ä¸€æ¬¡å®ä¾‹ï¼Œé‚£ä¹ˆä¸‹æ¬¡å°†è¿”å›ä¸Šä¸€æ¬¡çš„å®ä¾‹ã€‚ä¸‹é¢æ˜¯è¿™éƒ¨åˆ†æºç ï¼š\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°å®ƒä¸ä»…ä»…ç®€å•å†™äº†åªè¿”å›ä¸€ä¸ªå®ä¾‹çš„çš„ä»£ç ï¼Œè¿˜å†™äº†ä¸€å †å…³äºå¤šçº¿ç¨‹åŒæ­¥ç›¸å…³ä»£ç ã€‚\nä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨å¤šçº¿ç¨‹çš„æƒ…å†µä¸‹ä¹Ÿå¯ä»¥æ”¾å¿ƒçš„è°ƒç”¨get()æ–¹æ³•ï¼Œè€Œä¸ç”¨æ‹…å¿ƒå› ä¸ºå¤šçº¿ç¨‹è€Œåˆ›å»ºé¢å¤–çš„å®ä¾‹ã€‚1234567891011121314151617181920public T get() &#123;   Object result = instance;   if (result == UNINITIALIZED) &#123;       synchronized (this) &#123;           result = instance;          if (result == UNINITIALIZED) &#123;                result = provider.get();                Object currentInstance = instance;                if (currentInstance != UNINITIALIZED &amp;&amp; currentInstance != result) &#123;                    throw new IllegalStateException(\"Scoped provider was invoked recursively returning \"                            + \"different results: \" + currentInstance + \" &amp; \" + result + \". This is likely \"                            + \"due to a circular dependency.\");                &#125;                instance = result;                provider = null;            &#125;        &#125;    &#125;    return (T) result;&#125;\n\n\n\n\n\n\n@Reusableæµ‹è¯•æ–‡ä»¶ä½ç½®\nå®ƒå’Œ@Singletonè¾¾åˆ°çš„æ•ˆæœå·®ä¸å¤šï¼Œè€Œä¸”é€»è¾‘ä¹Ÿå·®ä¸å¤šï¼Œä½†æ˜¯å®ƒå´ä¸ä¿è¯æ˜¯å•å®ä¾‹ï¼\nå®ƒçš„ç”¨æ³•æ¯”@Singletonè¿˜ç®€å•ç‚¹ï¼Œåªéœ€è¦åœ¨æä¾›å®ä¾‹çš„åœ°æ–¹åŠ ä¸ª@Reusableå°±å¯ä»¥äº†ï¼Œå¦‚ä¸‹ä»£ç ï¼š\n\nå°±åƒä¸‹é¢è¿™ä¹ˆç®€å•å°±OKäº†ï¼Œä¸ç”¨åœ¨Componentä¸­æ·»åŠ ã€‚\n\n12345678910@Modulepublic class DripCoffeeModule &#123;    @Reusable    @Provides    Heater provideheater() &#123;        System.out.println(\"provideheater()\");        return new ElectricHeater();    &#125;    ...&#125;\n\næˆ‘ä»¬å†æ¥çœ‹çœ‹ï¼Œç”Ÿæˆçš„ä»£ç å’Œ@Singletonçš„ä¸åŒï¼\n\n\næˆ‘ä»¬æ”¹ç”¨@Reusableåï¼ŒDaggerCoffeeShopæœ‰ä»€ä¹ˆå˜åŒ–ï¼Ÿ\nå”¯ä¸€å‘ç”Ÿå˜åŒ–äº†åœ°æ–¹å°±æ˜¯è¿™ä¸ªæ–¹æ³•é‡Œé¢çš„å®ç°ç”±DoubleCheck.providerå˜æˆäº†SingleCheck.provider\n\n\né‚£æˆ‘ä»¬æ¥åˆ°SingleCheckè¿™ä¸ªç±»ï¼Œå®ƒå’ŒDoubleCheckä¸åŒç‚¹å°±åœ¨äºget()æ–¹æ³•çš„å®ç°ä¸Šï¼Œè¯·çœ‹ä¸‹é¢SingleCheckçš„get()æºä»£ç ï¼š\nå¯ä»¥çœ‹åˆ°å®ƒçœå»äº†DoubleCheckä¸­ä¸€å †å…³äºçº¿ç¨‹åŒæ­¥çš„ä»£ç \nä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬åœ¨å•çº¿ç¨‹ä¸­æ˜¯å¯ä»¥æ”¾å¿ƒä½¿ç”¨@Reusableè€Œä¸ç”¨æ‹…å¿ƒé‡å¤å®ä¾‹åŒ–ã€‚12345678public T get() &#123;    Provider&lt;T&gt; providerReference = provider;    if (instance == UNINITIALIZED) &#123;        instance = providerReference.get();        provider = null;    &#125;    return (T) instance;&#125;\n\n\n\n\nLazy æ³¨å…¥æµ‹è¯•æ–‡ä»¶ä½ç½®\né€šè¿‡å®ƒå¯ä»¥å®ç°æƒ°æ€§å®ä¾‹åŒ–ï¼Œä¹Ÿå°±æ˜¯å½“æˆ‘ä»¬ç¬¬ä¸€æ¬¡è°ƒç”¨çš„æ—¶å€™æ‰ä¼šåˆ›å»ºå®ä¾‹ã€‚å¹¶ä¸”å¤šæ¬¡è°ƒç”¨ä¸ä¼šå†æ¬¡åˆ›å»ºå®ä¾‹ï¼Œåªä¼šè¿”å›ç¬¬ä¸€æ¬¡è°ƒç”¨åˆ›å»ºçš„å®ä¾‹ã€‚\n\næˆ‘ä»¬æ¥çœ‹çœ‹å®ƒçš„ç”¨æ³•ï¼\n\n\né¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªéœ€è¦æä¾›çš„å¯¹è±¡\n12345678public class LazyEntity&#123;    @Inject    public LazyEntity()    &#123;        System.out.println(&quot;LazyEntity()&quot;);    &#125;&#125;\n\nç„¶åæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªComponentï¼Œéœ€è¦æä¾›æä¾›ä¸€ä¸ªMainç±»\n12345@Componentpublic interface MyComponent&#123;    Main getMain();&#125;\n\næˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªMainç±»ã€‚Lazyçš„ä½¿ç”¨æ–¹æ³•å°±æ˜¯å°†è¦ä½¿ç”¨çš„å¯¹è±¡ä½œä¸ºLazyçš„æ³›å‹å‚æ•°ï¼Œå¦‚ä¸‹æ‰€ç¤º\n1234567891011121314151617181920public class Main&#123;    @Inject    Lazy&lt;LazyEntity&gt; entityLazy;    @Inject    public Main() &#123;&#125;    public static void main(String[] args)    &#123;        Main main = DaggerMyComponent.builder()                .build()                .getMain();        System.out.println(&quot;æ­¤æ—¶LazyEntityè¿˜æ²¡æœ‰å®ä¾‹åŒ–&quot;);        for (int i = 0; i &lt; 3; i++)        &#123;            System.out.println(main.entityLazy.get().hashCode());        &#125;    &#125;&#125;\n\nè¾“å‡ºç»“æœï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬é‡å¤è°ƒç”¨éƒ½æ˜¯ä¸€ä¸ªå®ä¾‹ã€‚\n12345æ­¤æ—¶LazyEntityè¿˜æ²¡æœ‰å®ä¾‹åŒ–LazyEntity()162563573116256357311625635731\n\n\n\næ¥å§ï¼è¿›å…¥ç”Ÿæˆä»£ç åˆ†æé˜¶æ®µï¼ˆå½“ç„¶å¯ä»¥é€‰æ‹©è·³è¿‡å“ˆï¼ï¼‰ãƒ¾(â—Â°âˆ‡Â°â—)ï¾‰ï¾\n\n\næˆ‘ä»¬çœ‹åˆ°Daggerç”Ÿæˆçš„DaggerMyComponentï¼Œéœ€è¦å€¼å¾—æ³¨æ„çš„å°±æ˜¯ä¸‹é¢å›¾ç‰‡ä¸Šåˆ’çº¿çš„éƒ¨åˆ†ã€‚\nå¯ä»¥çœ‹åˆ°è¿™é‡Œä¹Ÿä½¿ç”¨äº†DoubleCheckç±»ï¼ˆå¤§å®¶é€šè¿‡ä¸Šé¢çš„å­¦ä¹ åº”è¯¥ç†Ÿæ‚‰äº†ï¼‰ï¼Œä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¾—åˆ°çš„Lazyå¯¹è±¡å…¶å®å°±æ˜¯ä¸€ä¸ªDoubleCheckã€‚\næ‰€ä»¥è¯´æˆ‘ä»¬èƒ½å¤šæ¬¡è°ƒç”¨ä¹Ÿåªèƒ½è¿”å›ç›¸åŒçš„å®ä¾‹ï¼Œè€Œä¸”ä¹Ÿèƒ½åœ¨å¤šçº¿ç¨‹è°ƒç”¨ä¹Ÿä¸æ‹…å¿ƒé‡å¤å®ä¾‹åŒ–ã€‚\n\n\né‚£ä¹ˆæˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹DoubleCheck.lazyè¿™ä¸ªé™æ€æ–¹æ³•ï¼Œæºä»£ç å¦‚ä¸‹ï¼š\nå¯ä»¥çœ‹åˆ°å’Œä¹‹å‰ä»‹ç»çš„DoubleCheck.providerä¸€ä¸ªæ¨¡å­åˆ»å‡ºæ¥çš„ï¼Œé‚£è¿™é‡Œå¤§å®¶å°±è‡ªè¡Œäº†è§£å’¯ï¼ï¼1234567public static &lt;P extends Provider&lt;T&gt;, T&gt; Lazy&lt;T&gt; lazy(P provider) &#123;    if (provider instanceof Lazy) &#123;        @SuppressWarnings(\"unchecked\") final Lazy&lt;T&gt; lazy = (Lazy&lt;T&gt;) provider;        return lazy;    &#125;    return new DoubleCheck&lt;T&gt;(checkNotNull(provider));&#125;\n\n\n\n\nProvider æ³¨å…¥æµ‹è¯•æ–‡ä»¶ä½ç½®\nå½“æ‚¨éœ€è¦å¤šä¸ªå®ä¾‹æ—¶ï¼Œå¯ä»¥é€šè¿‡Provider&lt;T&gt;ä½œä¸ºæˆå‘˜å˜é‡ï¼Œæ‚¨åªéœ€è¦æ¯æ¬¡è°ƒç”¨å®ƒçš„get()æ–¹æ³•å°±ä¼šè¿”å›ä¸åŒçš„å®ä¾‹ã€‚\n\næˆ‘ä»¬ç›´æ¥å°†ä¸Šé¢ä¾‹å­çš„Lazyæ”¹æˆProviderï¼Œå…¶ä»–éƒ½ä¸å˜ï¼Œå¦‚ä¸‹ï¼š\n\n123456public class Main&#123;    @Inject    Provider&lt;LazyEntity&gt; entityLazy;    ...&#125;\n\næ¥çœ‹ä¸€ä¸‹è¾“å‡ºçš„ç»“æœï¼š\n\n\næˆ‘ä»¬å¾ªç¯è°ƒç”¨äº†ä¸‰æ¬¡get()æ–¹æ³•ï¼Œäº§ç”Ÿäº†ä¸‰ä¸ªä¸åŒçš„å®ä¾‹1234567æ­¤æ—¶LazyEntityè¿˜æ²¡æœ‰å®ä¾‹åŒ–LazyEntity()692404036LazyEntity()1554874502LazyEntity()1846274136\n\n\n\næ¥å§ï¼ç”Ÿæˆä»£ç åˆ†æé˜¶æ®µ(ï½¡ï½¥Ï‰ï½¥ï½¡)\n\n\næˆ‘ä»¬çœ‹DaggerMyComponentä¸­æ˜¯æ€ä¹ˆæ³¨å…¥çš„ï¼çœ‹åˆ°åˆ’çº¿éƒ¨åˆ†ä¼ å…¥çš„å‚æ•°æ˜¯LazyEntityçš„å·¥å‚ç±»ï¼Œæ„æ€è¯´æˆ‘ä»¬å®šä¹‰çš„æˆå‘˜å˜é‡æŒ‡å‘çš„å°±æ˜¯ä¸€ä¸ªå·¥å‚ç±»\n\næˆ‘ä»¬æ¥çœ‹çœ‹è¿™ä¸ªå·¥å‚ç±»å§ï¼ç›¸ä¿¡å¤§å®¶ä¹Ÿç›¸å½“ç†Ÿæ‚‰äº†ï¼(äºæ˜¯å°±ä¸åšè¯´æ˜äº†ï¼ï¼ï¼)\n\n\n@Namedä¸¶@Qualifieræµ‹è¯•æ–‡ä»¶ä½ç½®\nå¤§å®¶å¯ä»¥å…ˆæ€è€ƒä¸€ä¸ªé—®é¢˜ï¼šä¸€ä¸ªæœºå™¨äººå¯¹è±¡æœ‰ä¸¤åªæ‰‹çš„å®ä¾‹ï¼ˆå‡å¦‚æœ‰æ‰‹å®ç°ç±»ï¼šHandï¼‰ï¼Œé‚£ä¹ˆDaggeråœ¨æä¾›å®ä¾‹æ—¶ï¼Œå¦‚ä½•æ‰èƒ½åŒºåˆ†è¿™æ˜¯æä¾›ç»™å·¦çš„å®ä¾‹è¿˜æ˜¯æä¾›ç»™å³æ‰‹çš„å®ä¾‹å‘¢ï¼Ÿ\n\nè§£å†³è¿™ä¸ªé—®é¢˜çš„åŠæ³•å¯ä»¥ç”¨@Namedåˆ†åˆ«åœ¨å˜é‡åå’Œæä¾›å®ä¾‹çš„åœ°æ–¹éƒ½æ ‡è®°ä¸€ä¸‹åå­—ã€‚è¯¥åå­—ä½œä¸º@Named()çš„å‚æ•°ï¼Œå¦‚ï¼š@Named(&quot;who am i&quot;)ã€‚è¯·çœ‹ä¸‹é¢çš„ä¾‹å­æ¼”ç¤ºï¼\n\n\næˆ‘ä»¬å®šä¹‰æ‰‹å®ç°ç±»\n\ntoString()è¾“å‡ºæè¿°ä¿¡æ¯ã€‚1234567891011121314public class Hand&#123;    private String desc;    public Hand(String desc)    &#123;        this.desc = desc;    &#125;    @Override    public String toString()    &#123;        return desc;    &#125;&#125;\n\n\n\næˆ‘ä»¬å®šä¹‰Moduleç±»æä¾›æ‰‹çš„å®ä¾‹\n\nä½¿ç”¨@Namedæ ‡è®°è¯¥å®ä¾‹æ˜¯å“ªåªæ‰‹ï¼Œå‚æ•°ä¸ºæœºå™¨äººå·¦æ‰‹è¿˜æ˜¯å³æ‰‹1234567891011121314151617@Modulepublic class RobotModule&#123;    @Named(\"left\")    @Provides    static Hand provideLeftHand()    &#123;        return new Hand(\"left hand\");    &#125;    @Named(\"right\")    @Provides    static Hand provideRightHand()    &#123;        return new Hand(\"right hand\");    &#125;&#125;\n\n\n\næˆ‘ä»¬å®šä¹‰ä¸€ä¸ªRobotï¼ˆå½“ç„¶è¿™é‡ŒRobotåªçœ‹è¿™ä¸¤åªæ‰‹(ï½ï¿£â–½ï¿£)ï½ ï¼‰ï¼Œé¡ºä¾¿æˆ‘å°±ç›´æ¥åœ¨è¿™ä¸ªç±»ä¸­æµ‹è¯•äº†ã€‚\n\né€šè¿‡@Named(&quot;left&quot;)æ ‡è®°è¿™é‡Œè¦å¼•ç”¨å·¦æ‰‹çš„å®ä¾‹\né€šè¿‡@Named(&quot;right&quot;)æ ‡è®°è¿™é‡Œè¦å¼•ç”¨å³çš„å®ä¾‹1234567891011121314151617181920212223public class Robot&#123;    @Named(\"left\")    @Inject    Hand leftHand;    @Named(\"right\")    @Inject    Hand rightHand;    @Inject    public Robot()    &#123;    &#125;    public static void main(String[] args)    &#123;        Robot robot = DaggerRobotComponent.create().getRobot();        System.out.println(robot.leftHand);        System.out.println(robot.rightHand);    &#125;&#125;\n\n\n\nåˆ›å»ºä¸€ä¸ªComponent\n12345@Component(modules = RobotModule.class)public interface RobotComponent&#123;    Robot getRobot();&#125;\n\næˆ‘ä»¬æ¥çœ‹ä¸€çœ‹è¿è¡Œç»“æœï¼Œå¯ä»¥çœ‹å‡ºè·Ÿæˆ‘ä»¬æ ‡è®°çš„ä¸€æ ·ã€‚\n12left handright hand\n\n\n\né‚£ä¹ˆ@Qualifieråˆæ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå…¶å®å®ƒå’Œä¸Šé¢è®²çš„@Scopeä¸€æ ·ï¼Œæ˜¯æ ‡è®°åœ¨æ³¨è§£ä¸Šçš„ï¼Œå°±åƒ@Singletonæ˜¯å®˜æ–¹ä¸ºæˆ‘ä»¬å†™å¥½çš„ä¸€ä¸ªç”¨@Scopeæ ‡è®°å¥½çš„æ³¨è§£ã€‚@Namedä¹Ÿæ˜¯å®˜æ–¹ä¸ºæˆ‘ä»¬å‡†å¤‡å¥½çš„ç”¨@Qualifieræ ‡æ³¨çš„æ³¨è§£ã€‚çœ‹@Namedæºç ï¼š\n\n12345678@Qualifier@Documented@Retention(RUNTIME)public @interface Named &#123;    /** The name. */    String value() default \"\";&#125;\n\n å› æ­¤æˆ‘ä»¬å¯ä»¥å®šä¹‰è‡ªå·±@Qualifierï¼Œæˆ‘ä»¬å¯ä»¥å®šä¹‰ä¸ä¼ å‚æ•°çš„ï¼Œåƒä¸‹é¢è¿™æ ·ï¼š\n\n1234567@Qualifier@Retention(RUNTIME)public @interface Left &#123; &#125;---------------------------------------------------@Qualifier@Retention(RUNTIME)public @interface Right &#123; &#125;\n\nä½¿ç”¨ï¼ˆç»“æœæ˜¯ä¸€æ ·çš„æ•ˆæœï¼‰ï¼š\n\n1234567891011121314151617181920212223242526272829303132333435@Modulepublic class RobotModule&#123;    @Left    @Provides    static Hand provideLeftHand()    &#123;        return new Hand(\"left hand\");    &#125;    @Right    @Provides    static Hand provideRightHand()    &#123;        return new Hand(\"right hand\");    &#125;&#125;---------------------------------------------------public class Robot&#123;    @Left    @Inject    Hand leftHand;    @Right    @Inject    Hand rightHand;    @Inject    public Robot()    &#123;    &#125;    ...&#125;\n\nç”Ÿæˆçš„ä»£ç åˆ†æï¼š\n\n\né€šè¿‡æ ‡è®°åå­—DaggerçŸ¥é“æˆ‘ä»¬å“ªä¸ªå˜é‡å¯¹åº”å“ªä¸ªå®ä¾‹\n\n\n@BindsOptionalOfæµ‹è¯•æ–‡ä»¶ä½ç½®\nå¯é€‰ç»‘å®šï¼Œæˆ‘ä»¬çŸ¥é“å¦‚æœæŸä¸ªå˜é‡æ ‡è®°äº†@Injectï¼Œé‚£ä¹ˆå¿…é¡»è¦ä¸ºå®ƒæä¾›å®ä¾‹ï¼Œå¦åˆ™æ— æ³•ç¼–è¯‘é€šè¿‡ã€‚ç°åœ¨æˆ‘ä»¬å¯ä»¥é€šè¿‡å°†å˜é‡ç±»å‹æ”¾å…¥Optional&lt;T&gt;æ³›å‹å‚æ•°ï¼Œåˆ™å¯ä»¥è¾¾åˆ°ï¼šå³ä½¿æ²¡æœ‰æä¾›å®ƒçš„å®ä¾‹ï¼Œä¹Ÿèƒ½é€šè¿‡ç¼–è¯‘ã€‚\nOptionalè¿™ä¸ªç±»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿå®ƒçš„å¼•å…¥æ˜¯ä¸ºäº†è§£å†³Javaä¸­ç©ºæŒ‡é’ˆçš„é—®é¢˜ï¼Œæ‚¨å¯ä»¥å»è¿™é‡Œäº†è§£ä¸€ä¸‹ï¼šJava 8 Optional ç±»\n\næˆ‘ä»¬è¿˜æ˜¯æ‹¿ä»£ç è¯´è¯ï¼è¿™é‡Œæœ‰ä¸€ä¸ªæ¯å­ï¼Œæ¯å­é‡Œå¯ä»¥æœ‰å’–å•¡ï¼Œä¹Ÿå¯ä»¥æ²¡æœ‰å’–å•¡ï¼\n\n\næˆ‘ä»¬å…ˆæ¥çœ‹æœ‰å’–å•¡çš„æ—¶å€™çš„ä»£ç \n\n\næˆ‘ä»¬é¦–å…ˆæˆ‘ä»¬å®šä¹‰ä¸€ä¸ªå’–å•¡ç±»\n1public class Coffee &#123; &#125;\n\næˆ‘ä»¬å°†Coffeeç±»å®šä¹‰ä¸ºå¯é€‰çš„ç»‘å®š\n\nåˆ›å»ºä¸€ä¸ªModuleæŠ½è±¡ç±»æ¥å®šä¹‰ï¼Œè¿”å›ç±»å‹å°±æ˜¯å’–å•¡\nç”¨@BindsOptionalOfæ¥æ ‡è®°123456@Modulepublic abstract class CModule&#123;    @BindsOptionalOf    public abstract Coffee optionalCoffee();&#125;\n\n\n\næˆ‘ä»¬åœ¨å®šä¹‰ä¸€ä¸ªæœ‰æä¾›Coffeeå®ä¾‹çš„Module\n123456789@Modulepublic class CoffeeModule&#123;    @Provides    public Coffee provideCoffee()    &#123;        return new Coffee();    &#125;&#125;\n\nå®šä¹‰æ¯å­ç±»å’ŒComponent\n\næˆ‘ä»¬ç›´æ¥åœ¨Cupæ·»åŠ mainæ–¹æ³•è¿›è¡Œæµ‹è¯•\nComponentå°†ä¸¤ä¸ªModuleæ·»åŠ è¿›æ¥123456789101112131415161718192021222324252627282930public class Cup&#123;    @Inject    Optional&lt;Coffee&gt; coffee;    @Inject    public Cup()    &#123;    &#125;    public static void main(String[] args)    &#123;        Cup cup = DaggerCComponent.create().getCup();        System.out.println(cup.coffee);        if (cup.coffee.isPresent())        &#123;            System.out.println(\"æœ‰å’–å•¡\");        &#125; else        &#123;            System.out.println(\"æ— å’–å•¡\");        &#125;    &#125;&#125;------------------------------------------------------------------@Component(modules = &#123;CoffeeModule.class, CModule.class&#125;)public interface CComponent&#123;    Cup getCup();&#125;\n\n\n\n\n\nè¾“å‡ºç»“æœï¼š\n\n12Optional[com.example.jiaji.daggertest.coffee8_optional_binding.Coffee@4b1210ee]æœ‰å’–å•¡\n\nå¦‚æœæˆ‘ä»¬å°†CoffeeModuleæä¾›Coffeeå®ä¾‹çš„æ–¹æ³•æ³¨é‡Šæ‰123456789@Modulepublic class CoffeeModule&#123;//    @Provides//    public Coffee provideCoffee()//    &#123;//        return new Coffee();//    &#125;&#125;\n\n\n\nè¾“å‡ºç»“æœï¼š\n\n12Optional.emptyæ— å’–å•¡\n\nè¿™å°±æ˜¯å¯é€‰ç»‘å®šçš„ä½œç”¨ï¼ŒOptionalè¿™ä¸ªç±»åœ¨java 8ä¸­ï¼Œå¹¶ä¸”æœ€ä½Android Api 24ã€‚æˆ–è€…ä½ å¯ä»¥é€‰æ‹©å¯¼å…¥guavaè¿™ä¸ªç±»åº“ï¼Œä¸è¿‡æˆ‘å»å–µäº†ä¸€çœ¼ï¼Œå®ƒå‘€çš„å¤ªå¤§äº†ï¼ï¼\n\n\n\nOptionalè¿˜å¯ä»¥è¿™æ ·ç”¨ï¼\n\n\nOptional&lt;Coffee&gt;\nOptional&lt;Provider&lt;Coffee&gt;&gt;\nOptional&lt;Lazy&lt;Coffee&gt;&gt;\nOptional&lt;Provider&lt;Lazy&lt;Coffee&gt;&gt;&gt;\n\n\nä¸‹é¢æˆ‘ä»¬æ¥çœ‹ä¸€çœ‹ç”Ÿæˆçš„ä»£ç é•¿ä»€ä¹ˆæ ·å§! ãƒ¾(=ï½¥Ï‰ï½¥=)o\n\nç›®å‰æˆ‘ä»¬ç›´æ¥çœ‹Componentå°±å¤Ÿäº†ï¼Œäºæ˜¯æˆ‘ä»¬çœ‹åˆ°DaggerCComponent\n\nè¿™æ˜¯æ²¡æœ‰æä¾›Coffeeå®ä¾‹çš„æƒ…å†µä¸‹\næˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ³¨å…¥çš„æ—¶å€™ï¼Œç›´æ¥é€šè¿‡Optional.&lt;Coffee&gt;empty()åˆ›å»ºäº†äº†ä¸€ä¸ªæ²¡æœ‰å†…å®¹çš„Optional\n\n\næ¥çœ‹æä¾›äº†Coffeeå®ä¾‹çš„æƒ…å†µ\næˆ‘ä»¬éœ€è¦çŸ¥é“Optional.of()æ˜¯å‘Optionalé‡Œé¢æ·»åŠ å®ä¾‹çš„æ„æ€ï¼Œå®ƒå°†è¿”å›ä¸€ä¸ªåŒ…å«æœ‰è¯¥å®ä¾‹çš„Optionalç±»\n\n\n\n@BindsInstanceæµ‹è¯•æ–‡ä»¶ä½ç½®\nç»‘å®šå®ä¾‹ï¼Œå¤§å®¶å¯ä»¥æƒ³è±¡ä¸€ä¸‹ï¼šå¦‚æœæˆ‘ä»¬æä¾›å®ä¾‹çš„æ—¶å€™ï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶æä¾›å‚æ•°å»åˆ›å»ºï¼Œé‚£ä¹ˆè¯¥å¦‚ä½•åšå‘¢ï¼Ÿ\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨Builderç»‘å®šå®ä¾‹æ¥åšï¼è¿™é‡Œæˆ‘ä»¬ä¸¾ä¾‹ä¸€ä¸ªéœ€è¦å‚æ•°åå­—å’Œçˆ±å¥½æ‰èƒ½åˆ›å»ºçš„Userå¯¹è±¡ã€‚\n\n\nåå­—å’Œçˆ±å¥½éƒ½æ˜¯Stringç±»å‹ï¼Œå®šä¹‰äº†ä¸¤ä¸ª@Scopeæ³¨è§£æ¥æ ‡è¯†\n1234567@Qualifier@Retention(RUNTIME)public @interface Name &#123; &#125;----------------------------------------------------------@Qualifier@Retention(RUNTIME)public @interface Love &#123; &#125;\n\nåˆ›å»ºä¸€ä¸ªUserç±»\n\nè¯¥ç±»ä¸ºéœ€è¦æä¾›çš„å¯¹è±¡ï¼Œåœ¨æ„é€ æ–¹æ³•ä¸Šç”¨@Injectæ ‡è¯†\nç”±äºå§“åå’Œçˆ±å¥½éƒ½å±äºStringç±»å‹ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦æ ‡è®°ä¸€ä¸‹åŒºåˆ†123456789101112131415161718192021public class User&#123;    private String name;    private String love;    @Inject    public User(@Name String name, @Love String love)    &#123;        this.name = name;        this.love = love;    &#125;    @Override    public String toString()    &#123;        return \"User&#123;\" +                \"name='\" + name + '\\'' +                \", love='\" + love + '\\'' +                '&#125;';    &#125;&#125;\n\n\n\nåˆ›å»ºComponentï¼Œè¿™é‡Œæ˜¯å…³é”®éƒ¨åˆ†äº†\n\né¦–å…ˆæˆ‘ä»¬éœ€è¦åœ¨è¯¥æ¥å£å†…éƒ¨åœ¨å®šä¹‰Builderæ¥å£ï¼Œè¯¥æ¥å£ç”¨`@Component.Builderæ ‡è®°ï¼Œè¡¨ç¤ºè¯¥æ¥å£ä¼šç”±Componentçš„Builder`é™æ€å†…éƒ¨ç±»å®ç°ã€‚\nç„¶åæˆ‘ä»¬éœ€è¦ä¸ºå®šä¹‰æ–¹æ³•name()å’Œlove()ï¼ŒåŠ ä¸Šæ³¨è§£@BindsInstanceï¼Œè¿”å›ç±»å‹ä¸ºBuilderã€‚ä¼ å…¥çš„å‚æ•°éœ€è¦ç”¨æ³¨è§£æ ‡è¯†ï¼Œå»å¯¹åº”Useræ„é€ å‚æ•°ã€‚éœ€è¦æ³¨æ„ä¸€ç‚¹çš„å°±æ˜¯æ–¹æ³•åªæœ‰ä¸€ä¸ªå‚æ•°ï¼Œå¦‚æœå¤šä¸ªå‚æ•°å°±ä¼šæŠ¥é”™ï¼šåªèƒ½æœ‰ä¸€ä¸ªå‚æ•°ã€‚\næœ€åUComponent build();å°±æ˜¯æˆ‘ä»¬é€šå¸¸æœ€åè°ƒç”¨çš„é‚£ä¸ªbuild()æ–¹æ³•ï¼Œåˆ›å»ºè¿”å›Componentå®ä¾‹ã€‚12345678910111213@Componentpublic interface UComponent&#123;    User getUser();    @Component.Builder    interface Builder    &#123;        @BindsInstance Builder name(@Name String name);        @BindsInstance Builder love(@Love String love);        UComponent build();    &#125;&#125;\n\n\n\nä½¿ç”¨æµ‹è¯•ï¼š\n1234567891011public class Main&#123;    public static void main(String[] args)    &#123;        UComponent uComponent = DaggerUComponent.builder()                .name(&quot;å¥å“æ›²&quot;)                .love(&quot;beautiful girl&quot;)                .build();        System.out.println(uComponent.getUser());    &#125;&#125;\n\n\n\nè¾“å‡ºç»“æœï¼š\n\n1User&#123;name=&apos;å¥å“æ›²&apos;, love=&apos;beautiful girl&apos;&#125;\nå¯ä»¥çœ‹å‡ºBindsInstanceå°±æ˜¯å°±æ˜¯æ”¹é€ äº†Componenté‡Œé¢çš„Builderç±»ï¼ŒBuilderç±»å®ç°äº†ç”¨`@Component.Builder`æ ‡æ³¨çš„æ¥å£ã€‚\n\næ¥ä¸‹æ¥æ¥çœ‹ä¸€ä¸‹ç”Ÿæˆçš„ç›¸å…³ä»£ç ï¼\n\n\nå¯ä»¥çœ‹åˆ°Componentä¸­çš„Builderå®ç°äº†UComponent.Builderæ¥å£ï¼Œå¹¶å°†ä¼ é€’è¿›æ¥çš„å‚æ•°è¿›è¡Œç©ºæ£€æµ‹ä¸æˆå‘˜å˜é‡å¼•ç”¨\nå¹¶ä¸”å‚æ•°çš„å®ä¾‹ä¹Ÿå°†ä¼šä½œä¸ºComponentçš„æˆå‘˜å˜é‡ï¼Œå½“åˆ›å»ºUseræ—¶ä½œä¸ºå…¶å‚æ•°ä¼ å…¥ã€‚\n\nComponent dependenciesæµ‹è¯•æ–‡ä»¶ä½ç½®\ndependenciesæ˜¯æ³¨è§£@Componentä¸­çš„ä¸€ä¸ªå‚æ•°å¯ä»¥å¼•ç”¨å…¶ä»–Componentï¼Œæˆ‘ä»¬çœ‹ä¸€ä¸‹å®ƒçš„æºç ï¼š\n\nå¯ä»¥çœ‹åˆ°å®ƒçš„å®šä¹‰å’Œmodulesæ˜¯ä¸€æ¨¡ä¸€æ ·\nä¹Ÿå°±æ˜¯è¯´æˆ‘ä»¬å¯ä»¥ä¾èµ–ä¸€ä¸ªæˆ–å¤šä¸ªComponent12345678@Retention(RUNTIME)@Target(TYPE)@Documentedpublic @interface Component &#123;  Class&lt;?&gt;[] modules() default &#123;&#125;;  Class&lt;?&gt;[] dependencies() default &#123;&#125;;  ...&#125;\n\n\nå®ƒçš„ä¸»è¦ä½œç”¨å°±æ˜¯å°†éœ€è¦ä¾èµ–çš„Componentï¼Œæ”¾åˆ°è‡ªå·±çš„Componentä¸­å½“åšæˆå‘˜å˜é‡ç›´æ¥å¼•ç”¨ã€‚è¢«ä¾èµ–çš„Componentå°±å¯ä»¥ä¸ºä¸»Componentæä¾›å®ƒåœ¨æ¥å£ä¸­å®šä¹‰çš„éœ€è¦è¿”å›çš„å®ä¾‹ã€‚\n\nå¦‚æœæœ‰AComponent dependencies BComponent\né‚£ä¹ˆåˆ™ç”Ÿæˆpublic class DaggerAComponent implements AComponent { BComponent bComponent;...}\nå¹¶ä¸”è¿™ä¸ªbComponentå®ä¾‹æ˜¯æˆ‘ä»¬åœ¨Builderç±»é‡Œé¢ä¼ è¿›å»çš„ã€‚\n\nComponent dependencyåªå…è®¸æ‚¨é€šè¿‡ç»„ä»¶ä¾èµ–å…³ç³»è®¿é—®æ¥å£ä¸­å…¬å¼€çš„ç±»å‹ï¼Œæ—¢ï¼šä½ åªèƒ½è®¿é—®åˆ°Componentæ¥å£ä¸­å®šä¹‰çš„è¿”å›ç±»å‹ã€‚\n\næˆ‘ä»¬æ¥å®é™…æ“ä½œï¼ä¾‹å­ï¼šå’–å•¡å’Œæ°´\n\n\nå®šä¹‰å’–å•¡å’Œæ°´çš„å®ä¾‹ï¼Œåœ¨Coffeeä¸­æˆ‘ä»¬è¦†å†™toString()æŠŠCoffeeå’ŒWaterçš„hashCodeæ‰“å°å‡ºæ¥ã€‚\n12345678910111213141516public class Water &#123; &#125;---------------------------------------------------public class Coffee&#123;    private Water water;    public Coffee(Water water)    &#123;        this.water = water;    &#125;    @Override    public String toString()    &#123;        return \"coffee:\" + hashCode() + \"; water:\" + water.hashCode();    &#125;&#125;\n\nå®šä¹‰ä¸¤ä¸ªçš„Moduleåˆ†åˆ«æä¾›å®ä¾‹\n12345678910111213141516171819@Modulepublic class WModule&#123;    @Provides    public Water provideWater()    &#123;        return new Water();    &#125;&#125;---------------------------------------------------@Modulepublic class CModule&#123;    @Provides    public Coffee provideCoffee(Water water)    &#123;        return new Coffee(water);    &#125;&#125;\n\næˆ‘ä»¬å®šä¹‰WComponentä¸ºWaterçš„Componentï¼Œå®šä¹‰CComponentä¸ºCoffeeçš„Componentã€‚CComponentä¾èµ–äºWComponent\n\nå¦‚ä¸‹ä»£ç æˆ‘ä»¬åªéœ€è¦åœ¨æ³¨è§£@Componentä¸­æ·»åŠ dependencies = WComponent.classå°±å¯ä»¥äº§ç”Ÿä¾èµ–ã€‚\nåœ¨ä½¿ç”¨çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨åˆ›å»ºCComponentçš„Builderå¯¹è±¡ä¸­ä¼ å…¥WComponentå°±å¯ä»¥äº†ã€‚12345678910111213141516171819202122232425262728public class ComponentDependency&#123;    @Component(modules = WModule.class)    public interface WComponent    &#123;        Water water();    &#125;    @Component(modules = CModule.class, dependencies = WComponent.class)    public interface CComponent    &#123;        Coffee coffee();    &#125;    public static void main(String[] args)    &#123;        WComponent wComponent = DaggerComponentDependency_WComponent                .create();        System.out.println(\"water:\" + wComponent.water().hashCode());        CComponent cComponent = DaggerComponentDependency_CComponent                .builder()                .wComponent(wComponent)                .build();        System.out.println(cComponent.coffee());    &#125;&#125;\n\n\n\n\n\nè¾“å‡ºç»“æœï¼š\n\n12water:1846274136coffee:1639705018; water:1627674070\n\né€šè¿‡ç»“æœæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼ŒWaterè¢«é‡å¤å®ä¾‹åŒ–äº†ï¼Œæœ€ç®€å•çš„è§£å†³æ–¹æ³•å°±æ˜¯ç›´æ¥åœ¨provideWater()åŠ ä¸Š@Reusableæ³¨è§£ã€‚OKï¼Œè¾¾åˆ°æ•ˆæœ\n\n1234567891011121314@Modulepublic class WModule&#123;    @Reusable    @Provides    public Water provideWater()    &#123;        return new Water();    &#125;&#125;---------------------------------------------------è¿è¡Œç»“æœï¼šwater:491044090coffee:644117698; water:491044090\n\nä½†è¿™ä¹Ÿè®¸ä¸èƒ½ä¿è¯æ‚¨å¾—åˆ°çš„ä¸€å®šæ˜¯åŒä¸€ä¸ªå®ä¾‹ï¼Œæˆ‘ä»¬å¯ä»¥åŠ ä¸Š@Singletonæ³¨è§£ï¼Œä½†æ˜¯è¿™é‡Œå´æ˜¯ä¸€ä¸ªå‘ï¼å› ä¸ºè¿™äº›Componentçš„ç”Ÿå‘½å‘¨æœŸæ˜¯ä¸ä¸€æ ·çš„ï¼Œæ‰€ä»¥ä¸èƒ½è·¨å¤šä¸ªComponentç”¨åŒä¸€ä¸ª@Singletonæ¥æ ‡è®°ã€‚å¦‚æœè¿™æ ·åšå°†ä¼šæŠ›å‡ºä¸€ä¸ªé”™è¯¯ä¿¡æ¯ï¼šThis @Singleton component cannot depend on scoped componentsstackoverflow\n\n\næˆ‘ä»¬å¯è¿™æ ·åšï¼Œè‡ªå®šä¹‰ä¸€ä¸ªScope\n1234@Scope@Documented@Retention(RUNTIME)public @interface MySingle &#123; &#125;\n\næˆ‘ä»¬åœ¨Waterè¿™è¾¹ç”¨@Singleton\n1234567    @Singleton    @Provides    public Water provideWater()---------------------------------------------------    @Singleton    @Component(modules = WModule.class)    public interface WComponent\n\næˆ‘ä»¬åœ¨Coffeeè¿™è¾¹ç”¨@MySingle\n1234567    @MySingle    @Provides    public Coffee provideCoffee(Water water)---------------------------------------------------    @MySingle    @Component(modules = CModule.class, dependencies = WComponent.class)    public interface CComponent\n\nè¾“å‡ºç»“æœOKï¼š\n12water:1625635731coffee:1580066828; water:1625635731\n\n\n\næˆ‘ä»¬æ¥åˆ†æä¸€ä¸‹Daggeræ‰€ç”Ÿæˆçš„ä»£ç ï¼Œä¸»è¦æˆ‘ä»¬çœ‹åˆ°DaggerComponentDependency_CComponentè¿™ä¸ªç±»ï¼Œä¸»è¦å˜åŒ–äº†åœ¨è¿™é‡Œï¼\n\n\næˆ‘ä»¬çœ‹åˆ°DaggerComponentDependency_CComponentçš„å†…éƒ¨Builderé™æ€ç±»\nä»ä¸‹é¢åˆ’çº¿çš„åœ°æ–¹æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œå¿…é¡»è¦ä¼ å…¥ä¾èµ–çš„Componentçš„å®ä¾‹ï¼Œå¦åˆ™ä¼šæŠ›å¼‚å¸¸ã€‚\n\n\næˆ‘ä»¬çœ‹DaggerComponentDependency_CComponenté‡Œé¢çš„å®ç°\nçœ‹åˆ°ç¬¬ä¸€æ ¹åˆ’çº¿å¤„ï¼Œå®ƒä¼šæŠŠBuilderä¸­ä¾èµ–çš„Componentå®ä¾‹çš„å¼•ç”¨ä¼ é€’ç»™æˆå‘˜å˜é‡ã€‚\nçœ‹åˆ°ç¬¬äºŒæ ¹åˆ’çº¿å¤„ï¼Œè¿™é‡Œå°±è·Ÿæˆ‘ä»¬å¹³å¸¸è°ƒç”¨æ¥å£ä¸­çš„æ–¹æ³•ä¸€æ ·èƒ½è·å¾—éœ€è¦çš„å®ä¾‹ï¼Œä½†æ˜¯è¿™é‡Œå®ä¾‹æ˜¯é€šè¿‡ä¾èµ–çš„Componentæ¥è·å–çš„å®ä¾‹ã€‚\n\n\nå½“æˆ‘ä»¬ç”¨äº†Scopeçš„æ—¶å€™ï¼ŒDaggerComponentDependency_CComponentè¿˜ä¼šç”Ÿæˆä¸€ä¸ªé™æ€ç±»å†…éƒ¨ç±»\nå¯ä»¥çœ‹å‡ºå®ƒå®ç°äº†Provider&lt;T&gt;å› è¯¥å°±æ˜¯ä¸ºäº†é€šè¿‡Providerçš„get()æ–¹æ³•æ¥æä¾›Waterå®ä¾‹ã€‚\nå¹¶ä¸”è¿™é‡Œå®ƒå°†ä¾èµ–çš„Componentæ”¾è¿™é‡Œé¢äº†\n\n\næˆ‘ä»¬å†æ¥çœ‹æ­¤æ—¶çš„DaggerComponentDependency_CComponent\nå®ƒä¾èµ–çš„åˆ™æ˜¯ä¸Šé¢çš„é™æ€å†…éƒ¨ç±»ã€‚\nå¹¶ä¸”é€šè¿‡æˆ‘ä»¬ç†Ÿæ‚‰çš„DoubleCheck.provideræ¥å¯¹get()å†…é€»è¾‘è¿›è¡Œçš„è½¬å˜ï¼Œä½¿æˆ‘ä»¬åªè·å–ä¸€ä¸ªå®ä¾‹ã€‚\n\n\n\n@Subcomponentæµ‹è¯•æ–‡ä»¶ä½ç½®\næœ€åæˆ‘ä»¬æ¥ç ”ç©¶ä¸€ä¸‹@Subcomponentï¼Œå°±å¦‚å®ƒåå­—ä¸€æ ·ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªComponentçš„å­ç±»ã€‚\n\næˆ‘ä»¬æ¥çœ‹ä¸€ä¸‹å®ƒçš„æºç ï¼š\n\n\né™¤äº†æ²¡æœ‰Class&lt;?&gt;[] dependencies() default {};é•¿å¾—å’Œ@Componentä¸€æ ·ã€‚\nä¹Ÿå°±æ˜¯è¯´Subcomponentå°±ä¸èƒ½ä¾èµ–å…¶ä»–Componentäº†123456789@Retention(RUNTIME)@Target(TYPE)@Documentedpublic @interface Subcomponent &#123;  Class&lt;?&gt;[] modules() default &#123;&#125;;  @Target(TYPE)  @Documented  @interface Builder &#123;&#125;&#125;\n\n\nSubComponentå¯ä»¥åœ¨å£°æ˜å®ƒæ—¶ä»çˆ¶çº§è®¿é—®æ•´ä¸ªç»‘å®šå›¾ï¼Œå³å¯ä»¥ä½¿ç”¨åœ¨å…¶Modulesä¸­æä¾›çš„å®ä¾‹ã€‚\n\næ€ä¹ˆä½¿ç”¨ï¼Œæˆ‘ä»¬å°±ç›´æ¥ç”¨ä¸Šä¸ªå’–å•¡å’Œæ°´çš„ä»£ç ï¼é‡æ–°å†™ä¸€ä¸‹ä»–ä»¬çš„Componentå°±è¡Œã€‚\n\n\nè¿™é‡Œæˆ‘ä»¬å°†CComponentä½œä¸ºå­Componentç”¨Subcomponentæ¥æ ‡è®°\nç„¶åæˆ‘ä»¬è¿˜å¾—åœ¨å®ƒçš„çˆ¶Componentä¸­æ·»åŠ ï¼Œå¦‚ä¸‹é¢ä»£ç ä¸­çš„CComponent cComponent(CModule cModule);ï¼Œå¦‚æœ@Subcomponentæœ‰å¤šä¸ªModuleï¼Œé‚£ä¹ˆå¯ä»¥å°±è¦ä¼ é€’å¤šä¸ªModuleçš„å‚æ•°ã€‚å‡å¦‚æœ‰ï¼š@Subcomponent(modules = {CModule.class, CModule2.class})ï¼Œé‚£ä¹ˆå¯ä»¥è¿™æ ·ï¼šCComponent cComponent(CModule cModule, CModule2 cModule2);\næˆ‘ä»¬åœ¨ä½¿ç”¨çš„æ—¶å€™éœ€è¦å…ˆåˆ›å»ºçˆ¶Componentï¼Œç„¶åæ‰èƒ½å»åˆ›å»ºå­Componentï¼Œå¦‚ä¸‹main()æ–¹æ³•ä¸­\n\n123456789101112131415161718192021222324public class SubComponent&#123;    @Component(modules = WModule.class)    public interface WComponent    &#123;        CComponent cComponent(CModule cModule);    &#125;    @Subcomponent(modules = CModule.class)    public interface CComponent    &#123;        Coffee coffee();    &#125;    public static void main(String[] args)    &#123;        WComponent wComponent = DaggerSubComponent_WComponent                .create();        CComponent cComponent = wComponent                .cComponent(new CModule());        System.out.println(cComponent.coffee());    &#125;&#125;\n\n@Subcomponent å’ŒComponent dependenciesçš„ä¸€äº›å¯¹æ¯”\n\n\n@Subcomponentå®ä¾‹æ˜¯é€šè¿‡çˆ¶Componentåˆ›å»ºã€‚Component dependencieså¯ä»¥ä¾èµ–å¤šä¸ªComponentï¼Œå¹¶ä¸”å„ä¸ªComponentå•ç‹¬åˆ›å»ºä¸”åˆ†ç¦»ã€‚\nComponent dependenciesåªè¿è¡Œæ‚¨è®¿é—®æ¥å£ä¸­å…¬å¼€å®šä¹‰æä¾›çš„å®ä¾‹ï¼Œ@Subcomponentå¯è®¿é—®å…¶Modulesä¸­å£°æ˜çš„æ‰€æœ‰å¯¹è±¡\nComponent dependencieså­˜åœ¨ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒï¼Œ@Subcomponentæ˜¯æ¯”å½“å‰çˆ¶Component â€œæ›´å°â€çš„å‘¨æœŸã€‚\n\n\næ¥çœ‹ä¸€ä¸‹ç”Ÿæˆçš„ä»£ç DaggerSubComponent_WComponentï¼Œæˆ‘ä»¬å°†å…¶åˆ†æˆä¸‰éƒ¨åˆ†æ¥çœ‹\n\n\né¦–å…ˆæˆ‘ä»¬çœ‹åˆ°DaggerSubComponent_WComponentå†…éƒ¨ç±»ï¼šå­Componentçš„å®šä¹‰\nå®ƒå®ç°äº†æˆ‘ä»¬å®šä¹‰çš„æ¥å£ï¼Œå¹¶ä¸”å’Œæˆ‘ä»¬ä¹‹å‰æ‰€ç”Ÿæˆçš„Componentæ˜¯ç±»ä¼¼çš„ï¼Œåªä¸è¿‡å†…éƒ¨æ²¡æœ‰Builderé™æ€ç±»äº†ã€‚\nç”±äºæ˜¯å†…éƒ¨ç±»ï¼Œæ‰€ä»¥å®ƒèƒ½è®¿é—®æ‰€æœ‰çˆ¶Componentæˆå‘˜ã€‚\n\n\næˆ‘ä»¬æ¥çœ‹Builderï¼ŒBuilderå¥½è¯´çš„ï¼Œè·³è¿‡ï¼\næˆ‘ä»¬æ¥çœ‹DaggerSubComponent_WComponentçš„æ–¹æ³•\nå¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬è°ƒç”¨cComponentæ—¶å°±ä¼šåˆ›å»ºä¸€ä¸ªå­Componentç°åœ¨ç±»å®ä¾‹\nè¿™æ˜¯ç”±äºå­Componentæ˜¯æ²¡æœ‰Builderå»åˆ›å»ºçš„ä¹Ÿæ²¡æœ‰é»˜è®¤åˆ›å»ºModuleçš„åŠŸèƒ½ã€‚å½“ç„¶å­Componentä¹Ÿæ˜¯éœ€è¦ä»–çš„Moduleçš„ï¼Œäºæ˜¯è¦åˆ›å»ºå®ƒéœ€è¦çš„Moduleç»™å®ƒã€‚\n\n\n\nSubcomponentå’ŒComponent dependenciesçš„å…³ç³»åŒºåˆ«\nå®‰å“æ‰©å±•çš„ç›¸å…³æ¡†æ¶å¦‚æœæœ‰æœºä¼šï¼Œå¦‚æœå¸Œæœ›çœ‹æˆ‘è¿™ç§å•°å—¦ä»‹ç»çš„äººå¤šçš„è¯ï¼Œåœ¨å†™ä¸€ç¯‡å…³äºè¿™ä¸ªçš„å§ï¼\n\nç»“æŸå¥½äº†ï¼Œç¥ä¸çŸ¥é¬¼ä¸è§‰çš„ä¸€æ˜ŸæœŸç äº†è¿™ä¹ˆå¤šå­—ã€‚èƒ½æŒ¨ç€çœ‹åˆ°è¿™é‡Œçš„åŒå­¦ï¼Œèƒ½æœ‰å¤šå°‘å’§Î£(ã£Â°Ğ”Â°;)ã£\næƒ³èµ·æ¥ï¼Œæˆ‘ä»¥å‰å†™äº†ä¸€ä¸ªMVPæ¡†æ¶XMVPå°±æ˜¯é€šè¿‡è·å–é…ç½®çš„æ³›å‹å‚æ•°ç±»å‹ç„¶åå†é€šè¿‡åå°„å»å®ä¾‹åŒ–çš„è‡ªåŠ¨å®Œæˆå®ƒä»¬ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ä¹Ÿå¯ä»¥è¯´æ˜¯è¿™å°±æ˜¯ä¾èµ–æ³¨å…¥äº†å§ï¼å“ˆå“ˆï¼æœ‰å…´è¶£çš„æœ‹å‹å¯ä»¥å»çœ‹ä¸€çœ‹ç”¨ä¸€ç”¨éå¸¸ç®€æ´å“¦ï¼(ï½€ãƒ»Ï‰ãƒ»Â´)\n\n\n\nç›¸å…³ä¿¡æ¯\né“¾æ¥\n\n\n\n\næ–‡ç« ä¸­æ‰€æœ‰ä»£ç çš„åœ°å€\nhttps://github.com/xujiaji/learn-android/tree/learn-dagger\n\n\næœ¬æ–‡ä½œè€…ï¼ˆæ¬¢è¿å…³æ³¨ï¼‰\nå¥å“æ›²\n\n\nGithub\nhttps://github.com/xujiaji/\n\n\nä¸ªäººåšå®¢\nhttps://blog.xujiaji.com\n\n\næœ¬æ–‡åœ°å€\nhttps://blog.xujiaji.com/post/learn-dagger\n\n\n\nå¦‚æœæ–‡ä¸­å†…å®¹æœ‰è¯¯æˆ–ä¸åˆé€‚æ¬¢è¿æ‚¨çš„æŒ‡æ­£ï¼\nover\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/learn-dagger/home.jpg","plink":"https://blog.xujiaji.com/post/learn-dagger/"},{"title":"python web ä»Winéƒ¨ç½²åˆ°ubuntuå°è®°","date":"2018-05-28T07:54:30.000Z","author":"xujiaji","updated":"2019-04-08T06:56:53.997Z","content":"æœ¬ç¯‡æ–‡ç« ä¸»è¦æ˜¯ç”¨æ¥è®°å½•æˆ‘å°†pythonåå°éƒ¨ç½²åˆ°amazon ec2æœåŠ¡å™¨çš„å…¨è¿‡ç¨‹ï¼Œä»¥åŠä¸€äº›å‘å‘æ´¼æ´¼ã€‚å¸Œæœ›å¯¹æœ‰éœ€è¦çš„æœ‹å‹æä¾›å¸®åŠ©ï¼Œå¹¶ä¸”å¾€åä¹Ÿå¥½å¿«é€Ÿå›å¿†ã€‚æˆ‘çš„å­¦ä¹ åœ°å€:å»–é›ªå³° å®æˆ˜ Day15-éƒ¨ç½²Web App\næ³¨å†Œå¹¶åˆ›å»ºAmazon EC2å®ä¾‹\né¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªè´¦å·ï¼Œæœ‰12 ä¸ªæœˆçš„å…è´¹å¥—é¤è®¿é—®æƒé™ã€‚æ³¨å†Œæµç¨‹æœ‰ç‚¹éº»çƒ¦ï¼Œéœ€è¦æ·»åŠ ä¿¡ç”¨å¡ï¼Œæ”¯ä»˜1ç¾å…ƒæ¥è®¤è¯è´¦å·(â€¢Ìã¸â€¢Ìâ•¬)ã€‚ç„¶åéªŒè¯ç å±…ç„¶æ˜¯æ‰“ç”µè¯è®¤è¯ï¼Œç”µè„‘ä¸Šä¼šæ˜¾ç¤ºéªŒè¯ç ï¼Œéšåç”µè¯æ¥äº†ç­‰å¥¹è¯´å®Œï¼Œæ‰‹æœºè¾“å…¥éªŒè¯ç â€œ#â€ç»“æŸã€‚åˆ°æ­¤å› è¯¥éƒ½æ³¨å†ŒæˆåŠŸäº†ï¼\næ‰¾åˆ°EC2å¯åŠ¨å®ä¾‹ï¼Œåˆ›å»ºä¸€ä¸ªubuntuçš„å®ä¾‹ï¼Œé»˜è®¤åˆ›å»ºå°±OKäº†ã€‚\nåˆ›å»ºç»“æŸä¼šè®©ä½ è¾“å…¥ä¸€ä¸ªsshå¯†é’¥çš„åç§°ï¼Œä½ è¾“å…¥ä¸€ä¸ªé‚®ç®±ä¹‹ç±»çš„å°±è¡Œäº†ï¼Œéšåä¼šå¸®ä½ ç”Ÿæˆä¸€ä¸ª.pemçš„ç§å¯†ï¼Œä¸‹è½½ä¸‹æ¥æ”¾å¥½å’¯ï¼è¿™ç©æ„å„¿å°±ç›¸å½“äºç™»å½•å¯†ç äº†ã€‚\nç¼–è¾‘å®‰å…¨ç»„ï¼Œæ·»åŠ 22ç«¯å£å’Œ80ç«¯å£çš„è®¿é—®æƒé™\nåœ¨EC2ç®¡ç†ç•Œé¢å°†ä½ åˆ›å»ºçš„å®ä¾‹æ‹‰æ‹‰åˆ°æœ€å³è¾¹æœ‰ä¸ªå«å®‰å…¨ç»„çš„æ ç›®ï¼Œç‚¹è¿›å»\nè¿›å»åç‚¹å‡»å…¥ç«™-ç¼–è¾‘\nåˆ›å»ºSSHå…¥ç«™è§„åˆ™ï¼Œç»‘å®šè‡ªå·±çš„IPåœ°å€ï¼Œç¬¬3æ­¥é€‰äº†åä¼šè‡ªåŠ¨è·å–ä½ çš„ipåœ°å€ã€‚å¦‚ä¸‹å›¾\næ‚¨è¿˜éœ€è¦æ·»åŠ http 80ç«¯å£ï¼Œå¹¶ä¸”è®¾ç½®ä¸ºä»»ä½•ä½ç½®éƒ½å¯è®¿é—®ï¼Œå¦‚ä¸‹ï¼š\n\n\n\nè¿æ¥åˆ°æœåŠ¡å™¨ä½¿ç”¨ PuTTY è¿æ¥åˆ°æœåŠ¡å™¨\nä¸‹è½½å¹¶å®‰è£…PuTTY\næ‰¾åˆ°PuTTYå®‰è£…ç›®å½•ï¼ŒåŒå‡»æ‰“å¼€puttygen.exe\nåŠ è½½ä¹‹å‰æ‚¨ä¸‹è½½çš„.pemæ–‡ä»¶ï¼Œéœ€è¦è½¬æ¢ä¸€ä¸‹ç§å¯†æ ¼å¼\nç‚¹å‡»saveè¿›è¡Œä¿å­˜\næ‰“å¼€PuTTYè¿›è¡Œé…ç½®\né…ç½®SSH\né…ç½®ä¸»æœºåœ°å€(ubuntuæœåŠ¡å™¨åœ°å€å‰éœ€è¦åŠ ä¸Šubuntu@)ï¼Œå¹¶ä¿å­˜é…ç½®ã€‚ä¸»æœºåœ°å€\næœ€åè¾“å…¥é…ç½®åç§°ç‚¹å‡»ä¿å­˜ï¼Œä¸‹æ¬¡å°±å¯ä»¥ç›´æ¥åŒå‡»å·²é…ç½®å¥½çš„é€‰é¡¹ç›´æ¥è¿›å…¥ã€‚\næ‰“å¼€åä¹Ÿè®¸ä¹Ÿè®¸ä½ ä¼šå‘ç°è¿›ä¸å»ï¼è¿™æ—¶ä½ éœ€è¦æ£€æŸ¥æœåŠ¡å™¨å®‰å…¨ç»„é‡Œæ˜¯å¦æ·»åŠ SSHï¼ˆå¦‚æœæœ€åä¹Ÿæ— æ³•è¿æ¥å¯æŠŠsshæ¥æºæ”¹ä¸ºä»»ä½•ä½ç½®è¯•è¯•ï¼‰ï¼Œè¿˜æœ‰æ£€æŸ¥windowé˜²ç«å¢™æ˜¯å¦å¼€æ”¾22ç«¯å£ï¼ˆå¯å…³é—­é˜²ç«å¢™è¯•è¯•ï¼Œæˆ–åœ¨é˜²ç«å¢™é«˜çº§è§„åˆ™é‡Œé¢æ·»åŠ 22ç«¯å£è®¿é—®ï¼‰\n\n\n\nWinSCP ç®¡ç†æœåŠ¡å™¨æ–‡ä»¶èµ„æº\nä¸‹è½½åœ°å€\nå®‰è£…æ—¶ä¼šè‡ªåŠ¨æ£€æµ‹åˆ°PuTTYçš„é…ç½®ï¼Œé€‰æ‹©å¯¼å…¥\nç›´æ¥é€‰ä¸­ä½ çš„ç«™ç‚¹ç™»å½•å°±OKäº†ã€‚\nä¹Ÿè®¸ä½ ä¼šé‡åˆ°æ²¡æœ‰æƒé™æ— æ³•åˆ›å»ºæ–‡ä»¶çš„æƒ…å†µwinscpæ™®é€šç”¨æˆ·ä¸Šä¼ æ–‡ä»¶æ²¡æœ‰æƒé™è§£å†³\n\né…ç½®python webç¯å¢ƒ\næ¥ä¸‹æ¥å¯ä»¥ç›´æ¥åˆ°è¿™é‡Œå»çœ‹éƒ¨ç½²è¿‡ç¨‹äº† å»–é›ªå³° Python Day 15 - éƒ¨ç½²Web App\n\n\næ­¤æ—¶æˆ‘ä»¬é€šè¿‡PuTTYç™»å½•æœåŠ¡å™¨ï¼Œæˆ‘ä»¬è¾“å…¥pythonï¼Œä¼šå‘ç°è¿›å…¥çš„æ˜¯python2çš„ç‰ˆæœ¬\næˆ‘ä»¬éœ€è¦å®‰è£…python 3.6çš„ç‰ˆæœ¬ï¼Œæ³¨æ„æˆ‘ä»¬ä¸è¦ç›´æ¥apt-get install python3ï¼Œè¿™æ ·ä¼šç›´æ¥å®‰è£…æˆ3.5çš„ç‰ˆæœ¬ï¼Œç„¶è€Œaiomysqlè¿™ä¸ªåº“ä¸æ”¯æŒï¼ŒæŠ˜è…¾äº†è®¸ä¹…ã€‚pip3ä¹Ÿéœ€è¦è‡ªå·±æ‰‹åŠ¨å»å®‰è£…çš„ã€‚\nUbuntu16.04å®‰è£…Python3.6 å’Œpip\nå®‰è£…Nginxä¸¶Supervisorä¸¶MySQLå‘½ä»¤ï¼š$ sudo apt-get install nginx supervisor mysql-server\nmysqlå®‰è£…çš„æ—¶å€™éœ€è¦é…ç½®å¯†ç ï¼Œå¯†ç å¾—è®°å¥½äº†\nç¼–è¾‘mysqlé…ç½®æ–‡ä»¶è®¾ç½®utf8ç¼–ç ï¼Œè¾“å…¥å‘½ä»¤ï¼švim /etc/mysql/my.cnf\niè¿›å…¥è¾“å…¥æ¨¡å¼ï¼Œæ·»åŠ ä¸‹é¢é…ç½®, Escè¿›å…¥å‘½ä»¤æ¨¡å¼ :wqè¿›è¡Œä¿å­˜é€€å‡º\né‡å¯MySQL1234567[client]default-character-set = utf8[mysqld]default-storage-engine = INNODBcharacter-set-server = utf8collation-server = utf8_general_ci\n\n\n\n\n5.å°†sqlå»ºæ•°æ®åº“å’Œè¡¨çš„é…ç½®æ–‡ä»¶ä¼ åˆ°æœåŠ¡å™¨è¿è¡Œï¼š$ mysql -u root -p &lt; schema.sql6.é€šè¿‡Navicatè¿æ¥æœåŠ¡å™¨æ•°æ®åº“ï¼Œè¿™é‡Œçš„é…ç½®å°±è·Ÿæœ¬åœ°çš„é…ç½®ä¸€æ ·çš„ï¼Œå¯†ç å°±æ˜¯æ•°æ®åº“çš„å¯†ç ã€‚ç„¶åæˆ‘ä»¬å»é…ç½®SSHipåœ°å€å°±æ˜¯ä¹‹å‰æˆ‘ä»¬åœ¨ç½‘é¡µåå°çœ‹åˆ°çš„åœ°å€ï¼Œç«¯å£å·é»˜è®¤çš„22ï¼Œé€‰æ‹©å…¬é’¥éªŒè¯ï¼Œç§å¯†é€‰æ‹©æˆ‘ä»¬ä¹‹å‰ç”¨puttygen.exeå¯¼å‡ºçš„.ppkæ–‡ä»¶ï¼Œå¯†ç çŸ­è¯­å°±æ˜¯åˆ›å»ºæœåŠ¡å™¨ååˆ›å»ºçš„å¯†é’¥åç§°ï¼ˆå¯ä»¥åœ¨EC2ç½‘é¡µåå°çœ‹åˆ°å¯†é’¥åç§°è¿™ä¸€æ ï¼‰è¿™ä¸‹å°±çˆ½äº†7.å®‰è£…Web Appç”¨åˆ°çš„pythonåº“ï¼Œå‘½ä»¤ï¼š$ sudo pip3 install jinja2 aiomysql aiohttp\néƒ¨ç½²\nå®‰è£…è‡ªåŠ¨åŒ–éƒ¨ç½²å·¥å…·Fabricï¼Œå‘½ä»¤ï¼špip3 install fabric3\næ­¤å¤„éƒ½å¯ä»¥å»çœ‹å»–è€å¸ˆæ‰€è®²çš„éƒ¨ç½²ï¼Œå› ä¸ºæ•™ç¨‹æ˜¯å®‰è£…çš„python2ç¯å¢ƒä¸‹çš„fabricæ‰€ä»¥åœ¨è¿™é‡Œç»•äº†å¾ˆä¹…ã€‚\né…ç½®çš„æ—¶å€™æˆ‘ä»¬é…ç½®éªŒè¯çš„æ—¶å€™æˆ‘ä»¬å¯ä»¥ç›´æ¥ç”¨sshæ¥è¿›è¡ŒéªŒè¯ï¼Œenv.hostså°±æ˜¯ä¹‹å‰æˆ‘ä»¬é…ç½®PuTTYæ˜¯çš„ä¸»æœºåœ°å€ï¼Œenv.key_filenameå°±æ˜¯æˆ‘ä»¬ä¸‹è½½çš„sshç§å¯†.pem\næˆ‘çš„fabricé…ç½®ï¼šfabfile.py12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970# fabfile.pyimport os, refrom datetime import datetime# å¯¼å…¥Fabric API:from fabric.api import *# æœåŠ¡å™¨ç™»å½•ç”¨æˆ·å:# env.user = 'ubuntu'# sudoç”¨æˆ·ä¸ºroot:# env.sudo_user = 'ubuntu'# æœåŠ¡å™¨åœ°å€ï¼Œå¯ä»¥æœ‰å¤šä¸ªï¼Œä¾æ¬¡éƒ¨ç½²:env.hosts = ['ubuntu@ec2-18-220-216-89.us-east-2.compute.amazonaws.com']env.key_filename = '~/.ssh/jiajixuqqcom.pem'# env.ssh_config_path = '~/.ssh/config'# env.use_ssh_config = True# æœåŠ¡å™¨MySQLç”¨æˆ·åå’Œå£ä»¤:db_user = 'root'db_password = '6Sb8qzM38'_TAR_FILE = 'dist-awesome.tar.gz'_REMOTE_TMP_TAR = '/tmp/%s' % _TAR_FILE_REMOTE_BASE_DIR = '/srv/awesome'def touchfile():                         # éšä¾¿åˆ›å»ºä¸€ä¸ªä»»åŠ¡ï¼Œç”¨æ¥æµ‹è¯•    run('touch /tmp/www.txt')def deploy():    newdir = 'www-%s' % _now()    # åˆ é™¤å·²æœ‰çš„taræ–‡ä»¶:    run('rm -f %s' % _REMOTE_TMP_TAR)    # ä¸Šä¼ æ–°çš„taræ–‡ä»¶:    put('dist/%s' % _TAR_FILE, _REMOTE_TMP_TAR)    # åˆ›å»ºæ–°ç›®å½•:    with cd(_REMOTE_BASE_DIR):        sudo('mkdir %s' % newdir)    # è§£å‹åˆ°æ–°ç›®å½•:    with cd('%s/%s' % (_REMOTE_BASE_DIR, newdir)):        sudo('tar -xzvf %s' % _REMOTE_TMP_TAR)        # éœ€è¦æ·»åŠ æƒé™æµè§ˆå™¨æ‰èƒ½è®¿é—®        sudo('chmod -R 775 static/')        sudo('chmod 775 favicon.ico')        # ç”±äºapp.pyçš„æ–‡ä»¶æ ¼å¼æœ‰é—®é¢˜ï¼Œè½¬æ¢ä¸€ä¸‹        run('dos2unix app.py')    # é‡ç½®è½¯é“¾æ¥:    with cd(_REMOTE_BASE_DIR):        sudo('rm -f www')        sudo('ln -s %s www' % newdir)        sudo('chown ubuntu:ubuntu www')        sudo('chown -R ubuntu:ubuntu %s' % newdir)    # é‡å¯PythonæœåŠ¡å’ŒnginxæœåŠ¡å™¨:    with settings(warn_only=True):        sudo('supervisorctl stop awesome')        sudo('supervisorctl start awesome')        sudo('/etc/init.d/nginx reload')def build():    includes = ['static', 'templates', 'transwarp', 'favicon.ico', '*.py']    excludes = ['test', '.*', '*.pyc', '*.pyo']    local('rm -f dist/%s' % _TAR_FILE)    with lcd(os.path.join(os.path.abspath('.'), 'www')):        cmd = ['tar', '--dereference', '-czvf', '../dist/%s' % _TAR_FILE]        cmd.extend(['--exclude=\\'%s\\'' % ex for ex in excludes])        cmd.extend(includes)        local(' '.join(cmd))\n\n\næ·»åŠ httpsæ·»åŠ è¿™ä¸ªçš„åŸå› å˜›ï¼å°±ä¸åŠ å¤šå°‘çš„å•¦ï¼æ¥çœ‹å¦‚ä½•å¦‚ä½•åšå§ï¼\n\næˆ‘æ˜¯åœ¨é˜¿é‡Œäº‘ä¸Šé¢æ‰¾çš„ä¸€ä¸ªå…è´¹ç‰ˆï¼Œå¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼Œè¿›å»åç‚¹å‡»ç«‹å³è´­ä¹°\né€‰æ‹©å…è´¹ç±»å‹ï¼Œå¦‚ä¸‹æ“ä½œ\nç„¶åå°±æ˜¯éœ€è¦å¡«å†™ä¸€äº›æ‚¨çš„ä¸ªäººä¿¡æ¯å’Œéœ€è¦ç»‘å®šçš„åŸŸåï¼Œæ¯”å¦‚æˆ‘ç»‘å®šï¼šwww.xujiaji.comï¼Œæäº¤å®¡æ ¸ã€‚ï¼ˆæ­¤æ—¶å¯èƒ½éœ€è¦ç­‰ä¸ªåŠä¸ªæ¥å°æ—¶å®¡æ ¸ï¼‰\nç‚¹å‡»ä¸‹è½½\nç‚¹å‡»ä¸‹è½½è¯ä¹¦for Nginxï¼Œç„¶åå°†å‹ç¼©åŒ…è§£å‹å¾—åˆ°ä¸¤ä¸ªæ–‡ä»¶ã€‚æˆ‘ä»¬å°†è¿™ä¸¤ä¸ªæ–‡ä»¶æ”¾åˆ°å¦‚ä¸‹ä½ç½®ï¼Œ/ect/nginx/æ˜¯æœåŠ¡å™¨nginxçš„å®‰è£…ç›®å½•ï¼Œcertæ˜¯æ–°å»ºçš„ç›®å½•ï¼Œå°±æ”¾è¿™é‡Œé¢\nç„¶åæˆ‘ä»¬ç¼–è¾‘/etc/nginx/sites-available/awesomeï¼Œæˆ‘ä»¬å°†è¿™äº›ä¸œè¥¿ç›´æ¥æ‹·è´è¿‡æ¥\né‡å¯nginxï¼šsudo /etc/init.d/nginx reload\né…ç½®å®Œæˆåæ‚¨å¯èƒ½è¿˜æ˜¯æ— æ³•è®¿é—®httpsï¼ˆæˆ‘å°±åœ¨è¿™çº ç»“äº†åŠå¤©ï¼‰ï¼Œæ³¨æ„éœ€è¦åœ¨æœåŠ¡å™¨å®‰å…¨ç»„æ·»åŠ æ‰€æœ‰ç”¨æˆ·å¯¹443ç«¯å£çš„è®¿é—®æƒé™ã€‚\nä¸‹é¢æ˜¯æˆ‘çš„nginxæ•´ä½“é…ç½®ä»£ç ï¼Œå«ä¹‰è¯·çœ‹æ³¨é‡Š1234567891011121314151617181920212223242526272829303132333435363738394041424344454647484950515253server &#123;    # ç›‘å¬80ç«¯å£ï¼Œä½œç”¨æ˜¯å°†ç”¨æˆ·httpçš„è¯·æ±‚è½¬å‘åˆ°https    listen      80;    # ç»‘å®šçš„åŸŸå    server_name www.xujiaji.com;    rewrite ^(.*)$  https://www.xujiaji.com permanent;&#125;server &#123;    #listen      80;    # ä¸‹é¢è¿™éƒ¨åˆ†å°±æ˜¯ä»é˜¿é‡Œäº‘ä¸‹è½½ACè®¤è¯é‚£é‡Œç›´æ¥æ‹·è´è¿‡æ¥çš„é…ç½®    listen 443;    ssl on;    ssl_certificate   cert/214731123750166.pem;    ssl_certificate_key  cert/214731123750166.key;    ssl_session_timeout 5m;    ssl_ciphers ECDHE-RSA-AES128-GCM-SHA256:ECDHE:ECDH:AES:HIGH:!NULL:!aNULL:!MD5:!ADH:!RC4;    ssl_protocols TLSv1 TLSv1.1 TLSv1.2;    ssl_prefer_server_ciphers on;        # ä»£ç†çš„æœåŠ¡å™¨æ ¹ç›®å½• æ—¥å¿—    root       /srv/awesome/www;    access_log /srv/awesome/log/access_log;    error_log  /srv/awesome/log/error_log;    server_name www.xujiaji.com;    client_max_body_size 1m;    gzip            on;    gzip_min_length 1024;    gzip_buffers    4 8k;    gzip_types      text/css application/x-javascript application/json;    sendfile on;    location /favicon.ico &#123;        root /srv/awesome/www;    &#125;    location ~ ^\\/static\\/.*$ &#123;        root /srv/awesome/www;    &#125;    location / &#123;        proxy_pass       http://127.0.0.1:9000;        proxy_set_header X-Real-IP $remote_addr;        proxy_set_header Host $host;        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;    &#125;&#125;\n\n\n","plink":"https://blog.xujiaji.com/post/python_server_deploy/"},{"title":"Android æ— ç¼æ¢è‚¤æ·±å…¥äº†è§£ä¸ä½¿ç”¨","date":"2018-04-21T01:03:41.000Z","author":"xujiaji","updated":"2019-04-08T15:57:46.648Z","content":"\næ€è·¯æ•´ä½“ç»“æ„\n\n\næ–¹æ¡ˆåŠè½®å­\nå†…éƒ¨èµ„æºåŠ è½½æ–¹æ¡ˆ\né€šè¿‡åœ¨BaseActivityä¸­setTheme\nä¸å¥½å®æ—¶çš„åˆ·æ–°ï¼Œéœ€è¦é‡æ–°åˆ›å»ºé¡µé¢\nå­˜åœ¨éœ€è¦è§£å†³å“ªäº›Vewéœ€è¦åˆ·æ–°çš„é—®é¢˜\n\n\nè‡ªå®šä¹‰View\nMultipleTheme\né€šè¿‡è‡ªå®šä¹‰Viewé…åˆsetThemeåç«‹å³åˆ·æ–°èµ„æºã€‚\néœ€è¦æ›¿æ¢æ‰€æœ‰éœ€è¦æ¢è‚¤çš„view\n\n\nè‡ªå®šä¹‰xmlå±æ€§ï¼ŒJavaä¸­ç»‘å®šview\nColorful\né¦–å…ˆé€šè¿‡åœ¨javaä»£ç ä¸­æ·»åŠ view\nç„¶åsetThemeè®¾ç½®å½“å‰é¡µé¢ä¸»é¢˜\næœ€åé€šè¿‡å†…éƒ¨å¼•ç”¨çš„ä¸Šä¸‹æ–‡getThemeéå†viewæ¥ä¿®æ”¹èµ„æº\n\n\nåŠ¨æ€èµ„æºåŠ è½½æ–¹æ¡ˆ\nAndroid-Skin-Loader\nThemeSkinningï¼ˆæ˜¯ä¸Šé¢é‚£ä¸ªæ¡†æ¶çš„è¡ç”Ÿï¼Œæ•´ç¯‡å°±æ˜¯ç ”ç©¶çš„è¿™æ¡†æ¶ï¼‰\nresourceæ›¿æ¢ï¼šé€šè¿‡å•ç‹¬æ‰“åŒ…ä¸€ä¸ªèµ„æºapkï¼Œåªç”¨æ¥è®¿é—®èµ„æºï¼Œèµ„æºåå¾—ä¸æœ¬èº«å¯¹åº”\næ— éœ€å…³å¿ƒçš®è‚¤å¤šå°‘ï¼Œå¯ä¸‹è½½ï¼Œç­‰ç­‰\nå‡†å¤‡é‡‡ç”¨è¯¥æ–¹æ¡ˆ\n\n\n\né‡‡ç”¨æ–¹æ¡ˆçš„æŠ€æœ¯ç‚¹\nè·å–çš®è‚¤èµ„æºåŒ…apkçš„èµ„æº\nè‡ªå®šä¹‰xmlå±æ€§ï¼Œç”¨æ¥æ ‡è®°éœ€è¦æ¢è‚¤çš„view\nè·å–å¹¶ç›¸åº”æœ‰æ¢è‚¤éœ€æ±‚çš„å¸ƒå±€\nLayoutInflater Factoryä½¿ç”¨åŸºç¡€ä¸è¿›é˜¶\nAndroid æ¢ç©¶ LayoutInflater setFactory\n\n\nå…¶ä»–\næ‰©å±•å¯è‡ªè¡Œæ·»åŠ æ‰€æ”¯æŒæ¢è‚¤çš„å±æ€§\næ”¹å˜çŠ¶æ€æ é¢œè‰²\næ”¹å˜å­—ä½“\n\n\n\né‡‡ç”¨æ–¹æ¡ˆçš„å®ç°è¿‡ç¨‹\nåŠ è½½çš®è‚¤apkè·å–é‡Œé¢çš„èµ„æºï¼ˆä¸ºäº†å¾—åˆ°çš®è‚¤apk  Resourceså¯¹è±¡ï¼‰\nä¸‹é¢æ‰€æœ‰çš„ä»£ç ä½ç½®ï¼ŒåŒ…æ‹¬å¤„ç†ä¸€äº›ç‰¹æ®Šé—®é¢˜çš„æ–¹æ¡ˆç­‰ç­‰ï¼\n\nhttps://github.com/xujiaji/ThemeSkinning\n\né€šè¿‡çš®è‚¤apkçš„å…¨è·¯å¾„ï¼Œå¯çŸ¥é“å…¶åŒ…åï¼ˆéœ€è¦ç”¨åŒ…åæ¥è·å–å®ƒçš„èµ„æºidï¼‰\n\n\nskinPkgPathæ˜¯apkçš„å…¨è·¯å¾„ï¼Œé€šè¿‡mInfo.packageNameå°±å¯ä»¥å¾—åˆ°åŒ…å\nä»£ç ä½ç½®ï¼šSkinManager.java\n\n123PackageManager mPm = context.getPackageManager();PackageInfo mInfo = mPm.getPackageArchiveInfo(skinPkgPath, PackageManager.GET_ACTIVITIES);skinPackageName = mInfo.packageName;\n\né€šè¿‡åå°„æ·»åŠ è·¯å¾„å¯ä»¥åˆ›å»ºçš®è‚¤apkçš„AssetManagerå¯¹è±¡\n\n\nskinPkgPathæ˜¯apkçš„å…¨è·¯å¾„ï¼Œæ·»åŠ è·¯å¾„çš„æ–¹æ³•æ˜¯AssetManageré‡Œä¸€ä¸ªéšè—çš„æ–¹æ³•é€šè¿‡åå°„å¯ä»¥è®¾ç½®ã€‚\næ­¤æ—¶è¿˜å¯ä»¥ç”¨assetManageræ¥è®¿é—®apké‡Œassetsç›®å½•çš„èµ„æºã€‚\næƒ³æƒ³å¦‚æœæ›´æ¢çš„èµ„æºæ˜¯æ”¾åœ¨assetsç›®å½•ä¸‹çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡ŒåŠ¨åŠ¨æ‰‹è„šã€‚123AssetManager assetManager = AssetManager.class.newInstance();Method addAssetPath = assetManager.getClass().getMethod(\"addAssetPath\", String.class);addAssetPath.invoke(assetManager, skinPkgPath);\n\n\n\nåˆ›å»ºçš®è‚¤apkçš„èµ„æºå¯¹è±¡\n\n\nè·å–å½“å‰çš„appçš„Resourcesï¼Œä¸»è¦æ˜¯ä¸ºäº†åˆ›å»ºapkçš„Resources12Resources superRes = context.getResources();Resources skinResource = new Resources(assetManager, superRes.getDisplayMetrics(), superRes.getConfiguration());\n\n\n\nå½“è¦é€šè¿‡èµ„æºidè·å–é¢œè‰²çš„æ—¶å€™\n\n\nå…ˆè·å–å†…ç½®çš„é¢œè‰²int originColor = ContextCompat.getColor(context, resId);\nå¦‚æœæ²¡æœ‰å¤–ç½®çš®è‚¤apkèµ„æºæˆ–å°±ç”¨é»˜è®¤èµ„æºçš„æƒ…å†µä¸‹ç›´æ¥è¿”å›å†…ç½®é¢œè‰²\né€šè¿‡ context.getResources().getResourceEntryName(resId);è·å–èµ„æºidè·å–å®ƒçš„åå­—\né€šè¿‡mResources.getIdentifier(resName, &quot;color&quot;, skinPackageName)å¾—åˆ°çš®è‚¤apkä¸­è¯¥èµ„æºidã€‚ï¼ˆresNameï¼šå°±æ˜¯èµ„æºåå­—ï¼›skinPackegeNameå°±æ˜¯çš®è‚¤apkçš„åŒ…åï¼‰\nå¦‚æœæ²¡æœ‰è·å–åˆ°çš®è‚¤apkä¸­èµ„æºidï¼ˆä¹Ÿå°±æ˜¯ç­‰äº0ï¼‰è¿”å›åŸæ¥çš„é¢œè‰²ï¼Œå¦åˆ™è¿”å›mResources.getColor(trueResId)\n\né€šè¿‡getIdentifieræ–¹æ³•å¯ä»¥é€šè¿‡åå­—æ¥è·å–idï¼Œæ¯”å¦‚å°†ç¬¬äºŒä¸ªå‚æ•°ä¿®æ”¹ä¸ºlayoutã€mipmapã€drawableæˆ–stringå°±æ˜¯é€šè¿‡èµ„æºåå­—è·å–å¯¹åº”layoutç›®å½•ã€mipmapç›®å½•ã€drawableç›®å½•æˆ–stringæ–‡ä»¶é‡Œçš„èµ„æºid\n1234567891011121314151617public int getColor(int resId) &#123;    int originColor = ContextCompat.getColor(context, resId);    if (mResources == null || isDefaultSkin) &#123;        return originColor;    &#125;    String resName = context.getResources().getResourceEntryName(resId);    int trueResId = mResources.getIdentifier(resName, \"color\", skinPackageName);    int trueColor;    if (trueResId == 0) &#123;        trueColor = originColor;    &#125; else &#123;        trueColor = mResources.getColor(trueResId);    &#125;    return trueColor;&#125;\n\nå½“è¦é€šè¿‡èµ„æºidè·å–å›¾ç‰‡çš„æ—¶å€™\n\n\nå’Œä¸Šé¢è·å–é¢œè‰²æ˜¯å·®ä¸å¤šçš„\nåªæ˜¯åœ¨å›¾ç‰‡åœ¨drawableç›®å½•è¿˜æ˜¯mipmapç›®å½•è¿›è¡Œäº†åˆ¤æ–­\n\n12345678910111213141516171819202122public Drawable getDrawable(int resId) &#123;    Drawable originDrawable = ContextCompat.getDrawable(context, resId);    if (mResources == null || isDefaultSkin) &#123;        return originDrawable;    &#125;    String resName = context.getResources().getResourceEntryName(resId);    int trueResId = mResources.getIdentifier(resName, \"drawable\", skinPackageName);    Drawable trueDrawable;    if (trueResId == 0) &#123;        trueResId = mResources.getIdentifier(resName, \"mipmap\", skinPackageName);    &#125;    if (trueResId == 0) &#123;        trueDrawable = originDrawable;    &#125; else &#123;        if (android.os.Build.VERSION.SDK_INT &lt; 22) &#123;            trueDrawable = mResources.getDrawable(trueResId);        &#125; else &#123;            trueDrawable = mResources.getDrawable(trueResId, null);        &#125;    &#125;    return trueDrawable;&#125;\nå¯¹æ‰€æœ‰viewè¿›è¡Œæ‹¦æˆªå¤„ç†\nè‡ªå·±å®ç°LayoutInflater.Factory2æ¥å£æ¥æ›¿æ¢ç³»ç»Ÿé»˜è®¤çš„\n\n\né‚£ä¹ˆå¦‚ä½•æ›¿æ¢å‘¢ï¼Ÿ\n\n\nå°±è¿™æ ·é€šè¿‡åœ¨Activityæ–¹æ³•ä¸­super.onCreateä¹‹å‰è°ƒç”¨\nä»£ç ä½ç½®ï¼šSkinBaseActivity.java\n\n123456@Overrideprotected void onCreate(Bundle savedInstanceState) &#123;    mSkinInflaterFactory = new SkinInflaterFactory(this);//è‡ªå®šä¹‰çš„Factory    LayoutInflaterCompat.setFactory2(getLayoutInflater(), mSkinInflaterFactory);    super.onCreate(savedInstanceState);&#125;\n\næˆ‘ä»¬ä½¿ç”¨çš„Activityä¸€èˆ¬æ˜¯AppCompatActivityåœ¨é‡Œé¢çš„onCreateæ–¹æ³•ä¸­ä¹Ÿæœ‰å¯¹å…¶çš„è®¾ç½®å’Œåˆå§‹åŒ–ï¼Œä½†æ˜¯setFactoryæ–¹æ³•åªèƒ½è¢«è°ƒç”¨ä¸€æ¬¡ï¼Œå¯¼è‡´é»˜è®¤çš„ä¸€äº›åˆå§‹åŒ–æ“ä½œæ²¡æœ‰è¢«è°ƒç”¨ï¼Œè¿™ä¹ˆæ“ä½œï¼Ÿ\n\n\nè¿™æ˜¯å®ç°äº†LayoutInflater.Factory2æ¥å£çš„ç±»ï¼Œçœ‹onCreateViewæ–¹æ³•ä¸­ã€‚åœ¨è¿›è¡Œå…¶ä»–æ“ä½œå‰è°ƒç”¨delegate.createView(parent, name, context, attrs)å¤„ç†ç³»ç»Ÿçš„é‚£ä¸€å¥—é€»è¾‘ã€‚\nattrs.getAttributeBooleanValueè·å–å½“å‰viewæ˜¯å¦æ˜¯å¯æ¢è‚¤çš„ï¼Œç¬¬ä¸€ä¸ªå‚æ•°æ˜¯xmlåå­—ç©ºé—´ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯å±æ€§åï¼Œç¬¬ä¸‰ä¸ªå‚æ•°æ˜¯é»˜è®¤å€¼ã€‚è¿™é‡Œç›¸å½“äºæ˜¯attrs.getAttributeBooleanValue(&quot;http://schemas.android.com/android/skin&quot;, &quot;enable&quot;, false)\nä»£ç ä½ç½®ï¼šSkinInflaterFactory.java\n\n12345678910111213141516171819202122232425262728293031323334public class SkinInflaterFactory implements LayoutInflater.Factory2 &#123;    private AppCompatActivity mAppCompatActivity;    public SkinInflaterFactory(AppCompatActivity appCompatActivity) &#123;        this.mAppCompatActivity = appCompatActivity;    &#125;    @Override    public View onCreateView(String s, Context context, AttributeSet attributeSet) &#123;        return null;    &#125;    @Override    public View onCreateView(View parent, String name, Context context, AttributeSet attrs) &#123;        boolean isSkinEnable = attrs.getAttributeBooleanValue(SkinConfig.NAMESPACE, SkinConfig.ATTR_SKIN_ENABLE, false);//æ˜¯å¦æ˜¯å¯æ¢è‚¤çš„view        AppCompatDelegate delegate = mAppCompatActivity.getDelegate();        View view = delegate.createView(parent, name, context, attrs);//å¤„ç†ç³»ç»Ÿé€»è¾‘        if (view instanceof TextView &amp;&amp; SkinConfig.isCanChangeFont()) &#123;            TextViewRepository.add(mAppCompatActivity, (TextView) view);        &#125;        if (isSkinEnable || SkinConfig.isGlobalSkinApply()) &#123;            if (view == null) &#123;                view = ViewProducer.createViewFromTag(context, name, attrs);            &#125;            if (view == null) &#123;                return null;            &#125;            parseSkinAttr(context, attrs, view);        &#125;        return view;    &#125;&#125;\n\nå½“å†…éƒ¨çš„åˆå§‹åŒ–æ“ä½œå®Œæˆåï¼Œå¦‚æœåˆ¤æ–­æ²¡æœ‰åˆ›å»ºå¥½viewï¼Œåˆ™éœ€è¦æˆ‘ä»¬è‡ªå·±å»åˆ›å»ºview\n\n\nçœ‹ä¸Šä¸€æ­¥æ˜¯é€šè¿‡ViewProducer.createViewFromTag(context, name, attrs)æ¥åˆ›å»º\né‚£ä¹ˆç›´æ¥æ¥çœ‹ä¸€ä¸‹è¿™ä¸ªç±»ViewProducerï¼ŒåŸç†åŠŸèƒ½è¯·çœ‹ä»£ç æ³¨é‡Š\nåœ¨AppCompatViewInflaterä¸­ä½ å¯ä»¥çœ‹åˆ°ç›¸åŒçš„ä»£ç \nä»£ç ä½ç½®ï¼šViewProducer.java\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354555657585960616263646566676869707172class ViewProducer &#123;    //è¯¥å¤„å®šä¹‰çš„æ˜¯viewæ„é€ æ–¹æ³•çš„å‚æ•°ï¼Œä¹Ÿå°±æ˜¯Viewä¸¤ä¸ªå‚æ•°çš„æ„é€ æ–¹æ³•ï¼špublic View(Context context, AttributeSet attrs)    private static final Object[] mConstructorArgs = new Object[2];    //å­˜æ”¾åå°„å¾—åˆ°çš„æ„é€ å™¨    private static final Map&lt;String, Constructor&lt;? extends View&gt;&gt; sConstructorMap            = new ArrayMap&lt;&gt;();    //è¿™æ˜¯Viewä¸¤ä¸ªå‚æ•°çš„æ„é€ å™¨æ‰€å¯¹åº”çš„ä¸¤ä¸ªå‚æ•°    private static final Class&lt;?&gt;[] sConstructorSignature = new Class[]&#123;            Context.class, AttributeSet.class&#125;;    //å¦‚æœæ˜¯ç³»ç»Ÿçš„Viewæˆ–ViewGroupåœ¨xmlä¸­å¹¶ä¸æ˜¯å…¨è·¯å¾„çš„ï¼Œé€šè¿‡åå°„æ¥å®ä¾‹åŒ–æ˜¯éœ€è¦å…¨è·¯å¾„çš„ï¼Œè¿™é‡Œåˆ—å‡ºæ¥å®ƒä»¬å¯èƒ½å‡ºç°çš„ä½ç½®    private static final String[] sClassPrefixList = &#123;            \"android.widget.\",            \"android.view.\",            \"android.webkit.\"    &#125;;    static View createViewFromTag(Context context, String name, AttributeSet attrs) &#123;        if (name.equals(\"view\")) &#123;//å¦‚æœæ˜¯viewæ ‡ç­¾ï¼Œåˆ™è·å–é‡Œé¢çš„classå±æ€§ï¼ˆè¯¥Viewçš„å…¨åï¼‰            name = attrs.getAttributeValue(null, \"class\");        &#125;        try &#123;            //éœ€è¦ä¼ å…¥æ„é€ å™¨çš„ä¸¤ä¸ªå‚æ•°çš„å€¼            mConstructorArgs[0] = context;            mConstructorArgs[1] = attrs;            if (-1 == name.indexOf('.')) &#123;//å¦‚æœä¸åŒ…å«å°ç‚¹ï¼Œåˆ™æ˜¯å†…éƒ¨View                for (int i = 0; i &lt; sClassPrefixList.length; i++) &#123;//ç”±äºä¸çŸ¥é“Viewå…·ä½“åœ¨å“ªä¸ªè·¯å¾„ï¼Œæ‰€ä»¥é€šè¿‡å¾ªç¯æ‰€æœ‰è·¯å¾„ï¼Œç›´åˆ°èƒ½å®ä¾‹åŒ–æˆ–ç»“æŸ                    final View view = createView(context, name, sClassPrefixList[i]);                    if (view != null) &#123;                        return view;                    &#125;                &#125;                return null;            &#125; else &#123;//å¦åˆ™å°±æ˜¯è‡ªå®šä¹‰View                return createView(context, name, null);            &#125;        &#125; catch (Exception e) &#123;            //å¦‚æœæŠ›å‡ºå¼‚å¸¸ï¼Œåˆ™è¿”å›nullï¼Œè®©LayoutInflaterè‡ªå·±å»å®ä¾‹åŒ–            return null;        &#125; finally &#123;            // æ¸…ç©ºå½“å‰æ•°æ®ï¼Œé¿å…å’Œä¸‹æ¬¡æ•°æ®æ··åœ¨ä¸€èµ·            mConstructorArgs[0] = null;            mConstructorArgs[1] = null;        &#125;    &#125;    private static View createView(Context context, String name, String prefix)            throws ClassNotFoundException, InflateException &#123;        //å…ˆä»ç¼“å­˜ä¸­è·å–å½“å‰ç±»çš„æ„é€ å™¨        Constructor&lt;? extends View&gt; constructor = sConstructorMap.get(name);        try &#123;            if (constructor == null) &#123;                // å¦‚æœç¼“å­˜ä¸­æ²¡æœ‰åˆ›å»ºè¿‡ï¼Œåˆ™å°è¯•å»åˆ›å»ºè¿™ä¸ªæ„é€ å™¨ã€‚é€šè¿‡ç±»åŠ è½½å™¨åŠ è½½è¿™ä¸ªç±»ï¼Œå¦‚æœæ˜¯ç³»ç»Ÿå†…éƒ¨Viewç”±äºä¸æ˜¯å…¨è·¯å¾„çš„ï¼Œåˆ™å‰é¢åŠ ä¸Š                Class&lt;? extends View&gt; clazz = context.getClassLoader().loadClass(                        prefix != null ? (prefix + name) : name).asSubclass(View.class);                //è·å–æ„é€ å™¨                constructor = clazz.getConstructor(sConstructorSignature);                //å°†æ„é€ å™¨æ”¾å…¥ç¼“å­˜                sConstructorMap.put(name, constructor);            &#125;            //è®¾ç½®ä¸ºæ— éšœç¢ï¼ˆè®¾ç½®åå³ä½¿æ˜¯ç§æœ‰æ–¹æ³•å’Œæˆå‘˜å˜é‡éƒ½å¯è®¿é—®å’Œä¿®æ”¹ï¼Œé™¤äº†finalä¿®é¥°çš„ï¼‰            constructor.setAccessible(true);            //å®ä¾‹åŒ–            return constructor.newInstance(mConstructorArgs);        &#125; catch (Exception e) &#123;            // We do not want to catch these, lets return null and let the actual LayoutInflater            // try            return null;        &#125;    &#125;&#125;\n\nå½“ç„¶è¿˜æœ‰å¦å¤–çš„æ–¹å¼æ¥åˆ›å»ºï¼Œå°±æ˜¯ç›´æ¥ç”¨LayoutInflaterå†…éƒ¨çš„é‚£ä¸€å¥—\nå°†view = ViewProducer.createViewFromTag(context, name, attrs);åˆ é™¤ï¼Œæ¢æˆä¸‹æ–¹ä»£ç ï¼š\nä»£ç ä½ç½®ï¼šSkinInflaterFactory.java\n\n123456789101112131415161718192021222324LayoutInflater inflater = mAppCompatActivity.getLayoutInflater();if (-1 == name.indexOf('.'))//å¦‚æœä¸ºç³»ç»Ÿå†…éƒ¨çš„Viewåˆ™ï¼Œé€šè¿‡å¾ªç¯è¿™å‡ ä¸ªåœ°æ–¹æ¥å®ä¾‹åŒ–Viewï¼Œé“ç†è·Ÿä¸Šé¢ViewProduceré‡Œé¢ä¸€æ ·&#123;    for (String prefix : sClassPrefixList)    &#123;        try        &#123;            view = inflater.createView(name, prefix, attrs);        &#125; catch (ClassNotFoundException e)        &#123;            e.printStackTrace();        &#125;        if (view != null) break;    &#125;&#125; else&#123;    try    &#123;        view = inflater.createView(name, null, attrs);    &#125; catch (ClassNotFoundException e)    &#123;        e.printStackTrace();    &#125;&#125;\n\nsClassPrefixListçš„å®šä¹‰\n\n12345private static final String[] sClassPrefixList = &#123;        \"android.widget.\",        \"android.view.\",        \"android.webkit.\"&#125;;\n\næœ€åæ˜¯æœ€ç»ˆçš„æ‹¦æˆªè·å–éœ€è¦æ¢è‚¤çš„Viewçš„éƒ¨åˆ†ï¼Œä¹Ÿå°±æ˜¯ä¸Šé¢SkinInflaterFactoryç±»çš„onCreateViewæœ€åè°ƒç”¨çš„parseSkinAttræ–¹æ³•\n\n\nå®šä¹‰ç±»ä¸€ä¸ªæˆå‘˜æ¥ä¿å­˜æ‰€æœ‰éœ€è¦æ¢è‚¤çš„View, SkinItemé‡Œé¢çš„é€»è¾‘å°±æ˜¯å®šä¹‰äº†è®¾ç½®æ¢è‚¤çš„æ–¹æ³•ã€‚å¦‚ï¼šViewçš„setBackgroundColoræˆ–setColorç­‰è®¾ç½®æ¢è‚¤å°±æ˜¯é å®ƒã€‚\n\n1private Map&lt;View, SkinItem&gt; mSkinItemMap = new HashMap&lt;&gt;();\n\nSkinAttr: éœ€è¦æ¢è‚¤å¤„ç†çš„xmlå±æ€§ï¼Œå¦‚ä½•å®šä¹‰è¯·å‚ç…§å®˜æ–¹æ–‡æ¡£ï¼šhttps://github.com/burgessjp/ThemeSkinning\n\n12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970717273747576777879private void parseSkinAttr(Context context, AttributeSet attrs, View view) &#123;    //ä¿å­˜éœ€è¦æ¢è‚¤å¤„ç†çš„xmlå±æ€§    List&lt;SkinAttr&gt; viewAttrs = new ArrayList&lt;&gt;();    //å˜é‡è¯¥viewçš„æ‰€æœ‰å±æ€§    for (int i = 0; i &lt; attrs.getAttributeCount(); i++) &#123;        String attrName = attrs.getAttributeName(i);//è·å–å±æ€§å        String attrValue = attrs.getAttributeValue(i);//è·å–å±æ€§å€¼        //å¦‚æœå±æ€§æ˜¯styleï¼Œä¾‹å¦‚xmlä¸­è®¾ç½®ï¼šstyle=\"@style/test_style\"        if (\"style\".equals(attrName)) &#123;            //å¯æ¢è‚¤çš„å±æ€§            int[] skinAttrs = new int[]&#123;android.R.attr.textColor, android.R.attr.background&#125;;            //ç»å¸¸åœ¨è‡ªå®šä¹‰Viewæ—¶ï¼Œæ„é€ æ–¹æ³•ä¸­è·å–å±æ€§å€¼çš„æ—¶å€™ä½¿ç”¨åˆ°ã€‚            //è¿™é‡Œé€šè¿‡ä¼ å…¥skinAttrsï¼ŒTypeArrayä¸­å°†ä¼šåŒ…å«è¿™ä¸¤ä¸ªå±æ€§å’Œå€¼ï¼Œå¦‚æœstyleé‡Œæ²¡æœ‰é‚£å°±æ²¡æœ‰ - -            TypedArray a = context.getTheme().obtainStyledAttributes(attrs, skinAttrs, 0, 0);            //è·å–å±æ€§å¯¹åº”èµ„æºçš„idï¼Œç¬¬ä¸€ä¸ªå‚æ•°è¿™é‡Œå¯¹åº”ä¸‹æ ‡çš„å°±æ˜¯ä¸Šé¢skinAttrsæ•°ç»„é‡Œå®šä¹‰çš„ä¸‹æ ‡ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ²¡æœ‰è·å–åˆ°çš„é»˜è®¤å€¼            int textColorId = a.getResourceId(0, -1);            int backgroundId = a.getResourceId(1, -1);            if (textColorId != -1) &#123;//å¦‚æœæœ‰é¢œè‰²å±æ€§                //&lt;style name=\"test_style\"&gt;                    //&lt;item name=\"android:textColor\"&gt;@color/colorAccent&lt;/item&gt;                    //&lt;item name=\"android:background\"&gt;@color/colorPrimary&lt;/item&gt;                //&lt;/style&gt;                //ä»¥ä¸Šè¾¹çš„å‚ç…§æ¥çœ‹                //entryNameå°±æ˜¯colorAccent                String entryName = context.getResources().getResourceEntryName(textColorId);                //typeNameå°±æ˜¯color                String typeName = context.getResources().getResourceTypeName(textColorId);                //åˆ›å»ºä¸€æ¢è‚¤å±æ€§å®åŠ›ç±»æ¥ä¿å­˜è¿™äº›ä¿¡æ¯                SkinAttr skinAttr = AttrFactory.get(\"textColor\", textColorId, entryName, typeName);                if (skinAttr != null) &#123;                    viewAttrs.add(skinAttr);                &#125;            &#125;            if (backgroundId != -1) &#123;//å¦‚æœæœ‰èƒŒæ™¯å±æ€§                String entryName = context.getResources().getResourceEntryName(backgroundId);                String typeName = context.getResources().getResourceTypeName(backgroundId);                SkinAttr skinAttr = AttrFactory.get(\"background\", backgroundId, entryName, typeName);                if (skinAttr != null) &#123;                    viewAttrs.add(skinAttr);                &#125;            &#125;            a.recycle();            continue;        &#125;        //åˆ¤æ–­æ˜¯å¦æ˜¯æ”¯æŒçš„å±æ€§ï¼Œå¹¶ä¸”å€¼æ˜¯å¼•ç”¨çš„ï¼Œå¦‚ï¼š@color/red        if (AttrFactory.isSupportedAttr(attrName) &amp;&amp; attrValue.startsWith(\"@\")) &#123;            try &#123;                //å»æ‰å±æ€§å€¼å‰é¢çš„â€œ@â€åˆ™ä¸ºid                int id = Integer.parseInt(attrValue.substring(1));                if (id == 0) &#123;                    continue;                &#125;                //èµ„æºåå­—ï¼Œå¦‚:text_color_selector                String entryName = context.getResources().getResourceEntryName(id);                //èµ„æºç±»å‹ï¼Œå¦‚:colorã€drawable                String typeName = context.getResources().getResourceTypeName(id);                SkinAttr mSkinAttr = AttrFactory.get(attrName, id, entryName, typeName);                if (mSkinAttr != null) &#123;                    viewAttrs.add(mSkinAttr);                &#125;            &#125; catch (NumberFormatException e) &#123;                SkinL.e(TAG, e.toString());            &#125;        &#125;    &#125;    //æ˜¯å¦æœ‰éœ€è¦æ¢è‚¤çš„å±æ€§ï¼Ÿ    if (!SkinListUtils.isEmpty(viewAttrs)) &#123;        SkinItem skinItem = new SkinItem();        skinItem.view = view;        skinItem.attrs = viewAttrs;        mSkinItemMap.put(skinItem.view, skinItem);        //æ˜¯å¦æ¢è‚¤        if (SkinManager.getInstance().isExternalSkin() ||                SkinManager.getInstance().isNightMode()) &#123;//å¦‚æœå½“å‰çš®è‚¤æ¥è‡ªäºå¤–éƒ¨æˆ–è€…æ˜¯å¤„äºå¤œé—´æ¨¡å¼            skinItem.apply();//åº”ç”¨äºè¿™ä¸ªview        &#125;    &#125;&#125;\né‡‡ç”¨æ–¹æ¡ˆçš„æ³¨æ„äº‹é¡¹å’Œç–‘é—®\nå¯èƒ½ç³»ç»Ÿä¼šæ›´æ”¹ç›¸å…³æ–¹æ³•ï¼Œä½†å¥½å¤„å¤§äºå¼Šç«¯\næ’ä»¶åŒ–ä¹Ÿæ˜¯å¤–ç½®apkæ¥åŠ è½½ï¼Œå¦‚ä½•åšåˆ°å‘¢ï¼Ÿ\nå æ—¶ä¸å»ç ”ç©¶\n\n\nçš®è‚¤ä»ç½‘ç»œä¸Šä¸‹è½½åˆ°å“ªä¸ªç›®å½•ï¼Ÿå¦‚ä½•æ–­å®šçš®è‚¤å·²ç»ä¸‹è½½ï¼Ÿ\nå¯ä»¥é€šè¿‡SkinFileUtilså·¥å…·ç±»è°ƒç”¨getSkinDiræ–¹æ³•è·å–çš®è‚¤çš„ç¼“å­˜ç›®å½•\nä¸‹è½½çš„æ—¶å€™å¯ä»¥ç›´æ¥ä¸‹è½½åˆ°è¿™ä¸ªç›®å½•\næœ‰æ²¡æœ‰æŸä¸ªçš®è‚¤å°±åˆ¤æ–­è¯¥æ–‡ä»¶å¤¹ä¸‹æœ‰æ²¡æœ‰è¿™ä¸ªæ–‡ä»¶äº†\n\n\nå¦‚ä½•ä¸æ‰“åŒ…ä¹‹å‰å¯ä»¥ç›´æ¥é¢„è§ˆï¼Ÿ\næƒ³è¦èƒ½åœ¨æ‰“åŒ…å‰æå‰é¢„è§ˆæ•ˆæœï¼Œè€Œä¸æ¯æ¬¡æƒ³çœ‹ä¸€çœ‹æ•ˆæœå°±è¦æ‰“ä¸€ä¸ªapkåŒ…\né¦–å…ˆï¼Œå¤§å®¶éƒ½åº”è¯¥çŸ¥é“åˆ†æ¸ é“çš„æ¦‚å¿µã€‚é€šè¿‡åˆ†æ¸ é“æ‰“åŒ…ï¼Œå› ä¸ºæˆ‘ä»¬èƒ½æŠŠèµ„æºä¹Ÿåˆ†æˆä¸åŒæ¸ é“çš„ï¼Œè¿è¡Œä¸åŒæ¸ é“ï¼Œæ‰€å¾—åˆ°çš„èµ„æºæ˜¯ä¸ä¸€æ ·çš„ã€‚\nç„¶åï¼Œæˆ‘ä»¬åœ¨:é¡¹ç›®ç›®å½•\\app\\srcï¼Œåˆ›å»ºä¸€ä¸ªå’Œæ¸ é“ç›¸åŒåå­—çš„ç›®å½•ã€‚æ¯”å¦‚è¯´æœ‰ä¸ªredæ¸ é“ã€‚ \næœ€åï¼Œæˆ‘ä»¬é€‰ç¼–è¯‘çš„æ¸ é“ä¸ºredï¼Œç„¶åç›´æ¥è¿è¡Œå°±å¯ä»¥çœ‹åˆ°æ•ˆæœäº†ã€‚å¦‚æœå¯ä»¥ç›´æ¥æŠŠresæ‹·è´åˆ°çš®è‚¤é¡¹ç›®æ‰“åŒ…å°±è¡Œäº†ã€‚\n\n\næ¢è‚¤å¯¹åº”çš„å±æ€§éœ€è¦æ˜¯Viewæä¾›äº†setæ–¹æ³•çš„çš„å±æ€§ï¼\nå¦‚æœæ²¡æœ‰æä¾›åˆ™ä¸èƒ½åœ¨javaä»£ç ä¸­è®¾ç½®å€¼\nå¦‚æœæ˜¯è‡ªå®šä¹‰Viewé‚£ä¹ˆå°±æ·»åŠ å¯¹åº”æ–¹æ³•\nå¦‚æœæ˜¯ç³»ç»Ÿæˆ–ç±»åº“Viewï¼Œé¢(âŠ™oâŠ™)â€¦\n\n\næ¢è‚¤çš„å±æ€§å€¼éœ€è¦æ˜¯@å¼€å¤´çš„æ•°æ®å¼•ç”¨ï¼Œå¦‚ï¼š@color/red\nåŸå› æ˜¯å› ä¸ºå›ºå®šçš„å€¼ä¸€èˆ¬ä¸å¯èƒ½æ˜¯éœ€è¦æ¢è‚¤çš„å±æ€§ï¼Œåœ¨SkinInfaterFactoryçš„æ–¹æ³•parseSkinAtträ¸­æœ‰è¿™æ ·ä¸€å¥æ¥è¿›è¡Œè¿‡æ»¤æ²¡æœ‰å¸¦@çš„å±æ€§å€¼ï¼š\nä½†æ­¤æ—¶ï¼Œæ­£å¥½æœ‰ä¸€ä¸ªè‡ªå®šä¹‰Viewæ²¡æœ‰æŒ‰ç…§å¸¸è·¯å‡ºç‰Œï¼Œå®ƒçš„å€¼å°±æ˜¯å›¾ç‰‡åå­—æ²¡æœ‰ç±»å‹æ²¡æœ‰å¼•ç”¨ï¼Œé€šè¿‡javaä»£ç context.getResources().getIdentifier(name, &quot;mipmap&quot;, context.getPackageName())æ¥è·å–å›¾ç‰‡èµ„æºï¼ˆå‚è€ƒè¿™å¥‡è‘©æ–¹å¼çš„åº“ï¼‰ã€‚ä½†ç”±äºè¿™ä¸ªå±æ€§æ˜¯éœ€è¦æ¢è‚¤æ›´æ¢çš„å±æ€§ï¼Œäºæ˜¯æ²¡åŠæ³•ï¼Œä¸“é—¨ä¸ºè¿™ä¸¤ä¸ªå±æ€§åœ¨SkinInfaterFactoryçš„parseSkinAttræ–¹æ³•ä¸­å†™äº†ä¸ªåˆ¤æ–­ã€‚å‚è€ƒè¿™ä»£ç \n\n\n\nå…¶ä»–å‚è€ƒ\nAndroidä¸»é¢˜æ¢è‚¤ æ— ç¼åˆ‡æ¢ (ä¸»è¦å‚è€ƒå¯¹è±¡ï¼Œç”¨çš„ä¹Ÿæ˜¯ä»–ä¿®æ”¹Android-Skin-Loaderåçš„æ¡†æ¶ThemeSkinningï¼‰\nAndroidæ¢è‚¤æŠ€æœ¯æ€»ç»“\nAndroid apkåŠ¨æ€åŠ è½½æœºåˆ¶çš„ç ”ç©¶\n\næ¶‰åŠåŠå…¶å»¶ç”Ÿ\næ’ä»¶åŒ–å¼€å‘ï¼Œæ—¢ç„¶èƒ½è¿™æ ·è·å–èµ„æºï¼Œä¹Ÿèƒ½è·å–classæ–‡ä»¶\né€šè¿‡å¯¹viewçš„æ‹¦æˆªå¯ä»¥æŠŠæŸä¸ªæ§ä»¶æ•´ä½“æ›¿æ¢æ‰ã€‚æ¯”å¦‚AppCompatActivityå°†TextViewå·å·æ›¿æ¢æˆäº†AppCompatTextViewç­‰ç­‰ã€‚\n\n\n\nå…¶ä»–ä¸€äº›å¸®åŠ©ä¿¡æ¯ï¼š\n\nä¸Šé¢å¯¹åº”çš„ä»£ç ç‰‡æ®µéƒ½æœ‰å¯¹åº”è·¯å¾„å“¦ï¼\nè¿™ç¯‡æ–‡ç« çš„å…¨éƒ¨ä»£ç ï¼Œæµ‹è¯•é¡¹ç›®ä½ç½®ï¼šhttps://github.com/xujiaji/ThemeSkinning\næµ‹è¯•é¡¹ç›®ä¸­çš„é¦–é¡µåº•éƒ¨å¯¼èˆªæµ‹è¯•å’Œä¿®æ”¹ä½ç½®ï¼šhttps://github.com/xujiaji/FlycoTabLayout\nä¸‹é¢è¿™å¼ Gifå›¾ç‰‡æ˜¯æµ‹è¯•é¡¹ç›®è¿è¡Œçš„æ•ˆæœå›¾ï¼š\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/android-skin/skin_home.jpg","plink":"https://blog.xujiaji.com/post/android-skin/"},{"title":"Androidå¼€å‘-é›¶ç¢ç¬”è®°","date":"2018-01-24T09:03:41.000Z","author":"xujiaji","updated":"2019-04-08T06:55:02.961Z","content":"å‚ç›´RecyclerViewåµŒå¥—å‚ç›´RecyclerViewæ»‘åŠ¨æ—¶å‡ºç°çš„å¡é¡¿åŸå› ï¼šå†…éƒ¨RecyclerViewé‡å¤è®¾ç½®é€‚é…å™¨å¯¼è‡´çš„å¡é¡¿\nè§£å†³ï¼šåˆ¤æ–­å†…éƒ¨RecyclerViewæ˜¯å¦è®¾ç½®è¿‡é€‚é…å™¨ï¼Œå¦‚æœæ²¡æœ‰æ‰è®¾ç½®\n12345678910//å†…éƒ¨RecyclerViewçš„è·å–å’Œå¤„ç†é—®é¢˜çš„ä»£ç RecyclerView rvItem = helper.getView(R.id.rvItem);rvItem.setNestedScrollingEnabled(false);if(rvItem.getAdapter() == null)&#123;    LinearLayoutManager layoutManager = new LinearLayoutManager(mContext);    layoutManager.setAutoMeasureEnabled(true);    rvItem.setLayoutManager(layoutManager);    rvItem.setAdapter(new OrderItemAdapter(item.getList()));&#125;\nScrollViewåµŒå¥—RecyclerViewæ»‘åŠ¨æ»‘åŠ¨èµ·æ¥å¾ˆåƒåŠ›1recyclerView.setNestedScrollingEnabled(false);\nRecyclerViewåµŒå¥—RecyclerViewæ—¶ï¼Œåˆ·æ–°å†…éƒ¨RecyclerViewä¼šè·³åŠ¨åŸå› ï¼šå†…éƒ¨RecyclerViewæŠ¢å äº†ç„¦ç‚¹\nè§£å†³ï¼šå°†å†…éƒ¨RecyclerViewçš„ç„¦ç‚¹è®¾ç½®ä¸ºfalse1recyclerView.setFocusableInTouchMode(false);\nadbä¹‹Wifiè¿æ¥æ‰‹æœº\næŸ¥çœ‹å½“å‰è®¾å¤‡adb devices\n\n123$ adb devices7d1cbcbb\tdevice192.168.56.101:5555\tdevice\n\nè®©adbé‡æ–°å¯åŠ¨ï¼Œå¹¶ç›‘å¬ç«¯å£5555adb -s è®¾å¤‡å tcpip 5555\n\n12$ adb -s 7d1cbcbb tcpip 5555restarting in TCP mode port: 5555\n\nè¿æ¥adb connect ipåœ°å€:ç«¯å£ï¼Œåœ¨æ‰‹æœºä¸ŠæŸ¥çœ‹è¿æ¥çš„wifiåœ°å€ï¼ŒWiFiéœ€è¦å’Œç”µè„‘ç½‘ç»œåŒç½‘æ®µ\n\n12$ adb connect 192.168.2.207:5555connected to 192.168.2.207:5555\nç©ºåŒ…ç­¾å1jarsigner -verbose -keystore [keystoreç­¾åç§˜é’¥è·¯å¾„] -signedjar [apkè¾“å‡ºè·¯å¾„] [apkè¾“å…¥è·¯å¾„ï¼ˆéœ€è¦ç­¾åçš„ç©ºåŒ…ï¼‰] [ç­¾åç§˜é’¥åˆ«å]\nè·å–ç­¾åsha11keytool -list -v -keystore [ç­¾åè·¯å¾„]\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/android-notes/banner.png","plink":"https://blog.xujiaji.com/post/android-notes/"},{"title":"HappyBubble-æ°”æ³¡å¯¹è¯æ¡†ï¼ˆæ ¹æ®è¢«ç‚¹å‡»Viewä½ç½®æ˜¾ç¤ºã€å¯å®šåˆ¶ï¼‰","date":"2017-12-16T06:08:50.000Z","author":"xujiaji","updated":"2019-07-24T09:09:43.109Z","content":"\n\n\n\n\n\n\n\n\nHappyBubbleGithub\næ°”æ³¡å¸ƒå±€çš„å½¢çŠ¶å¯ä»¥æ”¹å˜ï¼Œå¦‚å››è§’å¼§åº¦ã€æ°”æ³¡é¢œè‰²ã€ç®­å¤´å¤§å°å’Œé˜´å½±ã€‚\næ°”æ³¡Dialogå¯ä»¥æ ¹æ®è¢«ç‚¹å‡»çš„viewçš„ä½ç½®æ¥ç¡®å®šè‡ªå·±å±•ç¤ºçš„ä½ç½®ã€‚\næ—§æ–‡æ¡£\næ›´æ–°\n1.1.8: ä¿®å¤å½“è®¾ç½®é€æ˜èƒŒæ™¯æ—¶ï¼ŒçŠ¶æ€æ æ–‡å­—é¢œè‰²å¯èƒ½å˜ç™½è‰²é—®é¢˜\n1.1.7: ä¿®å¤ä½ç½®é—®é¢˜ï¼Œä¿®å¤autoPositionæ— æ•ˆé—®é¢˜ï¼Œä¿®å¤æ¨ªå±æ¨¡å¼é—®é¢˜ã€‚#13#11#10\n1.1.6:æ–°å¢æ–¹å‘ä¼˜å…ˆçº§:issues/9\n1.1.5:ä¿®å¤:issues/8\n1.1.4ï¼šâ‘ æ–°å¢æ–¹æ³•setLayout(int width, int height, int margin)ï¼Œwidthï¼ˆè®¾ç½®æ°”æ³¡çš„å®½ï¼‰ã€heightï¼ˆè®¾ç½®æ°”æ³¡çš„é«˜ï¼‰ã€marginï¼ˆè®¾ç½®è·ç¦»å±å¹•è¾¹ç¼˜çš„é—´è·,åªæœ‰å½“è®¾ç½®widthæˆ–heightä¸ºMATCH_PARENTæ‰æœ‰æ•ˆï¼‰ã€‚â‘¡autoPosition(true)æ–¹æ³•å‡†å¤‡å¼ƒç”¨ï¼ˆç°åœ¨è¿˜å¯ä»¥ç”¨ï¼‰ï¼Œä½¿ç”¨æ–°æ–¹æ³•autoPosition(Auto),å¦‚æœä¸¤ä¸ªéƒ½ä½¿ç”¨äº†ä¼šç›´æ¥ç”¨autoPosition(Auto)ã€‚è¯·å‚è€ƒä¸‹æ–¹â€œæ–¹æ³•å‚è€ƒè¡¨â€ã€‚â‘¢æ„Ÿè°¢@wolf8088521æä¾›å»ºè®®#4\n1.1.3ï¼šâ‘ é€šè¿‡é‡æ–°è°ƒç”¨setClickedViewå¯ä»¥ç›´æ¥æ›´æ–°å½“å‰dialogçš„æ‰€åœ¨ä½ç½®ã€‚â‘¡æ–°æ·»åŠ setRelativeOffset(int)æ–¹æ³•ï¼Œè®¾ç½®dialogç›¸å¯¹ä¸è¢«ç‚¹å‡»Viewçš„åç§»ï¼ˆè´Ÿå€¼ï¼šå‘è¢«ç‚¹å‡»viewçš„ä¸­å¿ƒåç§»ï¼›æ­£å€¼ï¼šå‘è¢«ç‚¹å‡»viewçš„å¤–ä¾§åç§»ï¼‰â‘¢æµ‹è¯•é¡µé¢SetClickedViewTestActivity.java\n\n\n\n1.1.2ï¼šä¿®å¤é»˜è®¤å€¼æ²¡æœ‰é€‚é…å±å¹•\n\n1.1.1ï¼šä¿®å¤å¤§å°å˜åŒ–åï¼Œæ²¡æœ‰å¯¹åº”å˜åŒ–ä½ç½®çš„é—®é¢˜ï¼›ä¿®å¤æ¥è§¦é¡¶éƒ¨åä½é—®é¢˜ï¼›\n\n1.1.0ï¼šâ‘ Dialogäº¤äº’äº‹ä»¶ä¼ é€’åˆ°Activityè¾¾åˆ°ä¸åœ¨ä¸å…³é—­Dialogçš„æƒ…å†µä¸‹åšå…¶ä»–Activityçš„æ“ä½œã€‚â‘¡æ·»åŠ è‡ªåŠ¨æ ¹æ®è¢«ç‚¹å‡»Viewè·ç¦»å±å¹•è¾¹ç¼˜çš„è·ç¦»ç¡®å®šDialogçš„ä½ç½®ã€‚â‘¢æ–°å¢â€œautoPositionâ€å’Œâ€œsetThroughEventâ€æ–¹æ³•ï¼Œè¯·å‚è€ƒâ€œBubbleDialogæ–¹æ³•å‚è€ƒè¡¨â€\n\n1.0.3:ç»§ç»­ä¼˜åŒ–äº†ç‚¹å‡»åœ¨æ°”æ³¡ä¹‹å¤–æ‰ä¼šè¢«dismissï¼›ä¿®å¤äº†Dialogå‘¨å›´ä¼šæœ‰éƒ¨åˆ†ç‚¹å‡»æ— æ³•dismissï¼›\n\n1.0.2:ä¿®å¤ç‚¹å‡»dialogè¾¹ç¼˜æ— æ³•å–æ¶ˆ\n\n\nå“ªäº›appä½¿ç”¨äº†å®ƒï¼Ÿ\n\n\nç©æ¸…å•\n\n\n\n\n\n\n\n\nå¦‚ä½•å¼€å§‹ï¼Ÿåœ¨ä½ æ¨¡å—ä¸­çš„build.gradleæ·»åŠ ä¸ŠHappyBubbleä¾èµ–\n1implementation 'com.github.xujiaji:happy-bubble:1.1.7'\nå¦‚ä½•ä½¿ç”¨ HappyBubble-BubbleDialogï¼Ÿ\næ–¹æ³•å‚è€ƒè¡¨\n\n\n\n\næ–¹æ³•å\nå‚æ•°\næè¿°\n\n\n\n\naddContentView\nView\næ·»åŠ å¡«å……åœ¨æ°”æ³¡ä¸­çš„è§†å›¾\n\n\nsetClickedView\nView\nè¢«ç‚¹å‡»çš„Viewï¼ˆè§¦å‘Dialogå‡ºç°çš„Viewï¼‰\n\n\nsetPosition\nenum â€¦  BubbleDialog.Position:LEFTTOPRIGHTBOTTOM\nBubbleDialogç›¸å¯¹äºè¢«ç‚¹å‡»çš„viewçš„ä½ç½®ã€‚å¦‚æœä¼ å…¥å¤šä¸ªä½ç½®ï¼Œé‚£ä¹ˆæœ€å‰é¢çš„ä½ç½®ä¼˜å…ˆçº§è¶Šé«˜\n\n\nsetOffsetX\nint\nå¦‚æœæ‚¨å¯¹dialogæ‰€å±•ç¤ºçš„xè½´ä½ç½®ä¸æ»¡ï¼Œéœ€è¦è°ƒæ•´xè½´æ–¹å‘åç§»\n\n\nsetOffsetY\nint\nå¦‚æœæ‚¨å¯¹dialogæ‰€å±•ç¤ºçš„yè½´ä½ç½®ä¸æ»¡ï¼Œéœ€è¦è°ƒæ•´yè½´æ–¹å‘åç§»\n\n\nsetBubbleLayout\nBubbleLayout\nè‡ªå®šä¹‰dialogçš„æ°”æ³¡å¸ƒå±€\n\n\nsetTransParentBackground\n-\nèƒŒæ™¯é€æ˜\n\n\nsoftShowUp\n-\nå½“æ°”æ³¡dialogä¸­æœ‰EditTextæ—¶ï¼Œè½¯é”®ç›˜å¼¹å‡ºä¼šé®æŒ¡EditTextæ—¶ï¼Œdialogéšè½¯é”®ç›˜ä¸Šç§»ã€‚\n\n\nshow\n-\næ˜¾ç¤º\n\n\nautoPosition\nenum Auto:AROUNDUP_AND_DOWNLEFT_AND_RIGHT\nè‡ªåŠ¨ç¡®å®šä½ç½®åŠŸèƒ½ï¼Œæ˜¾ç¤ºåœ¨è¢«ç‚¹å‡»Viewè·ç¦»å±å¹•è¾¹ç¼˜çš„æœ€å¤§ç©ºé—´ã€‚å¼€å¯åï¼Œâ€œsetPositionâ€åŠŸèƒ½å¤±æ•ˆã€‚AROUNDï¼šè¢«ç‚¹å‡»Viewå››å‘¨ï¼›UP_AND_DOWNï¼šè¢«ç‚¹å‡»Viewä¸Šä¸‹æ˜¾ç¤ºï¼›LEFT_AND_RIGHTï¼šè¢«ç‚¹å‡»Viewå·¦å³æ˜¾ç¤ºï¼›\n\n\nsetThroughEvent\nboolean, boolean\nç¬¬ä¸€ä¸ªå‚æ•°isThroughEventè®¾ç½®æ˜¯å¦ç©¿é€Dialogæ‰‹åŠ¿äº¤äº’ã€‚ç¬¬äºŒä¸ªå‚æ•°cancelableç‚¹å‡»ç©ºç™½æ˜¯å¦èƒ½å–æ¶ˆDialogï¼Œåªæœ‰å½“â€isThroughEvent=falseâ€æ—¶æ‰æœ‰æ•ˆ\n\n\nsetRelativeOffset\nint\nè®¾ç½®dialogç›¸å¯¹ä¸è¢«ç‚¹å‡»Viewçš„åç§»ï¼ˆè´Ÿå€¼ï¼šå‘è¢«ç‚¹å‡»viewçš„ä¸­å¿ƒåç§»ï¼›æ­£å€¼ï¼šå‘è¢«ç‚¹å‡»viewçš„å¤–ä¾§åç§»ï¼‰ï¼Œè®¾ç½®åä¼šç›´æ¥å½±å“setOffsetXå’ŒsetOffsetYæ–¹æ³•ã€‚\n\n\nsetLayout\nintï¼Œintï¼Œint\nè®¾ç½®æ°”æ³¡çš„å®½é«˜å’Œè·ç¦»å±å¹•è¾¹ç¼˜çš„è·ç¦»ç¬¬ä¸€ä¸ªå‚æ•°ï¼šwidthï¼ˆè®¾ç½®æ°”æ³¡çš„å®½ï¼‰ï¼›ç¬¬äºŒä¸ªå‚æ•°ï¼šheightï¼ˆè®¾ç½®æ°”æ³¡çš„é«˜ï¼‰ï¼›ç¬¬ä¸‰ä¸ªå‚æ•°ï¼šmarginï¼ˆè®¾ç½®è·ç¦»å±å¹•è¾¹ç¼˜çš„é—´è·,åªæœ‰å½“è®¾ç½®widthæˆ–heightä¸ºMATCH_PARENTæ‰æœ‰æ•ˆï¼‰ã€‚å®½é«˜å•ä½ä¸ºpxæˆ–MATCH_PARENT\n\n\n\næœ€ç®€å•çš„å®ç°\n\n\n\n\n\n\n\n\n1234new BubbleDialog(this)        .addContentView(LayoutInflater.from(this).inflate(R.layout.dialog_view3, null))        .setClickedView(mButton)        .show();\nå‘ä¸‹åç§»8dp\n123456new BubbleDialog(this)        .addContentView(LayoutInflater.from(this).inflate(R.layout.dialog_view3, null))        .setClickedView(mButton4)        .setPosition(mPosition)        .setOffsetY(8)        .show();\nå½“æƒ³è¦è¾“å…¥æ¡†éšè½¯é”®ç›˜ä¸Šç§»æ—¶\n123456new BubbleDialog(this)        .addContentView(LayoutInflater.from(this).inflate(R.layout.dialog_view, null))        .setClickedView(mButton12)        .setPosition(mPosition)        .softShowUp()        .show();\nè‡ªå®šä¹‰ BubbleLayout\n123456789101112BubbleLayout bl = new BubbleLayout(this);bl.setBubbleColor(Color.YELLOW);bl.setShadowColor(Color.RED);bl.setLookLength(Util.dpToPx(this, 18));bl.setLookWidth(Util.dpToPx(this, 24));bl.setBubbleRadius(Util.dpToPx(this, 3));new BubbleDialog(this)        .addContentView(LayoutInflater.from(this).inflate(R.layout.dialog_view5, null))        .setClickedView(mButton8)        .setPosition(mPosition)        .setBubbleLayout(bl)        .show();\nè‡ªå®šä¹‰ BubbleDialogï¼Œå¯äº¤äº’çš„ BubbleDialog\n\n1ã€å¸ƒå±€\n\n12345678910111213141516171819202122232425&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"    android:layout_width=\"160dp\"    android:layout_height=\"match_parent\"    android:orientation=\"vertical\"&gt;    &lt;Button        android:id=\"@+id/button13\"        android:layout_width=\"match_parent\"        android:layout_height=\"wrap_content\"        android:text=\"Button1\" /&gt;    &lt;Button        android:id=\"@+id/button14\"        android:layout_width=\"match_parent\"        android:layout_height=\"wrap_content\"        android:text=\"Button2\" /&gt;    &lt;Button        android:id=\"@+id/button15\"        android:layout_width=\"match_parent\"        android:layout_height=\"wrap_content\"        android:text=\"Button3\" /&gt;&lt;/LinearLayout&gt;\n\n2ã€è‡ªå®šä¹‰ BubbleDialog\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748495051525354/** * è‡ªå®šä¹‰å¯æ“ä½œæ€§dialog * Created by JiajiXu on 17-12-11. */public class CustomOperateDialog extends BubbleDialog implements View.OnClickListener&#123;    private ViewHolder mViewHolder;    private OnClickCustomButtonListener mListener;    public CustomOperateDialog(Context context)    &#123;        super(context);        setTransParentBackground();        setPosition(Position.TOP);        View rootView = LayoutInflater.from(context).inflate(R.layout.dialog_view4, null);        mViewHolder = new ViewHolder(rootView);        addContentView(rootView);        mViewHolder.btn13.setOnClickListener(this);        mViewHolder.btn14.setOnClickListener(this);        mViewHolder.btn15.setOnClickListener(this);    &#125;    @Override    public void onClick(View v)    &#123;        if (mListener != null)        &#123;            mListener.onClick(((Button)v).getText().toString());        &#125;    &#125;    private static class ViewHolder    &#123;        Button btn13, btn14, btn15;        public ViewHolder(View rootView)        &#123;            btn13 = rootView.findViewById(R.id.button13);            btn14 = rootView.findViewById(R.id.button14);            btn15 = rootView.findViewById(R.id.button15);        &#125;    &#125;    public void setClickListener(OnClickCustomButtonListener l)    &#123;        this.mListener = l;    &#125;    public interface OnClickCustomButtonListener    &#123;        void onClick(String str);    &#125;&#125;\n\n3ã€æ˜¾ç¤º\n\n123456789101112CustomOperateDialog codDialog = new CustomOperateDialog(this)        .setPosition(mPosition)        .setClickedView(mButton10);codDialog.setClickListener(new CustomOperateDialog.OnClickCustomButtonListener()&#123;    @Override    public void onClick(String str)    &#123;        mButton10.setText(\"ç‚¹å‡»äº†ï¼š\" + str);    &#125;&#125;);codDialog.show();\næŸ¥çœ‹å…³äºBappyDialogçš„ä½¿ç”¨ä»£ç TestDialogActivity ä»£ç \nå†™æ³•å»ºè®®æ ¹æ®@hmè¯¥æœ‹å‹åœ¨æ–‡ç« ä¸­åé¦ˆçš„å¤šæ¬¡ç‚¹å‡»åä½ç½®ä¸å¯¹çš„é—®é¢˜ï¼Œæ˜¯ç”±äºå¤šæ¬¡å¯¹BappyDialogè¿›è¡Œäº†è®¾ç½®å¯¼è‡´ï¼Œæ‰€ä»¥å»ºè®®ä¸‹æ–¹å†™æ³•ã€‚(å½“ç„¶å¦‚æœå¯¹é‡å¤è°ƒç”¨setClickedView()æ–¹æ³•è®¾ç½®ä¸åŒçš„è¢«ç‚¹å‡»çš„æ§ä»¶æ¥æ›´æ–°ä½ç½®æœ‰éœ€è¦ï¼Œæ˜¯éœ€è¦å†™åœ¨å¤–é¢çš„ã€‚)\n123456789if(mBubbleDialog == null)&#123;    mBubbleDialog = new BubbleDialog(this)        .addContentView(LayoutInflater.from(this).inflate(R.layout.dialog_view3, null))        .setClickedView(mButton4)        .setPosition(mPosition)        .setOffsetY(8);&#125;mBubbleDialog.show();\n\nå¦‚ä½•ä½¿ç”¨ HappyBubble-BubbleLayoutï¼Ÿåœ¨XMLä»£ç ä¸­è®¾ç½®å±æ€§å€¼\nå±æ€§å‚ç…§è¡¨\n\n\n\n\nå±æ€§\nå€¼\næè¿°\n\n\n\n\nlookAt\nleft, top, right, bottom\nç®­å¤´æŒ‡å‘\n\n\nlookLength\ndimension\nç®­å¤´çš„é•¿åº¦\n\n\nlookPosition\ndimension\nç®­å¤´ç›¸å¯¹äºxæˆ–yè½´çš„ä½ç½®\n\n\nlookWidth\ndimension\nç®­å¤´çš„å®½åº¦\n\n\nbubbleColor\ncolor\næ°”æ³¡çš„é¢œè‰²\n\n\nbubbleRadius\ndimension\næ°”æ³¡å››è§’çš„åœ†å¼§\n\n\nbubblePadding\ndimension\næ°”æ³¡è¾¹ç¼˜åˆ°BubbleLayoutè¾¹ç¼˜çš„è·ç¦»\n\n\nshadowRadius\ndimension\né˜´å½±çš„æ‰©æ•£å¤§å°\n\n\nshadowX\ndimension\né˜´å½±åœ¨xè½´æ–¹å‘çš„åç§»\n\n\nshadowY\ndimension\né˜´å½±åœ¨yè½´æ–¹å‘çš„åç§»\n\n\nshadowColor\ncolor\né˜´å½±çš„é¢œè‰²\n\n\n\n\nxml ä¾‹å­\n\n12345678910&lt;com.xujiaji.happybubble.BubbleLayout    xmlns:app=\"http://schemas.android.com/apk/res-auto\"    android:id=\"@+id/bubbleLayout\"    android:layout_width=\"match_parent\"    android:layout_height=\"200dp\"    android:layout_margin=\"16dp\"    app:lookAt=\"left\"    app:lookLength=\"16dp\"    app:lookPosition=\"20dp\"    app:lookWidth=\"16dp\" /&gt;\nåœ¨javaä»£ç ä¸­å®šä¹‰å±æ€§å€¼\nBubbleLayout é€šè¿‡â€œsetå±æ€§åâ€æ–¹æ³•å’Œinvalidateæ–¹æ³•æ¥æ›´æ–°BubbleLayoutã€‚\n\n1mBubbleLayout.setLook(BubbleLayout.Look.LEFT);\n\næŸ¥çœ‹æ›´å¤š\n\nMainActivity ä»£ç \n\ndemo ä¸‹è½½\n\nLicense12345678910111213Copyright 2016 XuJiajiLicensed under the Apache License, Version 2.0 (the &quot;License&quot;);you may not use this file except in compliance with the License.You may obtain a copy of the License at    http://www.apache.org/licenses/LICENSE-2.0Unless required by applicable law or agreed to in writing, softwaredistributed under the License is distributed on an &quot;AS IS&quot; BASIS,WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.See the License for the specific language governing permissions andlimitations under the License.\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/happy-bubble/img5.png","plink":"https://blog.xujiaji.com/post/happy-bubble/"},{"title":"Androidå¼€å‘ä¸­çš„bugæ¸…å•","date":"2017-12-12T07:34:41.000Z","author":"xujiaji","updated":"2019-04-08T06:54:57.703Z","content":"Android Gradle plugin 3.0.0-alpha5 must not be applied to project\nè§£å†³åœ°å€ï¼šhttps://stackoverflow.com/questions/44857191/failed-to-apply-plugin-android-gradle-plugin-3-0-0-alpha5-must-not-be-applied-to\nåŸå› ï¼š\nè§£å†³åŠæ³•ï¼š\n\n\nåœ¨gradle.propertiesï¼š\n\n1org.gradle.configureondemand=false\n\nç„¶ååœ¨ç»ˆç«¯çª—å£ä¸­åœæ­¢å®ˆæŠ¤è¿›ç¨‹\n\n1gradlew --stop\njava.lang.IllegalStateException: Fragment already added: DialogFragment\nè§£å†³åœ°å€ï¼šhttp://blog.csdn.net/kifile/article/details/47442899\nåŸå› ï¼šç‚¹å‡»è¿‡å¿«DialogFragmentæ¶ˆæ¯é˜Ÿåˆ—è¿˜æ²¡æœ‰æ‰§è¡Œå®Œ\nè§£å†³åŠæ³•ï¼š\n\n12345getFragmentManager().executePendingTransactions();if (!mDialogFragment.isAdded())&#123;    mDialogFragment.show(getFragmentManager(), \"DialogFragment\");&#125;\njava.lang.RuntimeException: Unable to get provider\nè§£å†³åœ°å€ï¼šhttps://stackoverflow.com/questions/37312103/unable-to-get-provider-com-google-firebase-provider-firebaseinitprovider\nåŸå› ï¼šåœ¨SDK &lt;22çš„è®¾å¤‡ä¸­é‡åˆ°åŒæ ·çš„é—®é¢˜ï¼ŒåŸå› æ˜¯MultiDexï¼ŒMultiDex.installå¿…é¡»åœ¨attachBaseContextæ–¹æ³•ä¸­\nè§£å†³æ–¹æ³•è‡ªå®šä¹‰Applicationä¸­æ·»åŠ å¦‚ä¸‹ï¼š12345678public class YourApplication extends Application &#123;    @Override    protected void attachBaseContext(Context context) &#123;        super.attachBaseContext(context);        MultiDex.install(this);    &#125;&#125;\n\n\nbuild.gradleä¸­æ·»åŠ å¦‚ä¸‹ï¼š1compile &apos;com.android.support:multidex:1.0.1&apos;\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/android-bug-list.png","plink":"https://blog.xujiaji.com/post/android-bug-list/"},{"title":"linux(Ubuntu)ç¬”è®°","date":"2017-12-12T04:25:29.000Z","author":"xujiaji","updated":"2019-04-08T06:56:30.022Z","content":"æ¯æ¬¡å¼€æœºå¼¹å‡ºè½¯ä»¶å´©æºƒåé¦ˆ\nè§£å†³ï¼šåˆ é™¤å´©æºƒæ—¥å¿—\n\n1$ sudo rm /var/crash/*\næ›´æ–°è½¯ä»¶æºçš„ç´¢å¼•1$Â sudo apt-get update\nå‡çº§è½¯ä»¶1$ sudo apt-get upgrade\nä¿®å¤ä¾èµ–å…³ç³»\nå‡å¦‚ç”¨æˆ·çš„ç³»ç»Ÿä¸Šæœ‰æŸä¸ªpackageä¸æ»¡è¶³ä¾èµ–æ¡ä»¶ï¼Œè¿™ä¸ªå‘½ä»¤å°±ä¼šè‡ªåŠ¨ä¿®å¤ï¼Œå®‰è£…ç¨‹åºåŒ…æ‰€ä¾èµ–çš„åŒ…\n\n1$ sudo apt-get -f install\nåˆ›å»ºå¯åŠ¨å™¨\nå®‰è£…è½¯ä»¶\n\n1$ sudo apt install gnome-panel\n\næ‰“å¼€åˆ›å»ºå›¾æ ‡çš„ç•Œé¢ï¼Œä¸‹è¾¹çš„~/æ¡Œé¢/ä¸ºå¯åŠ¨å™¨åˆ›å»ºçš„ä½ç½®\n\n1gnome-desktop-item-edit ~/æ¡Œé¢/ --create-new\n\næœ€åæ ¹æ®æç¤ºåˆ›å»ºå›¾æ ‡\n\nå®‰è£…xmind-linux\nä¸‹è½½åœ°å€ï¼šhttps://www.xmind.cn/download/\n\nä¸‹è½½ä¸‹æ¥æ˜¯ä¸€ä¸ªå‹ç¼©åŒ…ï¼Œå°†å…¶æ”¾åˆ°~/ç›®å½•å¹¶è§£å‹ã€‚ç”±äºæˆ‘æ˜¯64ä½ç³»ç»Ÿï¼Œæ‰€ä»¥è¿›å…¥~/xmind/XMind_amd64/ç›®å½•åŒå‡»XMindè¿è¡Œè½¯ä»¶ã€‚\n\nç”±äºæˆ‘åˆ›å»ºå¯åŠ¨å™¨é‡åˆ°ä¸‹é¢çš„é”™è¯¯ï¼Œå¿…é¡»åœ¨å½“å‰ç›®å½•æ‰èƒ½è¿è¡ŒXMindï¼Œå¦åˆ™å°±æœ‰ä¸‹é¢çš„é”™è¯¯æç¤ºå¯¹è¯æ¡†å‡ºç°ã€‚\n\n1234The configuration area at '/./configuration'could not be created.Please choose a writable locationusing the '-configuration' command line option.\n\nè§£å†³ï¼šå†™ä¸€ä¸ªå‘½ä»¤è„šæ­¥ï¼Œå…ˆè·³è½¬åˆ°~/xmind/XMind_amd64/ç›®å½•å†æ‰§è¡ŒXMindè¿è¡Œè½¯ä»¶ï¼Œè„šæ­¥å¦‚ä¸‹ï¼š\n\nstart.sh\n123#!/bin/bashcd ~/xmind/XMind_amd64./XMind\n\nä¸‹é¢æ˜¯å¯åŠ¨å™¨xmind.desktop\n\n12345678910#!/usr/bin/env xdg-open[Desktop Entry]Version=1.0Type=ApplicationTerminal=falseIcon[zh_CN]=/home/soul/xmind/icon.pngName[zh_CN]=xmindExec=/home/soul/xmind/XMind_amd64/start.shName=xmindIcon=/home/soul/xmind/icon.png\næ›´æ–°hostsæ–‡ä»¶åè®©æ–‡ä»¶ç”Ÿæ•ˆ12sudo apt-get install nscdsudo /etc/init.d/nscd restart\nä½¿ç”¨Sambaè®©Linuxä¸Windowså…±äº«æ–‡ä»¶å¤¹\nå®‰è£…samba\n\n1$ sudo apt-get install samba\n\nåˆ›å»ºå…±äº«ç›®å½•\n\n12$ mkdir /home/soul/æ–‡æ¡£/ShareFiles$ sudo chmod /home/soul/æ–‡æ¡£/ShareFiles\n\nä¿®æ”¹sambaé…ç½®æ–‡ä»¶\n\næ‰“å¼€æ–‡ä»¶1$ sudo vim /etc/samba/smb.conf\næœ«å°¾æ·»åŠ å¦‚ä¸‹å†…å®¹1234567[share]     comment = my share directory     path = /home/soul/æ–‡æ¡£/ShareFiles   browseable = yes     writable = yes   public = yes   valid users = xujiaji\nxujiajiæ˜¯æˆ‘å½“å‰linuxçš„ç”¨æˆ·åï¼Œç›¸åº”æ¢æˆä½ çš„\n\nè®¾ç½®ç™»å½•å¯†ç \n\n12sudo touch /etc/samba/smbpasswdsudo smbpasswd -a xujiaji\nxujiajiæ¢æˆä¸Šä¸€æ­¥ä½ è®¾ç½®çš„ç”¨æˆ·å\n\nå¯åŠ¨sambaæœåŠ¡å™¨\n\n1$ sudo /etc/init.d/samba restart\n\nwindowsä¸­æ‰“å¼€\n\n\næ‰“å¼€windowsæ–‡ä»¶ç®¡ç†å™¨ï¼Œé¡¶éƒ¨è¾“å…¥\\\\linux ip\\share\nè´¦å·å¯†ç ä¸ºlinuxè´¦æˆ·çš„è´¦æˆ·å¯†ç \n\næ¸…ç†ç³»ç»Ÿåˆ é™¤ä¸€äº›ä¸å¿…è¦çš„èµ„æº12$ sudo apt-get autoclean$ sudo apt-get autoremove\nåˆ é™¤æ—§å†…æ ¸\næŸ¥çœ‹å½“å‰ä½¿ç”¨çš„å†…æ ¸ä¿¡æ¯ï¼šuname -a\n\n12$ uname -aLinux boomake-pc 4.10.0-42-generic #46~16.04.1-Ubuntu SMP Mon Dec 4 15:57:59 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux\n\næŸ¥çœ‹å·²å­˜åœ¨çš„å†…æ ¸ï¼šdpkg --get-selections| grep linux\n\n1234567891011121314151617181920212223242526$Â dpkg --get-selections| grep linuxconsole-setup-linux\t\t\t\tinstalllibselinux1:amd64\t\t\t\tinstalllibselinux1:i386\t\t\t\tinstalllinux-base\t\t\t\t\tinstalllinux-firmware\t\t\t\t\tinstalllinux-generic-hwe-16.04\t\t\t\tinstalllinux-headers-4.10.0-40\t\t\t\tinstalllinux-headers-4.10.0-40-generic\t\t\tinstalllinux-headers-4.10.0-42\t\t\t\tinstalllinux-headers-4.10.0-42-generic\t\t\tinstalllinux-headers-generic-hwe-16.04\t\t\tinstalllinux-image-4.10.0-40-generic\t\t\tinstalllinux-image-4.10.0-42-generic\t\t\tinstalllinux-image-extra-4.10.0-40-generic\t\tinstalllinux-image-extra-4.10.0-42-generic\t\tinstalllinux-image-generic-hwe-16.04\t\t\tinstalllinux-libc-dev:amd64\t\t\t\tinstalllinux-libc-dev:i386\t\t\t\tinstalllinux-sound-base\t\t\t\tinstalllinuxbrew-wrapper\t\t\t\tinstallpptp-linux\t\t\t\t\tinstallsyslinux\t\t\t\t\tinstallsyslinux-common\t\t\t\t\tinstallsyslinux-legacy\t\t\t\t\tinstallutil-linux\t\t\t\t\tinstall\n\nåˆ é™¤ï¼šsudo apt-get purge\n\n\næ›´æ–°ä¸€ä¸‹å¯åŠ¨å¼•å¯¼ï¼šsudo update-grubæˆ–è€…sudo update-grub2\n\nappstreamclié”™è¯¯\nsudo-apt get updateæ—¶å‡ºç°ä¸‹é¢é”™è¯¯\n\n1234The AppStream system cache was updated, but some errors were detected, which might lead to missing metadata. Refer to the verbose log for more information.Reading package lists... DoneE: Problem executing scripts APT::Update::Post-Invoke-Success 'if /usr/bin/test -w /var/cache/app-info -a -e /usr/bin/appstreamcli; then appstreamcli refresh-cache &gt; /dev/null; fi'E: Sub-process returned an error code\n\nè§£å†³\n\n123456$ sudo rm /usr/bin/appstreamclicd /tmp &amp;&amp; mkdir asfixcd asfixwget https://launchpad.net/ubuntu/+archive/primary/+files/appstream_0.9.4-1ubuntu1_amd64.debwget https://launchpad.net/ubuntu/+archive/primary/+files/libappstream3_0.9.4-1ubuntu1_amd64.debsudo dpkg -i *.deb\nå®‰è£…æˆªå±è½¯ä»¶Shutter\næ·»åŠ è½¯ä»¶æº\n\n1$ sudo add-apt-repository ppa:shutter/ppa\n\næ›´æ–°æºå¹¶å®‰è£…\n\n12$ sudo apt-get update$ sudo apt-get install shutter\n\nè®¾ç½®å¿«æ·é”®\n\nç³»ç»Ÿè®¾ç½® &gt; é”®ç›˜ &gt; å¿«æ·é”® &gt; è‡ªå®šä¹‰å¿«æ·é”® &gt; +\n\n\n\nè‡ªå®šä¹‰å¿«æ·é”®\n\n\n\n\n\nåç§°ï¼š\nShutter Select\n\n\nå‘½ä»¤ï¼š\nshutter -s\n\n\n\nç‚¹å‡»æ–°æ·»åŠ æ¡ç›®çš„å³ä¾§æ–°å»ºå¿«æ·é”®ï¼Œç„¶ååŒæ—¶æŒ‰ä½Ctrl+Alt+Aï¼Œç»“æŸã€‚\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/linux-notes.jpg","plink":"https://blog.xujiaji.com/post/linux-notes/"},{"title":"Gitç¬”è®°","date":"2017-12-12T03:02:34.000Z","author":"xujiaji","updated":"2019-05-05T07:30:44.427Z","content":"è®°å½•åœ¨Gitçš„ä½¿ç”¨è¿‡ç¨‹ä¸­é‡åˆ°çš„æ“ä½œ\n\nGitç¬”è®°åˆå§‹åŒ–gitä»“åº“\nç§»åŠ¨åˆ°éœ€è¦åˆå§‹åŒ–çš„ç›®å½•\n1git init\n\næ·»åŠ ä¿®æ”¹åçš„æ–‡ä»¶ï¼Œæˆ–ç”¨â€œ.â€è¡¨ç¤ºæ·»åŠ å½“å‰ç›®å½•æ‰€æœ‰ä¿®æ”¹å†…å®¹\n1git add &lt;æ–‡ä»¶&gt;\n\næäº¤ä¿®æ”¹äº†ä»€ä¹ˆå†…å®¹\n1git commit -m \"&lt;å†…å®¹&gt;\"\n\n\næŸ¥çœ‹çŠ¶æ€\næŸ¥çœ‹å½“å‰ç‰ˆæœ¬åº“çš„çŠ¶æ€ï¼Œå¦‚ï¼šä¿®æ”¹äº†ä»€ä¹ˆæ–‡ä»¶ï¼Œæ˜¯å¦æœ‰éœ€è¦æ·»åŠ æˆ–è€…æäº¤çš„æ–‡ä»¶\n1git status\n\næŸ¥çœ‹ä¿®æ”¹å‰åçš„ä¸åŒä¹‹å¤„ï¼ˆdifferenceï¼‰\n1git diff\n\næŸ¥çœ‹å·¥ä½œåŒºå’Œç‰ˆæœ¬åº“é‡ŒHEADæŒ‡å‘çš„ç‰ˆæœ¬ï¼ˆæœ€æ–°ç‰ˆæœ¬ï¼‰æœ‰ä»€ä¹ˆåŒºåˆ«\n1git diff HEAD -- &lt;æ–‡ä»¶&gt;\n\n\nç‰ˆæœ¬å›é€€\næŸ¥çœ‹commitæäº¤çš„æ—¥å¿—ï¼Œæ¯ä¸ªcommitéƒ½æœ‰ä¸€ä¸²å“ˆå¸Œå€¼è¡¨ç¤ºid\n1git log\n\nç”¨ä¸€è¡Œä¿¡æ¯æ¥å±•ç¤ºä¸€æ¬¡æäº¤çš„ä¿¡æ¯ï¼ˆç®€åŒ–ä¸Šé¢çš„å±•ç¤ºï¼‰\n1git log --pretty=oneline\n\nGitä¸­ï¼Œç”¨HEADè¡¨ç¤ºå½“å‰ç‰ˆæœ¬ï¼Œä¸Šä¸ªç‰ˆæœ¬è¡¨ç¤ºä¸ºHEAD^ï¼Œä¸Šä¸Šç‰ˆæœ¬å°±æ˜¯HEAD^^â€¦ã€‚ä¹Ÿå¯ç›´æ¥æŒ‡å®šï¼Œå¦‚å¾€ä¸Š100ä¸ªç‰ˆæœ¬ï¼šHEAD~100\n12git reset --hard HEAD^HEAD is now at ebeb505 add distributed\n\nå¦‚æœçª—å£è¿˜æ²¡å…³é—­ï¼Œè¿˜å¯ä»¥åæ‚”ã€‚7a19æ˜¯commit idçš„SHA1å€¼å¼€å¤´ï¼Œä»–ä¼šè‡ªåŠ¨æ ¹æ®å¼€å¤´è¿™å‡ ä¸ªå­—ç¬¦å»æ‰¾\n1git reset --hard 7a19\n\nå¦‚æœçª—å£å…³é—­ï¼Œé‚£ä¹ˆä¹Ÿèƒ½åæ‚”ã€‚æŸ¥çœ‹ä½ çš„å†å²å‘½ä»¤çš„è®°å½•\n1git reflog\n\n\næ’¤é”€ä¿®æ”¹\nå¦‚æœè¿˜æ²¡æœ‰git addæ—¶æƒ³è¦æ’¤é”€ä¿®æ”¹\n1git checkout -- &lt;æ–‡ä»¶&gt;\n\nå¦‚æœgit addäº†ï¼Œæƒ³è¦æ’¤é”€ã€‚å…ˆè¿›è¡Œè¿›è¡Œä¸‹é¢å°†æ–‡ä»¶ä»æš‚å­˜åŒºé€€å›åˆ°å·¥ä½œåŒºï¼Œç„¶ååœ¨è¿›è¡Œä¸Šé¢æ­¥éª¤ã€‚\n1git reset HEAD &lt;file&gt;\n\n\nåˆ é™¤æ–‡ä»¶\nå½“åˆ é™¤æ–‡ä»¶åï¼Œéœ€è¦æ›´æ–°ç‰ˆæœ¬åº“æ—¶ã€‚æœ€åè¿˜éœ€è¦commitæäº¤\n1git add/rm &lt;file&gt;\n\n\nè¿œç¨‹ä»“åº“\næ·»åŠ ä¸ºæœ¬åœ°ä»“åº“å¹¶è”è¿œç¨‹ä»“åº“\n1git remote add origin xxx.git\n\nåˆ é™¤å·²å¹¶è”çš„è¿œç¨‹åº“\n1git remote rm origin\n\né‡æ–°è®¾ç½®è¿œç¨‹ä»“åº“\n1git remote set-url origin git@xxx.com/xxx/xxx.git\n\næœ¬åœ°ä»“åº“å¹¶è”å¤šä¸ªè¿œç¨‹ä»“åº“\n123456789101112git remote rm origingit remote add github git@github.com:xxx/xxx.gitgit remote add gitee git@gitee.com:xxx/xxx.gitgit remote -v... gitee    git@gitee.com:xxx/xxx.git (fetch)... gitee    git@gitee.com:xxx/xxx.git (push)... github    git@github.com:xxx/xxx.git (fetch)... github    git@github.com:xxx/xxx.git (push)git push github mastergit push gitee master\n\næ¨é€åˆ°è¿œç¨‹ä»“åº“ï¼Œç¬¬ä¸€æ¬¡æ¨é€åŠ ä¸Š-uä¼šæŠŠæœ¬åœ°masteråˆ†æ”¯å’Œè¿œç¨‹masteråˆ†æ”¯å¹¶è”èµ·æ¥ï¼Œä»¥åæ¨é€æˆ–æ‹‰å–å¯ç®€åŒ–å‘½ä»¤\n1git push -u origin master\n\næŸ¥çœ‹è¿œç¨‹ä»“åº“çš„åç§°ï¼Œä¸€èˆ¬æ˜¯originï¼Œå¦‚æœæ²¡æœ‰è¿œç¨‹ä»“åº“åˆ™æ²¡æœ‰ç»“æœã€‚\n1git remote\n\næŸ¥çœ‹æ›´è¯¦ç»†ä¿¡æ¯ï¼Œå¦‚æœæ²¡æœ‰æ¨é€æƒé™åˆ™æ²¡æœ‰(push)æ ‡è®°çš„åœ°å€ã€‚\n1git remote -v\n\n\nè®¾ç½®ç”¨æˆ·ä¿¡æ¯  12git config --global user.name \"John Doe\"git config --global user.email johndoe@example.com\n\nå¦‚æœä½¿ç”¨äº† â€“global ï¼Œé‚£ä¹ˆè¯¥å‘½ä»¤åªéœ€è¦è¿è¡Œä¸€æ¬¡ï¼Œå› ä¸ºä¹‹åæ— è®ºä½ åœ¨è¯¥ç³»ç»Ÿä¸Šåšä»»ä½•äº‹æƒ…ï¼Œ Git éƒ½ä¼šä½¿ç”¨é‚£äº›ä¿¡æ¯ã€‚å½“ä½ æƒ³é’ˆå¯¹ç‰¹å®šé¡¹ç›®ä½¿ç”¨ä¸åŒçš„ç”¨æˆ·åç§°ä¸é‚®ä»¶åœ°å€æ—¶ï¼Œå¯ä»¥åœ¨é‚£ä¸ªé¡¹ç›®ç›®å½•ä¸‹è¿è¡Œæ²¡æœ‰ â€“global é€‰é¡¹çš„å‘½ä»¤æ¥é…ç½®ã€‚\n\nåˆ†æ”¯\næŸ¥çœ‹æœ¬åœ°åˆ†æ”¯\n1git branch\n\næŸ¥çœ‹è¿œç¨‹åˆ†æ”¯\n1git branch -a\n\nåˆ›å»ºåˆ†æ”¯1.1.2å¹¶åˆ‡æ¢åˆ°1.1.2åˆ†æ”¯\n1git checkout -b 1.1.2\n\næ‹†åˆ†å†™æ³•\n12git branch 1.1.2git checkout 1.1.2\n\nåˆ é™¤æœ¬åœ°åˆ†æ”¯\n1git branch -d 1.1.2\n\næŠŠè¯¥åˆ†æ”¯ä¸Šçš„æ‰€æœ‰æœ¬åœ°æäº¤æ¨é€åˆ°è¿œç¨‹åº“ï¼ˆæ¨é€æ—¶ï¼Œåé¢æŒ‡å®šæœ¬åœ°åˆ†æ”¯ï¼Œè¿™æ ·gitå°±ä¼šæŠŠè¯¥åˆ†æ”¯æ¨é€åˆ°è¿œç¨‹åº“å¯¹åº”çš„è¿œç¨‹åˆ†æ”¯ä¸Šã€‚ï¼‰\n1git push origin master\n\nåˆ›å»ºè¿œç¨‹originçš„devåˆ†æ”¯åˆ°æœ¬åœ°\n1git checkout -b dev origin/dev\n\næŒ‡å®šæœ¬åœ°åˆ†æ”¯devå’Œè¿œç¨‹origin/devçš„é“¾æ¥\n1git branch --set-upstream-to=origin/dev dev\n\næ¨é€æœ¬åœ°åˆ†æ”¯åˆ°è¿œç¨‹åˆ†æ”¯ï¼Œè¿œç¨‹åˆ†æ”¯ä¸å­˜åœ¨åˆ™åˆ›å»º\n1git push origin 1.1.2:1.1.2\n\næœ¬åœ°åˆ†æ”¯ç•™ç©ºåˆ™æ˜¯åˆ é™¤è¿œç¨‹åˆ†æ”¯\n1git push origin :1.1.2\n\nåˆå¹¶workåˆ†æ”¯åˆ°å½“å‰åˆ†æ”¯\n1git merge work\n\nåˆå¹¶åˆ†æ”¯æ—¶ï¼Œgitå¯èƒ½ä¼šç”¨Fast forwardæ¨¡å¼ã€‚ä½†è¿™ä¸ªæ¨¡å¼ä¸‹åˆ é™¤åˆ†æ”¯åä¼šä¸¢å¤±åˆ†æ”¯ä¿¡æ¯ã€‚å¦‚è¦ç¦ç”¨Fast forwardæ¨¡å¼å¯åœ¨mergeæ—¶--no-ffç”Ÿæˆä¸€ä¸ªæ–°çš„commit\n1git merge --no-ff -m \"&lt;commitå†…å®¹&gt;\" &lt;åˆ†æ”¯&gt;\n\nå¼ºåˆ¶åˆ é™¤åˆ†æ”¯\n1git branch -D &lt;åˆ†æ”¯å&gt;\n\n\næ ‡ç­¾\nåˆ›å»ºæ ‡ç­¾ï¼Œé»˜è®¤ä¸ºHEADï¼Œä¹Ÿå¯ä»¥æŒ‡å®šä¸€ä¸ªcommit id\n12git tag &lt;tagname&gt;git tag &lt;tagname&gt; &lt;commit id&gt;\n\nåˆ›å»ºå¸¦æœ‰è¯´æ˜çš„æ ‡ç­¾\n1git tag -a &lt;tagname&gt; -m \"&lt;è¯´æ˜&gt;\" &lt;commit id&gt;\n\næŸ¥çœ‹æ‰€æœ‰æ ‡ç­¾\n1git tag\n\næŸ¥çœ‹æ ‡ç­¾ä¿¡æ¯\n1git show &lt;tagname&gt;\n\nåˆ é™¤æ ‡ç­¾\n1git tag -d &lt;tagname&gt;\n\næ¨é€æŸä¸ªæ ‡ç­¾åˆ°è¿œç¨‹\n1git push origin &lt;tagname&gt;\n\nä¸€æ¬¡æ€§æ¨é€å…¨éƒ¨å°šæœªæ¨é€åˆ°è¿œç¨‹çš„æœ¬åœ°åˆ†æ”¯\n1git push origin --tags\n\nåˆ é™¤è¿œç¨‹æ ‡ç­¾æ—¶ï¼Œå…ˆåˆ é™¤æœ¬åœ°ï¼Œç„¶åpushï¼Œæ ¼å¼å¦‚ä¸‹ï¼š\n12git tag -d &lt;tagname&gt;git push origin :refs/tags/&lt;tagname&gt;\n\n\nè§£å†³å†²çª\nå½“git mergeå‘ç”Ÿå†²çªçš„æ—¶å€™\nå¯å…ˆé€šè¿‡git statusæŸ¥çœ‹å†²çªçš„æ–‡ä»¶\nGitç”¨&lt;&lt;&lt;&lt;&lt;&lt;&lt;ï¼Œ=======ï¼Œ&gt;&gt;&gt;&gt;&gt;&gt;&gt;æ ‡è®°å‡ºä¸åŒåˆ†æ”¯çš„å†…å®¹æˆ‘ä»¬ä¿®æ”¹åä¿å­˜ã€‚\nç„¶ågit addã€git commit -mæäº¤ã€‚\næŸ¥çœ‹åˆ†æ”¯åˆå¹¶å›¾\n12git log --graphgit log --graph --pretty=oneline --abbrev-commit\n\n\nstash\nä¸´æ—¶éœ€è¦å¤„ç†å…¶ä»–åˆ†æ”¯ä»»åŠ¡çš„æ—¶å€™ï¼Œå¯ä»¥å°†å½“å‰åˆ†æ”¯æ²¡å®Œæˆçš„å·¥ä½œå‚¨è—èµ·æ¥ã€‚\n1git stash\n\næŸ¥çœ‹å½“å‰åˆ†æ”¯å‚¨è—\n12$ git stash liststash@&#123;0&#125;: WIP on dev: 5e7a253 merge dev2 test\n\næ¢å¤å‚¨è—\n\n1.ç”¨git stash applyæ¢å¤ï¼Œæ¢å¤åï¼Œstashå†…å®¹å¹¶ä¸åˆ é™¤ï¼Œéœ€è¦ç”¨git stash dropåˆ é™¤ã€‚\n\n1234567git stash liststash@&#123;0&#125;: WIP on dev: 5e7a253 merge dev2 testgit stash apply stash@&#123;0&#125;git stash liststash@&#123;0&#125;: WIP on dev: 5e7a253 merge dev2 testgit stash drop stash@&#123;0&#125;Dropped stash@&#123;0&#125; (78fffa0577da9beb962a341cf13d74d9cfa148c6)\n\n2.ç”¨git stash popæ¢å¤çš„åŒæ—¶åˆ å»stash\n\n1git stash pop\n\n\ngit pullå’Œæœ¬åœ°å†²çª\nå†²çªlog\n\n123456789101112git pullremote: Counting objects: 24, done.remote: Compressing objects: 100% (17/17), done.remote: Total 24 (delta 7), reused 23 (delta 6), pack-reused 0Unpacking objects: 100% (24/24), done.From https://github.com/elmorec/hexo-theme-inside   a98e719..3b64c8a  master     -&gt; origin/mastererror: Your local changes to the following files would be overwritten by merge:        _config.ymlPlease commit your changes or stash them before you merge.AbortingUpdating a98e719..3b64c8a\n\n1ã€ç”¨ git stashæœ¬åœ°æš‚æ—¶ä¿å­˜èµ·æ¥\n\n12git stashSaved working directory and index state WIP on master: a98e719 update scripts\n\n2ã€pull3ã€è¿˜åŸgit stash pop stash@{0}\n\n1234git stash pop stash@&#123;0&#125;Auto-merging _config.ymlOn branch masterYour branch is up-to-date with 'origin/master'.\nå…‹éš†å…¶ä»–åˆ†æ”¯\nå¦‚ä¸‹æ‰€ç¤ºï¼Œåªå…‹éš†sourceåˆ†æ”¯\n\n1git clone -b source git@github.com:xujiaji/xujiaji.github.io.git\nå¼ºåˆ¶è¦†ç›–è¿œç¨‹1git push -f\nå¿½ç•¥ç‰¹æ®Šæ–‡ä»¶.gitignore\nå¿½ç•¥pythonç¼–è¯‘äº§ç”Ÿçš„.pycã€.pyoã€distç­‰æ–‡ä»¶æˆ–ç›®å½•\n1234567# Python:*.py[cod]*.so*.egg*.egg-infodistbuild\n\n\né…ç½®åˆ«å\nâ€“globalæ˜¯é’ˆå¯¹å½“å‰ç”¨æˆ·èµ·ä½œç”¨ï¼Œå¦‚æœä¸åŠ åªå¯¹å½“å‰ä»“åº“èµ·ä½œç”¨\n\n123git config --global alias.lg \"log --color --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset' --abbrev-commit\"git lg\n\né…ç½®æ–‡ä»¶ä½ç½®ï¼šå½“å‰é¡¹ç›®.git/config\n\nå½“å‰ç”¨æˆ·çš„Gité…ç½®æ–‡ä»¶ï¼Œåœ¨ç”¨æˆ·ä¸»ç›®å½•çš„.gitconfigï¼Œé…ç½®åˆ«åå¯ä¿®æ”¹è¿™ä¸ªæ–‡ä»¶ï¼Œä¹Ÿå¯åˆ é™¤ç”¨å‘½ä»¤é‡æ–°é…ç½®ã€‚\n\n\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/git-notes.png","plink":"https://blog.xujiaji.com/post/git-notes/"},{"title":"VIMçˆ¬å¡åˆ°åŠå±±è…°çš„æ€»ç»“","date":"2016-11-30T01:43:00.000Z","author":"xujiaji","updated":"2019-04-08T06:57:01.540Z","content":"\nç®€ä»‹å°†Linux Mintåšä¸ºæˆ‘çš„ä¸»ç³»ç»Ÿåï¼Œæ¥æ¥å›å›åˆ°å¤„æ’å¢™ã€‚æ…¢æ…¢çš„åˆ°ç°åœ¨ä¸ä»…ä¹ æƒ¯äº†Linuxä¸‹çš„å¨±ä¹å’Œå¼€å‘ï¼Œå±…ç„¶è¿˜æ¸æ¸çš„é¡ºæ‰‹é¡ºçœ¼èµ·æ¥ï¼Œå¯¹äºLinuxç”Ÿå­˜æœ‰äº†ä¿éšœçš„æˆ‘ç°åœ¨å¯¹Linuxä¸‹çš„VIMå¼€å§‹å¥½å¥‡äº†ã€‚\nè™½å¬è¯´VIMä¹ƒæ˜¯ä¸Šå¤ç¥å™¨ï¼Œä½†ä¸€ç›´ä»¥æ¥å¯¹äºVIMæ˜ åƒåªæœ‰é»‘ä¸æºœç§‹çš„ç•Œé¢ã€ç™½æ™ƒæ™ƒçš„æ–‡å­—ï¼ŒåªçŸ¥é“ä»å‘½ä»¤ç•Œé¢è¿›å»åå¯ä»¥ç‚¹å‡»iè¿›å…¥æ–‡æœ¬ç¼–è¾‘æ¨¡å¼ã€ä¸Šä¸‹å·¦å³ç®­å¤´ç§»åŠ¨å…‰æ ‡ã€ä¿®æ”¹å®ŒæˆåEseç„¶å:wqä¿å­˜é€€å‡ºã€èµ°äººã€‚æ€»çš„æ¥è¯´ä¸æƒ³æ’©ä½ ï¼Œæ€•æƒ¹ç¥¸ä¸Šèº«ï¼Œæœ€ç»ˆç²¾å°½äººäº¡ï¼ˆç²¾ç¥çš„ç²¾ï¼‰ã€‚\nè¿™åˆ°ç°åœ¨éƒ½æ²¡é¢è¯•ï¼Œå“ï¼æ‰‹é‡Œé—²ä¸ä½ï¼Œå‰å‡ å¤©å¼€å§‹å¯¹VIMå¼€å§‹ä¸‹æ‰‹äº†ï¼Œèƒ†é¢¤å¿ƒæƒŠçš„å…ˆå»ç½‘ä¸Šç§‹ç§‹åˆ«äººçš„VIMé•¿å•¥æ ·å•Šï¼è°·æ­Œç›´æ¥æœå›¾ç‰‡å§ï¼ï¼ˆæˆ‘å·²åšå¥½éšæ—¶é€å»ï¼‰ã€‚è¿™ä¸€çœ‹ï¼Œç“¦ç‰¹ï¼Ÿvimå¯ä»¥åˆ†å±ï¼Ÿè¿™ä¸ªäººçš„vimç•Œé¢è¿˜æœ‰ç›®å½•ï¼Ÿè¿™GITåˆ†æ”¯ç»“æ„ä¾§è¾¹æ æ€ä¹ˆéƒ½æ¥äº†ï¼Ÿä¸ºä»€ä¹ˆå·¦ä¾§è¿˜æœ‰ä»£ç è¡Œå·ï¼Ÿè¿™äº›äººçš„ä»£ç é«˜äº®çš„è¿™ä¹ˆå¥½çœ‹ï¼Ÿæœ€ä¸‹é¢çš„é‚£è¡Œæ¼‚äº®çš„çŠ¶æ€æ æˆ‘å’‹è¿‡æ²¡æœ‰ï¼Ÿæˆ‘ç¬é—´å°±è¢«è¿™äº›äººçš„ç•Œé¢ç»™å¸å¼•ä½äº†ï¼Œæˆ‘æ„Ÿè§‰æˆ‘ä»å†œæ‘ç¬¬ä¸€æ¬¡æ¥åˆ°åŸå¸‚ã€‚\nå°±è¿™æ ·æˆ‘èµ°ä¸Šäº†æ’©VIMä¹‹è·¯ï¼ˆæˆ‘æœ‰Javaç²¾ç¥æˆ‘ä¸æ€•ï¼Œä¸‡ç‰©çš†å¯¹è±¡ï¼‰ï¼Œåˆ°ç°åœ¨æˆ‘å·²ç»å°†ä¸Šé¢çœ‹åˆ°çš„ç›®å½•ç»“æ„å¼„å‡ºæ¥ã€ä»£ç è¡Œå·ã€ä»£ç é«˜äº®ä¸»é¢˜æ›´æ¢ã€çŠ¶æ€æ æ˜¾ç¤ºã€VIMä¸­ä½¿ç”¨GITç­‰åŠ å…¥åˆ°æˆ‘çš„VIMä¹‹ä¸­ã€‚ä»ä¸­æˆ‘äº†è§£åˆ°äº†VIMçš„æ’ä»¶æ”¾å“ªã€æ€ä¹ˆé…ç½®æ’ä»¶ï¼Œå­¦ä¹ äº†ä¸€æ³¢åŸºæœ¬å‘½ä»¤åŠ©æˆ‘å‰è¡Œã€‚æˆ‘è®¤ä¸ºå†™ä»£ç æœ€ä¸»è¦çš„å°±æ˜¯è¦å…ˆæœ‰ä¸ªå®‰å¿ƒã€æ‚¦ç›®çš„ç¯å¢ƒï¼Œç„¶åæ˜¯å¿«æ·çš„æ“ä½œï¼Œè¿™æ ·å†™ä»£ç ä¼šæ„Ÿè§‰å¾ˆèˆ’æœã€‚å½“ç„¶ï¼Œè¿˜æœ‰å°±æ˜¯æå‡äº†ä¸€ä¸ªæ ¼è°ƒï¼Œé›†é½æŠ€æœ¯ã€å¿«æ·ã€è£…é€¼ã€é«˜æ•ˆä¸ä¸€èº«ã€‚\nä¸‹å›¾æ˜¯æˆ‘å½“å‰çš„VIMç•Œé¢æˆªå›¾ï¼Œæ˜¯ä¸æ˜¯æœ‰é¼»å­æœ‰çœ¼äº†ã€‚\næœ‰æƒ³è¦åˆ°è¾¾çš„æ–¹å‘ï¼Œä¸€åˆ‡çš„å›°éš¾ä¸è¿‡æ˜¯ä¸ªè¿‡ç¨‹æˆ‘ä»è¿™é‡Œå¼€å§‹å…¥é—¨å…ˆä¸ºæ‚¨çŒ®ä¸Šé“¾æ¥ï¼šä¸–ç•Œä¸Šæœ€ç‰›çš„ç¼–è¾‘å™¨ï¼š Vim 1 (åŸåˆ›åŠ¨å›¾æ¼”ç¤ºæ‰€æœ‰ä¾‹å­!)ä¸–ç•Œä¸Šæœ€ç‰›çš„ç¼–è¾‘å™¨ï¼š Vim 2 (åŸåˆ›åŠ¨å›¾æ¼”ç¤ºæ‰€æœ‰ä¾‹å­!)ä¸–ç•Œä¸Šæœ€ç‰›çš„ç¼–è¾‘å™¨ï¼š Vim 3 (åŸåˆ›åŠ¨å›¾æ¼”ç¤ºæ‰€æœ‰ä¾‹å­!)\nå½“è¿™ä¸‰ç¯‡çœ‹å®Œåï¼Œå¯ä»¥äº†è§£åˆ°VIMçš„åŸºæœ¬æ“ä½œï¼Œå¯ä»¥å®‰è£…ä¸€äº›æ’ä»¶ï¼ˆå…¶å®æˆ‘ä¹Ÿåªæ˜¯ç”¨åˆ°äº†é‡Œé¢çš„å‡ ä¸ªæ’ä»¶ï¼Œå…¶ä»–æ²¡ç”¨çš„å…ˆä¸ç®¡å§ï¼ï¼‰ã€‚è™½ç„¶ç°åœ¨ä½ æ˜¯ä¸æ˜ä¸ç™½çš„å®‰è£…äº†ä¸€äº›æ’ä»¶ï¼Œä½†é‡åœ¨å…ˆä½“éªŒä½“éªŒVIMçš„æ„Ÿè§‰ã€‚\nè¿™é‡Œæˆ‘æƒ³è¦è¡¥å……ä¸€ä¸‹(å› ä¸ºæˆ‘æ˜¯ç”¨çš„Linuxï¼Œå…¶ä»–ç³»ç»ŸåŸè°…æˆ‘æ²¡äº†è§£)ï¼š.vimrcå°±æ˜¯vimçš„é…ç½®æ–‡ä»¶.vim/bundleç›®å½•ä¸‹æ”¾çš„éƒ½æ˜¯æ’ä»¶ï¼Œå¯ä»¥ç›´æ¥å°†Githubæ’ä»¶git cloneï¼ˆä¸‹è½½åˆ°ï¼‰è¿™ä¸ªç›®å½•ã€‚\n.vim/bundle/vundle\n\nå¦‚æœæ‚¨ä¸‹è½½äº†ä¸Šé¢æ•™ç¨‹çš„.vimé‡Œé¢ä¼šæœ‰è¿™ä¸ªç›®å½•ï¼Œè¿™ä¸ªæ’ä»¶å¯ä»¥åœ¨Githubæœç´¢ç„¶åæ›´æ–°ä¸€ä¸‹ã€‚\nå¦‚æœæ˜¯Githubä¸Šå¯ä¸‹è½½çš„æ’ä»¶å°±ä¸ç”¨äº²è‡ªå»å…‹éš†ä¸‹æ¥äº†ï¼Œç›´æ¥åœ¨.vimrcæ·»åŠ å¦‚ï¼šPlugin &#39;majutsushi/tagbar&#39;ï¼ˆGithubåœ°å€æ˜¯ï¼šhtttps://github.com/majutsushi/tagbarï¼‰ï¼Œç›´æ¥å–åé¢ä¸€éƒ¨åˆ†å°±è¡Œäº†ã€‚\næœ€åæ‰“å¼€ç»ˆç«¯è¾“å…¥vimå›è½¦ï¼Œè¿›å…¥Vimã€‚ç„¶åï¼Œè¾“å…¥å‘½ä»¤:PluginInstallå°±ä¼šå°†æ‰€æœ‰çš„ç¬¬äºŒæ­¥è¿™ç§å½¢å¼çš„æ’ä»¶è‡ªåŠ¨ä¸‹è½½ä¸‹æ¥ã€‚\n\nä»è¿™é‡Œå¼€å§‹æ˜ç™½äº†Vimæ’ä»¶ç®¡ç†ï¼Œå¦‚ä½•é…ç½®è¿˜æ˜¯å…ˆæ•¬ä¸Šé“¾æ¥ï¼šä¸è¦åœ¨å®³æ€•Vim\nå½“ç„¶æˆ‘çš„è‹±è¯­æ°´å¹³æ˜¯ä¸ªæ¸£æ¸£ï¼Œè¶Šæ¥è¶Šä¸å¾—ä¸å¤šå­¦å­¦Englishäº†ã€‚çœ‹äº†äº†å¤§æ¦‚ï¼Œæ€»ä½“ä¸Šé¢æ˜¯ä»‹ç»ï¼Œä¸‹é¢æ˜¯å®é™…çš„ä¸€äº›ä¾‹å­ã€‚æœ‰é¢„è§ˆå›¾ï¼Œç†è§£èµ·æ¥è¿˜æ˜¯æ¯”è¾ƒè½»æ¾ã€‚é‡Œé¢ä»‹ç»äº†ä¸€ä¸ªVimæ¸¸æˆhttp://vim-adventures.com/ ï¼ŒæŒºæœ‰æ„æ€äº†ç©åˆ°ä¸‰å…³ä¹‹åè¦moneyï¼Œ20å¤šç¾å…ƒè§£é”ï¼Œå±Œä¸çš„æˆ‘åªèƒ½å¹²æœ›ç€äº†ã€‚\nè¿™é‡Œç®€å•è¯´ä¸€ä¸‹æˆ‘è£…äº†çš„é‡Œé¢æåŠçš„å‡ ä¸ªï¼šfugitiveï¼šå¯ä»¥åœ¨Vimä¸­å¯¹é¡¹ç›®è¿›è¡ŒGitå‘½ä»¤æ“ä½œã€‚gundoï¼šæŸ¥çœ‹æäº¤ä»¥æ ‘è¡Œç»“æ„å±•ç¤ºï¼ˆè¯·çœ‹ä¸‹å›¾ï¼‰nerdtreeï¼šå±•ç¤ºç›®å½•ç»“æ„ï¼Œçœ‹èµ·æ¯”ä½¿ç”¨:Veå±•ç¤ºçš„ç›®å½•çˆ½å¤šäº†ã€‚ï¼ˆè¯·çœ‹ä¸‹å›¾ï¼‰powerlineï¼šåº•éƒ¨çŠ¶æ€æ ï¼Œè¿™ä¸ªå¯æ˜¯æŠŠæˆ‘ç»™æŠ˜è…¾å¤Ÿäº†ï¼Œä¸è¿‡å¼„å®Œä¹‹åï¼Œç¬é—´å±•ç¤ºæ•ˆæœæ æ çš„ã€‚\n\nè¿˜æ˜¯ç®€å•è®°å½•ä¸€ä¸‹æˆ‘çš„å†ç¨‹å§ï¼\n\nä¸€å¼€å§‹æˆ‘ä»¥ä¸ºå’Œå…¶ä»–æ’ä»¶ä¸€æ ·ï¼Œç›´æ¥åœ¨.vimrcä¸­æ·»åŠ Plugin &#39;Lokaltog/powerline&#39;ç„¶ååœ¨Vimä¸­:PluginInstallï¼ŒVery Goodæå®šã€‚å…¶å®ä¸ç„¶ï¼Œæ ¹æœ¬å°±å¯ä»¥ä¸éœ€è¦å¾€.vim/bundleä¸­æ·»åŠ ï¼Œéœ€è¦é…ç½®pythonï¼Œéœ€è¦åœ¨.vimrcä¸­é…ç½®ã€‚\né€šè¿‡è¿™ç¯‡æ–‡ç« ï¼šä¸ºBashå’ŒVIMé…ç½®ä¸€ä¸ªç¾è§‚å¥¢åçš„çŠ¶æ€æç¤ºæ æˆ‘ä¸ä»…ä»…å°†Vimç»™åŠ ä¸Šäº†çŠ¶æ€æ ï¼Œå‘½ä»¤ç•Œé¢çš„ç”¨æˆ·çŠ¶æ€ä¹Ÿå˜äº†ï¼Œæˆ‘æŠŠé»˜è®¤çš„å­—ä½“æ”¹æˆpowerlineçš„å­—ä½“ï¼Œæ›´åŠ ç¾è§‚ã€‚å…ˆæ¬£èµä¸€ä¸‹ï¼š\n\næˆ‘çš„æ­¥éª¤ï¼š\n\nå®‰è£…python-pip ä¸ git å¥—ä»¶\n1sudo apt-get install python-pip git\n\nä½¿ç”¨pipå®‰è£…Powerline\n1pip install --user powerline-status\n\nå­—ä½“é…ç½®ï¼ˆå¦‚æœæ²¡æœ‰è¿™å­—ä½“ï¼Œé‚£ä¹ˆPowerlineçš„é‚£äº›ç¬¦å·æˆ‘çš„ä¼šæ˜¾ç¤ºä¹±ç ï¼‰\n123$ git clone https://github.com/powerline/fonts.git$ cd fonts$ ./install.sh\n\né…ç½®ç¯å¢ƒï¼Œæ‰“å¼€.bashrcï¼Œæ·»åŠ å¦‚ä¸‹ä¿¡æ¯ã€‚\n12345678export TERM=&quot;screen-256color&quot;export PATH=&quot;$HOME/.local/bin:$PATH&quot;export POWERLINE_COMMAND=powerlineexport POWERLINE_CONFIG_COMMAND=powerline-configpowerline-daemon -qPOWERLINE_BASH_CONTINUATION=1POWERLINE_BASH_SELECT=1. ~/.local/lib/python2.7/site-packages/powerline/bindings/bash/powerline.sh\n\n\nç¬¬äºŒè¡Œæ˜¯åŠ å…¥powerlineçš„å‘½ä»¤ä½ç½®ï¼Œä¸‹å›¾æ˜¯æŸ¥çœ‹ä½ç½®ã€‚æœ€ä¸‹é¢çš„ä¸€è¡Œæ˜¯å®‰è£…powerlineåçš„è·¯å¾„. ~/.local/lib/python2.7/site-packages/powerlineå¯èƒ½å¤§å®¶ä¼šæœ‰æ‰€ä¸åŒã€‚ï¼ˆå†æ‰§è¡Œç¬¬äºŒæ­¥ä½ ä¼šçœ‹åˆ°å®‰è£…ä½ç½®å“¦ï¼Œå¦‚ä¸‹å›¾ï¼‰\n\né€‰æ‹©å­—ä½“ï¼Œæ­¤æ—¶æ‚¨åº”è¯¥å·²ç»å¯ä»¥åœ¨å‘½ä»¤ä¸­ä¸­æ˜¾ç¤ºå¦‚ä¸Šå›¾çš„çŠ¶æ€äº†ï¼Œåªæ˜¯é»˜å­—ä½“å¯èƒ½æ— æ³•æ˜¾ç¤ºå…¶çœŸæ­£æ•ˆæœã€‚Edit &gt; Preferencesçœ‹ä¸‹å›¾ï¼šæˆ‘ç›´æ¥æœç´¢é€‰æ‹©äº†powerline semi\næœ€ç»ˆç›®çš„ä¸è¦å¿˜äº†ï¼Œæ˜¯é…ç½®Vimå•Šï¼æ­¤æ—¶åªéœ€è¦åœ¨.vimrcä¸­æ·»åŠ å¦‚ä¸‹ä¿¡æ¯å³å¯ï¼šï¼ˆç¬¬ä¸€è¡Œä¸ºpowerlineç›®å½•ï¼‰\n12345678910set rtp+=~/.local/lib/python2.7/site-packages/powerline/bindings/vim/set guifont=Sauce\\ Code\\ Powerline:h14.5set laststatus=2set encoding=utf-8set t_Co=256set numberset fillchars+=stl:\\ ,stlnc:\\set term=xterm-256colorset termencoding=utf-8set background=dark\n\né‡å¯Vimçœ‹çœ‹ï¼Œæ˜¯ä¸æ˜¯æå®šäº†ï¼\n\n\n\næœ€åçŒ®ä¸Šä¸€ä¸ªæˆ‘ç°åœ¨ç”¨çš„ä¸»é¢˜\n\ngruvbox\né…ç½®.vimrc1234Plugin &apos;morhetz/gruvbox&apos;colorscheme gruvboxset background=lightset background=dark\nåœ¨Vimä¸­ä¸‹è½½1:PluginInstall\n\nå¥½äº†å°±åˆ°è¿™é‡Œï¼Œå…¶ä»–æ’ä»¶çœ‹ä¸ªäººéœ€æ±‚æ·»åŠ ï¼Œéƒ½æ˜¯å¤§åŒå°å¼‚çš„äº†ã€‚\n\næ€»ç»“ç»“æŸåœ¨æ”¾å‡ ä¸ªç½‘å€åœ¨è¿™é‡Œï¼šVim Cheat Sheet : å¤šç§è¯­éŸ³æŸ¥çœ‹Vimå‘½ä»¤vimcolors : å¾ˆå¤šçš„Vimé…è‰²AndroidStudioâ€”â€”-IdeaVimæ’ä»¶\n\nä»ç°åœ¨å¼€å¯Vimç¥å™¨åŠŸèƒ½ï¼Œè¿›å…¥æ— å°½çš„ç æ€ªä¹‹æ—…å§ï¼\n\n\nGithubï¼š@xujiaji\n\næœ¬æ–‡æ˜¯æˆ‘å¼€å§‹VIMçˆ¬åˆ°åŠå±±å¡åçš„æ€»ç»“ï¼ä»€ä¹ˆåŠå±±å¡å•Šï¼è£…Bï¼Œå…¶å®å°±æ˜¯åˆšåˆšä¸ªå…¥äº†é—¨ï¼Œå“ˆå“ˆã€‚å¦‚æœ‰æ¬ å¦¥ä¹‹å¤„è¿˜æœ›ç»™äºˆæŒ‡æ­£ï¼Œå¦‚æœ‰ä»€ä¹ˆVimæ·«å·§è¿˜æœ›æ¨èï¼Œè°¢è°¢ï¼\n\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/vim-1/home.png","plink":"https://blog.xujiaji.com/post/vim-note1/"},{"title":"é¢å‘å¯¹è±¡è®¾è®¡-ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰","date":"2016-05-29T04:08:00.000Z","author":"xujiaji","updated":"2019-04-08T06:56:34.482Z","content":"ç®€ä»‹\n\nå¼•å…¥ï¼šé«˜å±‚çš„å†³å®šä¸èƒ½å› ä¸ºæŸä¸€ä¸ªä½å±‚æ¬¡æ¨¡å—çš„å˜åŠ¨è€Œå½±å“å…¨å±€ï¼Œå¯¼è‡´æ•´ä¸ªç³»ç»Ÿçš„å˜åŠ¨ã€‚\n\nä»€ä¹ˆæ˜¯DIPï¼Ÿ\nå…¨ç§°ï¼šä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDependency inversion principleï¼‰\nå®šä¹‰ï¼š\né«˜å±‚æ¬¡çš„æ¨¡å—ä¸åº”è¯¥ä¾èµ–äºä½å±‚æ¬¡çš„æ¨¡å—ï¼Œä¸¤è€…éƒ½åº”è¯¥ä¾èµ–äºæŠ½è±¡æ¥å£\næŠ½è±¡æ¥å£ä¸åº”è¯¥ä¾èµ–äºå…·ä½“å®ç°ï¼Œè€Œå…·ä½“å®ç°åˆ™å› è¯¥ä¾èµ–äºæŠ½è±¡æ¥å£ã€‚\n\n\n\næˆ‘ä»¬å¦‚ä½•ç†è§£DIPï¼Ÿ\nçŸ¥é“ä¾èµ–å€’ç½®çš„ç”±æ¥\nç”±äºè¿‡å»ä¼ ç»Ÿè½¯ä»¶å¼€å‘æ–¹æ³•å€¾å‘äºé«˜å±‚ä¾èµ–äºä½å±‚\nå¦‚ä»Šä¾èµ–å€’ç½®é€šè¿‡æ¥å£éš”ç¦»ï¼Œé«˜å±‚å’Œåº•å±‚éƒ½ä¾èµ–äºæ¥å£å\nç»“è®ºï¼šä»ç»“æ„ä¸Šç›¸å¯¹äºä¼ ç»Ÿç¼–ç¨‹æ–¹å¼è€Œè¨€å°±æ˜¯å€’ç½®äº†ã€‚\n\n\nä¾èµ–å€’ç½®åé¢æ•™æ\n\nç»“æ„å¦‚ä¸‹ï¼šæ²¡æœ‰éµå¾ªä¾èµ–å€’ç½®\n\n\n\nä»£ç å¦‚ä¸‹ï¼š\n\n1234567891011121314151617181920212223/** * é«˜å±‚ */class GaoCeng &#123;    ZhongCeng mZhongCeng;    public GaoCeng(ZhongCeng mZhongCeng) &#123;        this.mZhongCeng = mZhongCeng;    &#125;&#125;/** * ä¸­å±‚ */class ZhongCeng&#123;    DiCeng mDiCeng;    public ZhongCeng(DiCeng mDiCeng)&#123;        this.mDiCeng = mDiCeng;    &#125;&#125;/** * åº•å±‚ */class DiCeng&#123;&#125;\n\nä¾èµ–å€’ç½®æ­£é¢æ•™æ\n\nç»“æ„å¦‚ä¸‹ï¼š\n\n\n\nä»£ç å¦‚ä¸‹ï¼š\n\n123456789101112131415161718192021222324252627282930313233/** * ä¸­å±‚æ¥å£ */interface ZhongCengInterface&#123;   &#125;/** * é«˜å±‚æ¥å£ */interface GaoCengInterface&#123;   &#125;/** * é«˜å±‚ */class GaoCeng &#123;    GaoCengInterface mGaoCengInterface;    public GaoCeng(GaoCengInterface mGaoCengInterface) &#123;        this.mGaoCengInterface = mGaoCengInterface;    &#125;&#125;/** * ä¸­å±‚ */class ZhongCeng implements GaoCengInterface&#123;    ZhongCengInterface mZhongCengInterface;    public ZhongCeng(ZhongCengInterface mZhongCengInterface)&#123;        this.mZhongCengInterface = mZhongCengInterface;    &#125;&#125;/** * åº•å±‚ */class DiCeng implements ZhongCengInterface&#123;&#125;\n\nç»“è®º\n\nå¯ä»¥ä»ç»“æ„å›¾ä¸Šæ˜ç¡®çœ‹å‡ºä¸¤ç§æ–¹å¼ä¾èµ–ç»“æ„æ˜¯ç›¸åçš„ï¼Œæ‰€ä»¥å«ä¾èµ–å€’ç½®\né€šè¿‡è¿™ç§ç»“æ„æˆ‘ä»¬å¯ä»¥è‚†æ„çš„æ›´æ”¹å…·ä½“çš„æ¥å£å®ç°ç±»ï¼Œè€Œä¸ä¼šå½±å“é«˜å±‚\n\n\n\néµå¾ªDIPæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿæ—¢ç„¶æˆ‘ä»¬ç†è§£äº†DIPï¼Œé‚£ä¹ˆDIPçš„å¥½å¤„ä¸è¨€è€Œå–»ã€‚\n\né€šè¿‡ä¾èµ–äºæ¥å£ï¼Œéš”ç¦»äº†å…·ä½“å®ç°ç±»\nä½ä¸€å±‚çš„å˜åŠ¨å¹¶ä¸ä¼šå¯¼è‡´é«˜ä¸€å±‚çš„å˜åŠ¨\næé«˜äº†ä»£ç çš„å®¹é”™æ€§ã€æ‰©å±•æ€§å’Œæ˜“äºç»´æŠ¤\n\næ—¢ç„¶æœ‰å¥½å¤„ï¼Œé‚£ä¹ˆå°±å¿…å®šæœ‰åå¤„ï¼šä»£ç çš„å¢åŠ ï¼Œå­¦ä¹ æˆæœ¬å’Œä»£ç æ€è€ƒæ—¶é—´çš„å¢åŠ ã€‚ï¼ˆä¸è¿‡ç›¸å¯¹äºåæœŸçš„å¥½å¤„ï¼Œè¿™ç‚¹æˆ‘ä»¬è¿˜æ˜¯èƒ½ç†è§£çš„ï¼‰\nä¾‹å­å…¶å®ç†è§£DIPçš„ä¾‹å­å°±æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¯¹æ¯”ä¾‹å­ã€‚ç°åœ¨æ¥ä¸€ä¸ªå®é™…ä¸€ç‚¹çš„ä¾‹å­ï¼šè¶…é‡æä»·\n\néœ€æ±‚ï¼šç¼–å†™ä¸€ä¸ªç§°é‡æä»·è£…ç½®ï¼Œç‰©ä½“2å…ƒ/æ–¤ï¼ˆç‰©ä½“é‡é‡ &lt;= 100ï¼‰è®¡ç®—ã€‚å½“ç‰©ä½“è¶…è¿‡100kgæé†’ï¼Œç„¶åè¶…å‡ºéƒ¨åˆ†ä»¥10å…ƒ/æ–¤ï¼ˆç‰©ä½“é‡é‡ &gt; 100ï¼‰è®¡ç®—ã€‚\n\n\nä»¥ä¼ ç»Ÿæ–¹å¼ç¼–ç¨‹\n\n123456789101112131415161718192021222324252627282930313233343536373839404142434445464748/** * ç§°é‡å™¨ä¼ ç»Ÿç¼–ç¨‹ */class Scales&#123;    private double readValue;//è·å–åˆ°çš„ç‰©ä½“çš„é‡é‡    private double highestValue;    private double inPrice;    private double outPrice;    public Scales(double highestValue, double inPrice, double outPrice) &#123;        this.highestValue = highestValue;        this.inPrice = inPrice;        this.outPrice = outPrice;    &#125;    /**     * å½“æœ‰ç‰©ä½“æ”¾ä¸Šå»åç§°é‡     */    public void startScales() &#123;        //...readValue = ï¼Ÿ ï¼ˆè¿™é‡Œè·å–ç§°é‡å™¨è®¡ç®—çš„é‡é‡ï¼‰        showWeigh(readValue);        double price = 0;        double diff = readValue - highestValue;        if (diff &gt; 0) &#123;            outWeighWarn(diff);            price += highestValue * inPrice;            price += diff * outPrice;        &#125; else &#123;            price += readValue * inPrice;        &#125;        showPrice(price);    &#125;    /**     * æ˜¾ç¤ºé‡é‡     */    private void showWeigh(double weigh) &#123;    &#125;    /**     * è¶…é‡æé†’     */    private void outWeighWarn(double outWeigh) &#123;&#125;    /**     * æ˜¾ç¤ºä»·æ ¼     */    private void showPrice(double price) &#123;    &#125;&#125;\n\nä¾èµ–å€’ç½®å\n\n1234567891011121314151617181920212223242526272829303132333435363738394041424344454647/** ç§°é‡æ¥å£*/interface Weigh &#123;    double read();&#125;/** æœ€å¤§é‡é‡ã€èŒƒå›´å†…ä»·æ ¼ã€èŒƒå›´å¤–ä»·æ ¼çš„è®¾ç½®*/interface Value&#123;    double highestValue();    double inPrice();    double outPrice();&#125;/** æ˜¾ç¤ºå™¨æ¥å£*/interface Show &#123;    void outWeighWarn(double diff);    void showWeigh(double weigh);    void showPrice(double price);&#125;class Scales&#123;    private Weigh mWeigh;    private Show mShow;    private Value mValue;    public Scales(Weigh mWeigh, Show mShow, Value mValue) &#123;        this.mShow = mShow;        this.mWeigh = mWeigh;        this.mValue = mValue;    &#125;    /**     * å½“æœ‰ç‰©ä½“æ”¾ä¸Šå»åç§°é‡     */    public void startScales() &#123;        mShow.showWeigh(mWeigh.read());        double price = 0;        double diff = mWeigh.read() - mValue.highestValue();        if (diff &gt; 0) &#123;            mShow.outWeighWarn(diff);            price += mValue.highestValue() * mValue.inPrice();            price += diff * mValue.outPrice();        &#125; else &#123;            price += mWeigh.read() * mValue.inPrice();        &#125;        mShow.showPrice(price);    &#125;&#125;\næˆ‘ä»¬å¯ä»¥çœ‹å‡ºä¾èµ–å€’ç½®åä½¿ä»£ç å¯å¤ç”¨ï¼Œå¯ä»¥æ˜¯ä»»æ„çš„ç§°é‡è£…ç½®ï¼Œå¯ä»¥æ˜¯ä»»æ„çš„æ˜¾ç¤ºè£…ç½®ï¼Œåªè¦å®ƒä»¬å®ç°å¯¹åº”çš„æ¥å£å³å¯ã€‚é«˜å±‚ä¸å¿…åœ¨æ„åº•å±‚å…·ä½“æ˜¯ä»€ä¹ˆä¸œè¥¿ã€‚\næ€»ç»“\nDIPçš„è§„åˆ™ï¼šä¾èµ–äºæŠ½è±¡ï¼Œä¸åº”è¯¥ä¾èµ–äºå…·ä½“ç±»ã€‚\nä»»ä½•å˜é‡éƒ½ä¸åº”è¯¥æŒæœ‰ä¸€ä¸ªæŒ‡å‘å…·ä½“ç±»çš„æŒ‡æ­£æˆ–è¿™å¼•ç”¨\nä»»ä½•ç±»éƒ½ä¸åº”è¯¥ä»å…·ä½“ç±»æ´¾ç”Ÿ\nä»»ä½•æ–¹æ³•éƒ½ä¸åº”è¯¥è¦†å†™å®ƒçš„ä»»ä½•åŸºç±»ä¸­å·²ç»å®ç°äº†çš„æ–¹æ³•\n\næ¯ä¸ªç¨‹åºéƒ½ä¼šæœ‰è¿åè¿™äº›è§„åˆ™çš„æƒ…å†µï¼Œæœ‰æ—¶å¿…é¡»åˆ›å»ºå…·ä½“ç±»çš„å®ä¾‹ã€‚æ­¤å¤–ï¼Œè¿™äº›è§„åˆ™å¯¹äºé‚£äº›å…·ä½“ä½†å´ç¨³å®šçš„ç±»æ¥è¯´ä¼¼ä¹ä¸å¤ªåˆç†ã€‚å¦‚æœä¸€ä¸ªå…·ä½“ç±»ä¸å¤ªä¼šæ”¹å˜ï¼Œå¹¶ä¸”ä¹Ÿä¸ä¼šåˆ›å»ºå…¶ä»–ç±»ä¼¼çš„æ´¾ç”Ÿç±»ï¼Œé‚£ä¹ˆä¾èµ–äºå®ƒå¹¶ä¸ä¼šé€ æˆæŸå®³ï¼Œæ¯”å¦‚è¯´Stringç±»å‹ã€‚\n\nç„¶è€Œï¼Œæˆ‘ä»¬ç¼–å†™çš„å¤§å¤šæ•°å…·ä½“ç±»éƒ½æ˜¯ä¸ç¨³å®šçš„ï¼Œæˆ‘ä»¬å°†å®ƒä»¬éšè—åœ¨æŠ½è±¡æ¥å£åé¢ï¼Œéš”ç¦»å®ƒä»¬çš„ä¸ç¨³å®šæ€§ã€‚\n\nç”±äºæŠ½è±¡å°†é«˜å±‚å’Œç»†èŠ‚å½¼æ­¤éš”ç¦»ï¼Œæ‰€ä»¥ä»£ç ä¹Ÿéå¸¸å®¹æ˜“ç»´æŠ¤\n\n\nå‚è€ƒæ–‡çŒ®æ•æ·è½¯ä»¶å¼€å‘ ç¬¬12ç«  ä¾èµ–å€’ç½®åŸåˆ™ï¼ˆDIPï¼‰\n","plink":"https://blog.xujiaji.com/post/ood-dip/"},{"title":"é¢å‘å¯¹è±¡è®¾è®¡-æ¥å£éš”ç¦»(ISP)","date":"2016-05-07T02:12:00.000Z","author":"xujiaji","updated":"2019-04-08T06:56:38.340Z","content":"å¼•å…¥ï¼š\n\nè€æ‰‹æœºï¼š ä½ ä»¬è¿™äº›å¹´è½»æ‰‹æœºå…‰æºœæºœçš„ï¼Œå…¨èº«ä¸Šä¸‹åªæœ‰ä¸¤ä¸ªæ’å­”å‡ ä¸ªæŒ‰é’®ï¼Œä¸ºå•¥è¿™ä¹ˆå—æ¬¢è¿ï¼Ÿæ–°æ‰‹æœºï¼šè€å‰è¾ˆï¼Œæ‚¨è™½ç„¶å äº†ä¸€åŠéƒ½æ˜¯æŒ‰é’®ï¼Œå¯ä»¥å¿«é€Ÿçš„ç‚¹åˆ°ï¼Œä½†æ˜¯å¤šæ•°æƒ…å†µä¸‹éƒ½æ²¡ç”¨å‘€ï¼æˆ‘è™½ç„¶åªæœ‰å‡ ä¸ªæŒ‰é’®ï¼Œä½†éƒ½æ˜¯ç»å¸¸ç”¨åˆ°æ»´ã€‚æˆ‘ä¹Ÿèƒ½è¾¾åˆ°å’Œä½ ä¸€æ ·çš„æ•ˆæœï¼Œè€Œä¸”æ›´ç®€æ´ã€‚è€æ‰‹æœºï¼šæ©ï¼Œäººä»¬åªæœ‰æ‰“å­—çš„æ—¶å€™æ‰ç”¨åˆ°é‚£äº›æŒ‰é’®ã€‚æ–°æ‰‹æœºï¼šæ‰€ä»¥åœ¨å¹³å¸¸æ—¶å€™ï¼Œæˆ‘è¿™å‡ ä¸ªæŒ‰é’®å°±å¯ä»¥æ»¡è¶³å¤§éƒ¨åˆ†éœ€è¦äº†ã€‚è€æ‰‹æœºï¼šçœŸæ˜¯ä¸€ä»£æ¯”ä¸€ä»£å¼ºå’¯ï¼\n\n\n\nISP\n\n\n1.ä½•ä¸ºISPï¼Ÿ\nå…¨ç§°ï¼šæ¥å£éš”ç¦»åŸåˆ™ï¼ˆInterface Segregation Principleï¼‰\nå®šä¹‰ï¼šå®¢æˆ·ç¨‹åºä¸åº”è¯¥è¢«è¿«ä¾èµ–äºå®ƒä»¬ä¸ä½¿ç”¨çš„æ–¹æ³•\n\n2.å¦‚ä½•ç†è§£ISPï¼Ÿ\næ¯”å¦‚å›¾2-1.è¿åäº†ISPä¸­çš„é¸µé¸Ÿç±»ä¸åº”è¯¥è¢«è¿«ä¾èµ–äºä¸ä½¿ç”¨çš„é£ç¿”æ–¹æ³•\n\n\nç°åœ¨å°†2-1.æ»¡è¶³ISPçš„ä¾‹å­ä¸­çš„æ¥å£é¸Ÿè¿›è¡Œæ‹†åˆ†ï¼Œèƒ½é£çš„é¸Ÿç±»éº»é›€å®ç°æ¥å£é£é¸Ÿï¼Œä¸èƒ½é£çš„é¸Ÿç±»é¸µé¸Ÿå®ç°æ¥å£é¸Ÿï¼Œå¦‚ä¸‹å›¾2-2æ‰€ç¤ºã€‚\n\n\n\nå¯èƒ½åˆ°è¿™é‡Œå¤§å®¶æœ‰ä¸ªç–‘æƒ‘ï¼šæ¥å£å˜å¤šäº†ï¼å¯¹ï¼å°±æ˜¯æ¥å£å˜å¤šäº†ã€‚ä¸æ˜¯ä¸Šé¢è¿˜ä¸¾ä¾‹äº†æ‰‹æœºçš„ä¾‹å­å—ï¼Ÿé˜æ˜äº†å‡å°‘æ¥å£çš„å¥½å¤„ã€‚\nå…¶å®æˆ‘ä»¬å‡å°‘å¹¶ä¸æ˜¯æ¥å£ï¼Œè€Œæ˜¯æ¥å£ä¸­çš„æŠ½è±¡æ–¹æ³•ã€‚\né€šè¿‡åˆ†ç¦»æ¥æ»¡è¶³å®¢æˆ·ç«¯çš„éœ€æ±‚ï¼Œä½¿å®¢æˆ·ç«¯ç¨‹åºä¸­åªå­˜åœ¨éœ€è¦çš„æ–¹æ³•ã€‚\nå®¢æˆ·ç«¯çš„ä¸åŒéœ€æ±‚æ‰æ˜¯å¯¼è‡´æ¥å£æ”¹å˜çš„åŸå› ã€‚\n\n\n\n3.éµå¾ªISPæœ‰ä»€ä¹ˆå¥½å¤„ï¼Ÿ\nä¸éµå¾ªISPè€Œå¯¼è‡´çš„ä¸€äº›é—®é¢˜ï¼Œåœ¨å›¾2-1ä¸­ï¼Œé¸µé¸Ÿæ˜¯ä¸éœ€è¦é£çš„ï¼Œä½†ä¿ç•™äº†é£çš„æ–¹æ³•ã€‚\n\nç°åœ¨æ¥å£ä¸­çš„é£()æ–¹æ³•éœ€è¦è¿›è¡Œæ”¹åŠ¨ï¼Œå‡å¦‚æ”¹æˆï¼šboolean fly()â€”å¯ä»¥ç†è§£ä¸ºè°ƒç”¨ä¸€æ¬¡å‘ä¸Šé£ï¼Œå†è°ƒç”¨ä¸€æ¬¡å‘ä¸‹é£ï¼Œä¾æ¬¡å¾ªç¯ã€‚\nç°åœ¨ä¸ä»…ä¼šé£çš„é¸Ÿéœ€è¦æ”¹åŠ¨ï¼Œè¿é¸µé¸Ÿè¿™äº›ä¸ä¼šé£çš„é¸Ÿéƒ½è¦è«åå¥‡å¦™çš„è·Ÿç€å»æ”¹åŠ¨ã€‚\næ˜¾ç„¶è¿™å¯¼è‡´äº†ç¨‹åºä¹‹é—´çš„è€¦åˆå¢å¼ºï¼Œå½±å“åˆ°äº†ä¸åº”è¯¥å½±å“çš„å®¢æˆ·ç¨‹åº\n\n\nç°åœ¨æ­£è¿‡æ¥çœ‹éµå¾ªISPæ¥å£ï¼Œå¦‚å›¾2-2æ‰€ç¤ºçš„ä¾‹å­ï¼Œåˆ†ç¦»äº†æ–¹æ³•é£ï¼Œä½¿å¾—æ›´æ”¹æ—¶å¹¶ä¸ä¼šå½±å“åˆ°ä¸ç›¸å¹²çš„å®¢æˆ·ç¨‹åºï¼ˆé¸µé¸Ÿç±»ï¼‰\n\néœ€è¦å°½å¯èƒ½é¿å…è¿™ç§è€¦åˆï¼Œå› æ­¤æˆ‘ä»¬å¸Œæœ›åˆ†ç¦»æ¥å£ã€‚\nå¯ä»¥çœ‹å‡ºï¼Œåˆ†ç¦»æ¥å£æœ‰åˆ©äºæˆ‘ä»¬å¯¹éœ€æ±‚å˜æ›´æ—¶çš„å¿«é€Ÿé«˜æ•ˆçš„æ‰§è¡Œè¡ŒåŠ¨ã€‚\nå¹¶ä¸”ä½¿ä¹‹è§£æ„å±‚æ¬¡æ›´åŠ çš„åˆ†æ˜\n\n\n\n4.å¾ªåºæ¸è¿›çš„ä¾‹å­ï¼ˆæ¥è‡ªæ•æ·è½¯ä»¶å¼€å‘[^foot1]ï¼‰\nä»¥ATMç”¨æˆ·ç•Œé¢ä¸ºä¾‹\n\n\nATMçš„ç”¨æˆ·ç•Œé¢æœ‰ä¸åŒçš„äº¤æ˜“æ¨¡å¼ï¼Œç°å°†ä»ATMçš„åŸºç±»Transactionï¼ˆäº¤æ˜“ç±»ï¼‰ä¸­æ´¾ç”Ÿå­ç±»ï¼š\n\nDepositTransactionå­˜æ¬¾\nWithdrawalTransactionå–æ¬¾\nTransferTransactionè½¬è´¦\n\n\næ¯ä¸€ä¸ªå­ç±»äº¤æ˜“éƒ½æœ‰ä¸€ä¸ªç•Œé¢ï¼Œå› æ­¤è¦ä¾èµ–äºUIï¼Œè°ƒç”¨çš„ä¸åŒæ–¹æ³•ï¼Œå¦‚ï¼šDepositTransactionä¼šè°ƒç”¨UIç±»ä¸­çš„RequestDepositAmount()æ–¹æ³•ï¼Œå½“å‰ATMç»“æœå¦‚ä¸‹å›¾4-2-1.ATMæ“ä½œè§£æ„æ‰€ç¤ºã€‚\n\nè¿™æ ·åšæ˜¯ISPå‘Šè¯‰æˆ‘ä»¬åº”å½“é¿å…çš„æƒ…å½¢\næ¯ä¸ªæ“ä½œä½¿ç”¨çš„UIæ–¹æ³•ï¼Œå…¶ä»–çš„æ“ä½œéƒ½ä¸ä¼šä½¿ç”¨\nå½“æ¯æ¬¡Transactionå­ç±»çš„æ”¹åŠ¨éƒ½ä¼šè¿«ä½¿å¯¹UIè¿›è¡Œæ”¹åŠ¨ï¼Œä»è€Œå½±å“åˆ°äº†å…¶ä»–æ‰€æœ‰Transactionå­ç±»åŠå…¶ä»–æ‰€æœ‰ä¾èµ–äºUIæ¥å£çš„ç±»ã€‚\nå½“è¦å¢åŠ ä¸€ä¸ªæ”¯ä»˜ç…¤æ°”è´¹çš„äº¤æ˜“æ—¶ï¼Œä¸ºäº†å¤„ç†è¯¥æ“ä½œæƒ³è¦æ˜¾ç¤ºçš„ç‰¹å®šæ¶ˆæ¯ï¼Œå°±éœ€è¦åœ¨UIä¸­åŠ å…¥æ–°çš„æ–¹æ³•ã€‚ç³Ÿç³•çš„æ˜¯ï¼Œç”±äºTransactionçš„å­ç±»å…¨éƒ¨ä¾èµ–äºUIæ¥å£ï¼Œæ‰€ä»¥å®ƒä»¬éƒ½éœ€è¦é‡æ–°ç¼–è¯‘ã€‚\n\n\nå› æ­¤ç°åœ¨æœ‰ä¸€ä¸ªåŠæ³•ï¼Œå°†UIæ¥å£åˆ†è§£æˆåƒDepositUIã€WithdrawalUIä»¥åŠTransferUIè¿™æ ·çš„å•ç‹¬æ¥å£ï¼Œå¯ä»¥é¿å…è¿™ç§ä¸åˆé€‚çš„è€¦åˆï¼Œæœ€ç»ˆçš„UIæ¥å£å¯ä»¥å»å¤šé‡ç»§æ‰¿è¿™äº›å•ç‹¬çš„æ¥å£ã€‚å›¾5-3-1.åˆ†ç¦»çš„ATMæ¥å£å’Œä¹‹åçš„ä»£ç å±•ç¤ºäº†è¿™ä¸ªæ¨¡å‹ã€‚\n\nå®šä¹‰äº¤æ˜“æ¥å£\n\n12345678910111213141516171819/** å­˜æ¬¾UIæ¥å£*/interface DepositUI &#123;    void RequestDepositAmount();&#125;/** å–æ¬¾UIæ¥å£*/interface WithdrawalUI &#123;    void RequestWithdrawalAmount();&#125;/** è½¬è´¦UIæ¥å£*/interface TransferUI &#123;    void RequestTransferAmount();&#125;/** UIæ¥å£ç»§æ‰¿æ‰€æœ‰çš„äº¤æ˜“æ¥å£*/interface UI extends DepositUI, WithdrawalUI, TransferUI&#123;&#125;\n\näº¤æ˜“æŠ½è±¡ç±»\n\n1234/** äº¤æ˜“ç±»*/abstract class Transaction &#123;    public abstract void Execute();&#125;\n\näº¤æ˜“æ´¾ç”Ÿç±»\n\n123456789101112131415161718192021222324252627282930313233343536373839404142/** å­˜æ¬¾äº¤æ˜“ç±»*/class DepositTransaction extends Transaction &#123;    private DepositUI mDepositUI;    public DepositTransaction(DepositUI mDepositUI) &#123;        this.mDepositUI = mDepositUI;    &#125;    @Override    public void Execute() &#123;        //...        mDepositUI.RequestDepositAmount();        //...    &#125;&#125;/** å–æ¬¾äº¤æ˜“ç±»*/class WithdrawalTransaction extends Transaction &#123;    private WithdrawalUI mWithdrawalUI;    public WithdrawalTransaction(WithdrawalUI mWithdrawalUI) &#123;        this.mWithdrawalUI = mWithdrawalUI;    &#125;    @Override    public void Execute() &#123;        //...        mWithdrawalUI.RequestWithdrawalAmount();        //...    &#125;&#125;/** è½¬è´¦äº¤æ˜“ç±»*/class TransferTransaction extends Transaction &#123;    private TransferUI mTransferUI;    public TransferTransaction(TransferUI mTransferUI) &#123;        this.mTransferUI = mTransferUI;    &#125;    @Override    public void Execute() &#123;        //...        mTransferUI.RequestTransferAmount();        //...    &#125;&#125;\n\nåˆ›å»ºäº¤æ˜“å¯¹è±¡ï¼šç”±äºæ¯ä¸ªæ“ä½œéƒ½å¿…é¡»ä»¥ç‰¹å®šçš„æ–¹å¼çŸ¥æ™“UIç‰ˆæœ¬ï¼Œå¦‚TransferTransactionå¿…é¡»çŸ¥é“TransferUIã€‚åœ¨ç¨‹åºä¸­ï¼Œä½¿æ¯ä¸ªæ“ä½œçš„æ„é€ æ—¶ç»™å®ƒä¼ å…¥æŒ‡å‘ç‰¹å®šäºå®ƒçš„UIçš„å¼•ç”¨ï¼Œä»è€Œè§£å†³è¿™ä¸ªé—®é¢˜ã€‚å¦‚ä¸‹è¿›è¡Œåˆå§‹åŒ–\n\n1234UI GUI;void fun() &#123;    DepositTransaction mDepositTransaction = new DepositTransaction(GUI);&#125;\n\nè™½ç„¶è¿™æ ·å¾ˆæ–¹ä¾¿ï¼Œä½†åŒæ ·è¦æ±‚æ¯ä¸ªæ“ä½œéƒ½æœ‰ä¸€ä¸ªæŒ‡å‘å¯¹åº”UIçš„å¼•ç”¨æˆå‘˜ã€‚å¦å¤–ä¸€ç§è§£å†³è¿™ä¸ªé—®é¢˜çš„æ–¹æ³•æ˜¯åˆ›å»ºä¸€ç»„å…¨å±€å¸¸é‡ã€‚å…¨å±€å˜é‡å¹¶ä¸æ€»æ˜¯æ„å‘³ç€æ‹™åŠ£çš„è®¾è®¡ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå®ƒä»¬æœ‰ç€æ˜æ˜¾çš„æ˜“äºè®¿é—®çš„æœ‰ç‚¹ã€‚\n\n1234567891011/** UIå…¨å±€å˜é‡*/class UIGlobals &#123;    public static DepositUI mDepositUI;    public static WithdrawalUI mWithdrawalUI;    public static TransferUI mTransferUI;    public UIGlobals(UI lui) &#123;        UIGlobals.mDepositUI = lui;        UIGlobals.mWithdrawalUI = lui;        UIGlobals.mTransferUI = lui;    &#125;&#125;\n123456789/** è½¬è´¦äº¤æ˜“ç±»*/class TransferTransaction extends Transaction &#123;    @Override    public void Execute() &#123;        //...        UIGlobals.mTransferUI.RequestTransferAmount();        //...    &#125;&#125;\n1234567891011121314151617181920/** * UIçš„å®ç°ç±» */class UIEntity implements UI &#123;    @Override    public void RequestDepositAmount() &#123;        //...    &#125;    @Override    public void RequestTransferAmount() &#123;        //...    &#125;    @Override    public void RequestWithdrawalAmount() &#123;        //...    &#125;&#125;\n12345678910111213/** * ä½¿ç”¨ */class A &#123;    //åˆå§‹åŒ–UIé™æ€ç±»    UIGlobals mUIGlobals = new UIGlobals(new UIEntity());    //è°ƒç”¨å§¿åŠ¿    void fun() &#123;        Transaction mTransaction = new TransferTransaction();        mTransaction.Execute();    &#125;&#125;\n\nç”±äºæ•æ·è½¯ä»¶å¼€å‘ä¸¾çš„ä¾‹å­æ˜¯c++çš„ï¼ŒçŸ¥è¯†æœ‰é™ï¼Œè¡¨ç¤ºå¾ˆå¤šçœ‹ä¸æ‡‚ï¼Œå¯èƒ½æœ‰äº›åœ°æ–¹åå·®è¾ƒå¤§ï¼Œæƒ³äº†è§£æ›´å¤šå»ºè®®äº²è‡ªå»çœ‹çœ‹( Â¯â–½Â¯ï¼›)\n\n\n5.æ€»ç»“\nèƒ–ç±»ï¼ˆfat classï¼‰ï¼šå°±æ˜¯ä¸Šè¾¹è®²è§£çš„ä¸æ»¡è¶³ISPçš„ç±»å‹\n\nå¯ä»¥çœ‹å‡ºèƒ–ç±»å¢å¼ºäº†ç±»ä¹‹é—´çš„è€¦åˆï¼Œä½¿å¾—å¯¹è¯¥èƒ–ç±»è¿›è¡Œæ”¹åŠ¨ä¼šå½±å“åˆ°æ‰€æœ‰å…¶ä»–ç±»ã€‚\n\né€šè¿‡å°†èƒ–ç±»æ¥å£åˆ†è§£æˆå¤šä¸ªç‰¹å®šç±»ï¼ˆå®¢æˆ·ç«¯ç¨‹åºï¼‰çš„æ¥å£ï¼Œä½¿å¾—å¼ºè€¦åˆå¾—ä»¥è§£å†³\n\nç„¶åè¯¥èƒ–ç±»ç»§æ‰¿æ‰€æœ‰ç‰¹å®šç±»çš„æ¥å£ï¼Œå¹¶å®ç°å®ƒä»¬ã€‚å°±è§£é™¤äº†è¿™ä¸ªç‰¹å®šç±»å’Œå®ƒæ²¡æœ‰è°ƒç”¨æ–¹æ³•é—´çš„ä¾èµ–å…³ç³»ï¼Œå¹¶ä½¿å¾—è¿™äº›ç‰¹å®šç±»ä¹‹é—´äº’ä¸ä¾èµ–ã€‚\n\n\n6.å‚è€ƒæ–‡çŒ®\næ•æ·è½¯ä»¶å¼€å‘  ç¬¬12ç«    æ¥å£éš”ç¦»åŸåˆ™ï¼ˆISPï¼‰\nå¦‚ä½•å‘å¦»å­è§£é‡ŠOOD\n\n","plink":"https://blog.xujiaji.com/post/ood-isp/"},{"title":"é¢å‘å¯¹è±¡è®¾è®¡-é‡Œæ°æ›¿æ¢åŸåˆ™(LSP)","date":"2016-04-23T03:02:00.000Z","author":"xujiaji","updated":"2019-04-08T06:56:42.415Z","content":"å¼•ï¼š\n\næœ‰ä¸€åªå°éº»é›€åœ¨å¤§å¹³åŸä¸Šï¼Œé£å‘€é£ï½ã€‚é£ç´¯äº†ï¼Œçœ‹è§å‰æ–¹ä¸€ä¸ªå¤§é¸Ÿâ€¦å°éº»é›€ï¼šå¤§é¸Ÿå…„ä½ å¥½ï¼Œæœ¬é¸Ÿå«éº»é›€ï¼è¯·é—®æ‚¨æ€ä¹ˆç§°å‘¼ï¼Ÿå¤§é¸µé¸Ÿï¼šåŸæ¥æ˜¯éº»é›€å°å¼Ÿå‘€ï¼æœ¬é¸Ÿå«é¸µé¸Ÿï¼å°éº»é›€ï¼šé¸µé¸Ÿå“¥è€¶ï¼å°å¼Ÿé£çš„ç´¯çš„ä¸è¡Œï¼è®©å…„å¼Ÿåœ¨æ‚¨é›„ä¼Ÿçš„èº«èº¯ä¸Šæ­‡æ­‡è„šä¹ˆï¼Ÿå¤§é¸µé¸Ÿï¼šä¸è¡Œï¼æœ¬é¸Ÿè¿˜èµ°ç´¯äº†å‘¢ï¼é‚£æˆ‘å’‹åŠï¼Ÿå°éº»é›€ï¼šä½ é£å‘—ï¼éš¾é“æˆ‘è¿˜æ‹–ç€ä½ ä¸æˆï¼Ÿå¤§é¸µé¸Ÿï¼šå‰ææ˜¯æˆ‘è¦æ˜¯èƒ½é£çš„èµ·æ¥å‘€ï¼å°éº»é›€ï¼šå¼€ä»€ä¹ˆç©ç¬‘ï¼å’±ä»¬éƒ½æ˜¯é¸Ÿï¼Œä½ é£ä¸èµ·æ¥ï¼Ÿâ€œé£â€æ˜¯å’‹ä»¬é¸Ÿç±»çš„ç‰¹å¾ï¼Œæƒ³åˆ°é£å°±æƒ³åˆ°å’‹ä»¬é¸Ÿï½ã€‚\n\n\n\nLSP\n\n\n1. ä½•ä¸ºLSPï¼Ÿ\nå…¨ç§°ï¼šé‡Œæ°æ›¿æ¢åŸåˆ™ï¼ˆLiskov Substitution principleï¼‰\nå®šä¹‰ï¼šæ´¾ç”Ÿç±»ï¼ˆå­ç±»ï¼‰å¯¹è±¡èƒ½å¤Ÿæ›¿æ¢å…¶åŸºç±»ï¼ˆè¶…ç±»ï¼‰å¯¹è±¡è¢«ä½¿ç”¨[^foot1]\nBarbara Liskovå¯¹LSPå®šä¹‰æ˜¯è¿™ä¹ˆè¯´çš„ï¼šè‹¥å¯¹æ¯ä¸ªç±»å‹Sçš„å¯¹è±¡q1ï¼Œéƒ½å­˜åœ¨ä¸€ä¸ªç±»å‹Tçš„å¯¹è±¡q2ï¼Œä½¿å¾—åœ¨æ‰€æœ‰å¯¹Tç¼–å†™çš„ç¨‹åºPä¸­ï¼Œç”¨q1æ›¿æ¢q2åï¼Œç¨‹åºPè¡Œä¸ºåŠŸèƒ½ä¸å˜ï¼Œåˆ™Sæ˜¯Tçš„å­ç±»å‹ã€‚å¬ç€æœ‰äº›ç»•ï¼Œæˆ‘å°†å®ƒç”»ä¸€ä¸ªç±»å›¾ä¾¿äºç†è§£ï¼š\nLSPå®šä¹‰ç†è§£dsfåœ¨ç±»Pä¸­å°†Tçš„å¯¹è±¡q2ï¼Œæ¢æˆSçš„å¯¹è±¡q1è¡Œä¸ºåŠŸèƒ½ä¸å˜åˆ™Sç»§æ‰¿Tï¼Œå¾—å¦‚å›¾æ‰€ç¤ºçš„å…³ç³»\n\n\n\n\n\n\n2. ä½•ä¸ºLï¼Ÿä½•ä¸ºSï¼ŸL:èŠ­èŠ­æ‹‰Â·åˆ©æ–¯ç§‘å¤«ï¼ˆBarbara Liskovï¼‰å› ä¸ºæå‡ºè¿™ä¸ªåŸåˆ™çš„å¥³å£«å§“é‡ŒS:æ›¿æ¢ï¼ˆSubstitutionï¼‰çˆ¶ç±»èƒ½è¢«å­ç±»æ›¿æ¢\n\næ›¿æ¢å¦‚ä¸Šè¿°å®šä¹‰æ‰€è¿°ï¼Œå­ç±»æ›¿æ¢çˆ¶ç±»åä¸ä¼šå½±å“å…¶è¡Œä¸ºå’ŒåŠŸèƒ½ã€‚\n\n3. ä¸ºä½•è¦æœ‰LSPï¼Ÿ\nâ‘ é¦–å…ˆè°ˆè°ˆè¦æ˜¯è¿åLSP\n\n\næ¥å¼ è¿åLSPçš„ç±»å›¾\n\n\n\nåˆ†æ\n\nç°åœ¨æˆ‘è¯´å¤©ä¸Šé£ç€ä¸€åªé¸Ÿã€‚ã€‚ã€‚\nå­ç±»éº»é›€æ›¿æ¢çˆ¶ç±»ï¼šå¤©ä¸Šé£ç€ä¸€åªéº»é›€ã€‚\nå­ç±»é¸µé¸Ÿæ›¿æ¢çˆ¶ç±»ï¼šå¤©ä¸Šé£ç€ä¸€åªé¸µé¸Ÿã€‚\n\n\nç”±ä¸Šå› ä¸ºè¿åäº†é‡Œæ°æ›¿ä»£åŸåˆ™ï¼Œå¯¼è‡´æ•´ä¸ªè®¾è®¡å­˜åœ¨ä¸¥é‡é€»è¾‘é”™è¯¯ã€‚\n\nç”±äºè¿åäº†é‡Œæ°æ›¿ä»£åŸåˆ™ï¼Œé—´æ¥çš„è¿åäº†OCPåŸåˆ™[^foot2]ã€‚å› ä¸ºæ˜æ˜¾å¯ä»¥çœ‹å‡ºé£ç¿”å¯¹äºé¸µé¸Ÿå› è¯¥æ˜¯å°é—­çš„ã€‚\n\n\nâ‘¡å†æ¥çœ‹ä¸€äº›ä»£ç ï¼ˆLSPçš„è¿åå¯¼è‡´OCPçš„è¿åï¼‰\n\n\nä»£ç å¦‚ä¸‹\n\næœ‰ä¸‰ä¸ªç±»ï¼šé¸Ÿã€é¸µé¸Ÿã€éº»é›€ã€‚é¸µé¸Ÿå’Œéº»é›€éƒ½æœ‰è¦å»åŒ—äº¬çš„æ–¹æ³•\n1234567891011121314151617181920212223242526272829303132333435/** * é¸Ÿ */class Bird&#123;    public static final int IS_OSTRICH = 1;//æ˜¯é¸µé¸Ÿ    public static final int IS_SPARROW = 2;//æ˜¯éº»é›€    public int isType;    public Bird(int isType) &#123;        this.isType = isType;    &#125;&#125;/** * é¸µé¸Ÿ */class Ostrich extends Bird&#123;    public Ostrich() &#123;        super(Bird.IS_OSTRICH);    &#125;    public void toBeiJing()&#123;        System.out.print(\"è·‘ç€å»åŒ—äº¬ï¼\");    &#125;&#125;/** * éº»é›€ */class Sparrow extends Bird&#123;    public Sparrow() &#123;        super(Bird.IS_SPARROW);    &#125;    public void toBeiJing()&#123;        System.out.print(\"é£ç€å»åŒ—äº¬ï¼\");    &#125;&#125;\nç°åœ¨æœ‰ä¸€ä¸ªæ–¹æ³•birdLetGoï¼Œç»Ÿä¸€å¤„ç†å»åŒ—äº¬çš„è¡Œä¸º\n123456789public void birdLetGo(Bird bird) &#123;    if (bird.isType == Bird.IS_OSTRICH) &#123;        Ostrich ostrich = (Ostrich) bird;        ostrich.toBeiJing();    &#125; else if (bird.isType == Bird.IS_SPARROW) &#123;        Sparrow sparrow = (Sparrow) bird;        sparrow.toBeiJing();    &#125;&#125;\n\nåˆ†æå¤§å®¶å¯ä»¥çœ‹å‡ºï¼ŒbirdLetGoæ–¹æ³•æ˜æ˜¾çš„è¿åäº†å¼€é—­åŸåˆ™[^foot2]ï¼Œå®ƒå¿…é¡»è¦çŸ¥é“æ‰€æœ‰Birdçš„å­ç±»ã€‚å¹¶ä¸”æ¯æ¬¡åˆ›å»ºä¸€ä¸ªBirdå­ç±»å°±å¾—ä¿®æ”¹å®ƒä¸€æ¬¡ã€‚\n\n\nâ‘¢ç»“è®º\n\nç”±ä¸Šé¢çš„åˆ†æå¯ä»¥å¤§è‡´çš„äº†è§£äº†éµå®ˆLSPçš„é‡è¦æ€§äº†å§ï¼\n\nå¦‚æœä¸éµå®ˆï¼Œå¯¼è‡´é€»è¾‘è®¾è®¡ç¼ºé™·\nå¦‚æœä¸éµå®ˆï¼Œå¯¼è‡´åŒæ—¶è¿åå¼€é—­åŸåˆ™\nå•ä¸ªæ¨¡å‹ï¼Œå­¤ç«‹æ—¶å¹¶ä¸å…·æœ‰è®¾è®¡æ„ä¹‰ã€‚å½“å¤šä¸ªæ¨¡å‹å‡ºç°æ—¶ï¼ŒæŠ½è±¡æå–å…±åŒç‰¹å¾ä½œä¸ºçˆ¶ç±»ï¼ˆåŸºç±»ï¼‰ï¼Œä½¿ä¹‹ä»»ä½•å­ç±»èƒ½æ›¿ä»£äºçˆ¶ç±»\nå¦‚æœè¯•å›¾é¢„æµ‹æ‰€æœ‰å‡è®¾ï¼Œæˆ‘ä»¬æ‰€å¾—åˆ°çš„ç»“æœå¯èƒ½ä¼šå……æ»¡å¾ˆå¤šä¸å¿…è¦çš„å¤æ‚æ€§ã€‚é€šå¸¸æœ€å¥½çš„åŠæ³•æ˜¯åªé¢„æµ‹é‚£äº›æœ€æ˜æ˜¾çš„LSPçš„è¿åçŠ¶æ€ï¼Œç›´åˆ°è®¾è®¡å¼€å§‹å‡ºç°è„†å¼±çš„çŠ¶æ€ï¼Œæ‰å»å¤„ç†å®ƒä»¬ã€‚[^foot3]\n\n4. åŸºäºå¥‘çº¦è®¾è®¡èƒ½æ”¯æŒLSPï¼Ÿ\nä»€ä¹ˆæ˜¯å¥‘çº¦è®¾è®¡ï¼Ÿ\né€šè¿‡ä¸ºæ¯ä¸ªæ–¹æ³•å£°æ˜çš„å‰ç½®æ¡ä»¶å’Œåç½®æ¡ä»¶[^foot4]æ¥æŒ‡å®šçš„ã€‚è¦æ˜¯ä½¿ä¸€ä¸ªæ–¹æ³•å¾—ä»¥æ‰§è¡Œï¼Œå‰ç½®æ¡ä»¶å¿…é¡»è¦ä¸ºçœŸã€‚æ‰§è¡Œå®Œæ¯•åï¼Œè¯¥æ–¹æ³•è¦ä¿è¯åç½®æ¡ä»¶ä¸ºçœŸã€‚\n\n\nä¸€ä¸ªä¾‹å­\n\n\nå‡ ä¸ªç»§æ‰¿å…³ç³»çš„ç±»\n\n1234567891011121314151617181920212223242526272829303132//åŠ¨ç‰©public class Animal &#123;    private String food;    public Animal(String food) &#123;        this.food = food;    &#125;    public String getFood() &#123;        return food;    &#125;&#125;//é¸Ÿclass Bird extends Animal&#123;    public Bird(String food) &#123;        super(food);    &#125;&#125;//é¸µé¸Ÿclass Ostrich extends Bird&#123;    public Ostrich() &#123;        super(\"è‰\");    &#125;&#125;//éº»é›€class Sparrow extends Bird&#123;    public Sparrow() &#123;        super(\"è™«å­\");    &#125;&#125;\n\nåœ¨åŠ¨ç‰©å›­å¯¹è±¡ä¸­è°ƒç”¨åƒçš„æ–¹æ³•\n\n12345678class Zoo &#123;    /**     * åƒæ—©é¤     */    public String eatBreakfast(Animal animal) &#123;        return animal.getFood();    &#125;&#125;\n\nåˆ†æ\n\n\nè¿™é‡Œçš„æ»¡è¶³å‰ç½®æ¡ä»¶å°±æ˜¯è°ƒç”¨æ–¹éœ€æ»¡è¶³èƒ½æ¥å—Stringè¿™ä¸ªé£Ÿç‰©ç±»å‹\næ»¡è¶³åç½®æ¡ä»¶å¯ä»¥çœ‹åšæ˜¯å‚æ•°å’Œè¿”å›ç±»å‹\nå‰ç½®æ¡ä»¶ä¸èƒ½æ›´å¼ºï¼Œåªèƒ½æ›´å¼±ï¼Œæ¯”å¦‚å¯ä»¥è¿™æ ·è°ƒç”¨ï¼š\n\n1Object food = new Zoo().eatBreakfast(new Animal(\"è‚‰\"));\n\nåç½®æ¡ä»¶å¯ä»¥æ›´å¼ºï¼Œæ¯”å¦‚å¯ä»¥è¿™æ ·å†™ï¼š\n\n1String food = new Zoo().eatBreakfast(new Ostrich());\n\nè¿™æ ·æˆ‘ä»¬å°±å¯ä»¥è¯´æ˜¯å‰ç½®æ¡ä»¶å’Œåç½®æ¡ä»¶å°±éƒ½å¾—ä»¥æ»¡è¶³\n\n5. ç»“è®ºæ€»ç»“\nå¦‚æœLSPæœ‰æ•ˆè¿ç”¨ï¼Œç¨‹åºä¼šå…·æœ‰æ›´å¤šçš„å¯ç»´æŠ¤æ€§ã€å¯é‡ç”¨æ€§å’Œå¥å£®æ€§\n\nLSPæ˜¯ä½¿OCPæˆä¸ºå¯èƒ½çš„ä¸»è¦åŸåˆ™ä¹‹ä¸€\n\næ­£æ˜¯å› ä¸ºå­ç±»çš„å¯æ›¿æ¢æ€§ï¼Œæ‰ä½¿å¾—çˆ¶ç±»æ¨¡å—æ— é¡»ä¿®æ”¹çš„æƒ…å†µå°±å¾—ä»¥æ‰©å±•\n\n\n6. å‚è€ƒæ–‡ç« \né‡Œæ°æ›¿æ¢åŸåˆ™-ç»´åŸºç™¾ç§‘\nOCP\næ•æ·è½¯ä»¶å¼€å‘  ç¬¬10ç«   é‡Œæ°æ›¿æ¢åŸåˆ™(LSP)\nå‰ç½®æ¡ä»¶å’Œåç½®æ¡ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ\n\n","plink":"https://blog.xujiaji.com/post/ood-lsp/"},{"title":"Android-UIäº‹ä»¶ä¼ é€’å°±æ˜¯è¿™ä¹ˆä¸ªäº‹å„¿","date":"2016-04-16T07:31:00.000Z","author":"xujiaji","updated":"2019-04-08T06:55:13.177Z","content":"\næˆ‘ä»¬å¯»æ‰¾çš„ï¼Œä¹Ÿåªä¸è¿‡æ˜¯å†…å¿ƒä¸–ç•Œçš„ç‰‡åˆ»å®‰å®ï¼Œä»¥åŠï¼Œé‚£æ ·ä¸€åœºç››å¤§çš„æ¸…æ¬¢ã€‚\n\nèŠèŠUIäº‹ä»¶ä¼ é€’\nä»€ä¹ˆæ˜¯UIäº‹ä»¶ï¼Ÿ\nè§¦æ‘¸å±å¹•ä¸­UIæ§ä»¶çš„é‚£ä¸€åˆ»å³ä¸ºäº‹ä»¶å‘ç”Ÿ\nMotionEventå¯¹è±¡åŒ…å«äº†æ‰€æœ‰çš„è§¦æ‘¸äº‹ä»¶ï¼Œå¦‚è§¦æ‘¸çš„ä½ç½®ã€å¤šæŒ‡è§¦æ‘¸ç­‰\nMotionEventæè¿°äº†å½“å‰çš„æ“ä½œç±»å‹ï¼Œä»¥ä¸‹ä¸ºå¸¸è§ç±»å‹(æ•°å­—ä»£è¡¨å¯¹åº”çš„å€¼)ï¼š\nACTION_DOWN = 0 æŒ‰ä¸‹\nACTION_UP = 1 æŠ¬èµ·\nACTION_MOVE = 2 ç§»åŠ¨\nACTION_CANCEL = 3 åŠ¨ä½œå–æ¶ˆ\nACTION_OUTSIDE = 4  åŠ¨ä½œè¶…å‡ºè¾¹ç•Œ\nACTION_POINTER_DOWN = 5 å·²æœ‰ä¸€ä¸ªç‚¹è¢«æŒ‰ä½ï¼Œæ­¤æ—¶å†æŒ‰ä¸‹ä¸€ä¸ªç‚¹\nACTION_POINTER_UP = 6 å¤šä¸ªç‚¹è¢«æŒ‰ä½ï¼Œéæœ€åæ”¾å¼€çš„ç‚¹éƒ½ä¼šè°ƒç”¨\n\n\n\näº‹ä»¶å¦‚ä½•ä¼ é€’ï¼Ÿ\nè‡ªå®šä¹‰çš„çˆ¶å¸ƒå±€å’Œå­å¸ƒå±€ï¼Œç”¨æ¥è§‚å¯Ÿäº‹ä»¶çš„å˜åŒ–(View1å’ŒButton1ä¸ºè‡ªå®šä¹‰Viewå’Œè‡ªå®šä¹‰Buttonï¼Œé»˜è®¤ä»¥è‡ªå®šä¹‰View1ä¸¾ä¾‹\n\n\nä¸Šå›¾ç®€ç•¥å…³ç³»å¦‚ä¸‹ï¼š\nÃ— ä¹‹å‰ä¸€ç›´ä»¥ä¸ºäº‹ä»¶æ˜¯ä»å­å¸ƒå±€å¼€å§‹ä¼ é€’åˆ°çˆ¶å¸ƒï¼Œå› ä¸ºä»¥ç›´è§‚çš„è§’åº¦æˆ‘ä»¬å…ˆç¢°åˆ°çš„æ˜¯å­å¸ƒå±€å¾—åˆ°é”™è¯¯çš„äº‹ä»¶é¡ºåºï¼šview1 --&gt; ViewGroup2 --&gt; ViewGroup1\nâˆš åæ¥æ‰çŸ¥é“äº‹ä»¶æ˜¯ä»çˆ¶å¸ƒå±€ä¼ é€’åˆ°å­å¸ƒå±€ï¼Œæ˜¯ç”±çˆ¶å¸ƒå±€åˆ¤æ–­ç‚¹å‡»ä½ç½®ä¸Šé¢æœ‰å­å¸ƒå±€ç„¶åå‘å­å¸ƒå±€ä¼ é€’ã€‚å¦‚æœäº‹ä»¶å‘å­å¸ƒå±€ä¼ é€’æ²¡æœ‰è¢«æ‹¦æˆªå’Œæ¶ˆè´¹ï¼Œé‚£ä¹ˆäº‹ä»¶åˆä¼šå‘çˆ¶å¸ƒå±€ä¼ é€’ã€‚æ­£ç¡®çš„æ²¡æœ‰è¢«æ‹¦æˆªå’Œæ¶ˆè´¹çš„äº‹ä»¶é¡ºåºï¼šActivity --&gt; ViewGroup1 --&gt; ViewGroup2 --&gt; View1 --&gt; ViewGroup2 --&gt; ViewGroup1 --&gt; Activity\nä»¥ä¸‹çš„Logä¸ºå½“æ‰‹æŒ‡å¯¹view1ç‚¹å‡»ã€æ»‘åŠ¨ã€æŠ¬èµ·æ—¶ï¼Œ\nå‘ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ä¼ é€’ï¼ˆ0.æŒ‰ä¸‹ï¼›1.æŠ¬èµ·ï¼› 2.ç§»åŠ¨ï¼‰ï¼š\n-1234567891011121314151617181920E/MainActivity: ----------- dispatchTouchEvent = 0E/ViewGroup1: ------------- dispatchTouchEvent = 0E/ViewGroup1: ------------- onInterceptTouchEvent = 0E/ViewGroup2: ------------- dispatchTouchEvent = 0E/ViewGroup2: ------------- onInterceptTouchEvent = 0E/View1: ------------------ dispatchTouchEvent = 0E/View1: ------------------ onTouchEvent = 0E/ViewGroup2: ------------- onTouchEvent = 0E/ViewGroup1: ------------- onTouchEvent = 0E/MainActivity: ----------- onTouchEvent = 0E/MainActivity: ----------- dispatchTouchEvent = 2E/MainActivity: ----------- onTouchEvent = 2E/MainActivity: ----------- dispatchTouchEvent = 2E/MainActivity: ----------- onTouchEvent = 2E/MainActivity: ----------- dispatchTouchEvent = 2E/MainActivity: ----------- onTouchEvent = 2E/MainActivity: ----------- dispatchTouchEvent = 1E/MainActivity: ----------- onTouchEvent = 1E/MainActivity: ----------- dispatchTouchEvent = 1E/MainActivity: ----------- onTouchEvent = 1\n\n\n\nè§‚å¯Ÿ\n\n\n\n\nå¯ä»¥çœ‹å‡ºäº‹ä»¶ç”±å¤–å±‚å¤§å¸ƒå±€åˆ°å†…éƒ¨å­å¸ƒå±€ä¼ è¿›å»ï¼Œåœ¨ä»å­å¸ƒå±€ä¼ å‡ºå»ï¼ˆActivity --&gt; ViewGroup1 --&gt; ViewGroup2 --&gt; View1 --&gt; ViewGroup2 --&gt; ViewGroup1 --&gt; Activityï¼‰\n\n\nç”±æ­¤logè¿˜å¯ä»¥çœ‹å‡ºï¼šå½“æŒ‰ä¸‹çš„äº‹ä»¶æ²¡æœ‰è¢«æ‹¦æˆªï¼Œé‚£ä¹ˆæ‰€æœ‰çŠ¶æ€çš„äº‹ä»¶éƒ½ç”±Activityè¿›è¡Œå¤„ç†\n\n\n\n\næ²¡æœ‰æ‹¦æˆªäº‹ä»¶æ—¶\n\n\nå¦‚ä½•æ‹¦æˆªï¼Ÿ\né€šè¿‡dispatchTouchEventå¯¹äº‹ä»¶è¿›è¡Œæ‹¦æˆªï¼Œå½“è¿”å›å€¼ä¸ºtrueçš„æ—¶å€™æ‹¦æˆªäº‹ä»¶\næ‹¦æˆªåäº‹ä»¶å°†ä¸ä¼šä¼ åˆ°å­å¸ƒå±€\nç°åœ¨ä»¥ViewGroup1ä¸ºä¾‹ï¼š\nè®©ViewGroup1ä¸­çš„dispatchTouchEventç›´æ¥è¿”å›true\nå½“æ‰‹æŒ‡å¯¹View1ç‚¹å‡»ã€ç§»åŠ¨ã€æŠ¬èµ·æ—¶\nå‘ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ä¼ é€’ï¼ˆ0.æŒ‰ä¸‹ï¼›1.æŠ¬èµ·ï¼› 2.ç§»åŠ¨ï¼‰\n   12345678910E/MainActivity: ----------------  dispatchTouchEvent = 0E/ViewGroup1: ------------------  dispatchTouchEvent = 0E/MainActivity: ----------------  dispatchTouchEvent = 2E/ViewGroup1: ------------------  dispatchTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 2E/ViewGroup1: ------------------  dispatchTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 2E/ViewGroup1: ------------------  dispatchTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 1E/ViewGroup1: ------------------  dispatchTouchEvent = 1\n\n\n\n\n\nè§‚å¯Ÿ\n\n\n\n\nå¯ä»¥çœ‹å‡ºäº‹ä»¶ä¼ é€’åˆ°ViewGroup1åè¢«æ‹¦æˆªï¼Œæ²¡æœ‰è¢«ä»»ä½•å¸ƒå±€æ¶ˆè´¹\n\n\nä¹Ÿå°±æ˜¯è¯´äº‹ä»¶è¿˜æ²¡è¢«æ¶ˆè´¹å°±è¢«æ‹¦æˆªä¼šå¯¼è‡´è§¦æ‘¸æ— æ•ˆ\n\n\næˆ‘ä»¬å¯ä»¥åœ¨dispatchTouchEventåˆ¤æ–­å“ªäº›æƒ…å†µéœ€è¦æ‹¦æˆªï¼Œå“ªäº›ä¸éœ€è¦æ‹¦æˆªå°±æ”¾äº‹ä»¶è¿‡å»ï¼ˆä»¥ä¸Šç›´æ¥è¿”å›äº†trueæ‹¦æˆªäº†æ‰€æœ‰æƒ…å†µçš„äº‹ä»¶ï¼‰\n\n\n\n\næ‹¦æˆªViewGroup1çš„æ‰€æœ‰äº‹ä»¶\n\n\nå¦‚ä½•è·å–ï¼Ÿ\né€šè¿‡onInterceptTouchEventè·å–äº‹ä»¶ï¼Œå½“è¿”å›å€¼ä¸ºtrueçš„æ—¶å€™è·å–äº‹ä»¶\nè·å–äº‹ä»¶åä¼šè°ƒç”¨onTouchEventæ–¹æ³•ï¼Œè°ƒç”¨è¿™ä¸ªæ–¹æ³•åï¼Œå¦‚æœæˆ‘ä»¬è®¾ç½®äº†OnTouchListenerï¼Œé‚£ä¹ˆè§¦æ‘¸ç›‘å¬å°†ä¼šè¢«è°ƒç”¨ã€‚ç°åœ¨ä»¥ViewGroup2ä¸ºä¾‹ï¼š\nè®©ViewGroup2ä¸­çš„onInterceptTouchEventç›´æ¥è¿”å›true\nå½“æ‰‹æŒ‡å¯¹View1ç‚¹å‡»ã€ç§»åŠ¨ã€æŠ¬èµ·æ—¶\nå‘ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ä¼ é€’ï¼ˆ0.æŒ‰ä¸‹ï¼›1.æŠ¬èµ·ï¼› 2.ç§»åŠ¨ï¼‰\n\n\n-12345678910111213141516E/MainActivity: ----------------  dispatchTouchEvent = 0E/ViewGroup1: ------------------  dispatchTouchEvent = 0E/ViewGroup1: ------------------  onInterceptTouchEvent = 0E/ViewGroup2: ------------------  dispatchTouchEvent = 0E/ViewGroup2: ------------------  onInterceptTouchEvent = 0E/ViewGroup2: ------------------  onTouchEvent = 0E/ViewGroup1: ------------------  onTouchEvent = 0E/MainActivity: ----------------  onTouchEvent = 0E/MainActivity: ----------------  dispatchTouchEvent = 2E/MainActivity: ----------------  onTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 2E/MainActivity: ----------------  onTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 2E/MainActivity: ----------------  onTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 1E/MainActivity: ----------------  onTouchEvent = 1\n\n\n\nè§‚å¯Ÿé—®é¢˜\nåŸå› \nè§£å†³\n\n\n\n\nå“å‘€å‘€~ï¼ä¸ºå•¥æˆ‘è·å–åˆ°äº†çš„äº‹ä»¶ä¹‹åï¼Œç§»åŠ¨å’ŒæŠ¬èµ·æ‰‹æŒ‡çš„äº‹ä»¶è¢«MainActivityåƒäº†ï¼æ„¤æ€’ï¼ï¼\nåŸæ¥onTouchEventå¦‚æœå¤„ç†æŒ‰ä¸‹äº‹ä»¶DOWNçš„æ—¶å€™æ²¡æœ‰è¿”å›trueã€‚å¦‚æœonTouchEventå¤„ç†DOWNæ—¶å€™è¿”å›falseï¼Œåˆ™è¡¨ç¤ºæ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ï¼Œäº‹ä»¶å°†ä¼šå›åˆ°çˆ¶å¸ƒå±€ï¼Œå¹¶ä¸”åç»­äº‹ä»¶å°†ä¸ä¼šå†ä¼ é€’è¿‡æ¥ã€‚\nonTouchEventæ–¹æ³•ä¸­åˆ¤æ–­ä¸ºæŒ‰ä¸‹DOWNäº‹ä»¶çš„æ—¶å€™ï¼Œè¿”å›trueå³ä¸‹é¢è¦è¯´çš„æ¶ˆè´¹\n\n\n\n\nå½“ViewGroup2äº‹ä»¶è·å–åˆ°äº†ï¼Œä½†æ²¡æœ‰æ¶ˆè´¹\n\n\nå¦‚ä½•æ¶ˆè´¹ï¼Ÿ\nä¸Šè¾¹å·²ç»æåˆ°è¿‡ï¼Œå°±æ˜¯è·å–äº‹ä»¶é—ç•™ä¸‹æ¥ä¸€ä¸ªé—®é¢˜ï¼šè·å–åˆ°äº†æŒ‰ä¸‹äº‹ä»¶ï¼Œä¸ºå•¥æ²¡ç»§ç»­è·å–åˆ°åç»­çš„äº‹ä»¶ï¼Ÿå°±æ˜¯å› ä¸ºæŒ‰ä¸‹æ—¶onTouchEventæ²¡æœ‰è¿”å›trueï¼Œå¯¼è‡´äº‹ä»¶ä»æ–°å›åˆ°çˆ¶å¸ƒå±€ï¼Œä¹Ÿå°±æ˜¯æ²¡æœ‰æ¶ˆè´¹äº‹ä»¶ã€‚\nç°åœ¨æ¥ç€ä»¥ViewGroup2ä¸ºä¾‹ï¼š\nè¿˜æ˜¯è®©ViewGroup2ä¸­çš„onInterceptTouchEventç›´æ¥è¿”å›true\næ·»åŠ ï¼šåœ¨onTouchEventæ–¹æ³•ä¸­æ·»åŠ åˆ¤æ–­if (event.getAction() == MotionEvent.ACTION_DOWN) {return true;}\nå½“æ‰‹æŒ‡å¯¹View1ç‚¹å‡»ã€ç§»åŠ¨ã€æŠ¬èµ·æ—¶\nå‘ç”Ÿçš„ä¸€ç³»åˆ—äº‹ä»¶ä¼ é€’ï¼ˆ0.æŒ‰ä¸‹ï¼›1.æŠ¬èµ·ï¼› 2.ç§»åŠ¨ï¼‰\n  123456789101112131415161718192021222324E/MainActivity: ----------------  dispatchTouchEvent = 0E/ViewGroup1: ------------------  dispatchTouchEvent = 0E/ViewGroup1: ------------------  onInterceptTouchEvent = 0E/ViewGroup2: ------------------  dispatchTouchEvent = 0E/ViewGroup2: ------------------  onInterceptTouchEvent = 0E/ViewGroup2: ------------------  onTouchEvent = 0E/MainActivity: ----------------  dispatchTouchEvent = 2E/ViewGroup1: ------------------  dispatchTouchEvent = 2E/ViewGroup1: ------------------  onInterceptTouchEvent = 2E/ViewGroup2: ------------------  dispatchTouchEvent = 2E/ViewGroup2: ------------------  onTouchEvent = 2E/MainActivity: ----------------  onTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 2E/ViewGroup1: ------------------  dispatchTouchEvent = 2E/ViewGroup1: ------------------  onInterceptTouchEvent = 2E/ViewGroup2: ------------------  dispatchTouchEvent = 2E/ViewGroup2: ------------------  onTouchEvent = 2E/MainActivity: ----------------  onTouchEvent = 2E/MainActivity: ----------------  dispatchTouchEvent = 1E/ViewGroup1: ------------------  dispatchTouchEvent = 1E/ViewGroup1: ------------------  onInterceptTouchEvent = 1E/ViewGroup2: ------------------  dispatchTouchEvent = 1E/ViewGroup2: ------------------  onTouchEvent = 1E/MainActivity: ----------------  onTouchEvent = 1\n\n\n\n\n\nè§‚å¯Ÿ\n\n\n\n\nç”±ä¸Šè¾¹logå¯ä»¥çœ‹å‡ºï¼Œç°åœ¨åœ¨ViewGroup2ä¸­çš„onTouchEventçš„æŒ‰ä¸‹äº‹ä»¶è¿”å›ä¸€ä¸ªtrueåï¼ŒæŒ‰ä¸‹äº‹ä»¶å¹¶æ²¡æœ‰åœ¨ä¼ é€’å›çˆ¶å¸ƒå±€ä¸­ï¼Œä½¿å¾—åç»­äº‹ä»¶éƒ½å°†èƒ½å¾—åˆ°\n\n\nå¯ä»¥çœ‹å‡ºå½“åç»­äº‹ä»¶ä¼ é€’è¿‡æ¥æ—¶ï¼ŒViewGroup2å·²ç»æ²¡æœ‰å†æ¬¡è°ƒç”¨onInterceptTouchEventæ–¹æ³•\n\n\næˆ‘ä»¬åªæ˜¯å°†æŒ‰ä¸‹DOWNçš„äº‹ä»¶è¿”å›trueï¼Œæ‰€ä»¥é™¤äº†æŒ‰ä¸‹äº‹ä»¶å…¶ä»–ç§»åŠ¨æˆ–æŠ¬èµ·çš„äº‹ä»¶activityéƒ½ä¹Ÿèƒ½è·å–åˆ°ã€‚å½“onTouchEventä¸ç®¡ä¸‰ä¸ƒäºŒåä¸€ç›´æ¥è¿”å›ä¸€ä¸ªtrueæ—¶ï¼Œactivityå°±ä¸ä¼šè·å–åˆ°äº‹ä»¶\n\n\n\n\nå½“æ¶ˆè´¹ViewGroup2çš„æŒ‰ä¸‹DOWNäº‹ä»¶æ—¶\n\n\n\nå½“ViewGroup2ä¸­onTouchEventç›´æ¥è¿”å›trueæ—¶\n\n\nButtonè·å–äº‹ä»¶æ˜¯æ€ä¹ˆå›äº‹ï¼Ÿ\nç°åœ¨å°†View1æ¢æˆButton1ï¼Œå…¶ä»–çš„æ¢å¤æœ€åˆçŠ¶æ€ï¼Œå…ˆæ¥çœ‹çœ‹è§¦æ‘¸çš„log\n12345678910111213141516171819202122232425262728E/MainActivity: -------------  dispatchTouchEvent = 0E/ViewGroup1: ---------------  dispatchTouchEvent = 0E/ViewGroup1: ---------------  onInterceptTouchEvent = 0E/ViewGroup2: ---------------  dispatchTouchEvent = 0E/ViewGroup2: ---------------  onInterceptTouchEvent = 0E/Button1: ------------------  dispatchTouchEvent = 0E/Button1: ------------------  onTouchEvent = 0E/MainActivity: -------------  dispatchTouchEvent = 2E/ViewGroup1: ---------------  dispatchTouchEvent = 2E/ViewGroup1: ---------------  onInterceptTouchEvent = 2E/ViewGroup2: ---------------  dispatchTouchEvent = 2E/ViewGroup2: ---------------  onInterceptTouchEvent = 2E/Button1: ------------------  dispatchTouchEvent = 2E/Button1: ------------------  onTouchEvent = 2E/MainActivity: -------------  dispatchTouchEvent = 2E/ViewGroup1: ---------------  dispatchTouchEvent = 2E/ViewGroup1: ---------------  onInterceptTouchEvent = 2E/ViewGroup2: ---------------  dispatchTouchEvent = 2E/ViewGroup2: ---------------  onInterceptTouchEvent = 2E/Button1: ------------------  dispatchTouchEvent = 2E/Button1: ------------------  onTouchEvent = 2E/MainActivity: -------------  dispatchTouchEvent = 1E/ViewGroup1: ---------------  dispatchTouchEvent = 1E/ViewGroup1: ---------------  onInterceptTouchEvent = 1E/ViewGroup2: ---------------  dispatchTouchEvent = 1E/ViewGroup2: ---------------  onInterceptTouchEvent = 1E/Button1: ------------------  dispatchTouchEvent = 1E/Button1: ------------------  onTouchEvent = 1\n\nåœ¨æ¥çœ‹çœ‹åºåˆ—å›¾\n\n\n\nButtonè·å–è§¦æ‘¸äº‹ä»¶\n\n\n\nè¿™ä¸€çœ‹ï¼Œè¿™ä¸æ˜¯å’Œä¸Šé¢é‚£å¼ å›¾å½“ViewGroup2ä¸­onTouchEventç›´æ¥è¿”å›trueæ—¶çš„æ•ˆæœä¸€æ ·çš„å—ï¼Ÿä¹Ÿå°±æ˜¯è¯´buttoné»˜è®¤å°±æ˜¯ç›´æ¥è·å–äº†äº‹ä»¶ï¼Œæ²¡æœ‰è®©äº‹ä»¶è¿”å›ä¸»å¸ƒå±€ä¸­ã€‚\n\nç­‰ç­‰è¿˜æœ‰ä¸€ä¸ªï¼ï¼ï¼å¤§å®¶éƒ½çŸ¥é“å¸ƒå±€æœ‰ä¸ªå±æ€§clickableå§ï¼å½“è®¾ç½®å®ƒçš„å€¼ä¸ºtrueæ—¶ï¼Œä½¿å¾—è¿™ä¸ªå¸ƒå±€äº‹ä»¶å¦‚buttonæ‰€è¿°ï¼\n\næ›´æ·±å…¥çš„ç†è§£çš„è¯è¿™é‡Œåšå®¢å·²ç»ä»‹ç»çš„å¾ˆè¯¦ç»†äº†\n\nAndroidäº‹ä»¶åˆ†å‘æœºåˆ¶å®Œå…¨è§£æï¼Œå¸¦ä½ ä»æºç çš„è§’åº¦å½»åº•ç†è§£(ä¸Š)\nAndroidäº‹ä»¶åˆ†å‘æœºåˆ¶å®Œå…¨è§£æï¼Œå¸¦ä½ ä»æºç çš„è§’åº¦å½»åº•ç†è§£(ä¸‹)\n\n\n\nå®é™…çš„åº”ç”¨-æ¥ä¸€ä¸ªç®€å•çš„åº”ç”¨\nxmlå¸ƒå±€1234567891011121314151617181920212223242526272829303132333435&lt;?xml version=\"1.0\" encoding=\"utf-8\"?&gt;&lt;LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"    android:layout_width=\"match_parent\"    android:layout_height=\"match_parent\"    android:orientation=\"vertical\"    android:padding=\"10dp\"&gt;    &lt;CheckBox        android:id=\"@+id/checkbox_lock\"        android:layout_width=\"wrap_content\"        android:layout_height=\"wrap_content\"        android:text=\"Lock Selection\" /&gt;    &lt;RadioGroup        android:layout_width=\"match_parent\"        android:layout_height=\"wrap_content\"        android:orientation=\"horizontal\"&gt;        &lt;RadioButton            android:id=\"@+id/selection_first\"            android:layout_width=\"0dp\"            android:layout_height=\"wrap_content\"            android:layout_weight=\"1\"            android:text=\"First\"/&gt;        &lt;RadioButton            android:id=\"@+id/selection_second\"            android:layout_width=\"0dp\"            android:layout_height=\"wrap_content\"            android:layout_weight=\"1\"            android:text=\"Second\"/&gt;        &lt;RadioButton            android:id=\"@+id/selection_third\"            android:layout_width=\"0dp\"            android:layout_height=\"wrap_content\"            android:layout_weight=\"1\"            android:text=\"Third\"/&gt;    &lt;/RadioGroup&gt;&lt;/LinearLayout&gt;\nactivityä»£ç 12345678910111213141516171819202122232425262728293031323334353637383940414243444546474849505152535455565758596061626364656667686970package com.examples.customtouch;import android.app.Activity;import android.os.Bundle;import android.util.Log;import android.view.MotionEvent;import android.view.View;import android.widget.CheckBox;/** * Created by Dave Smith * Double Encore, Inc. * Date: 9/25/12 * TouchListenerActivity */public class TouchListenerActivity extends Activity implements View.OnTouchListener &#123;    /* Views to display last seen touch event */    CheckBox mLockBox;    @Override    protected void onCreate(Bundle savedInstanceState) &#123;        super.onCreate(savedInstanceState);        setContentView(R.layout.touch_listener);        mLockBox = (CheckBox) findViewById(R.id.checkbox_lock);        findViewById(R.id.selection_first).setOnTouchListener(this);        findViewById(R.id.selection_second).setOnTouchListener(this);        findViewById(R.id.selection_third).setOnTouchListener(this);    &#125;    @Override    public boolean onTouch(View v, MotionEvent event) &#123;        /*         * Consume the events here so the buttons cannot process them         * if the CheckBox in the UI is checked         */        Log.e(\"TouchListenerActivity\", getNameForEvent(event));        return mLockBox.isChecked();    &#125;    @Override    public boolean onTouchEvent(MotionEvent event) &#123;        Log.e(\"onTouchEvent\", getNameForEvent(event));        return super.onTouchEvent(event);    &#125;    private String getNameForEvent(MotionEvent event) &#123;        String action = \"\";        switch (event.getAction()) &#123;            case MotionEvent.ACTION_DOWN:                action = \"ACTION_DOWN\";                break;            case MotionEvent.ACTION_CANCEL:                action = \"ACTION_CANCEL\";                break;            case MotionEvent.ACTION_MOVE:                action = \"ACTION_MOVE\";                break;            case MotionEvent.ACTION_UP:                action = \"ACTION_UP\";                break;            default:                return null;        &#125;        return String.format(\"%s\\n%.1f, %.1f\", action, event.getX(), event.getY());    &#125;&#125;\n\n\n\n\nçŠ¶æ€\næè¿°\n\n\n\n\nå½“Lock Selectionæ²¡æœ‰å‹¾é€‰æ—¶\nä¸‹è¾¹çš„å•é€‰èƒ½æ­£å¸¸é€‰æ‹©\n\n\nå½“Lock Selectionå‹¾é€‰æ—¶\nä¸‹è¾¹çš„å•é€‰æ— æ³•ç‚¹å‡»\n\n\n\n\nå¤§å®¶æ˜¯å¦ç–‘æƒ‘äº†ï¼Œä¸ºä»€ä¹ˆå¤é€‰æ¡†é€‰ä¸­çŠ¶æ€ï¼Œontouchè¿”å›äº†trueåè€Œä¸èƒ½ç‚¹å‡»äº†ã€‚ä¸ºä»€ä¹ˆä¸æ˜¯è¿”å›falseæ— æ³•ç‚¹å‡»ï¼Œè¿”å›trueæ—¶æ‰èƒ½ç‚¹å‡»å‘¢ï¼Ÿå…¶å®è¿™äº›æ§ä»¶é»˜è®¤å¯ä»¥ç‚¹å‡»çš„éƒ½æ˜¯é»˜è®¤è·å–äº‹ä»¶çš„ï¼Œå¦‚ä¸Šé¢è¯´çš„buttonä¸ºä»€ä¹ˆè·å–äº‹ä»¶ä¸€æ ·ï¼Œæ‰€ä»¥è¿”å›trueå’Œfalseå’Œé¢„æƒ³çš„ç»“æœç›¸åã€‚\n\næ‰€ç”¨çŸ¥è¯†å’Œèµ„æ–™\nAndroid studioæ’ä»¶plantUmlç”»åºåˆ—å›¾å’Œç±»å›¾\nPlantUMLå¿«é€ŸæŒ‡å— å’Œ PlantUMLå®˜ç½‘\nAndroidäº‹ä»¶åˆ†å‘æœºåˆ¶å®Œå…¨è§£æï¼Œå¸¦ä½ ä»æºç çš„è§’åº¦å½»åº•ç†è§£(ä¸Š)Androidäº‹ä»¶åˆ†å‘æœºåˆ¶å®Œå…¨è§£æï¼Œå¸¦ä½ ä»æºç çš„è§’åº¦å½»åº•ç†è§£(ä¸‹)\nå…¬å…±æŠ€æœ¯ç‚¹ä¹‹ View äº‹ä»¶ä¼ é€’\næœ€åçš„é‚£ä¸ªä¾‹å­æ¥è‡ªäºè¿™å„¿\n\n","plink":"https://blog.xujiaji.com/post/android-ui-event/"},{"title":"é¢å‘å¯¹è±¡è®¾è®¡-å¼€é—­åŸåˆ™(OCP)","date":"2016-04-12T00:43:00.000Z","author":"xujiaji","updated":"2019-04-08T06:56:47.148Z","content":"\nOCP\n\n\nå•¥æ˜¯OCPï¼Ÿ\nå…¨ç§°ï¼šå¼€é—­åŸåˆ™(Open-Closed Principle)[^foot2]\nå®šä¹‰ï¼šè½¯ä»¶å®ä½“ï¼ˆç±»ã€æ¨¡å—ã€å‡½æ•°ç­‰ç­‰ï¼‰åº”è¯¥æ˜¯å¯ä»¥æ‰©å±•çš„\n\nå¼€(O)ä»€ä¹ˆï¼Ÿå…³(C)ä»€ä¹ˆï¼Ÿ\nå¼€(O)ï¼šå¯¹äºæ‰©å±•æ˜¯å¼€æ”¾çš„\n\nå¯¹äºæŸä¸ªæ¨¡å—çš„åŠŸèƒ½æ˜¯å¯ä»¥è¿›è¡Œæ‰©å±•çš„ã€‚å½“éœ€æ±‚æ”¹å˜ï¼Œæˆ‘ä»¬åªéœ€å¯¹å…¶è¿›è¡Œæ‰©å±•å³å¯æ»¡è¶³äºæ–°çš„éœ€æ±‚ã€‚\næ¯”å¦‚è¯´ï¼šâ€œç –â€ï¼Œæˆ‘ä»¬ä¸éœ€è¦æ”¹å˜å®ƒçš„å½¢æ€ä¸ç»“æ„ï¼Œå°±å¯ä»¥æ ¹æ®éœ€æ±‚æ¥å»ºé«˜æ¥¼ã€å»ºå›´å¢™ã€å»ºå•æ‰€ã€å»ºè¿™æ ·å»ºé‚£æ ·(à¹‘ä¹›ä¹›à¹‘)ã€‚ - - æ‰€ä»¥å¯ä»¥è®¤ä¸ºâ€œç –â€å¯¹äºæ‰©å±•çš„éœ€æ±‚æ˜¯å¼€æ”¾çš„ã€‚åˆæ¯”å¦‚è¯´ç”µè„‘ä¸»æ¿å¯¹äºcpuã€å†…å­˜ç­‰æ˜¯å¯æ‰©å±•çš„ã€‚\n\nå…³(C)ï¼šå¯¹äºæ›´æ”¹æ˜¯å°é—­çš„\n\nå¯¹æ¨¡å—è¿›è¡Œæ‰©å±•æ—¶ï¼Œä¸å¿…æ”¹åŠ¨æ¨¡å—çš„æºä»£ç æˆ–è€…äºŒè¿›åˆ¶ä»£ç ã€‚å¦‚æœè¯´è¿™ä¸ªæ¨¡å—å·²ç»æ˜ç¡®çš„å®šä¹‰ã€ç¨³å®šã€æœ‰æ•ˆçš„è¢«å¤šä¸ªå…¶ä»–æ¨¡å—ä½¿ç”¨ï¼Œé‚£ä¹ˆå…³é—­è¿™ä¸ªæ¨¡å—ï¼Œæä¾›æ¥å£ä¾›å…¶å®ƒæ¨¡å—ä½¿ç”¨ã€‚\næ¯”å¦‚æˆ‘ä»¬çš„ç”µè„‘ç”±â€œCPUâ€ã€â€œä¸»æ¿â€ã€â€œå†…å­˜â€ç­‰æ„æˆï¼Œå®ƒä»¬å¹¶ä¸æ˜¯ç´§ç´§è€¦åˆåšæˆä¸€å—çš„ã€‚æƒ³æƒ³ï¼Œè¦æ˜¯ç´§ç´§çš„é•¿ä¸€å—ï¼Œä»€ä¹ˆCUPã€ä»€ä¹ˆå†…å­˜å¯†å¯†éº»éº»çš„å°çº¿ã€è§¦è§’ã€èº«ä½“çš„ä¸€éƒ¨åˆ†å’Œä¸»æ¿ä¸€ä½“åŒ–ã€‚é‚£ä¹ˆç°åœ¨æˆ‘çš„ä¸€ä¸ªå†…å­˜åäº†ï¼Œæˆ‘è¡¨ç¤ºæˆ‘æ˜¯æ¸£æ¸£å¾—é‡æ–°ä¹°ä¸€å°ç”µè„‘äº†ï¼Œèƒ½å†…å­˜ä¿®å¥½çš„é«˜æ‰‹å› è¯¥ä¸å¤šå§ï¼å°±ç®—å†…å­˜èƒ½ä¿®å¥½CPUåˆå¤šå°‘äººèƒ½ä¿®å¥½å•Šï¼ä½†è¿˜å¥½å®ƒä»¬éƒ½æ˜¯åˆ†ç¦»çš„ï¼Œæ¥å£éƒ½æ˜¯è§„å®šå¥½äº†çš„ï¼Œæˆ‘éœ€è¦ä¹°ä¸€ä¸ªå†…å­˜æ’ä¸Šå°±å¥½äº†ã€‚æˆ‘ä»¬ä¸éœ€è¦çŸ¥é“çŸ¥é“å†…å­˜é‡Œé¢ã€CPUé‡Œé¢æ˜¯å•¥æ„é€ ã€‚è¦æ˜¯åäº†æ—¶ï¼Œè¦æ˜¯å‡çº§æ—¶ï¼Œåªéœ€è¦æ›´æ¢è¿™ä¸ªæ¨¡å—è€Œä¸éœ€è¦æ›´æ¢æ•´ä¸ªç¡¬ä»¶ç³»ç»Ÿæˆ–ä¿®ç†è¿™ä¸ªç¡¬ä»¶ç³»ç»Ÿé‡Œçš„æŸä¸ªå°æ¨¡å—ã€‚- - åŸè°…æˆ‘åºŸè¯äº†ä¸€å¤§åœˆï¼Œå°±æ˜¯æƒ³è¡¨è¾¾ä¸ªå°é—­å†…éƒ¨ï¼Œèƒ½å‡å°‘bugï¼Œæ–¹ä¾¿æ‰©å±•ï¼Œèƒ½æ›´å¥½çš„åˆ†å·¥åˆä½œï¼ˆåšä¸»æ¿çš„å°±åšä¸»æ¿ï¼‰\nä¸ºä½•è¦æå€¡OCPï¼Ÿå…¶å®åœ¨ä¸Šé¢å¤§å®¶å› è¯¥å·²ç»æ˜ç™½ä¸€äº›äº†ï¼Œâ€œå¼€æ”¾â€æ˜¯ä¸ºäº†æ›´å¥½çš„æ‰©å±•ï¼Œé€‚åº”æ›´å¤šçš„ç›¸åº”éœ€æ±‚ã€‚â€œå…³é—­â€æ˜¯ä¸ºäº†é™ä½è€¦åˆï¼Œé™ä½äº†ç»´æŠ¤éš¾åº¦å’Œåˆ¶ä½œæˆæœ¬ã€‚ä¸¤è€…å¯ä»¥è¯´æœ¬æ˜¯äº’ä¸ºä¸€ä½“ï¼Œè€Œåˆè¢«åˆ†å¼€è¯´æˆä¸¤æ ·ã€‚å› ä¸ºå…³é—­æ—¶å¾—ç•™å‡ºå£å¼€æ”¾æœ¬å°±æ˜¯å¤„ç†çš„ä¸€ä¸ªæ¨¡å—åŒæ—¶è¿›è¡Œã€‚\n\nåœ¨è®¸å¤šæ–¹é¢ï¼ŒOCPçš„é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ‰€åœ¨æ³¨æ„ï¼š\n\næˆ‘ä»¬å› è¯¥å¯¹é¢‘ç¹å‡ºç°çš„å˜åŒ–è¿›è¡Œå°é—­å¼€æ”¾å¤„ç†ä¹Ÿå°±æ˜¯è¿›è¡ŒæŠ½è±¡\næ‹’ç»ä¸æˆç†Ÿçš„æŠ½è±¡å’ŒæŠ½è±¡æœ¬èº«ä¸€æ ·é‡è¦\n\n\næ¯”å¦‚è¯´ï¼Ÿ(å®é™…ä¾‹å­)\nè¿åOCP,æ—¢ä¸å¼€æ”¾åˆä¸å°é—­\nä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ªæ²¡æœ‰éµå¾ªOCPçš„è®¾è®¡ä¾‹å­ï¼Œç”µç¯ç±»å’Œç”µæºç±»æ˜¯ä¸¤ä¸ªå…·ä½“çš„ç±»ã€‚è¦è®©ç”µç¯å‘å…‰ï¼Œéœ€è¦ç”µæºè¿™ä¸ªå±æ€§ã€‚å¦‚æœæ­¤æ—¶è¦å°†ç”µç¯æ¥åœ¨å¦ä¸€ä¸ªç”µæºä¸Šé¢ï¼Œå°±å¿…é¡»æ›´æ¢æˆå¦ä¸€ä¸ªç”µæºçš„å±æ€§ï¼ˆå°†ç”µç¯è¿çº¿ä¸å¦ä¸€ä¸ªç”µæºï¼‰ã€‚\n\néµå¾ªOCP,æ—¢å¼€æ”¾åˆå°é—­\nä¸Šå›¾å±•ç¤ºäº†ä¸€ä¸ªè§£å†³ä¸Šé¢é—®é¢˜çš„OCPè®¾è®¡ï¼Œç¯åº§æ˜¯ä¸€ä¸ªæ‹¥æœ‰æŠ½è±¡æˆå‘˜çš„æ¥å£ï¼ˆæ¯”å¦‚è¯´ä¸ç”µæºçš„è¿çº¿ï¼‰ã€‚ç”µç¯ç±»ä½¿ç”¨è¿™ä¸ªæŠ½è±¡ç±»ï¼ˆæœ‰æ’åº§çš„æˆå‘˜å±æ€§ï¼‰ï¼Œè€Œç”µç¯çš„å¯¹è±¡ä½¿ç”¨çš„æ˜¯ç¯åº§æ¥å£çš„å®ç°ç±»ç”µæºã€‚å¦‚æœæˆ‘ä»¬éœ€è¦å°†ç”µç¯æ¥åˆ°å¦ä¸€ä¸ªç”µæºï¼Œåªéœ€è¦æ¥åˆ°å¦ä¸€æ’åº§ã€‚å¦‚æœè¦æ›´æ¢ç”µæºï¼Œé‚£ä¹ˆå°†æ’åº§æ¥åˆ°å¦ä¸€ä¸ªç”µæºã€‚è¿™æ ·åŒæ–¹çš„æ”¹å˜ï¼Œè¢«æ’åº§æ¥å£éš”ç¦»è€Œä¸ä¼šå½±å“åˆ°å…·ä½“çš„ç±»ã€‚ï¼ˆæˆ‘ç†è§£ä¸ºéš”ç¦»äº†å˜åŒ–çš„æ‰©æ•£ï¼‰\n\n\n\n\n\næ³¨æ„\n\n\n\n\nåªæœ‰å½“æˆ‘ä»¬é¢„æµ‹åˆ°è¿™ç§å˜åŒ–ï¼Œé‚£ä¹ˆå°±å¯ä»¥è®¾è®¡ä¸€ä¸ªæŠ½è±¡æ¥è¿›è¡Œéš”ç¦»\n\n\næ— è®ºæ¨¡å—æ˜¯å¤šä¹ˆçš„å°é—­éƒ½ä¼šå­˜åœ¨ä¸€äº›æ— æ³•å¯¹ä¹‹å°é—­çš„å˜åŒ–ï¼ˆæ¯”å¦‚è¯´æˆ‘ç°åœ¨è¦è®©ç¯æ³¡é—ªçº¢å…‰ï¼‰ï¼Œæ²¡æœ‰å¯¹æ‰€æœ‰çš„æƒ…å†µéƒ½è´´åˆ‡çš„æ¨¡å‹\n\n\nè®¾è®¡äººå‘˜å¿…é¡»å¯¹è®¾è®¡çš„æ¨¡å—åº”è¯¥å¯¹å“ªç§å˜åŒ–å°é—­åšå‡ºé€‰æ‹©\n\n\n\nEND\næ€»çš„æ¥è¯´å¼€é—­åŸåˆ™ä¹Ÿå¦‚é”¦ä¸Šæ·»èŠ±ï¼Œåœ¨åŸæœ‰é”¦ç»‡ç‰©ä¸Šå¢æ·»é²œèŠ±ï¼Œè®©ç¾çš„ä¸œè¥¿æ›´ç¾ã€‚\n\nåœ¨è®¸å¤šæ–¹é¢ï¼ŒOCPéƒ½æ˜¯é¢å‘å¯¹è±¡çš„æ ¸å¿ƒæ‰€åœ¨ã€‚éµå¾ªè¿™ä¸ªåŸåˆ™å¯ç»™é¢å‘å¯¹è±¡æŠ€æœ¯å¸¦æ¥å·¨å¤§çš„å¥½å¤„ï¼ˆçµæ´»æ€§ã€å¯é‡ç”¨æ€§ä»¥åŠå¯ç»´æŠ¤æ€§ï¼‰ã€‚ç„¶è€Œï¼Œå¹¶ä¸æ˜¯è¯´åªè¦ä½¿ç”¨ä¸€ç§é¢å‘å¯¹è±¡è¯­è¨€å°±æ˜¯éµå¾ªäº†è¿™ä¸ªåŸåˆ™ã€‚\n\nå¯¹äºåº”ç”¨ç¨‹åºä¸­çš„æ¯ä¸ªéƒ¨åˆ†éƒ½è‚†æ„åœ°è¿›è¡ŒæŠ½è±¡åŒæ ·ä¸æ˜¯ä¸€ä¸ªå¥½ä¸»æ„ã€‚æ­£ç¡®åœ°åšæ³•æ˜¯å¼€å‘äººå‘˜åº”å½“ä»…ä»…å¯¹ç¨‹åºä¸­é¢‘ç¹å˜åŒ–çš„é‚£äº›éƒ¨åˆ†åšå‡ºæŠ½è±¡ï¼Œæ‹’ç»ä¸æˆç†Ÿçš„æŠ½è±¡å’ŒæŠ½è±¡æœ¬èº«ä¸€æ ·é‡è¦ã€‚\nå‚è€ƒæ–‡ç« \nã€Šæ•æ·è½¯ä»¶å¼€å‘ï¼šåŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹ç¬¬9ç«   å¼€æ”¾-å°é—­åŸåˆ™\nç»´åŸºç™¾ç§‘-å¼€é—­åŸåˆ™\nã€Šé¢å‘å¯¹è±¡è½¯ä»¶æ„é€ ã€‹ç¬¬äºŒç‰ˆ ä¸­è‹±å¯¹ç…§ ç¬¬3ç«  3.3äº”é¡¹åŸåˆ™\n\n","plink":"https://blog.xujiaji.com/post/ood-ocp/"},{"title":"é¢å‘å¯¹è±¡è®¾è®¡-å•ä¸€èŒè´£åŸåˆ™(SRP)","date":"2016-04-07T15:55:00.000Z","author":"xujiaji","updated":"2019-04-08T06:56:50.532Z","content":"\nSRP\n\n\nä½•ä¸ºSRPï¼Ÿ\nå…¨ç§°ï¼šå•ä¸€èŒè´£åŸåˆ™(Single Responsibility Principle)\nå®šä¹‰:è¯¥åŸåˆ™è§„å®šæ¯ä¸ªç±»éƒ½åº”è¯¥åªæœ‰ä¸€ä¸ªå•ä¸€çš„åŠŸèƒ½ï¼Œå¹¶ä¸”è¯¥åŠŸèƒ½åº”è¯¥ç”±è¿™ä¸ªç±»å®Œå…¨å°è£…èµ·æ¥\n\nä½•ä¸ºèŒè´£(R)?\næ—¢ç„¶æ˜¯å•ä¸€â€œèŒè´£â€ï¼Œé‚£ä¹ˆèŒè´£å³ä¸ºè¢«è§„å®šçš„å› ç´ ã€‚\n\n\næ¦‚æ‹¬ï¼šâ€åŠŸèƒ½(èŒè´£)â€ä¸ºæ”¹å˜çš„åŸå› ï¼Œä¸€ä¸ªç±»æˆ–è€…æ¨¡å—åº”è¯¥æœ‰ä¸”åªæœ‰ä¸€ä¸ªæ”¹å˜çš„åŸå› ã€‚\n\nå¦‚ä¸‹å›¾å†œæ´»è´£ä»»æ‰€ç¤ºï¼Œè€•èœåœ°å’Œè€•æ°´ç”°å³ä¸ºç‰›å’Œè€•åœ°æœºçš„èŒè´£ï¼Œå³ä¸ºè¿™ä¸ªå¯¹è±¡å­˜åœ¨çš„åŸå› ï¼ˆä¸‹é¢å°†æ¥è®¨è®ºè¿™ä¸ªå…³ç³»å›¾ï¼‰ã€‚\n\n\n\nå†œæ´»è´£ä»»\n\n\nä¸ºä½•è¦æå€¡SRPï¼Ÿ\nå…¶æ€æƒ³ç®€å•ï¼Œä½†å´éš¾ä»¥æŒæ¡ã€‚å°±æ˜¯ä¸€ä¸ªæ¨¡å—ï¼Œä¸€ä¸ªç±»åªèƒ½å¹²ä¸€ä»¶äº‹æƒ…ã€‚\n\nçœ‹ä¸Šå›¾å†œæ´»è´£ä»»ï¼Œæ™ƒçœ¼ä¸€çœ‹æˆ‘ä»¬ä¼šå†³å®šè¿™æ˜¯å¯¹çš„ï¼ä½†ä»”ç»†ä¸€åˆ†æå†œæ´»æ¥å£å…¶ä¸­åŒ…å«çš„è€•èœåœ°å’Œè€•æ°´ç”°ä¸¤ä¸ªè´£ä»»ã€‚\n\nç‰›è€•æ°´ç”°ï¼Œä½†å®ƒè€•ä¸åŠ¨èœåœ°ï¼Œåªèƒ½è°ƒç”¨è€•æ°´ç”°çš„æ¥å£ï¼Œå› æ­¤è€•èœåœ°çš„æ¥å£å¯¹äºç‰›æ¥è¯´å°±æ˜¯å¤šä½™çš„ã€‚ä½†è€•åœ°æœºå³èƒ½è€•èœåœ°ï¼Œä¹Ÿèƒ½è€•æ°´ç”°ã€‚è¿™å°±åƒæ˜¯ç‰›æœ¬æ¥æ˜¯è€•ç”°çš„ï¼Œæˆ‘ä»¬å´è¯´å®ƒè¿˜èƒ½å»è€•èœåœ°ï¼Œè€•åœ°æœºèƒ½åšçš„äº‹æƒ…ï¼Œè€ç‰›è¡¨ç¤ºæ— èƒ½ä¸ºåŠ›ï¼\n\nè¿™æ ·è¿åäº†SRPï¼Œå¯¼è‡´äº†ä¸¥é‡çš„é—®é¢˜ã€‚å› ä¸ºæˆ‘ä»¬ç»™ç‰›ä¿ç•™äº†ä¸€ä¸ªå¤šä½™è€Œä¸ä¼šå®Œæˆçš„è´£ä»»ï¼Œè¿™è®©æˆ‘ä»¬æ¯æ¬¡æåˆ°ç‰›ä¸ä»…è¯´å®ƒèƒ½è€•æ°´ç”°è¿˜èƒ½è€•èœåœ°ã€‚è¿™è®©æˆ‘ä»¬å¯¹ç‰›çš„æè¿°æ›´åŠ çš„å¤æ‚è€Œæ²¡æœ‰å‡†ç¡®æ€§ã€‚ç¨‹åºä¹Ÿæ—¶è¿™æ ·ï¼Œå½“æ²¡ç”¨çš„è´£ä»»å¢åŠ ï¼Œå°±ä¼šè®©ç›¸åº”çš„ç±»éƒ½å˜å¾—è‡ƒè‚¿è…è‡­ã€‚å½“æˆ‘ä»¬è¦æ·»åŠ ç‰›è¦è€•åè¦åƒè‰ï¼Œè€•åœ°æœºè€•åœ°åè¦åŠ æ²¹æ—¶ï¼Œç»§ç»­å¾€å†œæ´»æ¥å£ä¸­æ·»åŠ ï¼Œè¿™æ ·ä½¿å¾—å†œæ´»ä»€ä¹ˆéƒ½èƒ½å¹²ï¼Œä½¿å¾—åæœŸä¿®æ”¹ç»´æŠ¤ç­‰éš¾åº¦å¤ªå¤§ã€‚\n\nå¦‚æœä¸åˆ†ç¦»è´£ä»»ï¼Œåœ¨ä¸æ–­å˜åŒ–å’Œæ·»åŠ çš„éœ€æ±‚é¢å‰ï¼Œè´£ä»»ä¹‹é—´è€¦åˆåº¦å¼ºå¯¼è‡´æˆ‘ä»¬çš„ç¨‹åºæ›´åŠ çš„è„†å¼±ã€‚æ¯”å¦‚è¯´ï¼Ÿï¼ˆå®é™…ä¸¾ä¾‹è¯´æ˜ï¼‰\nä¾‹å­ä¸€\nå†œæ´»è´£ä»»(æ”¹)\n\n\n\n\nå¦‚ä¸Šå›¾å°†ä¸¤ä¸ªè´£ä»»åˆ†ç¦»ï¼Œç‰›å®ç°è€•æ°´ç”°çš„æ—¶å€™ï¼Œä¸ä¼šçŸ¥é“ä¹Ÿä¸ä¼šå»åœ¨æ„è€•èœåœ°ï¼Œåˆ†ç¦»äº†è´£ä»»ï¼Œè¯¥åšçš„æ‰åšï¼Œä¸åšçš„ä¸ç”¨ç®¡ã€‚\n\nä¾‹å­äºŒï¼ˆæ¥è‡ªæ•æ·è½¯ä»¶å¼€å‘ç¬¬8ç« ï¼‰[^foot]1234567//è°ƒåˆ¶è§£è°ƒå™¨interface Modem &#123;    void dial(String pno);//æ‹¨å·    void hangup();//æŒ‚æ–­    void send(char c);//å‘é€æ¶ˆæ¯    void recv();//æ¥æ”¶æ¶ˆæ¯&#125;\n\n\n\nè¿™ä¸ªæ¥å£ä¸­æ˜¾ç¤ºäº†ä¸¤ä¸ªèŒè´£ï¼Œä¸€ä¸ªæ˜¯è¿æ¥ç®¡ç†ï¼Œä¸€ä¸ªæ˜¯æ•°æ®é€šä¿¡ã€‚dialå’Œhangupå‡½æ•°è¿›è¡Œè°ƒåˆ¶è§£è°ƒå™¨çš„è¿æ¥å¤„ç†ï¼Œè€Œsendå’Œrecvå‡½æ•°è¿›è¡Œæ•°æ®çš„é€šä¿¡ã€‚\n\nè¿™ä¸¤ä¸ªè´£ä»»åº”è¯¥è¢«åˆ†å¼€å—ï¼Ÿè¿™å†³å®šäºåº”ç”¨ç¨‹åºä»¥ä½•ç§æ–¹å¼å˜åŒ–ã€‚å¦‚æœåº”ç”¨ç¨‹åºçš„å˜åŒ–ä¼šå½±å“è¿æ¥å‡½æ•°çš„éƒ¨ç½²ï¼Œé‚£ä¹ˆè¿™ä¸ªè®¾è®¡å°±å…·æœ‰åƒµåŒ–æ€§çš„è‡­å‘³ã€‚å› ä¸ºè°ƒç”¨sendå’Œrecvçš„ç±»å¿…é¡»è¦é‡æ–°ç¼–è¯‘è¿æ¥å¤„ç†å‡½æ•°ï¼Œéƒ¨ç½²çš„æ¬¡æ•°å¸¸å¸¸ä¼šè¶…è¿‡æˆ‘ä»¬å¸Œæœ›çš„æ¬¡æ•°ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸¤ä¸ªèŒè´£åº”è¯¥è¢«åˆ†ç¦»ã€‚å¦‚å›¾ä¸‹å›¾æ‰€ç¤ºï¼Œè¿™æ ·é¿å…äº†å®¢æˆ·åº”ç”¨ç¨‹åºå’Œè¿™ä¸¤ä¸ªèŒè´£è€¦åˆåœ¨ä¸€èµ·ã€‚\n\nåˆ†ç¦»çš„Modemæ¥å£\n\n\n\n\n\næ³¨æ„\n\n\n\n\nå¦ä¸€æ–¹é¢ï¼Œå¦‚æœåº”ç”¨ç¨‹åºçš„å˜åŒ–æ–¹å¼æ€»æ˜¯ä¼šå¯¼è‡´ä¸¤ä¸ªèŒè´£åŒæ—¶å˜åŒ–ï¼Œé‚£ä¹ˆå°±ä¸å¿…åˆ†ç¦»ä»–ä»¬ï¼Œåˆ†ç¦»åä¼šå¯¼è‡´ä¸å¿…è¦çš„å¤æ‚æ€§ã€‚\n\n\næ­¤å¤–è¿˜æœ‰ä¸ªæ¨è®ºï¼šå˜åŒ–çš„æ›²çº¿æ˜¯ä»…å½“å˜åŒ–å®é™…å‘ç”Ÿæ—¶æ‰å…·æœ‰çœŸæ­£çš„æ„ä¹‰ã€‚å¦‚æœæ²¡æœ‰å¾å…†ï¼Œé‚£ä¹ˆå»åº”ç”¨SRPï¼Œæˆ–è€…å…¶ä»–åŸåˆ™éƒ½æ˜¯ä¸æ˜æ™ºçš„ã€‚\n\n\n\nç»“è®ºæ€»ç»“\nSRPä¸ºæœ€ç®€å•çš„åŸåˆ™ï¼Œä¹Ÿæ˜¯æœ€éš¾è¿ç”¨å¥½çš„åŸåˆ™\nè½¯ä»¶è®¾è®¡çœŸæ­£è¦åšçš„å…¶å®å°±æ˜¯å‘ç°è´£ä»»å¹¶æŠŠé‚£äº›è´£ä»»åˆ†ç¦»\nå…¶ä»–åŸåˆ™éƒ½å°†èƒ½è¿½æº¯åˆ°SRP\nå¤§é“è‡³ç®€ï¼Œåªæœ‰ä¸æ–­åœ¨ä»£ç ä¸­è¿ç”¨æ‰èƒ½çœŸæ­£ä½“ä¼šå…¶ä¸­çš„å¥¥å¦™\n\nå‚è€ƒæ–‡ç« [1]ã€Šæ•æ·è½¯ä»¶å¼€å‘ï¼šåŸåˆ™ã€æ¨¡å¼ä¸å®è·µã€‹ç¬¬8ç«  å•ä¸€èŒè´£åŸåˆ™[2]ç»´åŸºç™¾ç§‘[3]æˆ‘æ˜¯æ€æ ·å‘å¦»å­è§£é‡ŠOODçš„\n","plink":"https://blog.xujiaji.com/post/ood-srp/"},{"title":"Ubuntuå®‰è£…Android studio","date":"2016-03-26T23:13:00.000Z","author":"xujiaji","updated":"2019-04-08T06:55:34.245Z","content":"1.å®‰è£…jdkâ‘ ç”±äºlinuxè‡ªå¸¦openjdkå› æ­¤æˆ‘å°±å°†openjdkå¸è½½äº†è£…jdk1.71$ sudo apt-get remove openjdk-*\nâ‘¡ä¸‹è½½jdk1.7jdk1.7ä¸‹è½½é“¾æ¥æˆ‘ä¸‹è½½çš„æ–‡ä»¶ä¸ºï¼šjdk-7u79-linux-x64.tar.gz\nâ‘¢è§£å‹\nåˆ›å»º/usr/javaç›®å½•\n1$ sudo mkdir /usr/java\n\nå°†å½“å‰ç›®å½•ä¸‹çš„jdkå‹ç¼©åŒ…ç§»/usr/java\n1~/ä¸‹è½½ $ sudo mv jdk-7u79-linux-x64.tar.gz /usr/java\n\nè§£å‹åˆ°/usr/javaï¼Œåˆ é™¤å‹ç¼©åŒ…\n123$ cd /usr/java$ sudo tar -zxvf /usr/java/jdk-7u79-linux-x64.tar.gz$ sudo rm jdk-7u79-linux-x64.tar.gz\n\n\nâ‘£é…ç½®jdkç¯å¢ƒå˜é‡\næ‰“å¼€ç¯å¢ƒå˜é‡é…ç½®æ–‡ä»¶profile\n1$ sudo gedit /etc/profile\n\nåœ¨æ–‡æœ¬æœ€åæ·»åŠ å¦‚ä¸‹ä¿¡æ¯ï¼Œæ³¨æ„æ”¹æˆè‡ªå·±çš„jdkç‰ˆæœ¬\n1234JAVA_HOME=/usr/java/jdk1.7.0_79PATH=$JAVA_HOME/bin:$PATHCLASSPATH=.:$JAVA_HOME/lib/dt.jar:$JAVA_HOME/lib/tools.jarexport JAVA_HOME PATH CLASSPATH\n\nä¿å­˜ã€é‡å¯ã€java -versionéªŒè¯æ˜¯å¦é…ç½®æˆåŠŸ\n\n\n2.å®‰è£…android studioâ‘ ä¸‹è½½linux android studioå®˜ç½‘ä¸‹è½½\nâ‘¡è§£å‹å°†ä¸‹è½½å¥½çš„android studioå‹ç¼©åŒ…ç§»åŠ¨åˆ°/usr/localç›®å½•ï¼Œç„¶åunzipå‘½ä»¤è§£å‹1unzip android-studio-ide-141.2456560-linux.zip\nâ‘¢è¿è¡Œè¿›å…¥android-studio/bin,ç„¶åè¿è¡Œstudio.sh12$ cd android-studio/bin$ sh studio.sh\nâ‘£å› ä¸ºåœ¨linux mintç¬¬ä¸€å¤©å·²ç»ä¿®æ”¹hostsç¿»å¢™ï¼Œæ‰€ä»¥å°±è‡ªåŠ¨ä¸‹è½½sdkå’Œæ›´æ–°ï¼ŒèŠ‚çœæ“ä½œå’¯ï¼3.å®‰è£…Genymotion\nGenymotionè¢«ç§°ä¸ºæ˜¯é€Ÿåº¦æœ€å¿«çš„Androidæ¨¡æ‹Ÿå™¨å¯ä¸æ˜¯ç›–çš„ï¼Œæ‰‹æœºä¹Ÿæ²¡æœ‰ä¸¤ï¼Œå°±æ‰“ç®—å®‰è£…ä¸€ä¸ªæ¨¡æ‹Ÿå™¨ã€‚\n\nGenymotionå®˜ç½‘genymotion-2.11.0-linux_x64ä¸‹è½½genymotion-2.6.0ä¸‹è½½\nå®‰è£…æ­¥éª¤\néœ€è¦å®‰è£…ä¸€ä¸ªè½¯ä»¶virtualboxæ‰èƒ½ä½¿ç”¨Gecymotion,å‘½ä»¤:sudo apt-get install virtualbox\nè¿è¡Œgenymotionæ–‡ä»¶\n12$ chmod +x genymotion-2.11.0-linux_x64.bin$ ./genymotion-2.11.0-linux_x64.bin\n\nå®Œæˆåè¿›å…¥è¯¥ç”¨æˆ·ç›®å½•ä¸‹çš„genymotionç›®å½•ï¼ŒåŒå‡»è¿è¡Œgenymotionã€‚å¥½äº†ï¼Œæ¥ä¸‹æ¥å°±å¯ä»¥ä¸‹è½½genymotionè™šæ‹Ÿæœºæ¥ä½“éªŒå¿«æ„Ÿäº†ã€‚\n\n\n","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/android-studio.jpg","plink":"https://blog.xujiaji.com/post/install-android-studio-linux/"},{"title":"å…³äºæˆ‘","date":"2019-09-02T04:17:08.142Z","updated":"2019-09-02T04:17:08.142Z","content":"\nå¤§å®¶å¥½ï¼æˆ‘æ˜¯ä¸€æšå–œæ¬¢ç¼–ç¨‹ï¼Œå–œæ¬¢åˆ†äº«å’Œè®°å½•çš„å°å°å°å¼€å‘è€…ï¼\nè”ç³»æˆ‘QQï¼š26323405ï¼ˆè¯·å¤§ä¾ æ³¨æ˜ä¸€ä¸‹æ¥è·¯ğŸ˜„ï¼‰Emailï¼šblog@xujiaji.com\nèµ„åŠ©æ \n\n\nDATE\nNAME\nMONEY\nPLATFORM\nWHERE\nREMARK\n\n\n\n\n2019-8-15 0:25\nf*t\nï¿¥6.66\nå¾®ä¿¡\n-\n-\n\n\n\n","plink":"https://blog.xujiaji.com/about/"},{"title":"çè—é“¾æ¥","date":"2018-03-16T15:20:10.000Z","updated":"2019-04-08T10:18:20.316Z","content":"å‹æƒ…é“¾æ¥\n\n\n\nhexo insideä¸»é¢˜\nç©Android\n\n\n\n\n\n\n\nAndroidå¼€æºé¡¹ç›®\n\n\nåç§°\nåˆ†ç±»\né“¾æ¥\nä½œç”¨\n\n\n\n\nHappyBubble\nUI Library\n\néšæ„å˜åŒ–çš„æ°”æ³¡å¸ƒå±€ï¼ŒDialogæ ¹æ®ç‚¹å‡»Viewçš„ä½ç½®å®šä½å®ƒçš„ä½ç½®ï¼ŒDialogå¯å®šåˆ¶æ–¹å‘ç­‰ï¼\n\n\nXMVP\nLibrary\nXMVP\nä¸€ä¸ªç®€æ´çš„ï¼Œåªéœ€è¦ç®€å•é…ç½®å³å¯æ„æ¶MVPæ¨¡å¼çš„MVPæ¡†æ¶\n\n\nMVPManager\næ’ä»¶\n\nå¯é…åˆä¸Šé¢çš„XMVPï¼Œå¿«é€Ÿç”Ÿæˆç›¸å…³ä»£ç å¹¶é…ç½®çš„ASæ’ä»¶\n\n\n\nå·¥å…·\n\n\nåç§°\né“¾æ¥\nä½œç”¨\n\n\n\n\ncubic bezier\n\nè´å¡å°”æ›²çº¿åŠ¨ç”»ï¼Œå¯é€šè¿‡è¯¥å·¥å…·è°ƒèŠ‚å‡ºåˆé€‚çš„æ•°å€¼\n\n\nç¼“åŠ¨å‡½æ•°\n\nä¹Ÿæ˜¯è´å¡å°”æ›²çº¿ï¼Œè¿™é‡Œæä¾›å¾ˆå¤šé¢„å®šçš„åŠ¨ç”»ç¼“å†²æ•ˆæœï¼Œè¿˜æœ‰cssä»£ç \n\n\nåˆ›å®¢è´´\n\nåˆ¶ä½œä¸€äº›åšå®¢å°é¢ï¼Œå„ç§å°é¢å¾ˆæ–¹ä¾¿\n\n\nezGIF\n\nè§†é¢‘è½¬Gifï¼ŒGifå¤§å°ä¼˜åŒ–ã€å‰ªåˆ‡ã€å°ºå¯¸æ”¹å˜ç­‰\n\n\nWORD ART\n\nä¸€å¥æ–‡å­—+ä¸€ä¸ªå›¾å½¢=è¯¥æ–‡å­—ç»„æˆçš„å›¾å½¢\n\n\nSilk\n\nç”Ÿæˆå›¾ç‰‡ï¼Œé€šè¿‡è‡ªå·±ç»˜åˆ¶ä¸€äº›ç»šä¸½çš„å›¾æ¡ˆï¼Œåƒå·¦è¾¹è¿™ç§å›¾å½¢\n\n\nPixel Calculator\n\ndpã€spã€pxã€mmã€ptã€inå•ä½äº’è½¬\n\n\nProcessOn\n\nåœ¨çº¿ç”»æµç¨‹å›¾ã€æ€ç»´å¯¼å›¾ã€UIåŸå‹å›¾ã€UMLç­‰ç­‰\n\n\nç«™é•¿å·¥å…·\n\nåœ¨çº¿ç½‘ç«™æ£€æµ‹ï¼ŒURLç¼–ç è§£ç ï¼ŒUTF-8ç¼–ç è§£ç ï¼ŒAsciiç¼–ç è§£ç ç­‰ç­‰\n\n\n\n","plink":"https://blog.xujiaji.com/links/"}]