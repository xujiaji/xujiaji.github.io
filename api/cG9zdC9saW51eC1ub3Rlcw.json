{"title":"linux(Ubuntu)笔记","date":"2017-12-12T04:25:29.000Z","author":"xujiaji","thumbnail":"https://xujiaji.oss-cn-beijing.aliyuncs.com/blog/linux-notes.jpg","link":"post/linux-notes","comments":true,"tags":["Linux","笔记"],"categories":["Linux"],"updated":"2019-04-08T06:56:30.022Z","content":"<h2 id=\"每次开机弹出软件崩溃反馈\">每次开机弹出软件崩溃反馈<a href=\"post/linux-notes#每次开机弹出软件崩溃反馈\"></a></h2><blockquote>\n<p>解决：删除崩溃日志</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo rm /var/crash/*</span><br></pre></td></tr></table></figure>\n<h2 id=\"更新软件源的索引\">更新软件源的索引<a href=\"post/linux-notes#更新软件源的索引\"></a></h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get update</span><br></pre></td></tr></table></figure>\n<h2 id=\"升级软件\">升级软件<a href=\"post/linux-notes#升级软件\"></a></h2><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get upgrade</span><br></pre></td></tr></table></figure>\n<h2 id=\"修复依赖关系\">修复依赖关系<a href=\"post/linux-notes#修复依赖关系\"></a></h2><blockquote>\n<p>假如用户的系统上有某个package不满足依赖条件，这个命令就会自动修复，安装程序包所依赖的包</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get -f install</span><br></pre></td></tr></table></figure>\n<h2 id=\"创建启动器\">创建启动器<a href=\"post/linux-notes#创建启动器\"></a></h2><blockquote>\n<p>安装软件</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt install gnome-panel</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>打开创建图标的界面，下边的<code>~/桌面/</code>为启动器创建的位置</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">gnome-desktop-item-edit ~/桌面/ --create-new</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>最后根据提示创建图标</p>\n</blockquote>\n<h2 id=\"安装xmind-linux\">安装xmind-linux<a href=\"post/linux-notes#安装xmind-linux\"></a></h2><blockquote>\n<p>下载地址：<a href=\"https://www.xmind.cn/download/\" target=\"_blank\" rel=\"noopener\">https://www.xmind.cn/download/</a></p>\n</blockquote>\n<p>下载下来是一个压缩包，将其放到<code>~/</code>目录并解压。由于我是64位系统，所以进入<code>~/xmind/XMind_amd64/</code>目录双击XMind运行软件。</p>\n<blockquote>\n<p>由于我创建启动器遇到下面的错误，必须在当前目录才能运行XMind，否则就有下面的错误提示对话框出现。</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The configuration area at <span class=\"string\">'/./configuration'</span></span><br><span class=\"line\">could not be created.</span><br><span class=\"line\">Please choose a writable location</span><br><span class=\"line\">using the <span class=\"string\">'-configuration'</span> <span class=\"built_in\">command</span> line option.</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>解决：写一个命令脚步，先跳转到<code>~/xmind/XMind_amd64/</code>目录再执行<code>XMind</code>运行软件，脚步如下：</p>\n</blockquote>\n<p><code>start.sh</code></p>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"meta\">#!/bin/bash</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> ~/xmind/XMind_amd64</span><br><span class=\"line\">./XMind</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>下面是启动器<code>xmind.desktop</code></p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">#!/usr/bin/env xdg-open</span></span><br><span class=\"line\">[Desktop Entry]</span><br><span class=\"line\">Version=1.0</span><br><span class=\"line\">Type=Application</span><br><span class=\"line\">Terminal=<span class=\"literal\">false</span></span><br><span class=\"line\">Icon[zh_CN]=/home/soul/xmind/icon.png</span><br><span class=\"line\">Name[zh_CN]=xmind</span><br><span class=\"line\">Exec=/home/soul/xmind/XMind_amd64/start.sh</span><br><span class=\"line\">Name=xmind</span><br><span class=\"line\">Icon=/home/soul/xmind/icon.png</span><br></pre></td></tr></table></figure>\n<h2 id=\"更新hosts文件后让文件生效\">更新hosts文件后让文件生效<a href=\"post/linux-notes#更新hosts文件后让文件生效\"></a></h2><figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo apt-get install nscd</span><br><span class=\"line\">sudo /etc/init.d/nscd restart</span><br></pre></td></tr></table></figure>\n<h2 id=\"使用Samba让Linux与Windows共享文件夹\">使用Samba让Linux与Windows共享文件夹<a href=\"post/linux-notes#使用Samba让Linux与Windows共享文件夹\"></a></h2><blockquote>\n<p>安装samba</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get install samba</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>创建共享目录</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ mkdir /home/soul/文档/ShareFiles</span><br><span class=\"line\">$ sudo chmod /home/soul/文档/ShareFiles</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>修改samba配置文件</p>\n</blockquote>\n<p>打开文件<br><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo vim /etc/samba/smb.conf</span><br></pre></td></tr></table></figure></p>\n<p>末尾添加如下内容<br><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[share]  </span><br><span class=\"line\">   comment = my share directory  </span><br><span class=\"line\">   path = /home/soul/文档/ShareFiles</span><br><span class=\"line\">   browseable = yes  </span><br><span class=\"line\">   writable = yes</span><br><span class=\"line\">   public = yes</span><br><span class=\"line\">   valid users = xujiaji</span><br></pre></td></tr></table></figure></p>\n<p>xujiaji是我当前linux的用户名，相应换成你的</p>\n<blockquote>\n<p>设置登录密码</p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">sudo touch /etc/samba/smbpasswd</span><br><span class=\"line\">sudo smbpasswd -a xujiaji</span><br></pre></td></tr></table></figure>\n<p>xujiaji换成上一步你设置的用户名</p>\n<blockquote>\n<p>启动samba服务器</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo /etc/init.d/samba restart</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>windows中打开</p>\n</blockquote>\n<ul>\n<li>打开windows文件管理器，顶部输入<code>\\\\linux ip\\share</code></li>\n<li>账号密码为linux账户的账户密码</li>\n</ul>\n<h2 id=\"清理系统\">清理系统<a href=\"post/linux-notes#清理系统\"></a></h2><h3 id=\"删除一些不必要的资源\">删除一些不必要的资源<a href=\"post/linux-notes#删除一些不必要的资源\"></a></h3><figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get autoclean</span><br><span class=\"line\">$ sudo apt-get autoremove</span><br></pre></td></tr></table></figure>\n<h3 id=\"删除旧内核\">删除旧内核<a href=\"post/linux-notes#删除旧内核\"></a></h3><blockquote>\n<p>查看当前使用的内核信息：<code>uname -a</code></p>\n</blockquote>\n<figure class=\"highlight plain\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ uname -a</span><br><span class=\"line\">Linux boomake-pc 4.10.0-42-generic #46~16.04.1-Ubuntu SMP Mon Dec 4 15:57:59 UTC 2017 x86_64 x86_64 x86_64 GNU/Linux</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>查看已存在的内核：<code>dpkg --get-selections| grep linux</code></p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ dpkg --get-selections| grep linux</span><br><span class=\"line\">console-setup-linux\t\t\t\tinstall</span><br><span class=\"line\">libselinux1:amd64\t\t\t\tinstall</span><br><span class=\"line\">libselinux1:i386\t\t\t\tinstall</span><br><span class=\"line\">linux-base\t\t\t\t\tinstall</span><br><span class=\"line\">linux-firmware\t\t\t\t\tinstall</span><br><span class=\"line\">linux-generic-hwe-16.04\t\t\t\tinstall</span><br><span class=\"line\">linux-headers-4.10.0-40\t\t\t\tinstall</span><br><span class=\"line\">linux-headers-4.10.0-40-generic\t\t\tinstall</span><br><span class=\"line\">linux-headers-4.10.0-42\t\t\t\tinstall</span><br><span class=\"line\">linux-headers-4.10.0-42-generic\t\t\tinstall</span><br><span class=\"line\">linux-headers-generic-hwe-16.04\t\t\tinstall</span><br><span class=\"line\">linux-image-4.10.0-40-generic\t\t\tinstall</span><br><span class=\"line\">linux-image-4.10.0-42-generic\t\t\tinstall</span><br><span class=\"line\">linux-image-extra-4.10.0-40-generic\t\tinstall</span><br><span class=\"line\">linux-image-extra-4.10.0-42-generic\t\tinstall</span><br><span class=\"line\">linux-image-generic-hwe-16.04\t\t\tinstall</span><br><span class=\"line\">linux-libc-dev:amd64\t\t\t\tinstall</span><br><span class=\"line\">linux-libc-dev:i386\t\t\t\tinstall</span><br><span class=\"line\">linux-sound-base\t\t\t\tinstall</span><br><span class=\"line\">linuxbrew-wrapper\t\t\t\tinstall</span><br><span class=\"line\">pptp-linux\t\t\t\t\tinstall</span><br><span class=\"line\">syslinux\t\t\t\t\tinstall</span><br><span class=\"line\">syslinux-common\t\t\t\t\tinstall</span><br><span class=\"line\">syslinux-legacy\t\t\t\t\tinstall</span><br><span class=\"line\">util-linux\t\t\t\t\tinstall</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>删除：<code>sudo apt-get purge</code></p>\n</blockquote>\n<blockquote>\n<p>更新一下启动引导：<code>sudo update-grub</code>或者<code>sudo update-grub2</code></p>\n</blockquote>\n<h2 id=\"appstreamcli错误\">appstreamcli错误<a href=\"post/linux-notes#appstreamcli错误\"></a></h2><blockquote>\n<p><code>sudo-apt get update</code>时出现下面错误</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">The AppStream system cache was updated, but some errors were detected, <span class=\"built_in\">which</span> might lead to missing metadata. Refer to the verbose <span class=\"built_in\">log</span> <span class=\"keyword\">for</span> more information.</span><br><span class=\"line\">Reading package lists... Done</span><br><span class=\"line\">E: Problem executing scripts APT::Update::Post-Invoke-Success <span class=\"string\">'if /usr/bin/test -w /var/cache/app-info -a -e /usr/bin/appstreamcli; then appstreamcli refresh-cache &gt; /dev/null; fi'</span></span><br><span class=\"line\">E: Sub-process returned an error code</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>解决</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo rm /usr/bin/appstreamcli</span><br><span class=\"line\"><span class=\"built_in\">cd</span> /tmp &amp;&amp; mkdir asfix</span><br><span class=\"line\"><span class=\"built_in\">cd</span> asfix</span><br><span class=\"line\">wget https://launchpad.net/ubuntu/+archive/primary/+files/appstream_0.9.4-1ubuntu1_amd64.deb</span><br><span class=\"line\">wget https://launchpad.net/ubuntu/+archive/primary/+files/libappstream3_0.9.4-1ubuntu1_amd64.deb</span><br><span class=\"line\">sudo dpkg -i *.deb</span><br></pre></td></tr></table></figure>\n<h2 id=\"安装截屏软件Shutter\">安装截屏软件Shutter<a href=\"post/linux-notes#安装截屏软件Shutter\"></a></h2><blockquote>\n<p>添加软件源</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo add-apt-repository ppa:shutter/ppa</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>更新源并安装</p>\n</blockquote>\n<figure class=\"highlight sh\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ sudo apt-get update</span><br><span class=\"line\">$ sudo apt-get install shutter</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>设置快捷键</p>\n</blockquote>\n<p>系统设置 &gt; 键盘 &gt; 快捷键 &gt; 自定义快捷键 &gt; +</p>\n<div class=\"article-bounded\"><div class=\"article-table\"><table>\n<thead>\n<tr>\n<th>自定义快捷键</th>\n<th></th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>名称：</td>\n<td>Shutter Select</td>\n</tr>\n<tr>\n<td>命令：</td>\n<td>shutter -s</td>\n</tr>\n</tbody>\n</table></div></div>\n<p>点击新添加条目的右侧新建快捷键，然后同时按住Ctrl+Alt+A，结束。</p>\n","prev":{"title":"Android开发中的bug清单","link":"post/android-bug-list"},"next":{"title":"Git笔记","link":"post/git-notes"},"plink":"https://blog.xujiaji.com/post/linux-notes/","toc":[{"title":"每次开机弹出软件崩溃反馈","id":"每次开机弹出软件崩溃反馈","index":"1"},{"title":"更新软件源的索引","id":"更新软件源的索引","index":"2"},{"title":"升级软件","id":"升级软件","index":"3"},{"title":"修复依赖关系","id":"修复依赖关系","index":"4"},{"title":"创建启动器","id":"创建启动器","index":"5"},{"title":"安装xmind-linux","id":"安装xmind-linux","index":"6"},{"title":"更新hosts文件后让文件生效","id":"更新hosts文件后让文件生效","index":"7"},{"title":"使用Samba让Linux与Windows共享文件夹","id":"使用Samba让Linux与Windows共享文件夹","index":"8"},{"title":"清理系统","id":"清理系统","index":"9","children":[{"title":"删除一些不必要的资源","id":"删除一些不必要的资源","index":"9.1"},{"title":"删除旧内核","id":"删除旧内核","index":"9.2"}]},{"title":"appstreamcli错误","id":"appstreamcli错误","index":"10"},{"title":"安装截屏软件Shutter","id":"安装截屏软件Shutter","index":"11"}],"reward":true,"copyright":{"author":"xujiaji","license":"Attribution-NonCommercial-NoDerivatives 4.0 International (<a href=\\\"https://creativecommons.org/licenses/by-nc-sa/4.0/\\\" rel=\\\"external nofollow noopener\\\" target=\\\"_blank\\\">CC BY-NC-ND 4.0</a>)","link":"<a href=\"https://blog.xujiaji.com/post/linux-notes/\" title=\"linux(Ubuntu)笔记\">https://blog.xujiaji.com/post/linux-notes/</a>"}}