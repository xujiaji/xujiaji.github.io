{"title":"面向对象设计-依赖倒置原则（DIP）","date":"2016-05-29T04:08:00.000Z","author":"xujiaji","excerpt":"","slug":"ood-dip","comments":true,"tags":["Java","面向对象设计"],"categories":["文章"],"updated":"2018-04-06T05:29:04.605Z","content":"<h1 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h1><p><img src=\"image/ood/dip.png\" alt=\"DIP.png\"></p>\n<blockquote>\n<p>引入：<br>高层的决定不能因为某一个低层次模块的变动而影响全局，导致整个系统的变动。</p>\n</blockquote>\n<h2 id=\"什么是DIP？\"><a href=\"#什么是DIP？\" class=\"headerlink\" title=\"什么是DIP？\"></a>什么是DIP？</h2><ul>\n<li>全称：依赖倒置原则（Dependency inversion principle）</li>\n<li>定义：<ol>\n<li>高层次的模块不应该依赖于低层次的模块，两者都应该依赖于<strong>抽象接口</strong></li>\n<li>抽象接口不应该依赖于具体实现，而具体实现则因该依赖于抽象接口。</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"我们如何理解DIP？\"><a href=\"#我们如何理解DIP？\" class=\"headerlink\" title=\"我们如何理解DIP？\"></a>我们如何理解DIP？</h2><ol>\n<li>知道依赖倒置的由来<ul>\n<li>由于过去传统软件开发方法倾向于高层依赖于低层</li>\n<li>如今<strong>依赖倒置</strong>通过接口隔离，高层和底层都依赖于接口后</li>\n<li>结论：从结构上相对于传统编程方式而言就是<strong>倒置</strong>了。</li>\n</ul>\n</li>\n<li><p>依赖倒置反面教材</p>\n<blockquote>\n<p>结构如下：没有遵循依赖倒置</p>\n</blockquote>\n<p><img src=\"image/dip-err.png\" alt=\"没有遵循依赖倒置\"></p>\n<blockquote>\n<p>代码如下：</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 高层</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GaoCeng</span> </span>&#123;</span><br><span class=\"line\">    ZhongCeng mZhongCeng;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GaoCeng</span><span class=\"params\">(ZhongCeng mZhongCeng)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mZhongCeng = mZhongCeng;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 中层</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZhongCeng</span></span>&#123;</span><br><span class=\"line\">    DiCeng mDiCeng;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZhongCeng</span><span class=\"params\">(DiCeng mDiCeng)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mDiCeng = mDiCeng;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 底层</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DiCeng</span></span>&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>依赖倒置正面教材</p>\n<blockquote>\n<p>结构如下：</p>\n</blockquote>\n<p><img src=\"http://upload-images.jianshu.io/upload_images/1552955-33a2d00c5821ea72.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240\" alt=\"遵循依赖倒置.png\"></p>\n<blockquote>\n<p>代码如下：</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 中层接口</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">ZhongCengInterface</span></span>&#123;   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 高层接口</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">GaoCengInterface</span></span>&#123;   </span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 高层</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">GaoCeng</span> </span>&#123;</span><br><span class=\"line\">    GaoCengInterface mGaoCengInterface;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">GaoCeng</span><span class=\"params\">(GaoCengInterface mGaoCengInterface)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mGaoCengInterface = mGaoCengInterface;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 中层</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">ZhongCeng</span> <span class=\"keyword\">implements</span> <span class=\"title\">GaoCengInterface</span></span>&#123;</span><br><span class=\"line\">    ZhongCengInterface mZhongCengInterface;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">ZhongCeng</span><span class=\"params\">(ZhongCengInterface mZhongCengInterface)</span></span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mZhongCengInterface = mZhongCengInterface;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 底层</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">DiCeng</span> <span class=\"keyword\">implements</span> <span class=\"title\">ZhongCengInterface</span></span>&#123;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n</li>\n<li><p>结论</p>\n<ul>\n<li>可以从结构图上明确看出两种方式依赖结构是相反的，所以叫依赖倒置</li>\n<li>通过这种结构我们可以肆意的更改具体的接口实现类，而不会影响高层</li>\n</ul>\n</li>\n</ol>\n<h2 id=\"遵循DIP有什么好处？\"><a href=\"#遵循DIP有什么好处？\" class=\"headerlink\" title=\"遵循DIP有什么好处？\"></a>遵循DIP有什么好处？</h2><p>既然我们理解了DIP，那么DIP的好处不言而喻。</p>\n<ol>\n<li>通过依赖于接口，隔离了具体实现类</li>\n<li>低一层的变动并不会导致高一层的变动</li>\n<li>提高了代码的容错性、扩展性和易于维护</li>\n</ol>\n<p>既然有好处，那么就必定有坏处：代码的增加，学习成本和代码思考时间的增加。（不过相对于后期的好处，这点我们还是能理解的）</p>\n<h2 id=\"例子\"><a href=\"#例子\" class=\"headerlink\" title=\"例子\"></a>例子</h2><p>其实<strong>理解DIP的例子</strong>就是一个很好的对比例子。<br>现在来一个实际一点的例子：超重提价</p>\n<ul>\n<li>需求：编写一个称重提价装置，物体2元/斤（物体重量 &lt;= 100）计算。当物体超过100kg提醒，然后超出部分以10元/斤（物体重量 &gt; 100）计算。</li>\n</ul>\n<blockquote>\n<p>以传统方式编程</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\"> * 称重器传统编程</span></span><br><span class=\"line\"><span class=\"comment\"> */</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scales</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> readValue;<span class=\"comment\">//获取到的物体的重量</span></span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> highestValue;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> inPrice;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> <span class=\"keyword\">double</span> outPrice;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Scales</span><span class=\"params\">(<span class=\"keyword\">double</span> highestValue, <span class=\"keyword\">double</span> inPrice, <span class=\"keyword\">double</span> outPrice)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.highestValue = highestValue;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.inPrice = inPrice;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.outPrice = outPrice;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当有物体放上去后称重</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">startScales</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"comment\">//...readValue = ？ （这里获取称重器计算的重量）</span></span><br><span class=\"line\">        showWeigh(readValue);</span><br><span class=\"line\">        <span class=\"keyword\">double</span> price = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">double</span> diff = readValue - highestValue;</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (diff &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            outWeighWarn(diff);</span><br><span class=\"line\">            price += highestValue * inPrice;</span><br><span class=\"line\">            price += diff * outPrice;</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            price += readValue * inPrice;</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        showPrice(price);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 显示重量</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">showWeigh</span><span class=\"params\">(<span class=\"keyword\">double</span> weigh)</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 超重提醒</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">outWeighWarn</span><span class=\"params\">(<span class=\"keyword\">double</span> outWeigh)</span> </span>&#123;&#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 显示价格</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">private</span> <span class=\"keyword\">void</span> <span class=\"title\">showPrice</span><span class=\"params\">(<span class=\"keyword\">double</span> price)</span> </span>&#123;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<blockquote>\n<p>依赖倒置后</p>\n</blockquote>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\">/** 称重接口*/</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Weigh</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">read</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 最大重量、范围内价格、范围外价格的设置*/</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Value</span></span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">highestValue</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">inPrice</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">double</span> <span class=\"title\">outPrice</span><span class=\"params\">()</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">/** 显示器接口*/</span></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">interface</span> <span class=\"title\">Show</span> </span>&#123;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">outWeighWarn</span><span class=\"params\">(<span class=\"keyword\">double</span> diff)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">showWeigh</span><span class=\"params\">(<span class=\"keyword\">double</span> weigh)</span></span>;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">void</span> <span class=\"title\">showPrice</span><span class=\"params\">(<span class=\"keyword\">double</span> price)</span></span>;</span><br><span class=\"line\">&#125;</span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"class\"><span class=\"keyword\">class</span> <span class=\"title\">Scales</span></span>&#123;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Weigh mWeigh;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Show mShow;</span><br><span class=\"line\">    <span class=\"keyword\">private</span> Value mValue;</span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"title\">Scales</span><span class=\"params\">(Weigh mWeigh, Show mShow, Value mValue)</span> </span>&#123;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mShow = mShow;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mWeigh = mWeigh;</span><br><span class=\"line\">        <span class=\"keyword\">this</span>.mValue = mValue;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\">/**</span></span><br><span class=\"line\"><span class=\"comment\">     * 当有物体放上去后称重</span></span><br><span class=\"line\"><span class=\"comment\">     */</span></span><br><span class=\"line\">    <span class=\"function\"><span class=\"keyword\">public</span> <span class=\"keyword\">void</span> <span class=\"title\">startScales</span><span class=\"params\">()</span> </span>&#123;</span><br><span class=\"line\">        mShow.showWeigh(mWeigh.read());</span><br><span class=\"line\">        <span class=\"keyword\">double</span> price = <span class=\"number\">0</span>;</span><br><span class=\"line\">        <span class=\"keyword\">double</span> diff = mWeigh.read() - mValue.highestValue();</span><br><span class=\"line\">        <span class=\"keyword\">if</span> (diff &gt; <span class=\"number\">0</span>) &#123;</span><br><span class=\"line\">            mShow.outWeighWarn(diff);</span><br><span class=\"line\">            price += mValue.highestValue() * mValue.inPrice();</span><br><span class=\"line\">            price += diff * mValue.outPrice();</span><br><span class=\"line\">        &#125; <span class=\"keyword\">else</span> &#123;</span><br><span class=\"line\">            price += mWeigh.read() * mValue.inPrice();</span><br><span class=\"line\">        &#125;</span><br><span class=\"line\">        mShow.showPrice(price);</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n<p>我们可以看出依赖倒置后使代码可复用，可以是任意的称重装置，可以是任意的显示装置，只要它们实现对应的接口即可。高层不必在意底层具体是什么东西。</p>\n<h2 id=\"总结\"><a href=\"#总结\" class=\"headerlink\" title=\"总结\"></a>总结</h2><ul>\n<li>DIP的规则：依赖于抽象，不应该依赖于具体类。</li>\n<li>任何变量都不应该持有一个指向具体类的指正或这引用</li>\n<li>任何类都不应该从具体类派生</li>\n<li>任何方法都不应该覆写它的任何基类中已经实现了的方法</li>\n</ul>\n<p>每个程序都会有违反这些规则的情况，有时必须创建具体类的实例。此外，这些规则对于那些具体但却稳定的类来说似乎不太合理。如果一个具体类不太会改变，并且也不会创建其他类似的派生类，那么依赖于它并不会造成损害，比如说String类型。</p>\n<ul>\n<li><p>然而，我们编写的大多数具体类都是不稳定的，我们将它们隐藏在抽象接口后面，隔离它们的不稳定性。</p>\n</li>\n<li><p>由于抽象将高层和细节彼此隔离，所以代码也非常容易维护</p>\n</li>\n</ul>\n<h2 id=\"参考文献\"><a href=\"#参考文献\" class=\"headerlink\" title=\"参考文献\"></a>参考文献</h2><p>敏捷软件开发 第12章 依赖倒置原则（DIP）</p>\n","prev":{"title":"VIM爬坡到半山腰的总结","slug":"vim-note1"},"next":{"title":"面向对象设计-接口隔离(ISP)","slug":"ood-isp"},"link":"http://yoursite.com/post/ood-dip"}